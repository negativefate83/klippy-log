=============== Log rollover at Tue Nov 19 18:39:26 2024 ===============
=======================
Starting Klippy...
Args: ['/home/pi/klipper/klippy/klippy.py', '/home/pi/printer_data/config/printer.cfg', '-I', '/home/pi/printer_data/comms/klippy.serial', '-l', '/home/pi/printer_data/logs/klippy.log', '-a', '/home/pi/printer_data/comms/klippy.sock']
App Name: Danger-Klipper
Git version: 'v0.12.0-509-g568ae9f2'
Branch: master
Remote: origin
Tracked URL: https://github.com/DangerKlippers/danger-klipper
CPU: 4 core ?
Python: '3.11.2 (main, Sep 14 2024, 03:00:30) [GCC 12.2.0]'
Start printer at Tue Nov 19 18:39:26 2024 (1732012766.8 13.4)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[mcu eddy]
canbus_uuid = 3ff21e9c26a8

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[stepper_x]
step_pin = PC14
dir_pin = !PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
spi_bus = spi2
run_current = 0.800
sense_resistor = 0.022
stealthchop_threshold = 999999

[stepper_y]
step_pin = PE5
dir_pin = PE4
enable_pin = !PE3
microsteps = 16
rotation_distance = 40
endstop_pin = PF0
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_y]
cs_pin = PD5
spi_bus = spi2
run_current = 0.800
sense_resistor = 0.022
stealthchop_threshold = 999999

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256
endstop_pin = probe:z_virtual_endstop
position_max = 335
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[temperature_sensor btt_eddy_mcu]
sensor_type = temperature_mcu
sensor_mcu = ebb:eddy
min_temp = 10
max_temp = 100

[probe_eddy_current btt_eddy]
sensor_type = ldc1612
z_offset = 2.5
i2c_mcu = ebb:eddy
x_offset = 0
y_offset = 21.42

[bed_mesh]
horizontal_move_z = 2
speed = 200
mesh_min = 10, 10
mesh_max = 220, 220
probe_count = 9, 9
algorithm = bicubic

[safe_z_home]
home_xy_position = 150, 150
z_hop = 10
z_hop_speed = 25
speed = 200

[save_variables]
filename = ~/printer_data/config/variables.cfg

[delayed_gcode RESTORE_PROBE_OFFSET]
initial_duration = 1.
gcode = 
	{% set svv = printer.save_variables.variables %}
	{% if not printer["gcode_macro SET_GCODE_OFFSET"].restored %}
	SET_GCODE_VARIABLE MACRO=SET_GCODE_OFFSET VARIABLE=runtime_offset VALUE={ svv.nvm_offset|default(0) }
	SET_GCODE_VARIABLE MACRO=SET_GCODE_OFFSET VARIABLE=restored VALUE=True
	{% endif %}

[gcode_macro G28]
rename_existing = G28.1
gcode = 
	
	G28.1 {rawparams}
	{% if not rawparams or (rawparams and 'Z' in rawparams) %}
	PROBE
	SET_Z_FROM_PROBE
	{% endif %}

[gcode_macro SET_Z_FROM_PROBE]
gcode = 
	{% set cf = printer.configfile.settings %}
	SET_GCODE_OFFSET_ORIG Z={printer.probe.last_z_result - cf['probe_eddy_current btt_eddy'].z_offset + printer["gcode_macro SET_GCODE_OFFSET"].runtime_offset}
	G90
	G1 Z{cf.safe_z_home.z_hop}

[gcode_macro Z_OFFSET_APPLY_PROBE]
rename_existing = Z_OFFSET_APPLY_PROBE_ORIG
gcode = 
	SAVE_VARIABLE VARIABLE=nvm_offset VALUE={ printer["gcode_macro SET_GCODE_OFFSET"].runtime_offset }

[gcode_macro SET_GCODE_OFFSET]
rename_existing = SET_GCODE_OFFSET_ORIG
variable_restored = False
variable_runtime_offset = 0
gcode = 
	{% if params.Z_ADJUST %}
	SET_GCODE_VARIABLE MACRO=SET_GCODE_OFFSET VARIABLE=runtime_offset VALUE={ printer["gcode_macro SET_GCODE_OFFSET"].runtime_offset + params.Z_ADJUST|float }
	{% endif %}
	{% if params.Z %}
	{% set paramList = rawparams.split() %}
	{% for i in range(paramList|length) %}
	{% if paramList[i]=="Z=0" %}
	{% set temp=paramList.pop(i) %}
	{% set temp="Z_ADJUST=" + (-printer["gcode_macro SET_GCODE_OFFSET"].runtime_offset)|string %}
	{% if paramList.append(temp) %}{% endif %}
	{% endif %}
	{% endfor %}
	{% set rawparams=paramList|join(' ') %}
	SET_GCODE_VARIABLE MACRO=SET_GCODE_OFFSET VARIABLE=runtime_offset VALUE=0
	{% endif %}
	SET_GCODE_OFFSET_ORIG { rawparams }

[gcode_macro PROBE_EDDY_CURRENT_CALIBRATE_AUTO]
gcode = 
	BED_MESH_CLEAR
	G28 X Y
	G90
	G1 X{ printer.toolhead.axis_maximum.x/2 } Y{ printer.toolhead.axis_maximum.y/2 } F6000
	{% if 'z' not in printer.toolhead.homed_axes %}
	SET_KINEMATIC_POSITION Z={ printer.toolhead.axis_maximum.z-1 }
	{% endif %}
	PROBE_EDDY_CURRENT_CALIBRATE {rawparams}

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = BTT_BED_MESH_CALIBRATE
gcode = 
	
	BTT_BED_MESH_CALIBRATE METHOD=rapid_scan

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 279, in _connect
    self._read_config()
  File "/home/pi/klipper/klippy/klippy.py", line 214, in _read_config
    self.load_object(config, section_config.get_name(), None)
  File "/home/pi/klipper/klippy/klippy.py", line 198, in load_object
    self.objects[section] = init_func(config.getsection(section))
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/extras/temperature_sensor.py", line 55, in load_config_prefix
    return PrinterSensorGeneric(config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/extras/temperature_sensor.py", line 15, in __init__
    self.sensor = pheaters.setup_sensor(config)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/extras/heaters.py", line 1036, in setup_sensor
    return self.sensor_factories[sensor_type](config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/extras/temperature_mcu.py", line 38, in __init__
    self.mcu_adc = ppins.setup_pin(
                   ^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/pins.py", line 146, in setup_pin
    pin_params = self.lookup_pin(pin_desc, can_invert, can_pullup)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/pins.py", line 124, in lookup_pin
    pin_params = self.parse_pin(pin_desc, can_invert, can_pullup)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/pins.py", line 108, in parse_pin
    raise error(
pins.error: Invalid pin description 'ebb:eddy:ADC_TEMPERATURE'
Format is: [chip_name:] pin_name
webhooks client 140736360203216: New connection
webhooks client 140736360203216: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Unable to issue reset command on MCU 'mcu'
Unable to issue reset command on MCU 'ebb'
Unable to issue reset command on MCU 'eddy'
webhooks client 140736360203216: Disconnected
Restarting printer
Start printer at Tue Nov 19 18:44:06 2024 (1732013046.1 292.6)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[mcu eddy]
canbus_uuid = 3ff21e9c26a8

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[stepper_x]
step_pin = PC14
dir_pin = !PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
spi_bus = spi2
run_current = 0.800
sense_resistor = 0.022
stealthchop_threshold = 999999

[stepper_y]
step_pin = PE5
dir_pin = PE4
enable_pin = !PE3
microsteps = 16
rotation_distance = 40
endstop_pin = PF0
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_y]
cs_pin = PD5
spi_bus = spi2
run_current = 0.800
sense_resistor = 0.022
stealthchop_threshold = 999999

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256
endstop_pin = probe:z_virtual_endstop
position_max = 335
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[temperature_sensor btt_eddy_mcu]
sensor_type = temperature_mcu
sensor_mcu = eddy
min_temp = 10
max_temp = 100

[probe_eddy_current btt_eddy]
sensor_type = ldc1612
z_offset = 2.5
i2c_mcu = eddy
x_offset = 0
y_offset = 21.42

[bed_mesh]
horizontal_move_z = 2
speed = 200
mesh_min = 10, 10
mesh_max = 220, 220
probe_count = 9, 9
algorithm = bicubic

[safe_z_home]
home_xy_position = 150, 150
z_hop = 10
z_hop_speed = 25
speed = 200

[save_variables]
filename = ~/printer_data/config/variables.cfg

[delayed_gcode RESTORE_PROBE_OFFSET]
initial_duration = 1.
gcode = 
	{% set svv = printer.save_variables.variables %}
	{% if not printer["gcode_macro SET_GCODE_OFFSET"].restored %}
	SET_GCODE_VARIABLE MACRO=SET_GCODE_OFFSET VARIABLE=runtime_offset VALUE={ svv.nvm_offset|default(0) }
	SET_GCODE_VARIABLE MACRO=SET_GCODE_OFFSET VARIABLE=restored VALUE=True
	{% endif %}

[gcode_macro G28]
rename_existing = G28.1
gcode = 
	
	G28.1 {rawparams}
	{% if not rawparams or (rawparams and 'Z' in rawparams) %}
	PROBE
	SET_Z_FROM_PROBE
	{% endif %}

[gcode_macro SET_Z_FROM_PROBE]
gcode = 
	{% set cf = printer.configfile.settings %}
	SET_GCODE_OFFSET_ORIG Z={printer.probe.last_z_result - cf['probe_eddy_current btt_eddy'].z_offset + printer["gcode_macro SET_GCODE_OFFSET"].runtime_offset}
	G90
	G1 Z{cf.safe_z_home.z_hop}

[gcode_macro Z_OFFSET_APPLY_PROBE]
rename_existing = Z_OFFSET_APPLY_PROBE_ORIG
gcode = 
	SAVE_VARIABLE VARIABLE=nvm_offset VALUE={ printer["gcode_macro SET_GCODE_OFFSET"].runtime_offset }

[gcode_macro SET_GCODE_OFFSET]
rename_existing = SET_GCODE_OFFSET_ORIG
variable_restored = False
variable_runtime_offset = 0
gcode = 
	{% if params.Z_ADJUST %}
	SET_GCODE_VARIABLE MACRO=SET_GCODE_OFFSET VARIABLE=runtime_offset VALUE={ printer["gcode_macro SET_GCODE_OFFSET"].runtime_offset + params.Z_ADJUST|float }
	{% endif %}
	{% if params.Z %}
	{% set paramList = rawparams.split() %}
	{% for i in range(paramList|length) %}
	{% if paramList[i]=="Z=0" %}
	{% set temp=paramList.pop(i) %}
	{% set temp="Z_ADJUST=" + (-printer["gcode_macro SET_GCODE_OFFSET"].runtime_offset)|string %}
	{% if paramList.append(temp) %}{% endif %}
	{% endif %}
	{% endfor %}
	{% set rawparams=paramList|join(' ') %}
	SET_GCODE_VARIABLE MACRO=SET_GCODE_OFFSET VARIABLE=runtime_offset VALUE=0
	{% endif %}
	SET_GCODE_OFFSET_ORIG { rawparams }

[gcode_macro PROBE_EDDY_CURRENT_CALIBRATE_AUTO]
gcode = 
	BED_MESH_CLEAR
	G28 X Y
	G90
	G1 X{ printer.toolhead.axis_maximum.x/2 } Y{ printer.toolhead.axis_maximum.y/2 } F6000
	{% if 'z' not in printer.toolhead.homed_axes %}
	SET_KINEMATIC_POSITION Z={ printer.toolhead.axis_maximum.z-1 }
	{% endif %}
	PROBE_EDDY_CURRENT_CALIBRATE {rawparams}

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = BTT_BED_MESH_CALIBRATE
gcode = 
	
	BTT_BED_MESH_CALIBRATE METHOD=rapid_scan

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
webhooks client 140736348998608: New connection
webhooks client 140736348998608: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'eddy': Starting CAN connect
Created a socket
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
Attempting MCU 'ebb' reset command
Unable to issue reset command on MCU 'eddy'
Attempting MCU 'mcu' reset command
b'Got error -1 in can read: (100)Network is down'
b'Got error -1 in can read: (19)No such device'
webhooks client 140736348998608: Disconnected
Restarting printer
Start printer at Tue Nov 19 18:45:17 2024 (1732013117.7 364.2)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[mcu eddy]
canbus_uuid = 3ff21e9c26a8

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[stepper_x]
step_pin = PC14
dir_pin = !PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
spi_bus = spi2
run_current = 0.800
sense_resistor = 0.022
stealthchop_threshold = 999999

[stepper_y]
step_pin = PE5
dir_pin = PE4
enable_pin = !PE3
microsteps = 16
rotation_distance = 40
endstop_pin = PF0
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_y]
cs_pin = PD5
spi_bus = spi2
run_current = 0.800
sense_resistor = 0.022
stealthchop_threshold = 999999

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256
endstop_pin = probe:z_virtual_endstop
position_max = 335
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[temperature_sensor btt_eddy_mcu]
sensor_type = temperature_mcu
sensor_mcu = eddy
min_temp = 10
max_temp = 100

[probe_eddy_current btt_eddy]
sensor_type = ldc1612
z_offset = 2.5
i2c_mcu = eddy
x_offset = 0
y_offset = 21.42

[bed_mesh]
horizontal_move_z = 2
speed = 200
mesh_min = 10, 10
mesh_max = 220, 220
probe_count = 9, 9
algorithm = bicubic

[safe_z_home]
home_xy_position = 150, 150
z_hop = 10
z_hop_speed = 25
speed = 200

[save_variables]
filename = ~/printer_data/config/variables.cfg

[delayed_gcode RESTORE_PROBE_OFFSET]
initial_duration = 1.
gcode = 
	{% set svv = printer.save_variables.variables %}
	{% if not printer["gcode_macro SET_GCODE_OFFSET"].restored %}
	SET_GCODE_VARIABLE MACRO=SET_GCODE_OFFSET VARIABLE=runtime_offset VALUE={ svv.nvm_offset|default(0) }
	SET_GCODE_VARIABLE MACRO=SET_GCODE_OFFSET VARIABLE=restored VALUE=True
	{% endif %}

[gcode_macro G28]
rename_existing = G28.1
gcode = 
	
	G28.1 {rawparams}
	{% if not rawparams or (rawparams and 'Z' in rawparams) %}
	PROBE
	SET_Z_FROM_PROBE
	{% endif %}

[gcode_macro SET_Z_FROM_PROBE]
gcode = 
	{% set cf = printer.configfile.settings %}
	SET_GCODE_OFFSET_ORIG Z={printer.probe.last_z_result - cf['probe_eddy_current btt_eddy'].z_offset + printer["gcode_macro SET_GCODE_OFFSET"].runtime_offset}
	G90
	G1 Z{cf.safe_z_home.z_hop}

[gcode_macro Z_OFFSET_APPLY_PROBE]
rename_existing = Z_OFFSET_APPLY_PROBE_ORIG
gcode = 
	SAVE_VARIABLE VARIABLE=nvm_offset VALUE={ printer["gcode_macro SET_GCODE_OFFSET"].runtime_offset }

[gcode_macro SET_GCODE_OFFSET]
rename_existing = SET_GCODE_OFFSET_ORIG
variable_restored = False
variable_runtime_offset = 0
gcode = 
	{% if params.Z_ADJUST %}
	SET_GCODE_VARIABLE MACRO=SET_GCODE_OFFSET VARIABLE=runtime_offset VALUE={ printer["gcode_macro SET_GCODE_OFFSET"].runtime_offset + params.Z_ADJUST|float }
	{% endif %}
	{% if params.Z %}
	{% set paramList = rawparams.split() %}
	{% for i in range(paramList|length) %}
	{% if paramList[i]=="Z=0" %}
	{% set temp=paramList.pop(i) %}
	{% set temp="Z_ADJUST=" + (-printer["gcode_macro SET_GCODE_OFFSET"].runtime_offset)|string %}
	{% if paramList.append(temp) %}{% endif %}
	{% endif %}
	{% endfor %}
	{% set rawparams=paramList|join(' ') %}
	SET_GCODE_VARIABLE MACRO=SET_GCODE_OFFSET VARIABLE=runtime_offset VALUE=0
	{% endif %}
	SET_GCODE_OFFSET_ORIG { rawparams }

[gcode_macro PROBE_EDDY_CURRENT_CALIBRATE_AUTO]
gcode = 
	BED_MESH_CLEAR
	G28 X Y
	G90
	G1 X{ printer.toolhead.axis_maximum.x/2 } Y{ printer.toolhead.axis_maximum.y/2 } F6000
	{% if 'z' not in printer.toolhead.homed_axes %}
	SET_KINEMATIC_POSITION Z={ printer.toolhead.axis_maximum.z-1 }
	{% endif %}
	PROBE_EDDY_CURRENT_CALIBRATE {rawparams}

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = BTT_BED_MESH_CALIBRATE
gcode = 
	
	BTT_BED_MESH_CALIBRATE METHOD=rapid_scan

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
webhooks client 140736351146896: New connection
webhooks client 140736351146896: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'eddy': Starting CAN connect
Created a socket
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
Attempting MCU 'ebb' reset command
Unable to issue reset command on MCU 'eddy'
Attempting MCU 'mcu' reset command
b'Got error -1 in can read: (100)Network is down'
b'Got error -1 in can read: (19)No such device'
webhooks client 140736351146896: Disconnected
Restarting printer
Start printer at Tue Nov 19 18:45:39 2024 (1732013139.6 386.1)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[mcu eddy]
canbus_uuid = 3ff21e9c26a8

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[stepper_x]
step_pin = PC14
dir_pin = !PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
spi_bus = spi2
run_current = 0.800
sense_resistor = 0.022
stealthchop_threshold = 999999

[stepper_y]
step_pin = PE5
dir_pin = PE4
enable_pin = !PE3
microsteps = 16
rotation_distance = 40
endstop_pin = PF0
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_y]
cs_pin = PD5
spi_bus = spi2
run_current = 0.800
sense_resistor = 0.022
stealthchop_threshold = 999999

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256
endstop_pin = probe:z_virtual_endstop
position_max = 335
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 279, in _connect
    self._read_config()
  File "/home/pi/klipper/klippy/klippy.py", line 219, in _read_config
    m.add_printer_objects(config)
  File "/home/pi/klipper/klippy/toolhead.py", line 834, in add_printer_objects
    config.get_printer().add_object("toolhead", ToolHead(config))
                                                ^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/toolhead.py", line 318, in __init__
    self.kin = mod.load_kinematics(self, config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/kinematics/corexy.py", line 120, in load_kinematics
    return CoreXYKinematics(toolhead, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/kinematics/corexy.py", line 12, in __init__
    self.rails = [
                 ^
  File "/home/pi/klipper/klippy/kinematics/corexy.py", line 13, in <listcomp>
    stepper.LookupMultiRail(config.getsection("stepper_" + n))
  File "/home/pi/klipper/klippy/stepper.py", line 590, in LookupMultiRail
    rail = PrinterRail(
           ^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/stepper.py", line 402, in __init__
    self.add_extra_stepper(config)
  File "/home/pi/klipper/klippy/stepper.py", line 537, in add_extra_stepper
    pin_params = ppins.parse_pin(endstop_pin, True, True)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/pins.py", line 101, in parse_pin
    raise error("Unknown pin chip name '%s'" % (chip_name,))
pins.error: Unknown pin chip name 'probe'
webhooks client 140736350219600: New connection
webhooks client 140736350219600: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Unable to issue reset command on MCU 'mcu'
Unable to issue reset command on MCU 'ebb'
Unable to issue reset command on MCU 'eddy'
webhooks client 140736350219600: Disconnected
Restarting printer
Start printer at Tue Nov 19 18:48:12 2024 (1732013292.9 539.3)
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 279, in _connect
    self._read_config()
  File "/home/pi/klipper/klippy/klippy.py", line 203, in _read_config
    config = pconfig.read_main_config()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/configfile.py", line 438, in read_main_config
    regular_config = self._build_config_wrapper(regular_data, filename)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/configfile.py", line 421, in _build_config_wrapper
    self._parse_config(data, filename, fileconfig, set())
  File "/home/pi/klipper/klippy/configfile.py", line 404, in _parse_config
    self._parse_config_buffer(buffer, filename, fileconfig)
  File "/home/pi/klipper/klippy/configfile.py", line 361, in _parse_config_buffer
    fileconfig.read_file(sbuffer, filename)
  File "/usr/lib/python3.11/configparser.py", line 734, in read_file
    self._read(f, source)
  File "/usr/lib/python3.11/configparser.py", line 1132, in _read
    raise e
configparser.ParsingError: Source contains parsing errors: '/home/pi/printer_data/config/printer.cfg'
	[line 149]: 'S2\n'
webhooks client 140736275424528: New connection
webhooks client 140736275424528: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
webhooks client 140736275424528: Disconnected
Restarting printer
Start printer at Tue Nov 19 18:48:34 2024 (1732013314.6 561.0)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[mcu eddy]
canbus_uuid = 3ff21e9c26a8

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = !PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
stealthchop_threshold = 0

[stepper_y]
step_pin = PE5
dir_pin = !PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = PF0
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 0.8
stealthchop_threshold = 0

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256
endstop_pin = probe:z_virtual_endstop
position_max = 335
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 279, in _connect
    self._read_config()
  File "/home/pi/klipper/klippy/klippy.py", line 214, in _read_config
    self.load_object(config, section_config.get_name(), None)
  File "/home/pi/klipper/klippy/klippy.py", line 198, in load_object
    self.objects[section] = init_func(config.getsection(section))
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/extras/tmc5160.py", line 411, in load_config_prefix
    return TMC5160(config)
           ^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/extras/tmc5160.py", line 358, in __init__
    current_helper = TMC5160CurrentHelper(config, self.mcu_tmc)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/extras/tmc5160.py", line 257, in __init__
    super().__init__(config, mcu_tmc, MAX_CURRENT)
  File "/home/pi/klipper/klippy/extras/tmc.py", line 782, in __init__
    self.config_run_current = config.getfloat(
                              ^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/configfile.py", line 117, in getfloat
    return self._get_wrapper(
           ^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/configfile.py", line 48, in _get_wrapper
    raise error(
configparser.Error: Option 'run_current' in section 'tmc5160 stepper_x' must be specified
webhooks client 140736351179536: New connection
webhooks client 140736351179536: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Unable to issue reset command on MCU 'mcu'
Unable to issue reset command on MCU 'ebb'
Unable to issue reset command on MCU 'eddy'
webhooks client 140736351179536: Disconnected
Restarting printer
Start printer at Tue Nov 19 18:49:23 2024 (1732013363.9 610.3)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[mcu eddy]
canbus_uuid = 3ff21e9c26a8

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = !PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.6
stealthchop_threshold = 0

[stepper_y]
step_pin = PE5
dir_pin = !PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = PF0
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.6
stealthchop_threshold = 0

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256
endstop_pin = probe:z_virtual_endstop
position_max = 335
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
webhooks client 140736269610768: New connection
webhooks client 140736269610768: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'eddy': Starting CAN connect
Created a socket
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
Created a socket
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
mcu 'eddy': Timeout on connect
MCU error during connect
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/mcu.py", line 1165, in _mcu_identify
    self._serial.connect_canbus(
  File "/home/pi/klipper/klippy/serialhdl.py", line 230, in connect_canbus
    self._error("Unable to connect")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Unable to connect

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 280, in _connect
    self.send_event("klippy:mcu_identify")
  File "/home/pi/klipper/klippy/klippy.py", line 386, in send_event
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/klippy.py", line 386, in <listcomp>
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
            ^^^^^^^^^^^
  File "/home/pi/klipper/klippy/mcu.py", line 1177, in _mcu_identify
    raise error(str(e))
mcu.error: mcu 'eddy': Unable to connect
Build file /home/pi/klipper/klippy/../.config(2257): Sun Nov 17 17:46:28 2024
========= Last MCU build config =========
CONFIG_LOW_LEVEL_OPTIONS=y
# CONFIG_MACH_AVR is not set
# CONFIG_MACH_ATSAM is not set
# CONFIG_MACH_ATSAMD is not set
# CONFIG_MACH_LPC176X is not set
# CONFIG_MACH_STM32 is not set
# CONFIG_MACH_HC32F460 is not set
CONFIG_MACH_RP2040=y
# CONFIG_MACH_PRU is not set
# CONFIG_MACH_AR100 is not set
# CONFIG_MACH_LINUX is not set
# CONFIG_MACH_SIMU is not set
CONFIG_BOARD_DIRECTORY="rp2040"
CONFIG_MCU="rp2040"
CONFIG_CLOCK_FREQ=12000000
CONFIG_FLASH_SIZE=0x200000
CONFIG_FLASH_BOOT_ADDRESS=0x10000100
CONFIG_RAM_START=0x20000000
CONFIG_RAM_SIZE=0x42000
CONFIG_STACK_SIZE=512
CONFIG_FLASH_APPLICATION_ADDRESS=0x10000100
CONFIG_RP2040_SELECT=y
CONFIG_RP2040_HAVE_STAGE2=y
CONFIG_RP2040_FLASH_START_0100=y
# CONFIG_RP2040_FLASH_START_4000 is not set
CONFIG_RP2040_FLASH_W25Q080=y
# CONFIG_RP2040_FLASH_GENERIC_03 is not set
CONFIG_RP2040_STAGE2_FILE="boot2_w25q080.S"
CONFIG_RP2040_STAGE2_CLKDIV=2
# CONFIG_RP2040_USB is not set
# CONFIG_RP2040_SERIAL_UART0_PINS_0_1 is not set
# CONFIG_RP2040_SERIAL_UART0_PINS_12_13 is not set
# CONFIG_RP2040_SERIAL_UART0_PINS_16_17 is not set
# CONFIG_RP2040_SERIAL_UART0_PINS_28_29 is not set
# CONFIG_RP2040_SERIAL_UART1_PINS_4_5 is not set
# CONFIG_RP2040_SERIAL_UART1_PINS_8_9 is not set
# CONFIG_RP2040_SERIAL_UART1_PINS_20_21 is not set
# CONFIG_RP2040_SERIAL_UART1_PINS_24_25 is not set
CONFIG_RP2040_CANBUS=y
# CONFIG_RP2040_USBCANBUS is not set
CONFIG_RP2040_CANBUS_GPIO_RX=4
CONFIG_RP2040_CANBUS_GPIO_TX=5
CONFIG_USB_VENDOR_ID=0x1d50
CONFIG_USB_DEVICE_ID=0x614e
CONFIG_USB_SERIAL_NUMBER="12345"

#
# CAN bus UUID
#
CONFIG_CAN_UUID_USE_CHIPID=y
CONFIG_CAN_UUID_CUSTOM="abc1234"
# end of CAN bus UUID

CONFIG_WANT_GPIO_BITBANGING=y
CONFIG_WANT_DISPLAYS=y
CONFIG_WANT_SENSORS=y
CONFIG_WANT_LIS2DW=y
CONFIG_WANT_LDC1612=y
CONFIG_WANT_HX71X=y
CONFIG_WANT_ADS1220=y
CONFIG_WANT_SOFTWARE_I2C=y
CONFIG_WANT_SOFTWARE_SPI=y
CONFIG_NEED_SENSOR_BULK=y
CONFIG_CANSERIAL=y
CONFIG_CANBUS=y
CONFIG_CANBUS_FREQUENCY=1000000
CONFIG_CANBUS_FILTER=y
CONFIG_INITIAL_PINS=""
CONFIG_HAVE_GPIO=y
CONFIG_HAVE_GPIO_ADC=y
CONFIG_HAVE_GPIO_SPI=y
CONFIG_HAVE_GPIO_I2C=y
CONFIG_HAVE_GPIO_HARD_PWM=y
CONFIG_HAVE_STRICT_TIMING=y
CONFIG_HAVE_CHIPID=y
CONFIG_HAVE_STEPPER_BOTH_EDGE=y
CONFIG_HAVE_BOOTLOADER_REQUEST=y
CONFIG_INLINE_STEPPER_HACK=y
=======================
Build file /home/pi/klipper/klippy/../out/klipper.dict(8935): Sun Nov 17 17:46:37 2024
Last MCU build version: v0.12.0-509-g568ae9f2
Last MCU build tools: gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40
Last MCU build config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi0e=gpio4,gpio3,gpio2 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Build file /home/pi/klipper/klippy/../out/klipper.elf(1796320): Sun Nov 17 17:46:39 2024
mcu 'eddy': Wait for identify_response
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/serialhdl.py", line 78, in _get_identify_data
    params = self.send_with_response(msg, "identify_response")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 412, in send_with_response
    return src.get_response([cmd], self.default_cmd_queue)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/serialhdl.py", line 497, in get_response
    self.serial.raw_send_wait_ack(
  File "/home/pi/klipper/klippy/serialhdl.py", line 402, in raw_send_wait_ack
    self._error("Serial connection closed")
  File "/home/pi/klipper/klippy/serialhdl.py", line 70, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'eddy': Serial connection closed
Attempting MCU 'ebb' reset command
Unable to issue reset command on MCU 'eddy'
Attempting MCU 'mcu' reset command
b'Got error -1 in can read: (19)No such device'
webhooks client 140736269610768: Disconnected
Restarting printer
Start printer at Tue Nov 19 18:51:17 2024 (1732013477.6 724.0)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = !PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.6
stealthchop_threshold = 0

[stepper_y]
step_pin = PE5
dir_pin = !PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = PF0
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.6
stealthchop_threshold = 0

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256
endstop_pin = probe:z_virtual_endstop
position_max = 335
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
webhooks client 140736362361040: New connection
webhooks client 140736362361040: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Sending MCU 'ebb' printer configuration...
Configured MCU 'ebb' (1024 moves)
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (25.0, 25.0)    | (25.0, 25.0)
  1   | (103.8, 25.0)   | (103.8, 25.0)
  2   | (182.5, 25.0)   | (182.5, 25.0)
  3   | (261.2, 25.0)   | (261.2, 25.0)
  4   | (340.0, 25.0)   | (340.0, 25.0)
  5   | (340.0, 103.8)  | (340.0, 103.8)
  6   | (261.2, 103.8)  | (261.2, 103.8)
  7   | (182.5, 103.8)  | (182.5, 103.8)
  8   | (103.8, 103.8)  | (103.8, 103.8)
  9   | (25.0, 103.8)   | (25.0, 103.8)
  10  | (25.0, 182.5)   | (25.0, 182.5)
  11  | (103.8, 182.5)  | (103.8, 182.5)
  12  | (182.5, 182.5)  | (182.5, 182.5)
  13  | (261.2, 182.5)  | (261.2, 182.5)
  14  | (340.0, 182.5)  | (340.0, 182.5)
  15  | (340.0, 261.2)  | (340.0, 261.2)
  16  | (261.2, 261.2)  | (261.2, 261.2)
  17  | (182.5, 261.2)  | (182.5, 261.2)
  18  | (103.8, 261.2)  | (103.8, 261.2)
  19  | (25.0, 261.2)   | (25.0, 261.2)
  20  | (25.0, 340.0)   | (25.0, 340.0)
  21  | (103.8, 340.0)  | (103.8, 340.0)
  22  | (182.5, 340.0)  | (182.5, 340.0)
  23  | (261.2, 340.0)  | (261.2, 340.0)
  24  | (340.0, 340.0)  | (340.0, 340.0)
TMC stepper_x failed to init: Unable to write tmc spi 'stepper_x' register GLOBALSCALER
TMC stepper_y failed to init: Unable to write tmc spi 'stepper_y' register GLOBALSCALER
TMC stepper_z failed to init: Unable to write tmc spi 'stepper_z' register GLOBALSCALER
TMC stepper_z1 failed to init: Unable to write tmc spi 'stepper_z1' register GLOBALSCALER
TMC stepper_z2 failed to init: Unable to write tmc spi 'stepper_z2' register GLOBALSCALER
TMC stepper_z3 failed to init: Unable to write tmc spi 'stepper_z3' register GLOBALSCALER
Starting heater checks for heater_bed
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 148, in handle_connect
    motor = self.printer.lookup_object(self.motor_name)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/klippy.py", line 122, in lookup_object
    raise self.config_error("Unknown config object '%s'" % (name,))
configparser.Error: Unknown config object 'motor_constants biqu-42SHDB4036Z-24B'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 284, in _connect
    cb()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 150, in handle_connect
    raise self.printer.config_error(
configparser.Error: Could not find motor definition '[motor_constants biqu-42SHDB4036Z-24B]' required by TMC autotuning. It is not part of the database, please define it in your config!
Attempting MCU 'ebb' reset command
Attempting MCU 'mcu' reset command
b'Got error -1 in can read: (19)No such device'
webhooks client 140736362361040: Disconnected
Restarting printer
Start printer at Tue Nov 19 18:56:35 2024 (1732013795.8 1042.3)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = !PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.6
stealthchop_threshold = 0

[stepper_y]
step_pin = PE5
dir_pin = !PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = PF0
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.6
stealthchop_threshold = 0

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256
endstop_pin = probe:z_virtual_endstop
position_max = 335
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
webhooks client 140736274317072: New connection
webhooks client 140736274317072: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Sending MCU 'ebb' printer configuration...
Configured MCU 'ebb' (1024 moves)
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (25.0, 25.0)    | (25.0, 25.0)
  1   | (103.8, 25.0)   | (103.8, 25.0)
  2   | (182.5, 25.0)   | (182.5, 25.0)
  3   | (261.2, 25.0)   | (261.2, 25.0)
  4   | (340.0, 25.0)   | (340.0, 25.0)
  5   | (340.0, 103.8)  | (340.0, 103.8)
  6   | (261.2, 103.8)  | (261.2, 103.8)
  7   | (182.5, 103.8)  | (182.5, 103.8)
  8   | (103.8, 103.8)  | (103.8, 103.8)
  9   | (25.0, 103.8)   | (25.0, 103.8)
  10  | (25.0, 182.5)   | (25.0, 182.5)
  11  | (103.8, 182.5)  | (103.8, 182.5)
  12  | (182.5, 182.5)  | (182.5, 182.5)
  13  | (261.2, 182.5)  | (261.2, 182.5)
  14  | (340.0, 182.5)  | (340.0, 182.5)
  15  | (340.0, 261.2)  | (340.0, 261.2)
  16  | (261.2, 261.2)  | (261.2, 261.2)
  17  | (182.5, 261.2)  | (182.5, 261.2)
  18  | (103.8, 261.2)  | (103.8, 261.2)
  19  | (25.0, 261.2)   | (25.0, 261.2)
  20  | (25.0, 340.0)   | (25.0, 340.0)
  21  | (103.8, 340.0)  | (103.8, 340.0)
  22  | (182.5, 340.0)  | (182.5, 340.0)
  23  | (261.2, 340.0)  | (261.2, 340.0)
  24  | (340.0, 340.0)  | (340.0, 340.0)
TMC stepper_x failed to init: Unable to write tmc spi 'stepper_x' register GLOBALSCALER
TMC stepper_y failed to init: Unable to write tmc spi 'stepper_y' register GLOBALSCALER
TMC stepper_z failed to init: Unable to write tmc spi 'stepper_z' register GLOBALSCALER
TMC stepper_z1 failed to init: Unable to write tmc spi 'stepper_z1' register GLOBALSCALER
TMC stepper_z2 failed to init: Unable to write tmc spi 'stepper_z2' register GLOBALSCALER
TMC stepper_z3 failed to init: Unable to write tmc spi 'stepper_z3' register GLOBALSCALER
Starting heater checks for heater_bed
Starting heater checks for extruder
autotune_tmc set stepper_x pwm_freq=2
Unhandled exception during ready callback
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 314, in _connect
    cb()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 169, in handle_ready
    self.tune_driver()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 220, in tune_driver
    self._set_pwmfreq()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 286, in _set_pwmfreq
    self._set_driver_field('pwm_freq', pwm_freq)
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 249, in _set_driver_field
    tmco.mcu_tmc.set_register(register, val, None)
  File "/home/pi/klipper/klippy/extras/tmc2130.py", line 403, in set_register
    raise self.printer.command_error(
gcode.CommandError: Unable to write tmc spi 'stepper_x' register PWMCONF
Transition to shutdown state: Internal error during ready callback: Unable to write tmc spi 'stepper_x' register PWMCONF
Dumping gcode input 0 blocks
Dumping 5 requests for client 140736274317072
Received 1042.767959: b'{"id": 140732454714000, "method": "info", "params": {"client_info": {"program": "Moonraker", "version": "v0.9.3-1-g4e00a07"}}}'
Received 1042.768500: b'{"id": 140732532471184, "method": "list_endpoints", "params": {}}'
Received 1043.019223: b'{"id": 140732428490320, "method": "info", "params": {}}'
Received 1043.269991: b'{"id": 140732532468880, "method": "info", "params": {}}'
Received 1043.521366: b'{"id": 140732428491920, "method": "info", "params": {}}'
gcode state: absolute_coord=True absolute_extrude=True base_position=[0.0, 0.0, 0.0, 0.0] last_position=[0.0, 0.0, 0.0, 0.0] homing_position=[0.0, 0.0, 0.0, 0.0] speed_factor=0.016666666666666666 extrude_factor=1.0 speed=25.0
Reactor garbage collection: (1043.04651273, 0.0, 0.0)
Dumping stepper 'stepper_x' (mcu) 1 queue_step:
queue_step 0: t=847915862 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_y' (mcu) 1 queue_step:
queue_step 0: t=848217127 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z' (mcu) 1 queue_step:
queue_step 0: t=848471784 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z1' (mcu) 1 queue_step:
queue_step 0: t=848701108 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z2' (mcu) 1 queue_step:
queue_step 0: t=848938092 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z3' (mcu) 1 queue_step:
queue_step 0: t=849187120 p=0 i=0 c=0 a=0
MCU 'mcu' shutdown: Command request
clocksync state: mcu_freq=400000000 last_clock=604298532 clock_est=(1042.608 469546332 399997614.882) min_half_rtt=0.000072 min_rtt_time=1042.843 time_avg=1042.608(0.017) clock_avg=469546332.253(6685237.069) pred_variance=117953684451.390
Dumping serial stats: bytes_write=2390 bytes_read=5469 bytes_retransmit=0 bytes_invalid=0 send_seq=193 receive_seq=193 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 1042.537462 1042.537462 9: seq: 1d, identify offset=3080 count=40
Sent 1 1042.537837 1042.537837 9: seq: 1e, identify offset=3120 count=40
Sent 2 1042.539903 1042.539903 6: seq: 1f, get_canbus_id
Sent 3 1042.540169 1042.540169 6: seq: 10, get_uptime
Sent 4 1042.590500 1042.590500 6: seq: 11, get_clock
Sent 5 1042.640804 1042.640804 6: seq: 12, get_clock
Sent 6 1042.691133 1042.691133 6: seq: 13, get_clock
Sent 7 1042.741426 1042.741426 6: seq: 14, get_clock
Sent 8 1042.792653 1042.792653 6: seq: 15, get_clock
Sent 9 1042.842971 1042.842971 6: seq: 16, get_clock
Sent 10 1042.893279 1042.893279 6: seq: 17, get_clock
Sent 11 1042.943576 1042.943576 6: seq: 18, get_clock
Sent 12 1042.944695 1042.944695 6: seq: 19, get_clock
Sent 13 1043.452857 1043.452857 6: seq: 1a, get_config
Sent 14 1043.453789 1043.453789 7: seq: 1b, allocate_oids count=29
Sent 15 1043.453822 1043.453822 9: seq: 1c, config_spi oid=0 pin=PD6 cs_active_high=0
Sent 16 1043.453836 1043.453836 9: seq: 1d, config_spi oid=1 pin=PD5 cs_active_high=0
Sent 17 1043.453849 1043.453849 9: seq: 1e, config_spi oid=2 pin=PD2 cs_active_high=0
Sent 18 1043.453862 1043.453862 9: seq: 1f, config_spi oid=3 pin=PA15 cs_active_high=0
Sent 19 1043.453875 1043.453875 9: seq: 10, config_spi oid=4 pin=PA9 cs_active_high=0
Sent 20 1043.453887 1043.453887 9: seq: 11, config_spi oid=5 pin=PA10 cs_active_high=0
Sent 21 1043.453906 1043.453906 15: seq: 12, spi_set_software_bus oid=0 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 22 1043.453927 1043.453927 15: seq: 13, spi_set_software_bus oid=1 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 23 1043.453938 1043.453938 15: seq: 14, spi_set_software_bus oid=2 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 24 1043.453948 1043.453948 15: seq: 15, spi_set_software_bus oid=3 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 25 1043.453959 1043.453959 15: seq: 16, spi_set_software_bus oid=4 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 26 1043.454105 1043.454105 61: seq: 17, spi_set_software_bus oid=5 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, config_analog_in oid=18 pin=PB0, config_digital_out oid=19 pin=PF6 value=0 default_value=0 max_duration=2000000000, set_digital_out_pwm_cycle oid=19 cycle_ticks=40000000, config_digital_out oid=20 pin=PA1 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=20 cycle_ticks=20000000, config_digital_out oid=21 pin=PA4 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=21 cycle_ticks=20000000, config_analog_in oid=22 pin=PA7
Sent 27 1043.454968 1043.454968 59: seq: 18, config_neopixel oid=6 pin=PF12 data_size=150 bit_max_ticks=1600 reset_min_ticks=20000, config_stepper oid=7 step_pin=PC14 dir_pin=PC13 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=23 pin=PE6 value=1 default_value=1 max_duration=0, config_endstop oid=8 pin=PC15 pull_up=0, config_trsync oid=9, config_stepper oid=10 step_pin=PE5 dir_pin=PE4 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=24 pin=PE3 value=1 default_value=1 max_duration=0, config_endstop oid=11 pin=PF0 pull_up=0, config_trsync oid=12, config_stepper oid=13 step_pin=PG9 dir_pin=PG10 invert_step=4294967295 step_pulse_ticks=0
Sent 28 1043.455454 1043.455454 60: seq: 19, config_digital_out oid=25 pin=PG13 value=1 default_value=1 max_duration=0, config_trsync oid=14, config_stepper oid=15 step_pin=PG11 dir_pin=PD7 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=26 pin=PG12 value=1 default_value=1 max_duration=0, config_stepper oid=16 step_pin=PB4 dir_pin=PB3 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=27 pin=PB5 value=1 default_value=1 max_duration=0, config_stepper oid=17 step_pin=PG15 dir_pin=PB6 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=28 pin=PG14 value=1 default_value=1 max_duration=0, finalize_config crc=924824692
Sent 29 1043.462409 1043.462409 51: seq: 1a, query_analog_in oid=18 clock=1272000000 sample_ticks=400000 sample_count=8 rest_ticks=120000000 min_value=14024 max_value=32038 range_check_count=4, queue_digital_out oid=19 clock=887675242 on_ticks=0, queue_digital_out oid=20 clock=887690783 on_ticks=0, queue_digital_out oid=21 clock=887696183 on_ticks=0
Sent 30 1043.462852 1043.462852 26: seq: 1b, query_analog_in oid=22 clock=1288000000 sample_ticks=400000 sample_count=8 rest_ticks=120000000 min_value=0 max_value=32760 range_check_count=4, get_config
Sent 31 1043.471015 1043.471015 13: seq: 1c, spi_send oid=0 data=b"\x8b\x00\x00\x00'"
Sent 32 1043.471033 1043.471033 13: seq: 1d, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 33 1043.471394 1043.471394 21: seq: 1e, spi_send oid=0 data=b"\x8b\x00\x00\x00'", spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 34 1043.471720 1043.471720 21: seq: 1f, spi_send oid=0 data=b"\x8b\x00\x00\x00'", spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 35 1043.472100 1043.472100 13: seq: 10, spi_send oid=0 data=b"\x8b\x00\x00\x00'"
Sent 36 1043.472119 1043.472119 13: seq: 11, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 37 1043.472470 1043.472470 21: seq: 12, spi_send oid=0 data=b"\x8b\x00\x00\x00'", spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 38 1043.472852 1043.472852 13: seq: 13, spi_send oid=1 data=b"\x8b\x00\x00\x00'"
Sent 39 1043.472870 1043.472870 13: seq: 14, spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 40 1043.473248 1043.473248 21: seq: 15, spi_send oid=1 data=b"\x8b\x00\x00\x00'", spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 41 1043.473569 1043.473569 21: seq: 16, spi_send oid=1 data=b"\x8b\x00\x00\x00'", spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 42 1043.473891 1043.473891 21: seq: 17, spi_send oid=1 data=b"\x8b\x00\x00\x00'", spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 43 1043.474210 1043.474210 21: seq: 18, spi_send oid=1 data=b"\x8b\x00\x00\x00'", spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 44 1043.474580 1043.474580 13: seq: 19, spi_send oid=2 data=b'\x8b\x00\x00\x002'
Sent 45 1043.474597 1043.474597 13: seq: 1a, spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 46 1043.475021 1043.475021 21: seq: 1b, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 47 1043.475342 1043.475342 21: seq: 1c, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 48 1043.475660 1043.475660 21: seq: 1d, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 49 1043.476062 1043.476062 21: seq: 1e, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 50 1043.476448 1043.476448 13: seq: 1f, spi_send oid=3 data=b'\x8b\x00\x00\x002'
Sent 51 1043.476469 1043.476469 13: seq: 10, spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 52 1043.476816 1043.476816 21: seq: 11, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 53 1043.477201 1043.477201 21: seq: 12, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 54 1043.477518 1043.477518 21: seq: 13, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 55 1043.477838 1043.477838 21: seq: 14, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 56 1043.478252 1043.478252 13: seq: 15, spi_send oid=4 data=b'\x8b\x00\x00\x002'
Sent 57 1043.478267 1043.478267 13: seq: 16, spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 58 1043.478623 1043.478623 21: seq: 17, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 59 1043.479011 1043.479011 21: seq: 18, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 60 1043.479329 1043.479329 21: seq: 19, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 61 1043.479670 1043.479670 13: seq: 1a, spi_send oid=4 data=b'\x8b\x00\x00\x002'
Sent 62 1043.479690 1043.479690 13: seq: 1b, spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 63 1043.480128 1043.480128 13: seq: 1c, spi_send oid=5 data=b'\x8b\x00\x00\x002'
Sent 64 1043.480156 1043.480156 13: seq: 1d, spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 65 1043.480508 1043.480508 21: seq: 1e, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 66 1043.480832 1043.480832 21: seq: 1f, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 67 1043.481202 1043.481202 21: seq: 10, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 68 1043.481525 1043.481525 21: seq: 11, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 69 1043.544970 1043.544970 15: seq: 12, neopixel_update oid=6 pos=0 data=b'\xff\xff\xff\xff\xff\xff'
Sent 70 1043.545011 1043.545011 45: seq: 13, neopixel_update oid=6 pos=6 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=22 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 71 1043.545047 1043.545047 45: seq: 14, neopixel_update oid=6 pos=38 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=54 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 72 1043.545094 1043.545094 45: seq: 15, neopixel_update oid=6 pos=70 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=86 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 73 1043.545427 1043.545427 47: seq: 16, neopixel_update oid=6 pos=102 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=118 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 74 1043.551471 1043.551471 28: seq: 17, neopixel_update oid=6 pos=134 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_send oid=6
Sent 75 1043.553706 1043.553706 7: seq: 18, stepper_get_position oid=7
Sent 76 1043.554019 1043.554019 13: seq: 19, spi_send oid=0 data=b'j\x00\x00\x00\x00'
Sent 77 1043.554040 1043.554040 13: seq: 1a, spi_transfer oid=0 data=b'j\x00\x00\x00\x00'
Sent 78 1043.554460 1043.554460 7: seq: 1b, stepper_get_position oid=10
Sent 79 1043.554664 1043.554664 13: seq: 1c, spi_send oid=1 data=b'j\x00\x00\x00\x00'
Sent 80 1043.554680 1043.554680 13: seq: 1d, spi_transfer oid=1 data=b'j\x00\x00\x00\x00'
Sent 81 1043.555098 1043.555098 7: seq: 1e, stepper_get_position oid=13
Sent 82 1043.555291 1043.555291 13: seq: 1f, spi_send oid=2 data=b'j\x00\x00\x00\x00'
Sent 83 1043.555311 1043.555311 13: seq: 10, spi_transfer oid=2 data=b'j\x00\x00\x00\x00'
Sent 84 1043.555669 1043.555669 7: seq: 11, stepper_get_position oid=15
Sent 85 1043.555863 1043.555863 13: seq: 12, spi_send oid=3 data=b'j\x00\x00\x00\x00'
Sent 86 1043.555883 1043.555883 13: seq: 13, spi_transfer oid=3 data=b'j\x00\x00\x00\x00'
Sent 87 1043.556257 1043.556257 7: seq: 14, stepper_get_position oid=16
Sent 88 1043.556455 1043.556455 13: seq: 15, spi_send oid=4 data=b'j\x00\x00\x00\x00'
Sent 89 1043.556475 1043.556475 13: seq: 16, spi_transfer oid=4 data=b'j\x00\x00\x00\x00'
Sent 90 1043.556833 1043.556833 7: seq: 17, stepper_get_position oid=17
Sent 91 1043.557078 1043.557078 13: seq: 18, spi_send oid=5 data=b'j\x00\x00\x00\x00'
Sent 92 1043.557094 1043.557094 13: seq: 19, spi_transfer oid=5 data=b'j\x00\x00\x00\x00'
Sent 93 1043.562845 1043.562845 13: seq: 1a, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e'
Sent 94 1043.562873 1043.562873 13: seq: 1b, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 95 1043.563257 1043.563257 21: seq: 1c, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 96 1043.563580 1043.563580 21: seq: 1d, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 97 1043.563898 1043.563898 21: seq: 1e, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 98 1043.564220 1043.564220 21: seq: 1f, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 99 1043.566390 1043.566390 6: seq: 10, emergency_stop
Dumping receive queue 100 messages
Receive: 0 1042.523457 1042.523137 49: seq: 1a, identify_response offset=1640 data=b'\xb0\x80\x9f\xd9xVn\xf0\x11d\xfb\x80\x9b|\x8cG\xf31N\xdf\xe0\xd67\xc8\xfeFJ\xb0Z~B\x9a\xab\x87\xdb\xeb\x9b\xb5\x84l'
Receive: 1 1042.523889 1042.523530 49: seq: 1b, identify_response offset=1680 data=b'\xab\x9f~^\xfd\x98|xX\xff\x82\xf7\xa9\xfe\x9dM\xeeVO\xb0^t\x87\xc0\xdf\xcf\xfc\xe0\xed\r\x16\xdf\xffzG\xf7\xeec\xa2\x7f'
Receive: 2 1042.524277 1042.523955 49: seq: 1c, identify_response offset=1720 data=b"X\xaf\xd6\xb7\xff^'\xbf\xde~\xba\xfe\xf9Wt \x1f\x077\xeb\x07\x18\x94\x87\x80\xcd\xf0\x0c\xd7p\x7f\xd7x}\x83\xc9\xa7\xcd\x95\xbc"
Receive: 3 1042.524663 1042.524341 49: seq: 1d, identify_response offset=1760 data=b'\x1f<\xfbR\x8a>\x98\xce\xdaw\xf0\x80R\x8a\x08\xeb?\xe2\xfa\xcd\xe3\xf2q\x93l\x9e\xee6\xbf$W\xcb\xcd\x1a\x0f\x12\xe3\xf0\xfa\xfe'
Receive: 4 1042.525069 1042.524725 49: seq: 1e, identify_response offset=1800 data=b'~\xfd\x90\\\xfd\xfc\xf81Y\x93\\_\xf0\xed\xd0\xc3kF\xbe\xb7e\xb5N\xe1h\xd5t\x0c\x95\xf0\xb9c\x97\x84\xa8\x07f\xe8\xcb!'
Receive: 5 1042.525450 1042.525129 49: seq: 1f, identify_response offset=1840 data=b'\xc7\xe6\x02\xd8\x01"\x9bv\x87\xc7\xf5\x1d\x1ca\xf9\xf8\xf4 O\x05!\xf6~9\x9d\\\xfegz\xe6\xc5\xff\x85\xce\x15v +Po'
Receive: 6 1042.525888 1042.525512 49: seq: 10, identify_response offset=1880 data=b"\x85\xbd\xc0W\xbdk\xec\x85s\xd5[c\x0f\xa08\xf5>`o\xae\xb9\xdc`o\xa1\xb9|\x94<=\xc9\xe6\xcb 3\xc0\x1bU\xd6'"
Receive: 7 1042.526271 1042.525950 49: seq: 11, identify_response offset=1920 data=b'\xbd \x08\xa4|\xa9\x88\xa6\xe1,\x97\xa2u%\x8f\xa6\x9e\xff\x0c\xe7T\xab\x94V\xc8e<9\x86\xde\xe1\xcb\x96/\x19(\x83\xa7\x90\x8d'
Receive: 8 1042.526652 1042.526331 49: seq: 12, identify_response offset=1960 data=b'\xa6MI$\x94/)2U\xca\x11h\x953\xd9\x02\xfb\x9b\xe3\x06\x00S\n\x0cg-<\\\xe5SLj\x8c\xc9@\xb3%$J\x85'
Receive: 9 1042.527069 1042.526712 49: seq: 13, identify_response offset=2000 data=b'\xb2e)k\x8bL?\xearJ\xbe\xcb\xaaF$\xc3\xc0\x9aX\x05I\x84\xa5B\x14\xbb\x8a\xe7\xf0\x94(\x04\xbb\xbd\xa6W\xf4*\xad`'
Receive: 10 1042.527449 1042.527130 49: seq: 14, identify_response offset=2040 data=b'\xbac\x10_\x19\xe6(\x06i\x95r)\x93a\x92\xbd\xee\x0bhS\xb8\x13\xac\x81\x80\r\x07"\x10\x00k\xff\xd6!\x90`\xc89-\x81'
Receive: 11 1042.527888 1042.527509 49: seq: 15, identify_response offset=2080 data=b's\xda1`\x9e\xaa#Q-\x86\xde\xa4\x8aX\x1e\x02C%\xbd\x9ciTb\x0e\t\xd9`;^1]\xae0\xebA\xa7+\xaa \xb3'
Receive: 12 1042.528271 1042.527949 49: seq: 16, identify_response offset=2120 data=b"&m\x05L\xc9'\x8e\xd4\x99\x9eh9@\x1f\xd1\xc9:\xf2\xc7\xdf\x10Gc%\xef_\xaa\x927P\x1c\xf3\xceCBK\xb7\xfe\x8a}"
Receive: 13 1042.528644 1042.528326 49: seq: 17, identify_response offset=2160 data=b"Z\xae~$\x14\x8f=\xf0\x96\x87G=6u\xc7\x1e\xd6\xcbk5\x81i\x02'\x1e)#Q\x06\xba%\xbc\xc7\xc0\xdf\x99\xda\x95\xdeW"
Receive: 14 1042.529069 1042.528702 49: seq: 18, identify_response offset=2200 data=b'zB\x17hm\x9d\x99\xf0\x18\x81\x0bM\xa5J\xe5\xd2D\xec\x18\x90\xa1\xe8\xe9\x81\x03\x98\xa32\x8c\x9e<\xd4/\\K\xcf\xb0R\x87\x99'
Receive: 15 1042.529444 1042.529126 49: seq: 19, identify_response offset=2240 data=b"\xc7N\x9b\xba\x9e\xa9\xe4\xd1\x9b\xf9h^\xbd\xfe\xcc\xfe\x81#\x13\\\x18#\xff\xf0\x1c\x81\xb0\x00'\xbd\x00\x13\xb5;\xa8\x93\x1efJg"
Receive: 16 1042.529818 1042.529502 49: seq: 1a, identify_response offset=2280 data=b'\\!\xf7l_4\x8a[\xe8\xc81\x00\xde.\r\xdc\xcc]\xfa\x86\xb77\xd7:$pu\x07o\xf0\x14\xae\x93W\x19Z\xb8\xb2\t\x9c'
Receive: 17 1042.530202 1042.529879 49: seq: 1b, identify_response offset=2320 data=b'(\x84\x00K\x17\xf0T\xcb\xfb\x12K?\xb0\x18Q%S\t[\x9a\x03\x7f\xe1\xa8|\x04\x94__\xb0O\xdb\\:\x85\xa2\xc6\xca\xde\x1d'
Receive: 18 1042.530584 1042.530262 49: seq: 1c, identify_response offset=2360 data=b"j\\\x02m\x06\xadv[\xd6\xaf\x84\xd4?\x81'\xa5\x8c\xc4Ao\x95\xa1\x0e?C\xb8\x13h\x1fr\x02\xe3\x9d;QT\r\xe1Y\xaa"
Receive: 19 1042.531022 1042.530643 49: seq: 1d, identify_response offset=2400 data=b'r\xca\xa9\nOj\x87c\x99N\x8c\x835m\xbd\x03\x9b8\xc0\xd1S\x94m\x0b\x80\x10N\t\xba\xe6\x18\x07\xf0\xbd\xfe\xc0\x95P\xe8\xf9'
Receive: 20 1042.531413 1042.531098 49: seq: 1e, identify_response offset=2440 data=b'`\xae-l\x83\xaa\x06kBg\xc1\x8f\x1a\x1bCp\xa4\x1d\xf6Z\x94%\xe0\xa4\x0c\xf8\rj\xb1\x84\xfc\xecJ\xa3\xa1o\xac\xc0o\x15'
Receive: 21 1042.531810 1042.531486 49: seq: 1f, identify_response offset=2480 data=b'\x1bpt\xbaCy\x00\xa4(\x0e\xfdA\x8fi\x7f\x00\xf17\xba\xde*\xbf\xb9\x003\x19\x1ad\xacr?\xbflT\xac\xe8\xea\x9amS'
Receive: 22 1042.532194 1042.531875 49: seq: 10, identify_response offset=2520 data=b')\x1dI\x86\x85\xaeG\xd7\xa4Pe@(+\xccT\x97y\x94\xfa\xc0\x95\x00\x11\x05\x97\x81\xfa\xa9\x12}\x830\x11v\xc4\xb2\xbe\xb4o'
Receive: 23 1042.532574 1042.532256 49: seq: 11, identify_response offset=2560 data=b'\xfct"?[\xc1\xe3\xbf\xaf>\x03\x0f\x08\x8a9}\xd5p\xc6\x85\x9d\x80\x8b"c\x07\x88+\xeaV\xfa\'`M\xc12\xa1\xae\xd2V'
Receive: 24 1042.533021 1042.532634 49: seq: 12, identify_response offset=2600 data=b'\x97)\xfc\xd5U\t\x11\xf3\x05\x18\xa4\xcf\xa5\x0e\x84FR8\x80\xfc\\fB\xab\xfa\x88\x96S-S`\x81\t\xc3\x1c]q\x06\xd38'
Receive: 25 1042.533400 1042.533077 49: seq: 13, identify_response offset=2640 data=b'\x15\x1a\xa8-\xbd_\x8aZ\xa6-\xa6\x8e\xe04\x88E\xfd\x925b\xcdZE`\xb2u\x84\xee\x90\x99\x8e\xea\xba\x98\x9a\x00\xdf\x04\xde<'
Receive: 26 1042.533783 1042.533458 49: seq: 14, identify_response offset=2680 data=b'\x8ad\xd6S\x9dXfE\xea\xc4\x91\xbc,\xe8\xc4\xf1,B\x1c\x00\x9c\xca"\x03\xe5\xc0\xfa\xc9\xcd\xa7\'vs\xff\xd3\x0bb-\xd0F'
Receive: 27 1042.534162 1042.533840 49: seq: 15, identify_response offset=2720 data=b'\x03\x1e\xce\xe9[\xa1\xae\xea\x0c\n\x14\xd23\x93S/\xe0s\x0c\x8c\xfa\x9b\xdf`I\xea\xd4l\x98\x9c\xa1\x17\xce9f2S\xf1d\xaa'
Receive: 28 1042.534535 1042.534220 49: seq: 16, identify_response offset=2760 data=b'\xd5\xf7\xb8\xea\x02\x1e#j\x00S(\x0e\xe1\x1e\x98\xb8\xe8ml\x9f \xe7\x81\xf9\xa4\x07\x19PUH\xe5+E\xd6VqL_\xa6|'
Receive: 29 1042.534977 1042.534593 49: seq: 17, identify_response offset=2800 data=b'\xfaA\xdcH\xccc\x1cO!\x8b\xf5\xb2|\xf4-Q\xd5\x12\xd5H\x9c\xfd\xd1\x14uE[\x80\x85\x9b\x02\xf59\x06a]\x11\x1e\xb0\xde'
Receive: 30 1042.535355 1042.535035 49: seq: 18, identify_response offset=2840 data=b'\xd7\x07\x88t\xc7\x9b\xb8\x05g\\\x1f\xd9Jl\xa2o\xc7\xa9\xe4\xc8\xbeV\xa6g\xab\x9d\x0e\xad){\xd2\xcb\xf2\x02i\x11?Z\xa5\xb0'
Receive: 31 1042.535734 1042.535411 49: seq: 19, identify_response offset=2880 data=b'1\xe0!\xbd,B[\x1d=\xaaS9\x02\xe8\x1a\xa8\xab\x90\xd0\xa9l*\x9d\xe8G{\x9fe\xb2|\x8b\xe2\xe1{\x14\x8e\xe9~\x1d8'
Receive: 32 1042.536168 1042.535790 49: seq: 1a, identify_response offset=2920 data=b'\xc7tN\x8e\x0b(\x0f\x1e\xe3\xee\xe3X`\xa6\xad2>\xaa\x8d\x9ecbt\xd7\x0cJX\xb6\\\xa3\x8aL\xfa\tJ\xa5\x0e\x97\xe5s'
Receive: 33 1042.536549 1042.536227 49: seq: 1b, identify_response offset=2960 data=b'/\xa3xN\x85C\xc0K\x10\r\x12\x9df\x842\x17Y^\xb1\x01RW:O\xeb0:U\xff8\xbaI\xb7\xc6\xe5^\xa9\x17\r\x0b'
Receive: 34 1042.537026 1042.536608 49: seq: 1c, identify_response offset=3000 data=b'\x0e\x7fi\x02\xbeD\xafm\'q\xe2" ,+\xac\xe9\x8a\xfe\xa0\xfe\x88\xdf\x95\xef\xf8\xb6\x880\xaa0P\x15\xba@\xbe\xf1(\xf6\x0c'
Receive: 35 1042.537403 1042.537084 49: seq: 1d, identify_response offset=3040 data=b'\xef\xf4dH\xe8)\xda\xab\x8b\x8em\xe1\xe1X\x06,9\x90\xbc\x0b\xb7\x98`\x8d\r\x02\x81\xae\t\x9c\xae\xba;\xb6\x87\xb9\x87\xbe\x8a0'
Receive: 36 1042.537778 1042.537462 49: seq: 1e, identify_response offset=3080 data=b'\xfa\x10\xd9\x0fB\x05\xbe\xb3\xd4\x7f\xb1\x80\xe0\xf72\xbd\xf0\xfc\x8b\xe9y\x10.\xcewi\x10N\x830\\\x84\x93/\xff\x03u\x9f\x0c\xd8'
Receive: 37 1042.538029 1042.537837 9: seq: 1f, identify_response offset=3120 data=b''
Receive: 38 1042.540051 1042.539903 14: seq: 10, canbus_id canbus_uuid=b'\x8d`\xb0\xd4\xc7p' canbus_nodeid=4
Receive: 39 1042.540318 1042.540169 12: seq: 11, uptime high=0 clock=442489688
Receive: 40 1042.590644 1042.590500 11: seq: 12, clock clock=462619951
Receive: 41 1042.640996 1042.640804 11: seq: 13, clock clock=482760879
Receive: 42 1042.691277 1042.691133 11: seq: 14, clock clock=502873471
Receive: 43 1042.741572 1042.741426 11: seq: 15, clock clock=522991041
Receive: 44 1042.792801 1042.792653 11: seq: 16, clock clock=543482591
Receive: 45 1042.843114 1042.842971 11: seq: 17, clock clock=563607783
Receive: 46 1042.893429 1042.893279 11: seq: 18, clock clock=583734021
Receive: 47 1042.943721 1042.943576 11: seq: 19, clock clock=603851199
Receive: 48 1042.944905 1042.944695 11: seq: 1a, clock clock=604298532
Receive: 49 1043.453068 1043.452857 10: seq: 1b, config is_config=0 crc=0 is_shutdown=0 move_count=0
Receive: 50 1043.463724 1043.462852 15: seq: 1c, config is_config=1 crc=924824692 is_shutdown=0 move_count=1024
Receive: 51 1043.471294 1043.471033 13: seq: 1e, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 52 1043.471635 1043.471394 13: seq: 1f, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 53 1043.472017 1043.471720 13: seq: 10, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 54 1043.472382 1043.472119 13: seq: 12, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 55 1043.472709 1043.472470 13: seq: 13, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 56 1043.473158 1043.472870 13: seq: 15, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 57 1043.473485 1043.473248 13: seq: 16, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 58 1043.473808 1043.473569 13: seq: 17, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 59 1043.474128 1043.473891 13: seq: 18, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 60 1043.474444 1043.474210 13: seq: 19, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 61 1043.474925 1043.474597 13: seq: 1b, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 62 1043.475258 1043.475021 13: seq: 1c, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 63 1043.475578 1043.475342 13: seq: 1d, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 64 1043.475969 1043.475660 13: seq: 1e, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 65 1043.476299 1043.476062 13: seq: 1f, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 66 1043.476724 1043.476469 13: seq: 11, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 67 1043.477119 1043.476816 13: seq: 12, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 68 1043.477438 1043.477201 13: seq: 13, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 69 1043.477757 1043.477518 13: seq: 14, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 70 1043.478119 1043.477838 13: seq: 15, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 71 1043.478533 1043.478267 13: seq: 17, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 72 1043.478925 1043.478623 13: seq: 18, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 73 1043.479247 1043.479011 13: seq: 19, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 74 1043.479561 1043.479329 13: seq: 1a, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 75 1043.479997 1043.479690 13: seq: 1c, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 76 1043.480410 1043.480156 13: seq: 1e, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 77 1043.480747 1043.480508 13: seq: 1f, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 78 1043.481119 1043.480832 13: seq: 10, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 79 1043.481437 1043.481202 13: seq: 11, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 80 1043.481760 1043.481525 13: seq: 12, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 81 1043.553238 1043.551471 8: seq: 18, neopixel_result oid=6 success=1
Receive: 82 1043.553812 1043.553706 8: seq: 19, stepper_position oid=7 pos=0
Receive: 83 1043.554304 1043.554040 13: seq: 1b, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 84 1043.554565 1043.554460 8: seq: 1c, stepper_position oid=10 pos=0
Receive: 85 1043.554989 1043.554680 13: seq: 1e, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 86 1043.555201 1043.555098 8: seq: 1f, stepper_position oid=13 pos=0
Receive: 87 1043.555570 1043.555311 13: seq: 11, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 88 1043.555775 1043.555669 8: seq: 12, stepper_position oid=15 pos=0
Receive: 89 1043.556161 1043.555883 13: seq: 14, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 90 1043.556367 1043.556257 8: seq: 15, stepper_position oid=16 pos=0
Receive: 91 1043.556737 1043.556475 13: seq: 17, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 92 1043.556990 1043.556833 8: seq: 18, stepper_position oid=17 pos=0
Receive: 93 1043.557353 1043.557094 13: seq: 1a, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 94 1043.563162 1043.562873 13: seq: 1c, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 95 1043.563496 1043.563257 13: seq: 1d, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 96 1043.563815 1043.563580 13: seq: 1e, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 97 1043.564138 1043.563898 13: seq: 1f, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 98 1043.564456 1043.564220 13: seq: 10, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 99 1043.566587 1043.566390 12: seq: 11, shutdown clock=852978848 static_string_id=Command request
MCU 'ebb' shutdown: Command request
clocksync state: mcu_freq=12000000 last_clock=26775422 clock_est=(1043.115 22719939 12001199.289) min_half_rtt=0.000079 min_rtt_time=1043.452 time_avg=1043.115(0.017) clock_avg=22719939.761(201996.065) pred_variance=106178508.610 clock_adj=(-0.212 12001090.250)
Dumping serial stats: bytes_write=1341 bytes_read=4880 bytes_retransmit=0 bytes_invalid=0 send_seq=142 receive_seq=142 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 1042.984374 1042.984374 9: seq: 1a, identify offset=1040 count=40
Sent 1 1042.985511 1042.985511 9: seq: 1b, identify offset=1080 count=40
Sent 2 1042.986659 1042.986659 9: seq: 1c, identify offset=1120 count=40
Sent 3 1042.987793 1042.987793 9: seq: 1d, identify offset=1160 count=40
Sent 4 1042.989002 1042.989002 9: seq: 1e, identify offset=1200 count=40
Sent 5 1042.990120 1042.990120 9: seq: 1f, identify offset=1240 count=40
Sent 6 1042.991262 1042.991262 9: seq: 10, identify offset=1280 count=40
Sent 7 1042.992388 1042.992388 9: seq: 11, identify offset=1320 count=40
Sent 8 1042.993514 1042.993514 9: seq: 12, identify offset=1360 count=40
Sent 9 1042.994655 1042.994655 9: seq: 13, identify offset=1400 count=40
Sent 10 1042.995790 1042.995790 9: seq: 14, identify offset=1440 count=40
Sent 11 1042.997010 1042.997010 9: seq: 15, identify offset=1480 count=40
Sent 12 1042.998142 1042.998142 9: seq: 16, identify offset=1520 count=40
Sent 13 1042.999260 1042.999260 9: seq: 17, identify offset=1560 count=40
Sent 14 1043.000395 1043.000395 9: seq: 18, identify offset=1600 count=40
Sent 15 1043.001540 1043.001540 9: seq: 19, identify offset=1640 count=40
Sent 16 1043.002667 1043.002667 9: seq: 1a, identify offset=1680 count=40
Sent 17 1043.003818 1043.003818 9: seq: 1b, identify offset=1720 count=40
Sent 18 1043.005014 1043.005014 9: seq: 1c, identify offset=1760 count=40
Sent 19 1043.006157 1043.006157 9: seq: 1d, identify offset=1800 count=40
Sent 20 1043.007291 1043.007291 9: seq: 1e, identify offset=1840 count=40
Sent 21 1043.008412 1043.008412 9: seq: 1f, identify offset=1880 count=40
Sent 22 1043.009551 1043.009551 9: seq: 10, identify offset=1920 count=40
Sent 23 1043.010675 1043.010675 9: seq: 11, identify offset=1960 count=40
Sent 24 1043.011794 1043.011794 9: seq: 12, identify offset=2000 count=40
Sent 25 1043.012998 1043.012998 9: seq: 13, identify offset=2040 count=40
Sent 26 1043.014127 1043.014127 9: seq: 14, identify offset=2080 count=40
Sent 27 1043.015326 1043.015326 9: seq: 15, identify offset=2120 count=40
Sent 28 1043.016463 1043.016463 9: seq: 16, identify offset=2160 count=40
Sent 29 1043.017603 1043.017603 9: seq: 17, identify offset=2200 count=40
Sent 30 1043.018728 1043.018728 9: seq: 18, identify offset=2240 count=40
Sent 31 1043.019881 1043.019881 9: seq: 19, identify offset=2280 count=40
Sent 32 1043.021020 1043.021020 9: seq: 1a, identify offset=2320 count=40
Sent 33 1043.022172 1043.022172 9: seq: 1b, identify offset=2360 count=40
Sent 34 1043.023321 1043.023321 9: seq: 1c, identify offset=2400 count=40
Sent 35 1043.024472 1043.024472 9: seq: 1d, identify offset=2440 count=40
Sent 36 1043.025610 1043.025610 9: seq: 1e, identify offset=2480 count=40
Sent 37 1043.026743 1043.026743 9: seq: 1f, identify offset=2520 count=40
Sent 38 1043.027870 1043.027870 9: seq: 10, identify offset=2560 count=40
Sent 39 1043.029009 1043.029009 9: seq: 11, identify offset=2600 count=40
Sent 40 1043.030121 1043.030121 9: seq: 12, identify offset=2640 count=40
Sent 41 1043.031257 1043.031257 9: seq: 13, identify offset=2680 count=40
Sent 42 1043.032400 1043.032400 9: seq: 14, identify offset=2720 count=40
Sent 43 1043.033535 1043.033535 9: seq: 15, identify offset=2760 count=40
Sent 44 1043.034653 1043.034653 9: seq: 16, identify offset=2800 count=40
Sent 45 1043.035773 1043.035773 9: seq: 17, identify offset=2840 count=40
Sent 46 1043.036957 1043.036957 9: seq: 18, identify offset=2880 count=40
Sent 47 1043.038072 1043.038072 9: seq: 19, identify offset=2920 count=40
Sent 48 1043.039184 1043.039184 9: seq: 1a, identify offset=2960 count=40
Sent 49 1043.040324 1043.040324 9: seq: 1b, identify offset=3000 count=40
Sent 50 1043.041450 1043.041450 9: seq: 1c, identify offset=3040 count=40
Sent 51 1043.042578 1043.042578 9: seq: 1d, identify offset=3080 count=40
Sent 52 1043.043697 1043.043697 9: seq: 1e, identify offset=3120 count=40
Sent 53 1043.044338 1043.044338 9: seq: 1f, identify offset=3125 count=40
Sent 54 1043.046596 1043.046505 6: seq: 10, get_canbus_id
Sent 55 1043.047171 1043.047080 6: seq: 11, get_uptime
Sent 56 1043.097752 1043.097661 6: seq: 12, get_clock
Sent 57 1043.148367 1043.148276 6: seq: 13, get_clock
Sent 58 1043.198933 1043.198842 6: seq: 14, get_clock
Sent 59 1043.249516 1043.249425 6: seq: 15, get_clock
Sent 60 1043.300286 1043.300195 6: seq: 16, get_clock
Sent 61 1043.350889 1043.350798 6: seq: 17, get_clock
Sent 62 1043.401566 1043.401475 6: seq: 18, get_clock
Sent 63 1043.452154 1043.452063 6: seq: 19, get_clock
Sent 64 1043.452971 1043.452880 6: seq: 1a, get_clock
Sent 65 1043.464006 1043.463915 6: seq: 1b, get_config
Sent 66 1043.464830 1043.464731 7: seq: 1c, allocate_oids count=13
Sent 67 1043.464992 1043.464764 9: seq: 1d, config_spi oid=0 pin=gpio1 cs_active_high=0
Sent 68 1043.465099 1043.464786 8: seq: 1e, config_adxl345 oid=1 spi_oid=0
Sent 69 1043.465261 1043.464795 9: seq: 1f, config_spi oid=5 pin=gpio9 cs_active_high=0
Sent 70 1043.465471 1043.464813 15: seq: 10, spi_set_software_bus oid=0 miso_pin=gpio3 mosi_pin=gpio0 sclk_pin=gpio2 mode=3 rate=5000000
Sent 71 1043.465633 1043.464838 9: seq: 11, config_endstop oid=2 pin=gpio24 pull_up=0
Sent 72 1043.465732 1043.464851 7: seq: 12, config_trsync oid=3
Sent 73 1043.465918 1043.464865 12: seq: 13, config_tmcuart oid=4 rx_pin=gpio20 pull_up=0 tx_pin=gpio20 bit_time=300
Sent 74 1043.466096 1043.464877 11: seq: 14, config_digital_out oid=8 pin=gpio13 value=0 default_value=0 max_duration=0
Sent 75 1043.466266 1043.464886 10: seq: 15, set_digital_out_pwm_cycle oid=8 cycle_ticks=120000
Sent 76 1043.466444 1043.464895 11: seq: 16, config_digital_out oid=9 pin=gpio14 value=0 default_value=0 max_duration=0
Sent 77 1043.466614 1043.464899 10: seq: 17, set_digital_out_pwm_cycle oid=9 cycle_ticks=120000
Sent 78 1043.467458 1043.465926 59: seq: 18, config_analog_in oid=10 pin=gpio28, spi_set_software_bus oid=5 miso_pin=gpio11 mosi_pin=gpio8 sclk_pin=gpio10 mode=1 rate=4000000, config_thermocouple oid=6 spi_oid=5 thermocouple_type=MAX31865, config_digital_out oid=11 pin=gpio7 value=0 default_value=0 max_duration=60000000, set_digital_out_pwm_cycle oid=11 cycle_ticks=1200000, config_stepper oid=7 step_pin=gpio18 dir_pin=gpio19 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=12 pin=gpio17 value=1 default_value=1 max_duration=0, finalize_config crc=3237245062, spi_send oid=5 data=b'\x80\xc3'
Sent 79 1043.469013 1043.468145 62: seq: 19, queue_digital_out oid=8 clock=29312829 on_ticks=0, queue_digital_out oid=9 clock=29313056 on_ticks=0, query_analog_in oid=10 clock=39747870 sample_ticks=12000 sample_count=8 rest_ticks=3600000 min_value=0 max_value=32760 range_check_count=4, query_thermocouple oid=6 clock=39267870 rest_ticks=3600000 min_value=15240 max_value=32318 max_invalid_count=3, queue_digital_out oid=11 clock=29313628 on_ticks=0, get_config
Sent 80 1043.482136 1043.481934 14: seq: 1a, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 81 1043.486733 1043.486444 19: seq: 1b, tmcuart_send oid=4 write=b'\xea\x03\x080\x80\x00\n\x08\xb8\x87' read=0
Sent 82 1043.489459 1043.489257 14: seq: 1c, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 83 1043.494042 1043.493753 19: seq: 1d, tmcuart_send oid=4 write=b'\xea\x03h0\x80\x00\x12\x08 \xda' read=0
Sent 84 1043.496752 1043.496550 14: seq: 1e, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 85 1043.501337 1043.501048 19: seq: 1f, tmcuart_send oid=4 write=b'\xea\x03\x88=\x9a\x06\x02h*\xbf' read=0
Sent 86 1043.504044 1043.503842 14: seq: 10, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 87 1043.508661 1043.508372 19: seq: 11, tmcuart_send oid=4 write=b'\xea\x03\x082\x80\x10\x9ah"\x9c' read=0
Sent 88 1043.511363 1043.511161 14: seq: 12, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 89 1043.515925 1043.515636 19: seq: 13, tmcuart_send oid=4 write=b'\xea\x03h2\x80\x1e\xfa\xef?\xdf' read=0
Sent 90 1043.518628 1043.518426 14: seq: 14, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 91 1043.523244 1043.522955 19: seq: 15, tmcuart_send oid=4 write=b'\xea\x03\x08>\xe4\x1ar\x88\xa4\x85' read=0
Sent 92 1043.525955 1043.525753 14: seq: 16, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 93 1043.530537 1043.530248 19: seq: 17, tmcuart_send oid=4 write=b'\xea\x03(2\x80\x00\x02\x88"\xf3' read=0
Sent 94 1043.533259 1043.533057 14: seq: 18, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 95 1043.537849 1043.537560 19: seq: 19, tmcuart_send oid=4 write=b'\xea\x03\x088\x80\x00\x02\x08 \xba' read=0
Sent 96 1043.540569 1043.540367 14: seq: 1a, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 97 1043.557601 1043.557502 7: seq: 1b, stepper_get_position oid=7
Sent 98 1043.558201 1043.557999 14: seq: 1c, tmcuart_send oid=4 write=b'\xea\x03H-\xd5' read=10
Sent 99 1043.566511 1043.566420 6: seq: 1d, emergency_stop
Dumping receive queue 100 messages
Receive: 0 1042.970746 1042.969667 49: seq: 1e, identify_response offset=520 data=b'\xf3!G\xddz>#9,\x81\xc8\x9cd3\xc7[\xf7\xbc?b7\xe5+\xf8\x91\xc3\xa1\xadf7\x86v\x04+\x07\x86\x94:\x8a\x81'
Receive: 1 1042.971950 1042.970795 49: seq: 1f, identify_response offset=560 data=b"\xdd\x101\x86\x8eA<\xf1|'\xb6;\xc5a\xb2\xf2\xe1\xc1\x91\xb65?\xe2\xa4v/\x1f^;N\xb2\x89''\x8d\xd3\x1f;\xac\xb7"
Receive: 2 1042.973064 1042.971997 49: seq: 10, identify_response offset=600 data=b'\xf2\xbd\xdc~\xff\xe6\xef\x10\xe5\x92dr\x16U\x8bfTJk&\x89\xb3\x1e9,\xd7.r\x94\xf2\x88\xb51)*;|m\xca|'
Receive: 3 1042.974186 1042.973111 49: seq: 11, identify_response offset=640 data=b'j\xcd\xac\xdcWyh\xe0\xd9\xda\xbb\x81c|\xb7\xa4\xc3T[\x13\xabDo\x86\x14\xeb\x14\xb0\x83\x1ak\xc9=\xa4\xb1cl\xd8\xf1~'
Receive: 4 1042.975307 1042.974234 49: seq: 12, identify_response offset=680 data=b'\xdfB(\xe9\x8eJ\xd4\xdfvB]8\xd7\x1e\xf6\xe5X\xf4\xd66\xfa\x97\xfc \x0e\xb1\xc1.\xa2\xe5\rb\xcf\x89\xb5\xc8a\xe9Q\x1e'
Receive: 5 1042.976431 1042.975355 49: seq: 13, identify_response offset=720 data=b'N\xac\x10Y+\xfe0\x82=\xb7\x90\xd9\xd6f\x06X\xb6\xca\x96I?\x91\x05\xc3\xc0\xcc\xda\xbe\xe2=\xde\x07y\xa5\xa7x\x15\x1b\x80\xe7'
Receive: 6 1042.977550 1042.976477 49: seq: 14, identify_response offset=760 data=b'^\x0c\xfc\x00\x02\x8d\x96\x00\x81\x14\xbe\xe7\xfd\x967\xe5k\x8e\x81\r\x88\x80%\nr\xf9\xae\xdd\xf3\x83\xb4#\x8b}\xe7;\x80\x9e\xdb\xa4'
Receive: 7 1042.978680 1042.977604 49: seq: 15, identify_response offset=800 data=b'3MK@\xba\x0b\xac\xc4\xae\x95q/\xb6[\xde#\x13\xb2\xa5\xe0\x10g\xeer\x95\xf4\x80\xa6b\xe0V@18\xe7F@:\x01\x97'
Receive: 8 1042.979810 1042.978728 49: seq: 16, identify_response offset=840 data=b'\xceI\x86\xac\xecK\n\x89og[\xf0\xe6\xb2h\x1eF\x99\x8b\n\xe4\x17\xeb%$\x1d\xe4\xaeg\xea\x18x\x08M\xc7\x0e\x15\x03\xae\xf9'
Receive: 9 1042.980950 1042.979856 49: seq: 17, identify_response offset=880 data=b'v\xa6\xc3u.\x81\x84\x1c\x8c\xd2f#\x1c\x93\xe8\x17Q\x00\x86Za^\xae\xd4`\xa0!\x8cT\xa4\x1fm"\\\xb9\x17\xc3\xb5\xbc\xe6'
Receive: 10 1042.982076 1042.980997 49: seq: 18, identify_response offset=920 data=b':\x03\xae\t\x10\xe3\x10\x90\xedG9\x98\xaa\x18\x05\xfc\xe3/\xaa\x8eK\xb2\xe34r\xa7d\xbb\x19\x9e\x8b\x9e\xfb\xc7\xc1\xf7\xac\xbfU\x85'
Receive: 11 1042.983206 1042.982123 49: seq: 19, identify_response offset=960 data=b'\x19\x1e\xc3\xb4H\t\x93\xb6\x93\x90\x8f\x14\xf9\xa8x3\x88\r\xd4\x1f\x9b\r\\\xa8\x1c\xd6\xa6e \xc4d\x00\xd8\x1b\xbfb2\xc3\x0e.'
Receive: 12 1042.984327 1042.983253 49: seq: 1a, identify_response offset=1000 data=b'\xdc\xb5u\xa5&\xdf6\x02\xc6\xfb\xbe\x9d\x18\xc5\n\xd4h\xe2\xbb\x12\xba5\x87\xcc\xdf\x19\xbb\xca\x99\n\x15V\xbb\xd1\xe3%\x03\xc3&\x9b'
Receive: 13 1042.985464 1042.984374 49: seq: 1b, identify_response offset=1040 data=b'\n\xaa\x9d\x89\xc1\xc2u\xeb\x00N\xd9\xe0\xe8\x82\xdfj\xe5\x00&\xe5O\x80h\x11\xc2\x85\x88\x16K\x0b\x10VH\xff\xa7\xb7\xed\x9d\xb7\xe9'
Receive: 14 1042.986595 1042.985511 49: seq: 1c, identify_response offset=1080 data=b'\xf4\xe3fP\x1dn\xe1\xe0\x8e\x97\x8f^]\x95D\x86\x86\xa0\xac\xb2\x14t-\x04\xb4\xf0~/Pg\x06\xc1\xa4\x10\t\x85\xba\x98@\x1d'
Receive: 15 1042.987733 1042.986659 49: seq: 1d, identify_response offset=1120 data=b'\x88\xd4"\t\xaa\x8e\x10\xcd<\x80S\xf6\x16\x04\x89\x95eiZ`\x04\xb8\x96\xcb)XH\xd3\xd2\x92\x1c\x94 !\x9e4\x80;@d'
Receive: 16 1042.988950 1042.987793 49: seq: 1e, identify_response offset=1160 data=b'\r\xef \x87\x7f\xa5\x96\xc7\x88\x04)[lHGK\xcb\x10a\x0e\x84\x04\x00\xd6d\x8f\xa5\xb5\xaf\\\xe2\xd9\xca\xc4Th\x02\xe9\x14\xa2'
Receive: 17 1042.990071 1042.989002 49: seq: 1f, identify_response offset=1200 data=b'l\xe5Y\xca\x82t4\xf2c5\xb5\xbd\xa3\xf5k\xa9\xc8\x1e\tJ)\x0bn\xcd\x13bMj\x801w3W;\xf2\x9e\xd2\x95\t;'
Receive: 18 1042.991214 1042.990120 49: seq: 10, identify_response offset=1240 data=b';\x15\xc2\xe0W@B\x80\x08\xa0\xaa8\x88\xf6\x91\x1e\xaa\xf3\x14\xf4\xc3\xfb\xe0\x00X\x10\xc2\xf8<\x04\x0f\x02\xa0;9\x00R\x1c\xa8\xd2'
Receive: 19 1042.992341 1042.991262 49: seq: 11, identify_response offset=1280 data=b'\xcf\xe2\x9c\xd4\x81phA\x87\x1a\xfe\xa2I\x80\xea\xc4\x86T\xd1S\x02\x8b\x08\xc8\xc8\xe3OjJ\x90\n\x92\xe2\xca;|\xe2m\x9c\x93'
Receive: 20 1042.993468 1042.992388 49: seq: 12, identify_response offset=1320 data=b'\xba\xe8\xb6\x9c\x13\x9c\x17\x1f\xbd\xdd$5\xbb\x934\x83K:\xcd\xec\xdb\x8a{I\x02\x8e,\xdc\x91c9f/dk2\xcb\xbe\x95\xe2'
Receive: 21 1042.994591 1042.993514 49: seq: 13, identify_response offset=1360 data=b'X\xddw\x80t\xa1\xb9\xf9:\x1f\t\x98\x0c\x95\x94\xdfJ\xc3\xd9j\nu<\x0bgK\x84R\xc5c\x8e\xa9\x1er\x82\xc0R\xdc\xfaM'
Receive: 22 1042.995729 1042.994655 49: seq: 14, identify_response offset=1400 data=b'\xb4v\x00\xaa\xe6@\xeb\xa5\x84\xc4l~\xf2\xb2\x15\x9c\x80\x8bu\xe97\x11\xb5\xca\x9f6\xbdSr\x02\x8d\xe8\xd3(C\xf4\xe9#\x1e\x00'
Receive: 23 1042.996951 1042.995790 49: seq: 15, identify_response offset=1440 data=b"&\xb1rp\x83_R\xf2\xae\xedu\xf1B\xde\xab\xe6\xd6H\xf8K'@%~\xf5\xb4\xb6\x98\x02.| \x10\n\xa5\xcac~\xec\xf9"
Receive: 24 1042.998092 1042.997010 49: seq: 16, identify_response offset=1480 data=b'@\xfa\xc5\x94\xa9\xd8\xf78\x7fw\x91_\x9f\xff\x8a%\xc1\x1aT\xf4\xc3\xe7\xbb\xfc\xd3\xd5\xcd\x1d>\x1e\xe7\x05vZ:\xd1\xce\xdf\xe2\xdf'
Receive: 25 1042.999211 1042.998142 49: seq: 17, identify_response offset=1520 data=b'h\x16l?\xe8\xedTmg\xe1v\xa9\xb7Wj{\x1dnWz\x1bjZ\xf5\x93\x84\x00\xdc\x00,\x08`\x19\x02l4@L\xf4\xc5'
Receive: 26 1043.000349 1042.999260 49: seq: 18, identify_response offset=1560 data=b'\x07\x04n\r\x00Q\x18\x1f\x90\xb83\x00Dc\x1c\x12\x19\x19\t\x10\x8d!\x89\x91\x91\x00Q\x18\x12\x18\x19\tDZ\x80!\x81\x91\x95\x01'
Receive: 27 1043.001483 1043.000395 49: seq: 19, identify_response offset=1600 data=b'\x11\x18\x85\x04FV\x06D`t@\xa0\x95\x01Q\x18\x1f\x90he@4\xc6\x13"\xc1e\x03%\'\x04\x15\x02MU\xbdT\x7f\x17!'
Receive: 28 1043.002617 1043.001540 49: seq: 1a, identify_response offset=1640 data=b"P\x19(lM?\xab\x10\xae\n\xf4\xa6\xef\x0c/\xb5\xc2\xd7\xbcG\xf43\x0f\xc1\x1e\x02C\xca\xe8'\r\xe1\xca\xc0\x1a\x88\x8b\x18\xd9\xb8"
Receive: 29 1043.003756 1043.002667 49: seq: 1b, identify_response offset=1680 data=b'8\xbfA\xd0\x7f\xde^\xfe\xfc\xf9\xf2\xe6\xe2\xdf\xf8\x14S\xff`\xeb\xe3O\x17\x1f\xd4\x0e>\xbf\xcc\xea\xd5\xcd\xd5\xfd\xd5\xf9G\x85\xdc\n'
Receive: 30 1043.004951 1043.003818 49: seq: 1c, identify_response offset=1720 data=b'\x18\x10]_|\x86i\xdf\xc5s\xd5`\xfc\xf4\xcb59W\x8c\xd5\xd4\xed\xe5\xc5\xe5\xd5\xbf.\xf3_\xaen\xde\xfd\xf4\x0bF\xa9\x18\x17'
Receive: 31 1043.006096 1043.005014 49: seq: 1d, identify_response offset=1760 data=b'\xef.oaQ\x91\tt\x1c\xf8\xd4\xdd\xfd\xf9\xfd]~\xf7\xf9\xfa\xee\xe7\xfc\x87\xf3\xbbKD\xb6\xc0\xe5\xcbO\x9f.o\xf3\x1f~\xba'
Receive: 32 1043.007232 1043.006157 49: seq: 1e, identify_response offset=1800 data=b'\xff1\xbf|\xf7\x1e\xd6\xa3/\xf8\xc8\x1a\xe1\xd9\xa7\x1a\x13\xaa\xad\xa9\x1f\x1cz\x88\xca\xa6\x17\x0cj\x94\x1e\x1b\xa8\xb6\x98F\x95z$j'
Receive: 33 1043.008363 1043.007291 49: seq: 1f, identify_response offset=1840 data=b'\xdf\xa3\x07\x04:YF\xa3\xadz\x8ai\xb7Y\xaa\x11\xaahE\xa3\x07\xf5\xac\xd5V\x1f\xd1%h\xdf\x11\xdd\x82\x96\x1c\xd15h\xb3\x11'
Receive: 34 1043.009495 1043.008412 49: seq: 10, identify_response offset=1880 data=b'\xdd\x83\xd6\xa9\xe2\x11\xe4\x15\x13\x8c\xee/\xaf\x81\xaf\xf3\xfb\xcf\xb7\x8aU CY\xe7\xec\xec?\xf3\xb7\xc9\xfc\xbf_&i\x13\x1e\xf0\xaa'
Receive: 35 1043.010624 1043.009551 49: seq: 11, identify_response offset=1920 data=b'y\x1b%I\xa2X+d6O\x97\x95bn\xa8y6\x8fb\xa0,\xd6\xa7\xb4$\xb4\xd9Sf\xd5\x92\xd0\x06\x1c\xd3\x88$\xa1\x8d\x90'
Receive: 36 1043.011747 1043.010675 49: seq: 12, identify_response offset=1960 data=b'r,r\x98\xd1\x08\x8b&\xc4\x08E\x9b\xc0\xe0\xde\xc33^=L\x15\x07L\x85\xdd\r\xd5\xe5\xd46<\xafE!\xf1\xad\x0f\x06\x81\xa5'
Receive: 37 1043.012951 1043.011794 49: seq: 13, identify_response offset=2000 data=b'\x01+j\xd5ze\xbbB\xaa5\xde\x14\x0f5\xaf(\xb9\x9c\xebM\xf3 \xaeH^\xe7M\x8bU \x03#a\r$`VH)\xb6'
Receive: 38 1043.014079 1043.012998 49: seq: 14, identify_response offset=2040 data=b'\r\xaf\xe0\x19&$\xbbzG\xcd\xd4\x8b\xa2\x81\xed\x81Anb\x98\xdf\x19\x94$T\x870\x95b\xd8\xf3N\xc0\x98R\x85d\x1d$;'
Receive: 39 1043.015208 1043.014127 49: seq: 15, identify_response offset=2080 data=b'\xa0\x8c\n(8\xfb\x97\x01\x8b0\x86\x98\x8b\x1a0\x17\x03\x03\xe4\x86^\xeac\xd1{^\x03+"0\xcd\x90\xaeiU\xd5k\xaa\xdc\x85'
Receive: 40 1043.016404 1043.015326 49: seq: 16, identify_response offset=2120 data=b'\xebx\xc3L\xab\xc7\x9e\x079_P\xf7\x9duE/aK=\x0f\x95a\x99\x8d\x9eC\xd9(\x07eb?\xfe\x8ao\x10\xec\x82\xfeC'
Receive: 41 1043.017541 1043.016463 49: seq: 17, identify_response offset=2160 data=b"wA'bf\xd1IJ\x95\xe6U|\xc1n\xce/>\xd0\x0b\x08g\xe0@\xb7\xf7fm\xee\xaf\xdd^\x9e\xbf\xd3\x1b\x98bq\xe3\x9e"
Receive: 42 1043.018678 1043.017603 49: seq: 18, identify_response offset=2200 data=b'\xb29e\xef+\xaa\x95\x99\xe9a\xbbV<\x95\xacT\x7f\x19(\xfd5AY\x89[\x030\xe4\xb0\xd8s\xa8w\xa9Se6\xb1?\xab'
Receive: 43 1043.019803 1043.018728 49: seq: 19, identify_response offset=2240 data=b",2\xf3\xb0\xec\xdb'n8g\xd8\xe1D\x0fq\xdb\xb6\x1fj;\xa0\xd4k8\xd8\xd7\xaffKT\xe2\xf1\x03\xcab\xe4:\xe8\x92f"
Receive: 44 1043.020957 1043.019881 49: seq: 1a, identify_response offset=2280 data=b'\x15\x1b\x97DN2]4\xc5\x02V\x18\xde\xba~\xf1\x94;\xd1il\xa9wp\xf2`\xf1a@+\xd7\xc5\x0bjne\x04KE\xe9'
Receive: 45 1043.022098 1043.021020 49: seq: 1b, identify_response offset=2320 data=b'5\x97\xb2\x00U\xf2\xa6D\xeb\xd6\xf6\x80\x1bBJ\xb0r\tO\xdcj\xac\xd1\x8d\xe00V\xe3L\x17:\xca\x14\xf8\x13G\x8d`!\xfe'
Receive: 46 1043.023254 1043.022172 49: seq: 1c, identify_response offset=2360 data=b'\xf5\x03\xbb\xa2\xaf\x94Chh\xec\x88^\xa3\xc4\xd5\x03\x85\xc1\xa8\xdf\xd4\xed3\xbdpn\xc0\x8b\nF\xec\xa0_\xab \x85\xdf[\xd4F'
Receive: 47 1043.024406 1043.023321 49: seq: 1d, identify_response offset=2400 data=b'\x03O\x98\x8e*}\xea\xff\xeaU\xa0\xc5-/T\x0eP.\x8f\xae^\x89\r\x14\xc7p\xb3uHp\x90M\xdf\xee\xe1 97\x00\xc2'
Receive: 48 1043.025543 1043.024472 49: seq: 1e, identify_response offset=2440 data=b'/\xbe\xc6\xe1O-JNm\xc5[\xae\x99Ao\x87C\x16\xb0+\xd0A\xf0\x9b\xd2\x9d\x058\x90\n{\x16u\rue\xc9a\xd7\xef'
Receive: 49 1043.026690 1043.025610 49: seq: 1f, identify_response offset=2480 data=b']S\xa5\xecNZ\xc9|\xe3\x04~\xdb\xb9\x03\xe7&\xdd)\x02\x10B\xec\xc7\xbdY3\xce\x01B\xb93\xfdi\xf5\x8d\n\x90\xa9p\xa0'
Receive: 50 1043.027821 1043.026743 49: seq: 10, identify_response offset=2520 data=b'\xe2\x93\xff\xb9\xeaN\xc7\x87\xa1m\xd9\xa6P\xdc\x11g\xd8\x18\xbc\xf7M\t\xe3\x10\x00\xaa\x8e<\xf5\xb1\xee\x95<\xf0$\x94\xd4\x92\xab\xc8'
Receive: 51 1043.028952 1043.027870 49: seq: 11, identify_response offset=2560 data=b'\xad\xbe\xe6\xe5\xe5nl\x1e\x01T\xa8\xd0\x8a\x1f{\xbcu\xe96@Kd\xcbP\xf9\xcb\xb6W\xee\x07%\xb8d\xa5\xd4ztMw\x8a'
Receive: 52 1043.030071 1043.029009 49: seq: 12, identify_response offset=2600 data=b'lmSC0|\x02\x04\x18\xb7u\x8c\xb3\x0ca"\xd4n\x80\xb9\x8bp`OK}[\xb4\xb1T\x7fq\xac(_J\xec\xc6a\\'
Receive: 53 1043.031200 1043.030121 49: seq: 13, identify_response offset=2640 data=b'#\xfd\x96\xb0\x8d[\xa9}\x97(\x97W|\xd6E\x8f\x99%9^\xf1\xa3p\xe9rl\xf0\xeb\x90K\x06\x8e\xef\x1cH\\\x07Mp\xcc'
Receive: 54 1043.032339 1043.031257 49: seq: 14, identify_response offset=2680 data=b'\\P\xa7$\xd1*\xcbT^\xd4\x93\x85J\x8d4YdJS0Y,\x960N\xbe\x00&\xb4\xd0\x06e>{\x7f\xf3\x99\xbd\xff\xf4'
Receive: 55 1043.033476 1043.032400 49: seq: 15, identify_response offset=2720 data=b'\xf1\t\x0bP\x90Q\x07n\xcd\xe9\xc3\xaai\x81M\xba9\xca\x1d\xf3c\xed\x82\x13\x0c\x91\xe6\x03\xe9\xe4H\xe15\xb8\x98\xda\xa1\xe7\xe0\t'
Receive: 56 1043.034595 1043.033535 49: seq: 16, identify_response offset=2760 data=b"\xa6.\xdb\x1efz4\x8ex\xea\x14^nz\x01s&.\xe1\x1d\x98\xa9\xa8\x91\xe0\xdek'\x89\xfd\xfe\t)O\xb7\x93\xd5\x93N5"
Receive: 57 1043.035722 1043.034653 49: seq: 17, identify_response offset=2800 data=b'\xa2q\xcd\xa8X\xbd\x93!X\xe4\xb6s\x81T\xa8/\x1b\xaa\xd7\xf6-V\xf5\x11=\xc8\xbd\xfb\xd1@M\xfb_\x82y\xdbn\xfe\tF'
Receive: 58 1043.036908 1043.035773 49: seq: 18, identify_response offset=2840 data=b'^\xd3>\x9f\xa0\xde\xb5{\x08o\x87\x97\xf8\xddy<\x9f\xb9\xb6un\xb4\xe3\xb5\xbd\xd4\xdc\x083r\xada\x0f\xd6\xf6\x88\xe9\x19~\x8a'
Receive: 59 1043.038022 1043.036957 49: seq: 19, identify_response offset=2880 data=b'\xb0X\xe59\xa1\xb0\xb0\x1e"\xb9\xacS\xd7J>h\xeay\x0c\x98\x86\xb1/\x90\xd4k\x03k\x99\x98\x0e\xc7X\x96\xaa\xd7\x8d\xec\xe1\xe3'
Receive: 60 1043.039136 1043.038072 49: seq: 1a, identify_response offset=2920 data=b'\x1d\xc8\xf4?\xa5\x9c`\xfe&w\x86\xaa\xaf~\x9ct\x12$\xa6\xd7\xa6\xe4A#\xf9\x04\xb3\xa1\x7ff\xd2\xefs\xbd-\xdd\x913\xefu'
Receive: 61 1043.040266 1043.039184 49: seq: 1b, identify_response offset=2960 data=b'\xea\x0b\xf9(\x1fF\x15\xe6+\xea\xb2B\x81\x041"7\xb9EjsQ\xbd(\x17\x1dM[\xf8\xb8\x0c\xb3c\xcd\xa2\x03M\xfa\rA'
Receive: 62 1043.041401 1043.040324 49: seq: 1c, identify_response offset=3000 data=b'_\xa5Q6\xed\xce\xfc\xa9\t\xc4\xaa\xb8\xed\x07U\x18\xae\x13*u\xa53]9\xee\xf5\x8f\xfcM\xfbN\xec:.A;\x86Z\xf6\x02'
Receive: 63 1043.042529 1043.041450 49: seq: 1d, identify_response offset=3040 data=b'\xf1.\x82\xd83\xd5\xe9\xd1\x900R\xa8\xd7\x8a^\xb8.\xcd!\x0f\xd8\x9f!~\xd7~\xe7\xc5\x19\x1b\x04\x02\xd3@9\xfe\x89\xc2\xb3='
Receive: 64 1043.043649 1043.042578 49: seq: 1e, identify_response offset=3080 data=b'L<\xf4\t\x89\xd1W\xdbq\x12*\xf0\xad\xa5\xff?\n\x04\xbf\xa7\xf9i\x14\x9f\xceO\x92t}\xb2-\x92t\x9e\xa4\xe9:\x9d}\xf9'
Receive: 65 1043.044220 1043.043697 14: seq: 1f, identify_response offset=3120 data=b'\x1f\xdc\x00}\x1b'
Receive: 66 1043.044908 1043.044338 9: seq: 10, identify_response offset=3125 data=b''
Receive: 67 1043.046751 1043.046596 14: seq: 11, canbus_id canbus_uuid=b'\x9fQ\x0b\xf96a' canbus_nodeid=5
Receive: 68 1043.047338 1043.047171 11: seq: 12, uptime high=0 clock=21905128
Receive: 69 1043.097927 1043.097752 10: seq: 13, clock clock=22512152
Receive: 70 1043.148534 1043.148367 10: seq: 14, clock clock=23119563
Receive: 71 1043.199125 1043.198933 10: seq: 15, clock clock=23726616
Receive: 72 1043.249747 1043.249516 10: seq: 16, clock clock=24333375
Receive: 73 1043.300460 1043.300286 10: seq: 17, clock clock=24942620
Receive: 74 1043.351143 1043.350889 10: seq: 18, clock clock=25550870
Receive: 75 1043.401753 1043.401566 10: seq: 19, clock clock=26158003
Receive: 76 1043.452312 1043.452154 10: seq: 1a, clock clock=26765050
Receive: 77 1043.453181 1043.452971 10: seq: 1b, clock clock=26775422
Receive: 78 1043.464183 1043.464006 10: seq: 1c, config is_config=0 crc=0 is_shutdown=0 move_count=0
Receive: 79 1043.469721 1043.469013 15: seq: 1a, config is_config=1 crc=3237245062 is_shutdown=0 move_count=1024
Receive: 80 1043.486068 1043.482136 18: seq: 1b, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x08!\x9e'
Receive: 81 1043.489087 1043.486733 8: seq: 1c, tmcuart_response oid=4 read=b''
Receive: 82 1043.493385 1043.489459 18: seq: 1d, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02(\xa1\xda'
Receive: 83 1043.496392 1043.494042 8: seq: 1e, tmcuart_response oid=4 read=b''
Receive: 84 1043.500689 1043.496752 18: seq: 1f, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02H\xa1\xfd'
Receive: 85 1043.503686 1043.501337 8: seq: 10, tmcuart_response oid=4 read=b''
Receive: 86 1043.508014 1043.504044 18: seq: 11, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02h!\xb9'
Receive: 87 1043.511004 1043.508661 8: seq: 12, tmcuart_response oid=4 read=b''
Receive: 88 1043.515278 1043.511363 18: seq: 13, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x88!\xee'
Receive: 89 1043.518270 1043.515925 8: seq: 14, tmcuart_response oid=4 read=b''
Receive: 90 1043.522550 1043.518628 18: seq: 15, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xa8\xa1\xaa'
Receive: 91 1043.525583 1043.523244 8: seq: 16, tmcuart_response oid=4 read=b''
Receive: 92 1043.529885 1043.525955 18: seq: 17, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xc8\xa1\x8d'
Receive: 93 1043.532888 1043.530537 8: seq: 18, tmcuart_response oid=4 read=b''
Receive: 94 1043.537195 1043.533259 18: seq: 19, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xe8!\xc9'
Receive: 95 1043.540201 1043.537849 8: seq: 1a, tmcuart_response oid=4 read=b''
Receive: 96 1043.544493 1043.540569 18: seq: 1b, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x08"\xba'
Receive: 97 1043.557729 1043.557601 8: seq: 1c, stepper_position oid=7 pos=0
Receive: 98 1043.562117 1043.558201 18: seq: 1d, tmcuart_response oid=4 read=b'\n\xfaO-\x80\x00\x02\x08\xa1\xa2'
Receive: 99 1043.566798 1043.566511 11: seq: 1e, shutdown clock=28137734 static_string_id=Command request
Attempting MCU 'ebb' reset command
Attempting MCU 'mcu' reset command
b'Got error -1 in can read: (100)Network is down'
webhooks client 140736274317072: Disconnected
Restarting printer
Start printer at Tue Nov 19 18:58:53 2024 (1732013933.5 1179.9)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.6
stealthchop_threshold = 0

[stepper_y]
step_pin = PE5
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = PF0
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.6
stealthchop_threshold = 0

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256
endstop_pin = probe:z_virtual_endstop
position_max = 335
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
webhooks client 140736258593488: New connection
webhooks client 140736258593488: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Sending MCU 'ebb' printer configuration...
Configured MCU 'ebb' (1024 moves)
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (25.0, 25.0)    | (25.0, 25.0)
  1   | (103.8, 25.0)   | (103.8, 25.0)
  2   | (182.5, 25.0)   | (182.5, 25.0)
  3   | (261.2, 25.0)   | (261.2, 25.0)
  4   | (340.0, 25.0)   | (340.0, 25.0)
  5   | (340.0, 103.8)  | (340.0, 103.8)
  6   | (261.2, 103.8)  | (261.2, 103.8)
  7   | (182.5, 103.8)  | (182.5, 103.8)
  8   | (103.8, 103.8)  | (103.8, 103.8)
  9   | (25.0, 103.8)   | (25.0, 103.8)
  10  | (25.0, 182.5)   | (25.0, 182.5)
  11  | (103.8, 182.5)  | (103.8, 182.5)
  12  | (182.5, 182.5)  | (182.5, 182.5)
  13  | (261.2, 182.5)  | (261.2, 182.5)
  14  | (340.0, 182.5)  | (340.0, 182.5)
  15  | (340.0, 261.2)  | (340.0, 261.2)
  16  | (261.2, 261.2)  | (261.2, 261.2)
  17  | (182.5, 261.2)  | (182.5, 261.2)
  18  | (103.8, 261.2)  | (103.8, 261.2)
  19  | (25.0, 261.2)   | (25.0, 261.2)
  20  | (25.0, 340.0)   | (25.0, 340.0)
  21  | (103.8, 340.0)  | (103.8, 340.0)
  22  | (182.5, 340.0)  | (182.5, 340.0)
  23  | (261.2, 340.0)  | (261.2, 340.0)
  24  | (340.0, 340.0)  | (340.0, 340.0)
TMC stepper_x failed to init: Unable to write tmc spi 'stepper_x' register GLOBALSCALER
TMC stepper_y failed to init: Unable to write tmc spi 'stepper_y' register GLOBALSCALER
TMC stepper_z failed to init: Unable to write tmc spi 'stepper_z' register GLOBALSCALER
TMC stepper_z1 failed to init: Unable to write tmc spi 'stepper_z1' register GLOBALSCALER
TMC stepper_z2 failed to init: Unable to write tmc spi 'stepper_z2' register GLOBALSCALER
TMC stepper_z3 failed to init: Unable to write tmc spi 'stepper_z3' register GLOBALSCALER
Starting heater checks for heater_bed
Starting heater checks for extruder
autotune_tmc set stepper_x pwm_freq=2
Unhandled exception during ready callback
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 314, in _connect
    cb()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 169, in handle_ready
    self.tune_driver()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 220, in tune_driver
    self._set_pwmfreq()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 286, in _set_pwmfreq
    self._set_driver_field('pwm_freq', pwm_freq)
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 249, in _set_driver_field
    tmco.mcu_tmc.set_register(register, val, None)
  File "/home/pi/klipper/klippy/extras/tmc2130.py", line 403, in set_register
    raise self.printer.command_error(
gcode.CommandError: Unable to write tmc spi 'stepper_x' register PWMCONF
Transition to shutdown state: Internal error during ready callback: Unable to write tmc spi 'stepper_x' register PWMCONF
Dumping gcode input 0 blocks
Dumping 5 requests for client 140736258593488
Received 1180.422782: b'{"id": 140732428125712, "method": "info", "params": {"client_info": {"program": "Moonraker", "version": "v0.9.3-1-g4e00a07"}}}'
Received 1180.423310: b'{"id": 140732532325776, "method": "list_endpoints", "params": {}}'
Received 1180.673948: b'{"id": 140732454788816, "method": "info", "params": {}}'
Received 1180.924976: b'{"id": 140732454597776, "method": "info", "params": {}}'
Received 1181.175643: b'{"id": 140732454147792, "method": "info", "params": {}}'
gcode state: absolute_coord=True absolute_extrude=True base_position=[0.0, 0.0, 0.0, 0.0] last_position=[0.0, 0.0, 0.0, 0.0] homing_position=[0.0, 0.0, 0.0, 0.0] speed_factor=0.016666666666666666 extrude_factor=1.0 speed=25.0
Reactor garbage collection: (1180.698013352, 0.0, 0.0)
MCU 'mcu' shutdown: Command request
clocksync state: mcu_freq=400000000 last_clock=602987676 clock_est=(1180.260 468202471 400014110.195) min_half_rtt=0.000072 min_rtt_time=1180.495 time_avg=1180.260(0.017) clock_avg=468202471.455(6686008.950) pred_variance=117956243499.434
Dumping serial stats: bytes_write=2300 bytes_read=5379 bytes_retransmit=0 bytes_invalid=0 send_seq=175 receive_seq=175 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 1180.182048 1180.182048 9: seq: 1b, identify offset=2360 count=40
Sent 1 1180.182494 1180.182494 9: seq: 1c, identify offset=2400 count=40
Sent 2 1180.182899 1180.182899 9: seq: 1d, identify offset=2440 count=40
Sent 3 1180.183284 1180.183284 9: seq: 1e, identify offset=2480 count=40
Sent 4 1180.183667 1180.183667 9: seq: 1f, identify offset=2520 count=40
Sent 5 1180.184095 1180.184095 9: seq: 10, identify offset=2560 count=40
Sent 6 1180.184541 1180.184541 9: seq: 11, identify offset=2600 count=40
Sent 7 1180.184919 1180.184919 9: seq: 12, identify offset=2640 count=40
Sent 8 1180.185353 1180.185353 9: seq: 13, identify offset=2680 count=40
Sent 9 1180.185730 1180.185730 9: seq: 14, identify offset=2720 count=40
Sent 10 1180.186108 1180.186108 9: seq: 15, identify offset=2760 count=40
Sent 11 1180.186533 1180.186533 9: seq: 16, identify offset=2800 count=40
Sent 12 1180.186911 1180.186911 9: seq: 17, identify offset=2840 count=40
Sent 13 1180.187288 1180.187288 9: seq: 18, identify offset=2880 count=40
Sent 14 1180.187665 1180.187665 9: seq: 19, identify offset=2920 count=40
Sent 15 1180.188037 1180.188037 9: seq: 1a, identify offset=2960 count=40
Sent 16 1180.188444 1180.188444 9: seq: 1b, identify offset=3000 count=40
Sent 17 1180.188825 1180.188825 9: seq: 1c, identify offset=3040 count=40
Sent 18 1180.189203 1180.189203 9: seq: 1d, identify offset=3080 count=40
Sent 19 1180.189633 1180.189633 9: seq: 1e, identify offset=3120 count=40
Sent 20 1180.191706 1180.191706 6: seq: 1f, get_canbus_id
Sent 21 1180.191969 1180.191969 6: seq: 10, get_uptime
Sent 22 1180.242294 1180.242294 6: seq: 11, get_clock
Sent 23 1180.292600 1180.292600 6: seq: 12, get_clock
Sent 24 1180.342895 1180.342895 6: seq: 13, get_clock
Sent 25 1180.393200 1180.393200 6: seq: 14, get_clock
Sent 26 1180.444472 1180.444472 6: seq: 15, get_clock
Sent 27 1180.494772 1180.494772 6: seq: 16, get_clock
Sent 28 1180.545078 1180.545078 6: seq: 17, get_clock
Sent 29 1180.595386 1180.595386 6: seq: 18, get_clock
Sent 30 1180.596547 1180.596547 6: seq: 19, get_clock
Sent 31 1181.104692 1181.104692 6: seq: 1a, get_config
Sent 32 1181.105543 1181.105543 7: seq: 1b, allocate_oids count=29
Sent 33 1181.105612 1181.105612 9: seq: 1c, config_spi oid=0 pin=PD6 cs_active_high=0
Sent 34 1181.106079 1181.106079 55: seq: 1d, config_spi oid=1 pin=PD5 cs_active_high=0, config_spi oid=2 pin=PD2 cs_active_high=0, config_spi oid=3 pin=PA15 cs_active_high=0, config_spi oid=4 pin=PA9 cs_active_high=0, config_spi oid=5 pin=PA10 cs_active_high=0, spi_set_software_bus oid=0 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, spi_set_software_bus oid=1 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, spi_set_software_bus oid=2 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 35 1181.106079 1181.106079 60: seq: 1e, spi_set_software_bus oid=3 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, spi_set_software_bus oid=4 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, spi_set_software_bus oid=5 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, config_analog_in oid=18 pin=PB0, config_digital_out oid=19 pin=PF6 value=0 default_value=0 max_duration=2000000000, set_digital_out_pwm_cycle oid=19 cycle_ticks=40000000, config_digital_out oid=20 pin=PA1 value=0 default_value=0 max_duration=0
Sent 36 1181.106079 1181.106079 60: seq: 1f, set_digital_out_pwm_cycle oid=20 cycle_ticks=20000000, config_digital_out oid=21 pin=PA4 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=21 cycle_ticks=20000000, config_analog_in oid=22 pin=PA7, config_neopixel oid=6 pin=PF12 data_size=150 bit_max_ticks=1600 reset_min_ticks=20000, config_stepper oid=7 step_pin=PC14 dir_pin=PC13 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=23 pin=PE6 value=1 default_value=1 max_duration=0, config_endstop oid=8 pin=PC15 pull_up=0, config_trsync oid=9, config_stepper oid=10 step_pin=PE5 dir_pin=PE4 invert_step=4294967295 step_pulse_ticks=0
Sent 37 1181.106599 1181.106599 60: seq: 10, config_digital_out oid=24 pin=PE3 value=1 default_value=1 max_duration=0, config_endstop oid=11 pin=PF0 pull_up=0, config_trsync oid=12, config_stepper oid=13 step_pin=PG9 dir_pin=PG10 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=25 pin=PG13 value=1 default_value=1 max_duration=0, config_trsync oid=14, config_stepper oid=15 step_pin=PG11 dir_pin=PD7 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=26 pin=PG12 value=1 default_value=1 max_duration=0, config_stepper oid=16 step_pin=PB4 dir_pin=PB3 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=27 pin=PB5 value=1 default_value=1 max_duration=0
Sent 38 1181.113530 1181.113530 63: seq: 11, config_stepper oid=17 step_pin=PG15 dir_pin=PB6 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=28 pin=PG14 value=1 default_value=1 max_duration=0, finalize_config crc=924824692, query_analog_in oid=18 clock=1272000000 sample_ticks=400000 sample_count=8 rest_ticks=120000000 min_value=14024 max_value=32038 range_check_count=4, queue_digital_out oid=19 clock=886335670 on_ticks=0, queue_digital_out oid=20 clock=886342241 on_ticks=0
Sent 39 1181.113927 1181.113927 34: seq: 12, queue_digital_out oid=21 clock=886345634 on_ticks=0, query_analog_in oid=22 clock=1288000000 sample_ticks=400000 sample_count=8 rest_ticks=120000000 min_value=0 max_value=32760 range_check_count=4, get_config
Sent 40 1181.120724 1181.120724 21: seq: 13, spi_send oid=0 data=b"\x8b\x00\x00\x00'", spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 41 1181.121070 1181.121070 21: seq: 14, spi_send oid=0 data=b"\x8b\x00\x00\x00'", spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 42 1181.121450 1181.121450 21: seq: 15, spi_send oid=0 data=b"\x8b\x00\x00\x00'", spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 43 1181.121784 1181.121784 21: seq: 16, spi_send oid=0 data=b"\x8b\x00\x00\x00'", spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 44 1181.122109 1181.122109 21: seq: 17, spi_send oid=0 data=b"\x8b\x00\x00\x00'", spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 45 1181.122526 1181.122526 13: seq: 18, spi_send oid=1 data=b"\x8b\x00\x00\x00'"
Sent 46 1181.122562 1181.122562 13: seq: 19, spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 47 1181.122904 1181.122904 21: seq: 1a, spi_send oid=1 data=b"\x8b\x00\x00\x00'", spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 48 1181.123230 1181.123230 21: seq: 1b, spi_send oid=1 data=b"\x8b\x00\x00\x00'", spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 49 1181.123617 1181.123617 21: seq: 1c, spi_send oid=1 data=b"\x8b\x00\x00\x00'", spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 50 1181.123952 1181.123952 21: seq: 1d, spi_send oid=1 data=b"\x8b\x00\x00\x00'", spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 51 1181.124332 1181.124332 13: seq: 1e, spi_send oid=2 data=b'\x8b\x00\x00\x002'
Sent 52 1181.124370 1181.124370 13: seq: 1f, spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 53 1181.124721 1181.124721 21: seq: 10, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 54 1181.125057 1181.125057 21: seq: 11, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 55 1181.125484 1181.125484 21: seq: 12, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 56 1181.125817 1181.125817 21: seq: 13, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 57 1181.126191 1181.126191 13: seq: 14, spi_send oid=3 data=b'\x8b\x00\x00\x002'
Sent 58 1181.126227 1181.126227 13: seq: 15, spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 59 1181.126630 1181.126630 21: seq: 16, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 60 1181.126959 1181.126959 21: seq: 17, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 61 1181.127284 1181.127284 21: seq: 18, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 62 1181.127612 1181.127612 21: seq: 19, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 63 1181.127983 1181.127983 13: seq: 1a, spi_send oid=4 data=b'\x8b\x00\x00\x002'
Sent 64 1181.128018 1181.128018 13: seq: 1b, spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 65 1181.128445 1181.128445 21: seq: 1c, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 66 1181.128770 1181.128770 21: seq: 1d, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 67 1181.129095 1181.129095 21: seq: 1e, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 68 1181.129496 1181.129496 21: seq: 1f, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 69 1181.129877 1181.129877 13: seq: 10, spi_send oid=5 data=b'\x8b\x00\x00\x002'
Sent 70 1181.129913 1181.129913 13: seq: 11, spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 71 1181.130260 1181.130260 21: seq: 12, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 72 1181.130615 1181.130615 21: seq: 13, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 73 1181.130942 1181.130942 21: seq: 14, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 74 1181.131267 1181.131267 21: seq: 15, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 75 1181.195220 1181.195220 15: seq: 16, neopixel_update oid=6 pos=0 data=b'\xff\xff\xff\xff\xff\xff'
Sent 76 1181.195377 1181.195377 45: seq: 17, neopixel_update oid=6 pos=6 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=22 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 77 1181.195377 1181.195377 45: seq: 18, neopixel_update oid=6 pos=38 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=54 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 78 1181.195377 1181.195377 45: seq: 19, neopixel_update oid=6 pos=70 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=86 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 79 1181.195791 1181.195791 47: seq: 1a, neopixel_update oid=6 pos=102 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=118 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 80 1181.201747 1181.201747 28: seq: 1b, neopixel_update oid=6 pos=134 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_send oid=6
Sent 81 1181.204017 1181.204017 7: seq: 1c, stepper_get_position oid=7
Sent 82 1181.204275 1181.204275 21: seq: 1d, spi_send oid=0 data=b'j\x00\x00\x00\x00', spi_transfer oid=0 data=b'j\x00\x00\x00\x00'
Sent 83 1181.204709 1181.204709 7: seq: 1e, stepper_get_position oid=10
Sent 84 1181.204944 1181.204944 21: seq: 1f, spi_send oid=1 data=b'j\x00\x00\x00\x00', spi_transfer oid=1 data=b'j\x00\x00\x00\x00'
Sent 85 1181.205289 1181.205289 7: seq: 10, stepper_get_position oid=13
Sent 86 1181.205499 1181.205499 21: seq: 11, spi_send oid=2 data=b'j\x00\x00\x00\x00', spi_transfer oid=2 data=b'j\x00\x00\x00\x00'
Sent 87 1181.205839 1181.205839 7: seq: 12, stepper_get_position oid=15
Sent 88 1181.206047 1181.206047 21: seq: 13, spi_send oid=3 data=b'j\x00\x00\x00\x00', spi_transfer oid=3 data=b'j\x00\x00\x00\x00'
Sent 89 1181.206438 1181.206438 7: seq: 14, stepper_get_position oid=16
Sent 90 1181.206654 1181.206654 21: seq: 15, spi_send oid=4 data=b'j\x00\x00\x00\x00', spi_transfer oid=4 data=b'j\x00\x00\x00\x00'
Sent 91 1181.207009 1181.207009 7: seq: 16, stepper_get_position oid=17
Sent 92 1181.207224 1181.207224 21: seq: 17, spi_send oid=5 data=b'j\x00\x00\x00\x00', spi_transfer oid=5 data=b'j\x00\x00\x00\x00'
Sent 93 1181.213099 1181.213099 13: seq: 18, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e'
Sent 94 1181.213141 1181.213141 13: seq: 19, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 95 1181.213543 1181.213543 21: seq: 1a, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 96 1181.213874 1181.213874 21: seq: 1b, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 97 1181.214204 1181.214204 21: seq: 1c, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 98 1181.214621 1181.214621 21: seq: 1d, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 99 1181.215706 1181.215706 6: seq: 1e, emergency_stop
Dumping receive queue 100 messages
Receive: 0 1180.175184 1180.174865 49: seq: 1a, identify_response offset=1640 data=b'\xb0\x80\x9f\xd9xVn\xf0\x11d\xfb\x80\x9b|\x8cG\xf31N\xdf\xe0\xd67\xc8\xfeFJ\xb0Z~B\x9a\xab\x87\xdb\xeb\x9b\xb5\x84l'
Receive: 1 1180.175572 1180.175241 49: seq: 1b, identify_response offset=1680 data=b'\xab\x9f~^\xfd\x98|xX\xff\x82\xf7\xa9\xfe\x9dM\xeeVO\xb0^t\x87\xc0\xdf\xcf\xfc\xe0\xed\r\x16\xdf\xffzG\xf7\xeec\xa2\x7f'
Receive: 2 1180.175947 1180.175629 49: seq: 1c, identify_response offset=1720 data=b"X\xaf\xd6\xb7\xff^'\xbf\xde~\xba\xfe\xf9Wt \x1f\x077\xeb\x07\x18\x94\x87\x80\xcd\xf0\x0c\xd7p\x7f\xd7x}\x83\xc9\xa7\xcd\x95\xbc"
Receive: 3 1180.176389 1180.176005 49: seq: 1d, identify_response offset=1760 data=b'\x1f<\xfbR\x8a>\x98\xce\xdaw\xf0\x80R\x8a\x08\xeb?\xe2\xfa\xcd\xe3\xf2q\x93l\x9e\xee6\xbf$W\xcb\xcd\x1a\x0f\x12\xe3\xf0\xfa\xfe'
Receive: 4 1180.176764 1180.176446 49: seq: 1e, identify_response offset=1800 data=b'~\xfd\x90\\\xfd\xfc\xf81Y\x93\\_\xf0\xed\xd0\xc3kF\xbe\xb7e\xb5N\xe1h\xd5t\x0c\x95\xf0\xb9c\x97\x84\xa8\x07f\xe8\xcb!'
Receive: 5 1180.177138 1180.176820 49: seq: 1f, identify_response offset=1840 data=b'\xc7\xe6\x02\xd8\x01"\x9bv\x87\xc7\xf5\x1d\x1ca\xf9\xf8\xf4 O\x05!\xf6~9\x9d\\\xfegz\xe6\xc5\xff\x85\xce\x15v +Po'
Receive: 6 1180.177573 1180.177195 49: seq: 10, identify_response offset=1880 data=b"\x85\xbd\xc0W\xbdk\xec\x85s\xd5[c\x0f\xa08\xf5>`o\xae\xb9\xdc`o\xa1\xb9|\x94<=\xc9\xe6\xcb 3\xc0\x1bU\xd6'"
Receive: 7 1180.177952 1180.177630 49: seq: 11, identify_response offset=1920 data=b'\xbd \x08\xa4|\xa9\x88\xa6\xe1,\x97\xa2u%\x8f\xa6\x9e\xff\x0c\xe7T\xab\x94V\xc8e<9\x86\xde\xe1\xcb\x96/\x19(\x83\xa7\x90\x8d'
Receive: 8 1180.178385 1180.178008 49: seq: 12, identify_response offset=1960 data=b'\xa6MI$\x94/)2U\xca\x11h\x953\xd9\x02\xfb\x9b\xe3\x06\x00S\n\x0cg-<\\\xe5SLj\x8c\xc9@\xb3%$J\x85'
Receive: 9 1180.178762 1180.178440 49: seq: 13, identify_response offset=2000 data=b'\xb2e)k\x8bL?\xearJ\xbe\xcb\xaaF$\xc3\xc0\x9aX\x05I\x84\xa5B\x14\xbb\x8a\xe7\xf0\x94(\x04\xbb\xbd\xa6W\xf4*\xad`'
Receive: 10 1180.179138 1180.178819 49: seq: 14, identify_response offset=2040 data=b'\xbac\x10_\x19\xe6(\x06i\x95r)\x93a\x92\xbd\xee\x0bhS\xb8\x13\xac\x81\x80\r\x07"\x10\x00k\xff\xd6!\x90`\xc89-\x81'
Receive: 11 1180.179574 1180.179205 49: seq: 15, identify_response offset=2080 data=b's\xda1`\x9e\xaa#Q-\x86\xde\xa4\x8aX\x1e\x02C%\xbd\x9ciTb\x0e\t\xd9`;^1]\xae0\xebA\xa7+\xaa \xb3'
Receive: 12 1180.179956 1180.179633 49: seq: 16, identify_response offset=2120 data=b"&m\x05L\xc9'\x8e\xd4\x99\x9eh9@\x1f\xd1\xc9:\xf2\xc7\xdf\x10Gc%\xef_\xaa\x927P\x1c\xf3\xceCBK\xb7\xfe\x8a}"
Receive: 13 1180.180386 1180.180013 49: seq: 17, identify_response offset=2160 data=b"Z\xae~$\x14\x8f=\xf0\x96\x87G=6u\xc7\x1e\xd6\xcbk5\x81i\x02'\x1e)#Q\x06\xba%\xbc\xc7\xc0\xdf\x99\xda\x95\xdeW"
Receive: 14 1180.180763 1180.180441 49: seq: 18, identify_response offset=2200 data=b'zB\x17hm\x9d\x99\xf0\x18\x81\x0bM\xa5J\xe5\xd2D\xec\x18\x90\xa1\xe8\xe9\x81\x03\x98\xa32\x8c\x9e<\xd4/\\K\xcf\xb0R\x87\x99'
Receive: 15 1180.181143 1180.180819 49: seq: 19, identify_response offset=2240 data=b"\xc7N\x9b\xba\x9e\xa9\xe4\xd1\x9b\xf9h^\xbd\xfe\xcc\xfe\x81#\x13\\\x18#\xff\xf0\x1c\x81\xb0\x00'\xbd\x00\x13\xb5;\xa8\x93\x1efJg"
Receive: 16 1180.181577 1180.181198 49: seq: 1a, identify_response offset=2280 data=b'\\!\xf7l_4\x8a[\xe8\xc81\x00\xde.\r\xdc\xcc]\xfa\x86\xb77\xd7:$pu\x07o\xf0\x14\xae\x93W\x19Z\xb8\xb2\t\x9c'
Receive: 17 1180.181977 1180.181658 49: seq: 1b, identify_response offset=2320 data=b'(\x84\x00K\x17\xf0T\xcb\xfb\x12K?\xb0\x18Q%S\t[\x9a\x03\x7f\xe1\xa8|\x04\x94__\xb0O\xdb\\:\x85\xa2\xc6\xca\xde\x1d'
Receive: 18 1180.182433 1180.182048 49: seq: 1c, identify_response offset=2360 data=b"j\\\x02m\x06\xadv[\xd6\xaf\x84\xd4?\x81'\xa5\x8c\xc4Ao\x95\xa1\x0e?C\xb8\x13h\x1fr\x02\xe3\x9d;QT\r\xe1Y\xaa"
Receive: 19 1180.182821 1180.182494 49: seq: 1d, identify_response offset=2400 data=b'r\xca\xa9\nOj\x87c\x99N\x8c\x835m\xbd\x03\x9b8\xc0\xd1S\x94m\x0b\x80\x10N\t\xba\xe6\x18\x07\xf0\xbd\xfe\xc0\x95P\xe8\xf9'
Receive: 20 1180.183220 1180.182899 49: seq: 1e, identify_response offset=2440 data=b'`\xae-l\x83\xaa\x06kBg\xc1\x8f\x1a\x1bCp\xa4\x1d\xf6Z\x94%\xe0\xa4\x0c\xf8\rj\xb1\x84\xfc\xecJ\xa3\xa1o\xac\xc0o\x15'
Receive: 21 1180.183603 1180.183284 49: seq: 1f, identify_response offset=2480 data=b'\x1bpt\xbaCy\x00\xa4(\x0e\xfdA\x8fi\x7f\x00\xf17\xba\xde*\xbf\xb9\x003\x19\x1ad\xacr?\xbflT\xac\xe8\xea\x9amS'
Receive: 22 1180.184006 1180.183667 49: seq: 10, identify_response offset=2520 data=b')\x1dI\x86\x85\xaeG\xd7\xa4Pe@(+\xccT\x97y\x94\xfa\xc0\x95\x00\x11\x05\x97\x81\xfa\xa9\x12}\x830\x11v\xc4\xb2\xbe\xb4o'
Receive: 23 1180.184477 1180.184095 49: seq: 11, identify_response offset=2560 data=b'\xfct"?[\xc1\xe3\xbf\xaf>\x03\x0f\x08\x8a9}\xd5p\xc6\x85\x9d\x80\x8b"c\x07\x88+\xeaV\xfa\'`M\xc12\xa1\xae\xd2V'
Receive: 24 1180.184861 1180.184541 49: seq: 12, identify_response offset=2600 data=b'\x97)\xfc\xd5U\t\x11\xf3\x05\x18\xa4\xcf\xa5\x0e\x84FR8\x80\xfc\\fB\xab\xfa\x88\x96S-S`\x81\t\xc3\x1c]q\x06\xd38'
Receive: 25 1180.185296 1180.184919 49: seq: 13, identify_response offset=2640 data=b'\x15\x1a\xa8-\xbd_\x8aZ\xa6-\xa6\x8e\xe04\x88E\xfd\x925b\xcdZE`\xb2u\x84\xee\x90\x99\x8e\xea\xba\x98\x9a\x00\xdf\x04\xde<'
Receive: 26 1180.185671 1180.185353 49: seq: 14, identify_response offset=2680 data=b'\x8ad\xd6S\x9dXfE\xea\xc4\x91\xbc,\xe8\xc4\xf1,B\x1c\x00\x9c\xca"\x03\xe5\xc0\xfa\xc9\xcd\xa7\'vs\xff\xd3\x0bb-\xd0F'
Receive: 27 1180.186051 1180.185730 49: seq: 15, identify_response offset=2720 data=b'\x03\x1e\xce\xe9[\xa1\xae\xea\x0c\n\x14\xd23\x93S/\xe0s\x0c\x8c\xfa\x9b\xdf`I\xea\xd4l\x98\x9c\xa1\x17\xce9f2S\xf1d\xaa'
Receive: 28 1180.186476 1180.186108 49: seq: 16, identify_response offset=2760 data=b'\xd5\xf7\xb8\xea\x02\x1e#j\x00S(\x0e\xe1\x1e\x98\xb8\xe8ml\x9f \xe7\x81\xf9\xa4\x07\x19PUH\xe5+E\xd6VqL_\xa6|'
Receive: 29 1180.186856 1180.186533 49: seq: 17, identify_response offset=2800 data=b'\xfaA\xdcH\xccc\x1cO!\x8b\xf5\xb2|\xf4-Q\xd5\x12\xd5H\x9c\xfd\xd1\x14uE[\x80\x85\x9b\x02\xf59\x06a]\x11\x1e\xb0\xde'
Receive: 30 1180.187232 1180.186911 49: seq: 18, identify_response offset=2840 data=b'\xd7\x07\x88t\xc7\x9b\xb8\x05g\\\x1f\xd9Jl\xa2o\xc7\xa9\xe4\xc8\xbeV\xa6g\xab\x9d\x0e\xad){\xd2\xcb\xf2\x02i\x11?Z\xa5\xb0'
Receive: 31 1180.187609 1180.187288 49: seq: 19, identify_response offset=2880 data=b'1\xe0!\xbd,B[\x1d=\xaaS9\x02\xe8\x1a\xa8\xab\x90\xd0\xa9l*\x9d\xe8G{\x9fe\xb2|\x8b\xe2\xe1{\x14\x8e\xe9~\x1d8'
Receive: 32 1180.187982 1180.187665 49: seq: 1a, identify_response offset=2920 data=b'\xc7tN\x8e\x0b(\x0f\x1e\xe3\xee\xe3X`\xa6\xad2>\xaa\x8d\x9ecbt\xd7\x0cJX\xb6\\\xa3\x8aL\xfa\tJ\xa5\x0e\x97\xe5s'
Receive: 33 1180.188388 1180.188037 49: seq: 1b, identify_response offset=2960 data=b'/\xa3xN\x85C\xc0K\x10\r\x12\x9df\x842\x17Y^\xb1\x01RW:O\xeb0:U\xff8\xbaI\xb7\xc6\xe5^\xa9\x17\r\x0b'
Receive: 34 1180.188768 1180.188444 49: seq: 1c, identify_response offset=3000 data=b'\x0e\x7fi\x02\xbeD\xafm\'q\xe2" ,+\xac\xe9\x8a\xfe\xa0\xfe\x88\xdf\x95\xef\xf8\xb6\x880\xaa0P\x15\xba@\xbe\xf1(\xf6\x0c'
Receive: 35 1180.189148 1180.188825 49: seq: 1d, identify_response offset=3040 data=b'\xef\xf4dH\xe8)\xda\xab\x8b\x8em\xe1\xe1X\x06,9\x90\xbc\x0b\xb7\x98`\x8d\r\x02\x81\xae\t\x9c\xae\xba;\xb6\x87\xb9\x87\xbe\x8a0'
Receive: 36 1180.189576 1180.189203 49: seq: 1e, identify_response offset=3080 data=b'\xfa\x10\xd9\x0fB\x05\xbe\xb3\xd4\x7f\xb1\x80\xe0\xf72\xbd\xf0\xfc\x8b\xe9y\x10.\xcewi\x10N\x830\\\x84\x93/\xff\x03u\x9f\x0c\xd8'
Receive: 37 1180.189819 1180.189633 9: seq: 1f, identify_response offset=3120 data=b''
Receive: 38 1180.191856 1180.191706 14: seq: 10, canbus_id canbus_uuid=b'\x8d`\xb0\xd4\xc7p' canbus_nodeid=4
Receive: 39 1180.192115 1180.191969 12: seq: 11, uptime high=0 clock=441144598
Receive: 40 1180.242442 1180.242294 11: seq: 12, clock clock=461274815
Receive: 41 1180.292746 1180.292600 11: seq: 13, clock clock=481396593
Receive: 42 1180.343041 1180.342895 11: seq: 14, clock clock=501514833
Receive: 43 1180.393406 1180.393200 11: seq: 15, clock clock=521660547
Receive: 44 1180.444626 1180.444472 11: seq: 16, clock clock=542148353
Receive: 45 1180.494916 1180.494772 11: seq: 17, clock clock=562264875
Receive: 46 1180.545225 1180.545078 11: seq: 18, clock clock=582388411
Receive: 47 1180.595533 1180.595386 11: seq: 19, clock clock=602511893
Receive: 48 1180.596726 1180.596547 11: seq: 1a, clock clock=602987676
Receive: 49 1181.104846 1181.104692 10: seq: 1b, config is_config=0 crc=0 is_shutdown=0 move_count=0
Receive: 50 1181.115000 1181.113927 15: seq: 13, config is_config=1 crc=924824692 is_shutdown=0 move_count=1024
Receive: 51 1181.120966 1181.120724 13: seq: 14, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 52 1181.121387 1181.121070 13: seq: 15, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 53 1181.121691 1181.121450 13: seq: 16, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 54 1181.122019 1181.121784 13: seq: 17, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 55 1181.122382 1181.122109 13: seq: 18, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 56 1181.122806 1181.122562 13: seq: 1a, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 57 1181.123140 1181.122904 13: seq: 1b, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 58 1181.123527 1181.123230 13: seq: 1c, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 59 1181.123853 1181.123617 13: seq: 1d, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 60 1181.124192 1181.123952 13: seq: 1e, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 61 1181.124615 1181.124370 13: seq: 10, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 62 1181.124959 1181.124721 13: seq: 11, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 63 1181.125378 1181.125057 13: seq: 12, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 64 1181.125725 1181.125484 13: seq: 13, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 65 1181.126054 1181.125817 13: seq: 14, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 66 1181.126557 1181.126227 13: seq: 16, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 67 1181.126869 1181.126630 13: seq: 17, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 68 1181.127194 1181.126959 13: seq: 18, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 69 1181.127524 1181.127284 13: seq: 19, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 70 1181.127850 1181.127612 13: seq: 1a, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 71 1181.128334 1181.128018 13: seq: 1c, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 72 1181.128680 1181.128445 13: seq: 1d, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 73 1181.129005 1181.128770 13: seq: 1e, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 74 1181.129384 1181.129095 13: seq: 1f, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 75 1181.129733 1181.129496 13: seq: 10, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 76 1181.130160 1181.129913 13: seq: 12, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 77 1181.130524 1181.130260 13: seq: 13, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 78 1181.130853 1181.130615 13: seq: 14, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 79 1181.131178 1181.130942 13: seq: 15, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 80 1181.131525 1181.131267 13: seq: 16, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 81 1181.203523 1181.201747 8: seq: 1c, neopixel_result oid=6 success=1
Receive: 82 1181.204133 1181.204017 8: seq: 1d, stepper_position oid=7 pos=0
Receive: 83 1181.204528 1181.204275 13: seq: 1e, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 84 1181.204822 1181.204709 8: seq: 1f, stepper_position oid=10 pos=0
Receive: 85 1181.205182 1181.204944 13: seq: 10, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 86 1181.205395 1181.205289 8: seq: 11, stepper_position oid=13 pos=0
Receive: 87 1181.205739 1181.205499 13: seq: 12, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 88 1181.205946 1181.205839 8: seq: 13, stepper_position oid=15 pos=0
Receive: 89 1181.206337 1181.206047 13: seq: 14, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 90 1181.206546 1181.206438 8: seq: 15, stepper_position oid=16 pos=0
Receive: 91 1181.206895 1181.206654 13: seq: 16, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 92 1181.207117 1181.207009 8: seq: 17, stepper_position oid=17 pos=0
Receive: 93 1181.207531 1181.207224 13: seq: 18, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 94 1181.213430 1181.213141 13: seq: 1a, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 95 1181.213782 1181.213543 13: seq: 1b, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 96 1181.214113 1181.213874 13: seq: 1c, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 97 1181.214521 1181.214204 13: seq: 1d, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 98 1181.214860 1181.214621 13: seq: 1e, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 99 1181.215910 1181.215706 12: seq: 1f, shutdown clock=850641558 static_string_id=Command request
MCU 'ebb' shutdown: Command request
clocksync state: mcu_freq=12000000 last_clock=26737829 clock_est=(1180.767 22679186 12000647.328) min_half_rtt=0.000081 min_rtt_time=1180.749 time_avg=1180.767(0.017) clock_avg=22679186.558(202366.684) pred_variance=106134630.502 clock_adj=(-0.212 12000142.500)
Dumping serial stats: bytes_write=1291 bytes_read=4830 bytes_retransmit=0 bytes_invalid=0 send_seq=132 receive_seq=132 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 1180.624856 1180.624856 9: seq: 10, identify offset=640 count=40
Sent 1 1180.625984 1180.625984 9: seq: 11, identify offset=680 count=40
Sent 2 1180.627104 1180.627104 9: seq: 12, identify offset=720 count=40
Sent 3 1180.628228 1180.628228 9: seq: 13, identify offset=760 count=40
Sent 4 1180.629413 1180.629413 9: seq: 14, identify offset=800 count=40
Sent 5 1180.630535 1180.630535 9: seq: 15, identify offset=840 count=40
Sent 6 1180.631662 1180.631662 9: seq: 16, identify offset=880 count=40
Sent 7 1180.632789 1180.632789 9: seq: 17, identify offset=920 count=40
Sent 8 1180.633912 1180.633912 9: seq: 18, identify offset=960 count=40
Sent 9 1180.635048 1180.635048 9: seq: 19, identify offset=1000 count=40
Sent 10 1180.636167 1180.636167 9: seq: 1a, identify offset=1040 count=40
Sent 11 1180.637363 1180.637363 9: seq: 1b, identify offset=1080 count=40
Sent 12 1180.638489 1180.638489 9: seq: 1c, identify offset=1120 count=40
Sent 13 1180.639615 1180.639615 9: seq: 1d, identify offset=1160 count=40
Sent 14 1180.640743 1180.640743 9: seq: 1e, identify offset=1200 count=40
Sent 15 1180.641867 1180.641867 9: seq: 1f, identify offset=1240 count=40
Sent 16 1180.643010 1180.643010 9: seq: 10, identify offset=1280 count=40
Sent 17 1180.644137 1180.644137 9: seq: 11, identify offset=1320 count=40
Sent 18 1180.645264 1180.645264 9: seq: 12, identify offset=1360 count=40
Sent 19 1180.646407 1180.646407 9: seq: 13, identify offset=1400 count=40
Sent 20 1180.647529 1180.647529 9: seq: 14, identify offset=1440 count=40
Sent 21 1180.648658 1180.648658 9: seq: 15, identify offset=1480 count=40
Sent 22 1180.649785 1180.649785 9: seq: 16, identify offset=1520 count=40
Sent 23 1180.650905 1180.650905 9: seq: 17, identify offset=1560 count=40
Sent 24 1180.652043 1180.652043 9: seq: 18, identify offset=1600 count=40
Sent 25 1180.653182 1180.653182 9: seq: 19, identify offset=1640 count=40
Sent 26 1180.654407 1180.654407 9: seq: 1a, identify offset=1680 count=40
Sent 27 1180.655542 1180.655542 9: seq: 1b, identify offset=1720 count=40
Sent 28 1180.656664 1180.656664 9: seq: 1c, identify offset=1760 count=40
Sent 29 1180.657799 1180.657799 9: seq: 1d, identify offset=1800 count=40
Sent 30 1180.658925 1180.658925 9: seq: 1e, identify offset=1840 count=40
Sent 31 1180.660048 1180.660048 9: seq: 1f, identify offset=1880 count=40
Sent 32 1180.661179 1180.661179 9: seq: 10, identify offset=1920 count=40
Sent 33 1180.662371 1180.662371 9: seq: 11, identify offset=1960 count=40
Sent 34 1180.663494 1180.663494 9: seq: 12, identify offset=2000 count=40
Sent 35 1180.664613 1180.664613 9: seq: 13, identify offset=2040 count=40
Sent 36 1180.665741 1180.665741 9: seq: 14, identify offset=2080 count=40
Sent 37 1180.666861 1180.666861 9: seq: 15, identify offset=2120 count=40
Sent 38 1180.667989 1180.667989 9: seq: 16, identify offset=2160 count=40
Sent 39 1180.669121 1180.669121 9: seq: 17, identify offset=2200 count=40
Sent 40 1180.670245 1180.670245 9: seq: 18, identify offset=2240 count=40
Sent 41 1180.671407 1180.671407 9: seq: 19, identify offset=2280 count=40
Sent 42 1180.672535 1180.672535 9: seq: 1a, identify offset=2320 count=40
Sent 43 1180.673663 1180.673663 9: seq: 1b, identify offset=2360 count=40
Sent 44 1180.674807 1180.674807 9: seq: 1c, identify offset=2400 count=40
Sent 45 1180.675937 1180.675937 9: seq: 1d, identify offset=2440 count=40
Sent 46 1180.677062 1180.677062 9: seq: 1e, identify offset=2480 count=40
Sent 47 1180.678192 1180.678192 9: seq: 1f, identify offset=2520 count=40
Sent 48 1180.679412 1180.679412 9: seq: 10, identify offset=2560 count=40
Sent 49 1180.680529 1180.680529 9: seq: 11, identify offset=2600 count=40
Sent 50 1180.681657 1180.681657 9: seq: 12, identify offset=2640 count=40
Sent 51 1180.682787 1180.682787 9: seq: 13, identify offset=2680 count=40
Sent 52 1180.683916 1180.683916 9: seq: 14, identify offset=2720 count=40
Sent 53 1180.685061 1180.685061 9: seq: 15, identify offset=2760 count=40
Sent 54 1180.686186 1180.686186 9: seq: 16, identify offset=2800 count=40
Sent 55 1180.687375 1180.687375 9: seq: 17, identify offset=2840 count=40
Sent 56 1180.688502 1180.688502 9: seq: 18, identify offset=2880 count=40
Sent 57 1180.689621 1180.689621 9: seq: 19, identify offset=2920 count=40
Sent 58 1180.690734 1180.690734 9: seq: 1a, identify offset=2960 count=40
Sent 59 1180.691861 1180.691861 9: seq: 1b, identify offset=3000 count=40
Sent 60 1180.692992 1180.692992 9: seq: 1c, identify offset=3040 count=40
Sent 61 1180.694117 1180.694117 9: seq: 1d, identify offset=3080 count=40
Sent 62 1180.695233 1180.695233 9: seq: 1e, identify offset=3120 count=40
Sent 63 1180.695907 1180.695907 9: seq: 1f, identify offset=3125 count=40
Sent 64 1180.698097 1180.698006 6: seq: 10, get_canbus_id
Sent 65 1180.698676 1180.698585 6: seq: 11, get_uptime
Sent 66 1180.749224 1180.749133 6: seq: 12, get_clock
Sent 67 1180.799809 1180.799718 6: seq: 13, get_clock
Sent 68 1180.850399 1180.850308 6: seq: 14, get_clock
Sent 69 1180.900951 1180.900860 6: seq: 15, get_clock
Sent 70 1180.952276 1180.952185 6: seq: 16, get_clock
Sent 71 1181.002848 1181.002757 6: seq: 17, get_clock
Sent 72 1181.053418 1181.053327 6: seq: 18, get_clock
Sent 73 1181.103975 1181.103884 6: seq: 19, get_clock
Sent 74 1181.104819 1181.104728 6: seq: 1a, get_clock
Sent 75 1181.115298 1181.115207 6: seq: 1b, get_config
Sent 76 1181.116198 1181.116099 7: seq: 1c, allocate_oids count=13
Sent 77 1181.117296 1181.116412 64: seq: 1d, config_spi oid=0 pin=gpio1 cs_active_high=0, config_adxl345 oid=1 spi_oid=0, config_spi oid=5 pin=gpio9 cs_active_high=0, spi_set_software_bus oid=0 miso_pin=gpio3 mosi_pin=gpio0 sclk_pin=gpio2 mode=3 rate=5000000, config_endstop oid=2 pin=gpio24 pull_up=0, config_trsync oid=3, config_tmcuart oid=4 rx_pin=gpio20 pull_up=0 tx_pin=gpio20 bit_time=300, config_digital_out oid=8 pin=gpio13 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=8 cycle_ticks=120000, config_digital_out oid=9 pin=gpio14 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=9 cycle_ticks=120000, config_analog_in oid=10 pin=gpio28
Sent 78 1181.118176 1181.116412 63: seq: 1e, spi_set_software_bus oid=5 miso_pin=gpio11 mosi_pin=gpio8 sclk_pin=gpio10 mode=1 rate=4000000, config_thermocouple oid=6 spi_oid=5 thermocouple_type=MAX31865, config_digital_out oid=11 pin=gpio7 value=0 default_value=0 max_duration=60000000, set_digital_out_pwm_cycle oid=11 cycle_ticks=1200000, config_stepper oid=7 step_pin=gpio18 dir_pin=gpio19 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=12 pin=gpio17 value=1 default_value=1 max_duration=0, finalize_config crc=3237245062, spi_send oid=5 data=b'\x80\xc3', queue_digital_out oid=8 clock=29269317 on_ticks=0
Sent 79 1181.118945 1181.116412 55: seq: 1f, queue_digital_out oid=9 clock=29269532 on_ticks=0, query_analog_in oid=10 clock=39748800 sample_ticks=12000 sample_count=8 rest_ticks=3600000 min_value=0 max_value=32760 range_check_count=4, query_thermocouple oid=6 clock=39268800 rest_ticks=3600000 min_value=15240 max_value=32318 max_invalid_count=3, queue_digital_out oid=11 clock=29270053 on_ticks=0, get_config
Sent 80 1181.131901 1181.131699 14: seq: 10, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 81 1181.136513 1181.136224 19: seq: 11, tmcuart_send oid=4 write=b'\xea\x03\x080\x80\x00\n\x08\xb8\x87' read=0
Sent 82 1181.139307 1181.139105 14: seq: 12, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 83 1181.143898 1181.143609 19: seq: 13, tmcuart_send oid=4 write=b'\xea\x03h0\x80\x00\x12\x08 \xda' read=0
Sent 84 1181.146629 1181.146427 14: seq: 14, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 85 1181.151214 1181.150925 19: seq: 15, tmcuart_send oid=4 write=b'\xea\x03\x88=\x9a\x06\x02h*\xbf' read=0
Sent 86 1181.153932 1181.153730 14: seq: 16, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 87 1181.158518 1181.158229 19: seq: 17, tmcuart_send oid=4 write=b'\xea\x03\x082\x80\x10\x9ah"\x9c' read=0
Sent 88 1181.161299 1181.161097 14: seq: 18, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 89 1181.165884 1181.165594 19: seq: 19, tmcuart_send oid=4 write=b'\xea\x03h2\x80\x1e\xfa\xef?\xdf' read=0
Sent 90 1181.168597 1181.168395 14: seq: 1a, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 91 1181.173181 1181.172892 19: seq: 1b, tmcuart_send oid=4 write=b'\xea\x03\x08>\xe4\x1ar\x88\xa4\x85' read=0
Sent 92 1181.176121 1181.175919 14: seq: 1c, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 93 1181.180750 1181.180461 19: seq: 1d, tmcuart_send oid=4 write=b'\xea\x03(2\x80\x00\x02\x88"\xf3' read=0
Sent 94 1181.183452 1181.183250 14: seq: 1e, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 95 1181.188090 1181.187801 19: seq: 1f, tmcuart_send oid=4 write=b'\xea\x03\x088\x80\x00\x02\x08 \xba' read=0
Sent 96 1181.190808 1181.190606 14: seq: 10, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 97 1181.207805 1181.207706 7: seq: 11, stepper_get_position oid=7
Sent 98 1181.208418 1181.208216 14: seq: 12, tmcuart_send oid=4 write=b'\xea\x03H-\xd5' read=10
Sent 99 1181.215823 1181.215732 6: seq: 13, emergency_stop
Dumping receive queue 100 messages
Receive: 0 1180.622575 1180.621500 49: seq: 1e, identify_response offset=520 data=b'\xf3!G\xddz>#9,\x81\xc8\x9cd3\xc7[\xf7\xbc?b7\xe5+\xf8\x91\xc3\xa1\xadf7\x86v\x04+\x07\x86\x94:\x8a\x81'
Receive: 1 1180.623696 1180.622623 49: seq: 1f, identify_response offset=560 data=b"\xdd\x101\x86\x8eA<\xf1|'\xb6;\xc5a\xb2\xf2\xe1\xc1\x91\xb65?\xe2\xa4v/\x1f^;N\xb2\x89''\x8d\xd3\x1f;\xac\xb7"
Receive: 2 1180.624809 1180.623744 49: seq: 10, identify_response offset=600 data=b'\xf2\xbd\xdc~\xff\xe6\xef\x10\xe5\x92dr\x16U\x8bfTJk&\x89\xb3\x1e9,\xd7.r\x94\xf2\x88\xb51)*;|m\xca|'
Receive: 3 1180.625934 1180.624856 49: seq: 11, identify_response offset=640 data=b'j\xcd\xac\xdcWyh\xe0\xd9\xda\xbb\x81c|\xb7\xa4\xc3T[\x13\xabDo\x86\x14\xeb\x14\xb0\x83\x1ak\xc9=\xa4\xb1cl\xd8\xf1~'
Receive: 4 1180.627055 1180.625984 49: seq: 12, identify_response offset=680 data=b'\xdfB(\xe9\x8eJ\xd4\xdfvB]8\xd7\x1e\xf6\xe5X\xf4\xd66\xfa\x97\xfc \x0e\xb1\xc1.\xa2\xe5\rb\xcf\x89\xb5\xc8a\xe9Q\x1e'
Receive: 5 1180.628181 1180.627104 49: seq: 13, identify_response offset=720 data=b'N\xac\x10Y+\xfe0\x82=\xb7\x90\xd9\xd6f\x06X\xb6\xca\x96I?\x91\x05\xc3\xc0\xcc\xda\xbe\xe2=\xde\x07y\xa5\xa7x\x15\x1b\x80\xe7'
Receive: 6 1180.629358 1180.628228 49: seq: 14, identify_response offset=760 data=b'^\x0c\xfc\x00\x02\x8d\x96\x00\x81\x14\xbe\xe7\xfd\x967\xe5k\x8e\x81\r\x88\x80%\nr\xf9\xae\xdd\xf3\x83\xb4#\x8b}\xe7;\x80\x9e\xdb\xa4'
Receive: 7 1180.630487 1180.629413 49: seq: 15, identify_response offset=800 data=b'3MK@\xba\x0b\xac\xc4\xae\x95q/\xb6[\xde#\x13\xb2\xa5\xe0\x10g\xeer\x95\xf4\x80\xa6b\xe0V@18\xe7F@:\x01\x97'
Receive: 8 1180.631615 1180.630535 49: seq: 16, identify_response offset=840 data=b'\xceI\x86\xac\xecK\n\x89og[\xf0\xe6\xb2h\x1eF\x99\x8b\n\xe4\x17\xeb%$\x1d\xe4\xaeg\xea\x18x\x08M\xc7\x0e\x15\x03\xae\xf9'
Receive: 9 1180.632742 1180.631662 49: seq: 17, identify_response offset=880 data=b'v\xa6\xc3u.\x81\x84\x1c\x8c\xd2f#\x1c\x93\xe8\x17Q\x00\x86Za^\xae\xd4`\xa0!\x8cT\xa4\x1fm"\\\xb9\x17\xc3\xb5\xbc\xe6'
Receive: 10 1180.633864 1180.632789 49: seq: 18, identify_response offset=920 data=b':\x03\xae\t\x10\xe3\x10\x90\xedG9\x98\xaa\x18\x05\xfc\xe3/\xaa\x8eK\xb2\xe34r\xa7d\xbb\x19\x9e\x8b\x9e\xfb\xc7\xc1\xf7\xac\xbfU\x85'
Receive: 11 1180.634999 1180.633912 49: seq: 19, identify_response offset=960 data=b'\x19\x1e\xc3\xb4H\t\x93\xb6\x93\x90\x8f\x14\xf9\xa8x3\x88\r\xd4\x1f\x9b\r\\\xa8\x1c\xd6\xa6e \xc4d\x00\xd8\x1b\xbfb2\xc3\x0e.'
Receive: 12 1180.636118 1180.635048 49: seq: 1a, identify_response offset=1000 data=b'\xdc\xb5u\xa5&\xdf6\x02\xc6\xfb\xbe\x9d\x18\xc5\n\xd4h\xe2\xbb\x12\xba5\x87\xcc\xdf\x19\xbb\xca\x99\n\x15V\xbb\xd1\xe3%\x03\xc3&\x9b'
Receive: 13 1180.637315 1180.636167 49: seq: 1b, identify_response offset=1040 data=b'\n\xaa\x9d\x89\xc1\xc2u\xeb\x00N\xd9\xe0\xe8\x82\xdfj\xe5\x00&\xe5O\x80h\x11\xc2\x85\x88\x16K\x0b\x10VH\xff\xa7\xb7\xed\x9d\xb7\xe9'
Receive: 14 1180.638441 1180.637363 49: seq: 1c, identify_response offset=1080 data=b'\xf4\xe3fP\x1dn\xe1\xe0\x8e\x97\x8f^]\x95D\x86\x86\xa0\xac\xb2\x14t-\x04\xb4\xf0~/Pg\x06\xc1\xa4\x10\t\x85\xba\x98@\x1d'
Receive: 15 1180.639567 1180.638489 49: seq: 1d, identify_response offset=1120 data=b'\x88\xd4"\t\xaa\x8e\x10\xcd<\x80S\xf6\x16\x04\x89\x95eiZ`\x04\xb8\x96\xcb)XH\xd3\xd2\x92\x1c\x94 !\x9e4\x80;@d'
Receive: 16 1180.640697 1180.639615 49: seq: 1e, identify_response offset=1160 data=b'\r\xef \x87\x7f\xa5\x96\xc7\x88\x04)[lHGK\xcb\x10a\x0e\x84\x04\x00\xd6d\x8f\xa5\xb5\xaf\\\xe2\xd9\xca\xc4Th\x02\xe9\x14\xa2'
Receive: 17 1180.641820 1180.640743 49: seq: 1f, identify_response offset=1200 data=b'l\xe5Y\xca\x82t4\xf2c5\xb5\xbd\xa3\xf5k\xa9\xc8\x1e\tJ)\x0bn\xcd\x13bMj\x801w3W;\xf2\x9e\xd2\x95\t;'
Receive: 18 1180.642962 1180.641867 49: seq: 10, identify_response offset=1240 data=b';\x15\xc2\xe0W@B\x80\x08\xa0\xaa8\x88\xf6\x91\x1e\xaa\xf3\x14\xf4\xc3\xfb\xe0\x00X\x10\xc2\xf8<\x04\x0f\x02\xa0;9\x00R\x1c\xa8\xd2'
Receive: 19 1180.644090 1180.643010 49: seq: 11, identify_response offset=1280 data=b'\xcf\xe2\x9c\xd4\x81phA\x87\x1a\xfe\xa2I\x80\xea\xc4\x86T\xd1S\x02\x8b\x08\xc8\xc8\xe3OjJ\x90\n\x92\xe2\xca;|\xe2m\x9c\x93'
Receive: 20 1180.645216 1180.644137 49: seq: 12, identify_response offset=1320 data=b'\xba\xe8\xb6\x9c\x13\x9c\x17\x1f\xbd\xdd$5\xbb\x934\x83K:\xcd\xec\xdb\x8a{I\x02\x8e,\xdc\x91c9f/dk2\xcb\xbe\x95\xe2'
Receive: 21 1180.646359 1180.645264 49: seq: 13, identify_response offset=1360 data=b'X\xddw\x80t\xa1\xb9\xf9:\x1f\t\x98\x0c\x95\x94\xdfJ\xc3\xd9j\nu<\x0bgK\x84R\xc5c\x8e\xa9\x1er\x82\xc0R\xdc\xfaM'
Receive: 22 1180.647481 1180.646407 49: seq: 14, identify_response offset=1400 data=b'\xb4v\x00\xaa\xe6@\xeb\xa5\x84\xc4l~\xf2\xb2\x15\x9c\x80\x8bu\xe97\x11\xb5\xca\x9f6\xbdSr\x02\x8d\xe8\xd3(C\xf4\xe9#\x1e\x00'
Receive: 23 1180.648611 1180.647529 49: seq: 15, identify_response offset=1440 data=b"&\xb1rp\x83_R\xf2\xae\xedu\xf1B\xde\xab\xe6\xd6H\xf8K'@%~\xf5\xb4\xb6\x98\x02.| \x10\n\xa5\xcac~\xec\xf9"
Receive: 24 1180.649737 1180.648658 49: seq: 16, identify_response offset=1480 data=b'@\xfa\xc5\x94\xa9\xd8\xf78\x7fw\x91_\x9f\xff\x8a%\xc1\x1aT\xf4\xc3\xe7\xbb\xfc\xd3\xd5\xcd\x1d>\x1e\xe7\x05vZ:\xd1\xce\xdf\xe2\xdf'
Receive: 25 1180.650858 1180.649785 49: seq: 17, identify_response offset=1520 data=b'h\x16l?\xe8\xedTmg\xe1v\xa9\xb7Wj{\x1dnWz\x1bjZ\xf5\x93\x84\x00\xdc\x00,\x08`\x19\x02l4@L\xf4\xc5'
Receive: 26 1180.651996 1180.650905 49: seq: 18, identify_response offset=1560 data=b'\x07\x04n\r\x00Q\x18\x1f\x90\xb83\x00Dc\x1c\x12\x19\x19\t\x10\x8d!\x89\x91\x91\x00Q\x18\x12\x18\x19\tDZ\x80!\x81\x91\x95\x01'
Receive: 27 1180.653136 1180.652043 49: seq: 19, identify_response offset=1600 data=b'\x11\x18\x85\x04FV\x06D`t@\xa0\x95\x01Q\x18\x1f\x90he@4\xc6\x13"\xc1e\x03%\'\x04\x15\x02MU\xbdT\x7f\x17!'
Receive: 28 1180.654360 1180.653182 49: seq: 1a, identify_response offset=1640 data=b"P\x19(lM?\xab\x10\xae\n\xf4\xa6\xef\x0c/\xb5\xc2\xd7\xbcG\xf43\x0f\xc1\x1e\x02C\xca\xe8'\r\xe1\xca\xc0\x1a\x88\x8b\x18\xd9\xb8"
Receive: 29 1180.655494 1180.654407 49: seq: 1b, identify_response offset=1680 data=b'8\xbfA\xd0\x7f\xde^\xfe\xfc\xf9\xf2\xe6\xe2\xdf\xf8\x14S\xff`\xeb\xe3O\x17\x1f\xd4\x0e>\xbf\xcc\xea\xd5\xcd\xd5\xfd\xd5\xf9G\x85\xdc\n'
Receive: 30 1180.656617 1180.655542 49: seq: 1c, identify_response offset=1720 data=b'\x18\x10]_|\x86i\xdf\xc5s\xd5`\xfc\xf4\xcb59W\x8c\xd5\xd4\xed\xe5\xc5\xe5\xd5\xbf.\xf3_\xaen\xde\xfd\xf4\x0bF\xa9\x18\x17'
Receive: 31 1180.657752 1180.656664 49: seq: 1d, identify_response offset=1760 data=b'\xef.oaQ\x91\tt\x1c\xf8\xd4\xdd\xfd\xf9\xfd]~\xf7\xf9\xfa\xee\xe7\xfc\x87\xf3\xbbKD\xb6\xc0\xe5\xcbO\x9f.o\xf3\x1f~\xba'
Receive: 32 1180.658878 1180.657799 49: seq: 1e, identify_response offset=1800 data=b'\xff1\xbf|\xf7\x1e\xd6\xa3/\xf8\xc8\x1a\xe1\xd9\xa7\x1a\x13\xaa\xad\xa9\x1f\x1cz\x88\xca\xa6\x17\x0cj\x94\x1e\x1b\xa8\xb6\x98F\x95z$j'
Receive: 33 1180.660001 1180.658925 49: seq: 1f, identify_response offset=1840 data=b'\xdf\xa3\x07\x04:YF\xa3\xadz\x8ai\xb7Y\xaa\x11\xaahE\xa3\x07\xf5\xac\xd5V\x1f\xd1%h\xdf\x11\xdd\x82\x96\x1c\xd15h\xb3\x11'
Receive: 34 1180.661133 1180.660048 49: seq: 10, identify_response offset=1880 data=b'\xdd\x83\xd6\xa9\xe2\x11\xe4\x15\x13\x8c\xee/\xaf\x81\xaf\xf3\xfb\xcf\xb7\x8aU CY\xe7\xec\xec?\xf3\xb7\xc9\xfc\xbf_&i\x13\x1e\xf0\xaa'
Receive: 35 1180.662316 1180.661179 49: seq: 11, identify_response offset=1920 data=b'y\x1b%I\xa2X+d6O\x97\x95bn\xa8y6\x8fb\xa0,\xd6\xa7\xb4$\xb4\xd9Sf\xd5\x92\xd0\x06\x1c\xd3\x88$\xa1\x8d\x90'
Receive: 36 1180.663444 1180.662371 49: seq: 12, identify_response offset=1960 data=b'r,r\x98\xd1\x08\x8b&\xc4\x08E\x9b\xc0\xe0\xde\xc33^=L\x15\x07L\x85\xdd\r\xd5\xe5\xd46<\xafE!\xf1\xad\x0f\x06\x81\xa5'
Receive: 37 1180.664565 1180.663494 49: seq: 13, identify_response offset=2000 data=b'\x01+j\xd5ze\xbbB\xaa5\xde\x14\x0f5\xaf(\xb9\x9c\xebM\xf3 \xaeH^\xe7M\x8bU \x03#a\r$`VH)\xb6'
Receive: 38 1180.665693 1180.664613 49: seq: 14, identify_response offset=2040 data=b'\r\xaf\xe0\x19&$\xbbzG\xcd\xd4\x8b\xa2\x81\xed\x81Anb\x98\xdf\x19\x94$T\x870\x95b\xd8\xf3N\xc0\x98R\x85d\x1d$;'
Receive: 39 1180.666814 1180.665741 49: seq: 15, identify_response offset=2080 data=b'\xa0\x8c\n(8\xfb\x97\x01\x8b0\x86\x98\x8b\x1a0\x17\x03\x03\xe4\x86^\xeac\xd1{^\x03+"0\xcd\x90\xaeiU\xd5k\xaa\xdc\x85'
Receive: 40 1180.667942 1180.666861 49: seq: 16, identify_response offset=2120 data=b'\xebx\xc3L\xab\xc7\x9e\x079_P\xf7\x9duE/aK=\x0f\x95a\x99\x8d\x9eC\xd9(\x07eb?\xfe\x8ao\x10\xec\x82\xfeC'
Receive: 41 1180.669074 1180.667989 49: seq: 17, identify_response offset=2160 data=b"wA'bf\xd1IJ\x95\xe6U|\xc1n\xce/>\xd0\x0b\x08g\xe0@\xb7\xf7fm\xee\xaf\xdd^\x9e\xbf\xd3\x1b\x98bq\xe3\x9e"
Receive: 42 1180.670197 1180.669121 49: seq: 18, identify_response offset=2200 data=b'\xb29e\xef+\xaa\x95\x99\xe9a\xbbV<\x95\xacT\x7f\x19(\xfd5AY\x89[\x030\xe4\xb0\xd8s\xa8w\xa9Se6\xb1?\xab'
Receive: 43 1180.671360 1180.670245 49: seq: 19, identify_response offset=2240 data=b",2\xf3\xb0\xec\xdb'n8g\xd8\xe1D\x0fq\xdb\xb6\x1fj;\xa0\xd4k8\xd8\xd7\xaffKT\xe2\xf1\x03\xcab\xe4:\xe8\x92f"
Receive: 44 1180.672488 1180.671407 49: seq: 1a, identify_response offset=2280 data=b'\x15\x1b\x97DN2]4\xc5\x02V\x18\xde\xba~\xf1\x94;\xd1il\xa9wp\xf2`\xf1a@+\xd7\xc5\x0bjne\x04KE\xe9'
Receive: 45 1180.673616 1180.672535 49: seq: 1b, identify_response offset=2320 data=b'5\x97\xb2\x00U\xf2\xa6D\xeb\xd6\xf6\x80\x1bBJ\xb0r\tO\xdcj\xac\xd1\x8d\xe00V\xe3L\x17:\xca\x14\xf8\x13G\x8d`!\xfe'
Receive: 46 1180.674746 1180.673663 49: seq: 1c, identify_response offset=2360 data=b'\xf5\x03\xbb\xa2\xaf\x94Chh\xec\x88^\xa3\xc4\xd5\x03\x85\xc1\xa8\xdf\xd4\xed3\xbdpn\xc0\x8b\nF\xec\xa0_\xab \x85\xdf[\xd4F'
Receive: 47 1180.675886 1180.674807 49: seq: 1d, identify_response offset=2400 data=b'\x03O\x98\x8e*}\xea\xff\xeaU\xa0\xc5-/T\x0eP.\x8f\xae^\x89\r\x14\xc7p\xb3uHp\x90M\xdf\xee\xe1 97\x00\xc2'
Receive: 48 1180.677013 1180.675937 49: seq: 1e, identify_response offset=2440 data=b'/\xbe\xc6\xe1O-JNm\xc5[\xae\x99Ao\x87C\x16\xb0+\xd0A\xf0\x9b\xd2\x9d\x058\x90\n{\x16u\rue\xc9a\xd7\xef'
Receive: 49 1180.678140 1180.677062 49: seq: 1f, identify_response offset=2480 data=b']S\xa5\xecNZ\xc9|\xe3\x04~\xdb\xb9\x03\xe7&\xdd)\x02\x10B\xec\xc7\xbdY3\xce\x01B\xb93\xfdi\xf5\x8d\n\x90\xa9p\xa0'
Receive: 50 1180.679361 1180.678192 49: seq: 10, identify_response offset=2520 data=b'\xe2\x93\xff\xb9\xeaN\xc7\x87\xa1m\xd9\xa6P\xdc\x11g\xd8\x18\xbc\xf7M\t\xe3\x10\x00\xaa\x8e<\xf5\xb1\xee\x95<\xf0$\x94\xd4\x92\xab\xc8'
Receive: 51 1180.680482 1180.679412 49: seq: 11, identify_response offset=2560 data=b'\xad\xbe\xe6\xe5\xe5nl\x1e\x01T\xa8\xd0\x8a\x1f{\xbcu\xe96@Kd\xcbP\xf9\xcb\xb6W\xee\x07%\xb8d\xa5\xd4ztMw\x8a'
Receive: 52 1180.681601 1180.680529 49: seq: 12, identify_response offset=2600 data=b'lmSC0|\x02\x04\x18\xb7u\x8c\xb3\x0ca"\xd4n\x80\xb9\x8bp`OK}[\xb4\xb1T\x7fq\xac(_J\xec\xc6a\\'
Receive: 53 1180.682738 1180.681657 49: seq: 13, identify_response offset=2640 data=b'#\xfd\x96\xb0\x8d[\xa9}\x97(\x97W|\xd6E\x8f\x99%9^\xf1\xa3p\xe9rl\xf0\xeb\x90K\x06\x8e\xef\x1cH\\\x07Mp\xcc'
Receive: 54 1180.683868 1180.682787 49: seq: 14, identify_response offset=2680 data=b'\\P\xa7$\xd1*\xcbT^\xd4\x93\x85J\x8d4YdJS0Y,\x960N\xbe\x00&\xb4\xd0\x06e>{\x7f\xf3\x99\xbd\xff\xf4'
Receive: 55 1180.684989 1180.683916 49: seq: 15, identify_response offset=2720 data=b'\xf1\t\x0bP\x90Q\x07n\xcd\xe9\xc3\xaai\x81M\xba9\xca\x1d\xf3c\xed\x82\x13\x0c\x91\xe6\x03\xe9\xe4H\xe15\xb8\x98\xda\xa1\xe7\xe0\t'
Receive: 56 1180.686122 1180.685061 49: seq: 16, identify_response offset=2760 data=b"\xa6.\xdb\x1efz4\x8ex\xea\x14^nz\x01s&.\xe1\x1d\x98\xa9\xa8\x91\xe0\xdek'\x89\xfd\xfe\t)O\xb7\x93\xd5\x93N5"
Receive: 57 1180.687317 1180.686186 49: seq: 17, identify_response offset=2800 data=b'\xa2q\xcd\xa8X\xbd\x93!X\xe4\xb6s\x81T\xa8/\x1b\xaa\xd7\xf6-V\xf5\x11=\xc8\xbd\xfb\xd1@M\xfb_\x82y\xdbn\xfe\tF'
Receive: 58 1180.688451 1180.687375 49: seq: 18, identify_response offset=2840 data=b'^\xd3>\x9f\xa0\xde\xb5{\x08o\x87\x97\xf8\xddy<\x9f\xb9\xb6un\xb4\xe3\xb5\xbd\xd4\xdc\x083r\xada\x0f\xd6\xf6\x88\xe9\x19~\x8a'
Receive: 59 1180.689570 1180.688502 49: seq: 19, identify_response offset=2880 data=b'\xb0X\xe59\xa1\xb0\xb0\x1e"\xb9\xacS\xd7J>h\xeay\x0c\x98\x86\xb1/\x90\xd4k\x03k\x99\x98\x0e\xc7X\x96\xaa\xd7\x8d\xec\xe1\xe3'
Receive: 60 1180.690685 1180.689621 49: seq: 1a, identify_response offset=2920 data=b'\x1d\xc8\xf4?\xa5\x9c`\xfe&w\x86\xaa\xaf~\x9ct\x12$\xa6\xd7\xa6\xe4A#\xf9\x04\xb3\xa1\x7ff\xd2\xefs\xbd-\xdd\x913\xefu'
Receive: 61 1180.691815 1180.690734 49: seq: 1b, identify_response offset=2960 data=b'\xea\x0b\xf9(\x1fF\x15\xe6+\xea\xb2B\x81\x041"7\xb9EjsQ\xbd(\x17\x1dM[\xf8\xb8\x0c\xb3c\xcd\xa2\x03M\xfa\rA'
Receive: 62 1180.692945 1180.691861 49: seq: 1c, identify_response offset=3000 data=b'_\xa5Q6\xed\xce\xfc\xa9\t\xc4\xaa\xb8\xed\x07U\x18\xae\x13*u\xa53]9\xee\xf5\x8f\xfcM\xfbN\xec:.A;\x86Z\xf6\x02'
Receive: 63 1180.694067 1180.692992 49: seq: 1d, identify_response offset=3040 data=b'\xf1.\x82\xd83\xd5\xe9\xd1\x900R\xa8\xd7\x8a^\xb8.\xcd!\x0f\xd8\x9f!~\xd7~\xe7\xc5\x19\x1b\x04\x02\xd3@9\xfe\x89\xc2\xb3='
Receive: 64 1180.695186 1180.694117 49: seq: 1e, identify_response offset=3080 data=b'L<\xf4\t\x89\xd1W\xdbq\x12*\xf0\xad\xa5\xff?\n\x04\xbf\xa7\xf9i\x14\x9f\xceO\x92t}\xb2-\x92t\x9e\xa4\xe9:\x9d}\xf9'
Receive: 65 1180.695790 1180.695233 14: seq: 1f, identify_response offset=3120 data=b'\x1f\xdc\x00}\x1b'
Receive: 66 1180.696401 1180.695907 9: seq: 10, identify_response offset=3125 data=b''
Receive: 67 1180.698239 1180.698097 14: seq: 11, canbus_id canbus_uuid=b'\x9fQ\x0b\xf96a' canbus_nodeid=5
Receive: 68 1180.698836 1180.698676 11: seq: 12, uptime high=0 clock=21863761
Receive: 69 1180.749387 1180.749224 10: seq: 13, clock clock=22470345
Receive: 70 1180.799981 1180.799809 10: seq: 14, clock clock=23077454
Receive: 71 1180.850567 1180.850399 10: seq: 15, clock clock=23684528
Receive: 72 1180.901156 1180.900951 10: seq: 16, clock clock=24291129
Receive: 73 1180.952446 1180.952276 10: seq: 17, clock clock=24907100
Receive: 74 1181.003024 1181.002848 10: seq: 18, clock clock=25514039
Receive: 75 1181.053588 1181.053418 10: seq: 19, clock clock=26120863
Receive: 76 1181.104165 1181.103975 10: seq: 1a, clock clock=26727550
Receive: 77 1181.105006 1181.104819 10: seq: 1b, clock clock=26737829
Receive: 78 1181.115555 1181.115298 10: seq: 1c, config is_config=0 crc=0 is_shutdown=0 move_count=0
Receive: 79 1181.119440 1181.118945 15: seq: 10, config is_config=1 crc=3237245062 is_shutdown=0 move_count=1024
Receive: 80 1181.135841 1181.131901 18: seq: 11, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x08"\xba'
Receive: 81 1181.138933 1181.136513 8: seq: 12, tmcuart_response oid=4 read=b''
Receive: 82 1181.143232 1181.139307 18: seq: 13, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02(\xa2\xfe'
Receive: 83 1181.146259 1181.143898 8: seq: 14, tmcuart_response oid=4 read=b''
Receive: 84 1181.150557 1181.146629 18: seq: 15, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02H\xa2\xd9'
Receive: 85 1181.153564 1181.151214 8: seq: 16, tmcuart_response oid=4 read=b''
Receive: 86 1181.157861 1181.153932 18: seq: 17, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02h"\x9d'
Receive: 87 1181.160932 1181.158518 8: seq: 18, tmcuart_response oid=4 read=b''
Receive: 88 1181.165227 1181.161299 18: seq: 19, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x88"\xca'
Receive: 89 1181.168231 1181.165884 8: seq: 1a, tmcuart_response oid=4 read=b''
Receive: 90 1181.172525 1181.168597 18: seq: 1b, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xa8\xa2\x8e'
Receive: 91 1181.175551 1181.173181 8: seq: 1c, tmcuart_response oid=4 read=b''
Receive: 92 1181.180099 1181.176121 18: seq: 1d, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xc8\xa2\xa9'
Receive: 93 1181.183094 1181.180750 8: seq: 1e, tmcuart_response oid=4 read=b''
Receive: 94 1181.187424 1181.183452 18: seq: 1f, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xe8"\xed'
Receive: 95 1181.190442 1181.188090 8: seq: 10, tmcuart_response oid=4 read=b''
Receive: 96 1181.194735 1181.190808 18: seq: 11, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x08#\x82'
Receive: 97 1181.207946 1181.207805 8: seq: 12, stepper_position oid=7 pos=0
Receive: 98 1181.212416 1181.208418 18: seq: 13, tmcuart_response oid=4 read=b'\n\xfaO-\x80\x00\x02\x08\xa1\xa2'
Receive: 99 1181.216160 1181.215823 11: seq: 14, shutdown clock=28070094 static_string_id=Command request
=======================
Starting Klippy...
Args: ['/home/pi/klipper/klippy/klippy.py', '/home/pi/printer_data/config/printer.cfg', '-I', '/home/pi/printer_data/comms/klippy.serial', '-l', '/home/pi/printer_data/logs/klippy.log', '-a', '/home/pi/printer_data/comms/klippy.sock']
App Name: Danger-Klipper
Git version: 'v0.12.0-509-g568ae9f2'
Branch: master
Remote: origin
Tracked URL: https://github.com/DangerKlippers/danger-klipper
CPU: 4 core ?
Python: '3.11.2 (main, Sep 14 2024, 03:00:30) [GCC 12.2.0]'
Start printer at Tue Nov 19 19:00:38 2024 (1732014038.6 13.5)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.6
stealthchop_threshold = 0

[stepper_y]
step_pin = PE5
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = PF0
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.6
stealthchop_threshold = 0

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256
endstop_pin = probe:z_virtual_endstop
position_max = 335
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
mcu 'mcu':  got {'count': 1604, 'sum': 836433, 'sumsq': 2311936, '#name': 'stats', '#sent_time': 14.55412288, '#receive_time': 14.578020639}
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
webhooks client 140732675254160: New connection
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Sending MCU 'ebb' printer configuration...
Configured MCU 'ebb' (1024 moves)
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (25.0, 25.0)    | (25.0, 25.0)
  1   | (103.8, 25.0)   | (103.8, 25.0)
  2   | (182.5, 25.0)   | (182.5, 25.0)
  3   | (261.2, 25.0)   | (261.2, 25.0)
  4   | (340.0, 25.0)   | (340.0, 25.0)
  5   | (340.0, 103.8)  | (340.0, 103.8)
  6   | (261.2, 103.8)  | (261.2, 103.8)
  7   | (182.5, 103.8)  | (182.5, 103.8)
  8   | (103.8, 103.8)  | (103.8, 103.8)
  9   | (25.0, 103.8)   | (25.0, 103.8)
  10  | (25.0, 182.5)   | (25.0, 182.5)
  11  | (103.8, 182.5)  | (103.8, 182.5)
  12  | (182.5, 182.5)  | (182.5, 182.5)
  13  | (261.2, 182.5)  | (261.2, 182.5)
  14  | (340.0, 182.5)  | (340.0, 182.5)
  15  | (340.0, 261.2)  | (340.0, 261.2)
  16  | (261.2, 261.2)  | (261.2, 261.2)
  17  | (182.5, 261.2)  | (182.5, 261.2)
  18  | (103.8, 261.2)  | (103.8, 261.2)
  19  | (25.0, 261.2)   | (25.0, 261.2)
  20  | (25.0, 340.0)   | (25.0, 340.0)
  21  | (103.8, 340.0)  | (103.8, 340.0)
  22  | (182.5, 340.0)  | (182.5, 340.0)
  23  | (261.2, 340.0)  | (261.2, 340.0)
  24  | (340.0, 340.0)  | (340.0, 340.0)
TMC stepper_x failed to init: Unable to write tmc spi 'stepper_x' register GLOBALSCALER
TMC stepper_y failed to init: Unable to write tmc spi 'stepper_y' register GLOBALSCALER
webhooks client 140732675254160: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
TMC stepper_z failed to init: Unable to write tmc spi 'stepper_z' register GLOBALSCALER
TMC stepper_z1 failed to init: Unable to write tmc spi 'stepper_z1' register GLOBALSCALER
TMC stepper_z2 failed to init: Unable to write tmc spi 'stepper_z2' register GLOBALSCALER
TMC stepper_z3 failed to init: Unable to write tmc spi 'stepper_z3' register GLOBALSCALER
Starting heater checks for heater_bed
Starting heater checks for extruder
autotune_tmc set stepper_x pwm_freq=2
Unhandled exception during ready callback
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 314, in _connect
    cb()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 169, in handle_ready
    self.tune_driver()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 220, in tune_driver
    self._set_pwmfreq()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 286, in _set_pwmfreq
    self._set_driver_field('pwm_freq', pwm_freq)
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 249, in _set_driver_field
    tmco.mcu_tmc.set_register(register, val, None)
  File "/home/pi/klipper/klippy/extras/tmc2130.py", line 403, in set_register
    raise self.printer.command_error(
gcode.CommandError: Unable to write tmc spi 'stepper_x' register PWMCONF
Transition to shutdown state: Internal error during ready callback: Unable to write tmc spi 'stepper_x' register PWMCONF
Dumping gcode input 0 blocks
Dumping 2 requests for client 140732675254160
Received 15.186997: b'{"id": 140733764797840, "method": "info", "params": {"client_info": {"program": "Moonraker", "version": "v0.9.3-1-g4e00a07"}}}'
Received 15.189421: b'{"id": 140733764807376, "method": "list_endpoints", "params": {}}'
gcode state: absolute_coord=True absolute_extrude=True base_position=[0.0, 0.0, 0.0, 0.0] last_position=[0.0, 0.0, 0.0, 0.0] homing_position=[0.0, 0.0, 0.0, 0.0] speed_factor=0.016666666666666666 extrude_factor=1.0 speed=25.0
Reactor garbage collection: (14.758096269, 0.0, 0.0)
Dumping stepper 'stepper_x' (mcu) 1 queue_step:
queue_step 0: t=10355046162 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_y' (mcu) 1 queue_step:
queue_step 0: t=10355352139 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z' (mcu) 1 queue_step:
queue_step 0: t=10355580765 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z1' (mcu) 1 queue_step:
queue_step 0: t=10355817110 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z2' (mcu) 1 queue_step:
queue_step 0: t=10356043210 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z3' (mcu) 1 queue_step:
queue_step 0: t=10356288821 p=0 i=0 c=0 a=0
MCU 'mcu' shutdown: Command request
clocksync state: mcu_freq=400000000 last_clock=10111457722 clock_est=(14.319 9976368763 400019249.547) min_half_rtt=0.000075 min_rtt_time=14.657 time_avg=14.319(0.017) clock_avg=9976368763.294(6709517.304) pred_variance=117992681315.094
Dumping serial stats: bytes_write=2320 bytes_read=5414 bytes_retransmit=0 bytes_invalid=0 send_seq=179 receive_seq=179 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 14.242111 14.242111 9: seq: 1f, identify offset=2520 count=40
Sent 1 14.242514 14.242514 9: seq: 10, identify offset=2560 count=40
Sent 2 14.242901 14.242901 9: seq: 11, identify offset=2600 count=40
Sent 3 14.243563 14.243563 9: seq: 12, identify offset=2640 count=40
Sent 4 14.243956 14.243956 9: seq: 13, identify offset=2680 count=40
Sent 5 14.244418 14.244418 9: seq: 14, identify offset=2720 count=40
Sent 6 14.244794 14.244794 9: seq: 15, identify offset=2760 count=40
Sent 7 14.245177 14.245177 9: seq: 16, identify offset=2800 count=40
Sent 8 14.245565 14.245565 9: seq: 17, identify offset=2840 count=40
Sent 9 14.245949 14.245949 9: seq: 18, identify offset=2880 count=40
Sent 10 14.246420 14.246420 9: seq: 19, identify offset=2920 count=40
Sent 11 14.246800 14.246800 9: seq: 1a, identify offset=2960 count=40
Sent 12 14.247186 14.247186 9: seq: 1b, identify offset=3000 count=40
Sent 13 14.247569 14.247569 9: seq: 1c, identify offset=3040 count=40
Sent 14 14.247957 14.247957 9: seq: 1d, identify offset=3080 count=40
Sent 15 14.248427 14.248427 9: seq: 1e, identify offset=3120 count=40
Sent 16 14.250738 14.250738 6: seq: 1f, get_canbus_id
Sent 17 14.251019 14.251019 6: seq: 10, get_uptime
Sent 18 14.301456 14.301456 6: seq: 11, get_clock
Sent 19 14.352066 14.352066 6: seq: 12, get_clock
Sent 20 14.402686 14.402686 6: seq: 13, get_clock
Sent 21 14.453245 14.453245 6: seq: 14, get_clock
Sent 22 14.503685 14.503685 6: seq: 15, get_clock
Sent 23 14.554123 14.554123 6: seq: 16, get_clock
Sent 24 14.604567 14.604567 6: seq: 17, get_clock
Sent 25 14.655006 14.655006 6: seq: 18, get_clock
Sent 26 14.656526 14.656526 6: seq: 19, get_clock
Sent 27 15.164486 15.164486 6: seq: 1a, get_config
Sent 28 15.165516 15.165516 7: seq: 1b, allocate_oids count=29
Sent 29 15.165555 15.165555 9: seq: 1c, config_spi oid=0 pin=PD6 cs_active_high=0
Sent 30 15.165595 15.165595 9: seq: 1d, config_spi oid=1 pin=PD5 cs_active_high=0
Sent 31 15.165614 15.165614 9: seq: 1e, config_spi oid=2 pin=PD2 cs_active_high=0
Sent 32 15.165629 15.165629 9: seq: 1f, config_spi oid=3 pin=PA15 cs_active_high=0
Sent 33 15.165643 15.165643 9: seq: 10, config_spi oid=4 pin=PA9 cs_active_high=0
Sent 34 15.165660 15.165660 9: seq: 11, config_spi oid=5 pin=PA10 cs_active_high=0
Sent 35 15.165681 15.165681 15: seq: 12, spi_set_software_bus oid=0 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 36 15.165693 15.165693 15: seq: 13, spi_set_software_bus oid=1 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 37 15.165703 15.165703 15: seq: 14, spi_set_software_bus oid=2 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 38 15.165713 15.165713 15: seq: 15, spi_set_software_bus oid=3 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 39 15.165723 15.165723 15: seq: 16, spi_set_software_bus oid=4 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 40 15.165789 15.165789 58: seq: 17, spi_set_software_bus oid=5 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, config_analog_in oid=18 pin=PB0, config_digital_out oid=19 pin=PF6 value=0 default_value=0 max_duration=2000000000, set_digital_out_pwm_cycle oid=19 cycle_ticks=40000000, config_digital_out oid=20 pin=PA1 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=20 cycle_ticks=20000000, config_digital_out oid=21 pin=PA4 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=21 cycle_ticks=20000000
Sent 41 15.166629 15.166629 62: seq: 18, config_analog_in oid=22 pin=PA7, config_neopixel oid=6 pin=PF12 data_size=150 bit_max_ticks=1600 reset_min_ticks=20000, config_stepper oid=7 step_pin=PC14 dir_pin=PC13 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=23 pin=PE6 value=1 default_value=1 max_duration=0, config_endstop oid=8 pin=PC15 pull_up=0, config_trsync oid=9, config_stepper oid=10 step_pin=PE5 dir_pin=PE4 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=24 pin=PE3 value=1 default_value=1 max_duration=0, config_endstop oid=11 pin=PF0 pull_up=0, config_trsync oid=12, config_stepper oid=13 step_pin=PG9 dir_pin=PG10 invert_step=4294967295 step_pulse_ticks=0
Sent 42 15.167115 15.167115 60: seq: 19, config_digital_out oid=25 pin=PG13 value=1 default_value=1 max_duration=0, config_trsync oid=14, config_stepper oid=15 step_pin=PG11 dir_pin=PD7 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=26 pin=PG12 value=1 default_value=1 max_duration=0, config_stepper oid=16 step_pin=PB4 dir_pin=PB3 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=27 pin=PB5 value=1 default_value=1 max_duration=0, config_stepper oid=17 step_pin=PG15 dir_pin=PB6 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=28 pin=PG14 value=1 default_value=1 max_duration=0, finalize_config crc=924824692
Sent 43 15.174109 15.174109 51: seq: 1a, query_analog_in oid=18 clock=2282065408 sample_ticks=400000 sample_count=8 rest_ticks=120000000 min_value=14024 max_value=32038 range_check_count=4, queue_digital_out oid=19 clock=1804837698 on_ticks=0, queue_digital_out oid=20 clock=1804845950 on_ticks=0, queue_digital_out oid=21 clock=1804850232 on_ticks=0
Sent 44 15.174624 15.174624 26: seq: 1b, query_analog_in oid=22 clock=2298065408 sample_ticks=400000 sample_count=8 rest_ticks=120000000 min_value=0 max_value=32760 range_check_count=4, get_config
Sent 45 15.183445 15.183445 21: seq: 1c, spi_send oid=0 data=b"\x8b\x00\x00\x00'", spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 46 15.183781 15.183781 21: seq: 1d, spi_send oid=0 data=b"\x8b\x00\x00\x00'", spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 47 15.184105 15.184105 21: seq: 1e, spi_send oid=0 data=b"\x8b\x00\x00\x00'", spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 48 15.184506 15.184506 21: seq: 1f, spi_send oid=0 data=b"\x8b\x00\x00\x00'", spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 49 15.184823 15.184823 21: seq: 10, spi_send oid=0 data=b"\x8b\x00\x00\x00'", spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 50 15.185232 15.185232 21: seq: 11, spi_send oid=1 data=b"\x8b\x00\x00\x00'", spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 51 15.185556 15.185556 21: seq: 12, spi_send oid=1 data=b"\x8b\x00\x00\x00'", spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 52 15.185880 15.185880 21: seq: 13, spi_send oid=1 data=b"\x8b\x00\x00\x00'", spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 53 15.186198 15.186198 21: seq: 14, spi_send oid=1 data=b"\x8b\x00\x00\x00'", spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 54 15.186517 15.186517 21: seq: 15, spi_send oid=1 data=b"\x8b\x00\x00\x00'", spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 55 15.186884 15.186884 21: seq: 16, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 56 15.187277 15.187277 21: seq: 17, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 57 15.187667 15.187667 21: seq: 18, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 58 15.187994 15.187994 21: seq: 19, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 59 15.188364 15.188364 21: seq: 1a, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 60 15.188748 15.188748 21: seq: 1b, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 61 15.189074 15.189074 21: seq: 1c, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 62 15.189489 15.189489 21: seq: 1d, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 63 15.189815 15.189815 21: seq: 1e, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 64 15.190140 15.190140 21: seq: 1f, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 65 15.190566 15.190566 21: seq: 10, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 66 15.190892 15.190892 21: seq: 11, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 67 15.191207 15.191207 21: seq: 12, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 68 15.191523 15.191523 21: seq: 13, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 69 15.191833 15.191833 21: seq: 14, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 70 15.192218 15.192218 21: seq: 15, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 71 15.192535 15.192535 21: seq: 16, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 72 15.192851 15.192851 21: seq: 17, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 73 15.193167 15.193167 21: seq: 18, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 74 15.193494 15.193494 21: seq: 19, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 75 15.256532 15.256532 15: seq: 1a, neopixel_update oid=6 pos=0 data=b'\xff\xff\xff\xff\xff\xff'
Sent 76 15.256710 15.256710 45: seq: 1b, neopixel_update oid=6 pos=6 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=22 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 77 15.256710 15.256710 45: seq: 1c, neopixel_update oid=6 pos=38 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=54 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 78 15.256710 15.256710 45: seq: 1d, neopixel_update oid=6 pos=70 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=86 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 79 15.257087 15.257087 47: seq: 1e, neopixel_update oid=6 pos=102 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=118 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 80 15.263047 15.263047 28: seq: 1f, neopixel_update oid=6 pos=134 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_send oid=6
Sent 81 15.265415 15.265415 7: seq: 10, stepper_get_position oid=7
Sent 82 15.265762 15.265762 21: seq: 11, spi_send oid=0 data=b'j\x00\x00\x00\x00', spi_transfer oid=0 data=b'j\x00\x00\x00\x00'
Sent 83 15.266170 15.266170 7: seq: 12, stepper_get_position oid=10
Sent 84 15.266406 15.266406 21: seq: 13, spi_send oid=1 data=b'j\x00\x00\x00\x00', spi_transfer oid=1 data=b'j\x00\x00\x00\x00'
Sent 85 15.266753 15.266753 7: seq: 14, stepper_get_position oid=13
Sent 86 15.266969 15.266969 21: seq: 15, spi_send oid=2 data=b'j\x00\x00\x00\x00', spi_transfer oid=2 data=b'j\x00\x00\x00\x00'
Sent 87 15.267349 15.267349 7: seq: 16, stepper_get_position oid=15
Sent 88 15.267561 15.267561 21: seq: 17, spi_send oid=3 data=b'j\x00\x00\x00\x00', spi_transfer oid=3 data=b'j\x00\x00\x00\x00'
Sent 89 15.267901 15.267901 7: seq: 18, stepper_get_position oid=16
Sent 90 15.268124 15.268124 21: seq: 19, spi_send oid=4 data=b'j\x00\x00\x00\x00', spi_transfer oid=4 data=b'j\x00\x00\x00\x00'
Sent 91 15.268527 15.268527 7: seq: 1a, stepper_get_position oid=17
Sent 92 15.268740 15.268740 21: seq: 1b, spi_send oid=5 data=b'j\x00\x00\x00\x00', spi_transfer oid=5 data=b'j\x00\x00\x00\x00'
Sent 93 15.274583 15.274583 13: seq: 1c, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e'
Sent 94 15.274631 15.274631 13: seq: 1d, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 95 15.274984 15.274984 21: seq: 1e, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 96 15.275383 15.275383 21: seq: 1f, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 97 15.275726 15.275726 21: seq: 10, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 98 15.276133 15.276133 21: seq: 11, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 99 15.279315 15.279315 6: seq: 12, emergency_stop
Dumping receive queue 100 messages
Receive: 0 14.234065 14.233751 49: seq: 1b, identify_response offset=1680 data=b'\xab\x9f~^\xfd\x98|xX\xff\x82\xf7\xa9\xfe\x9dM\xeeVO\xb0^t\x87\xc0\xdf\xcf\xfc\xe0\xed\r\x16\xdf\xffzG\xf7\xeec\xa2\x7f'
Receive: 1 14.234455 14.234123 49: seq: 1c, identify_response offset=1720 data=b"X\xaf\xd6\xb7\xff^'\xbf\xde~\xba\xfe\xf9Wt \x1f\x077\xeb\x07\x18\x94\x87\x80\xcd\xf0\x0c\xd7p\x7f\xd7x}\x83\xc9\xa7\xcd\x95\xbc"
Receive: 2 14.234836 14.234513 49: seq: 1d, identify_response offset=1760 data=b'\x1f<\xfbR\x8a>\x98\xce\xdaw\xf0\x80R\x8a\x08\xeb?\xe2\xfa\xcd\xe3\xf2q\x93l\x9e\xee6\xbf$W\xcb\xcd\x1a\x0f\x12\xe3\xf0\xfa\xfe'
Receive: 3 14.235315 14.234924 49: seq: 1e, identify_response offset=1800 data=b'~\xfd\x90\\\xfd\xfc\xf81Y\x93\\_\xf0\xed\xd0\xc3kF\xbe\xb7e\xb5N\xe1h\xd5t\x0c\x95\xf0\xb9c\x97\x84\xa8\x07f\xe8\xcb!'
Receive: 4 14.235687 14.235370 49: seq: 1f, identify_response offset=1840 data=b'\xc7\xe6\x02\xd8\x01"\x9bv\x87\xc7\xf5\x1d\x1ca\xf9\xf8\xf4 O\x05!\xf6~9\x9d\\\xfegz\xe6\xc5\xff\x85\xce\x15v +Po'
Receive: 5 14.236064 14.235744 49: seq: 10, identify_response offset=1880 data=b"\x85\xbd\xc0W\xbdk\xec\x85s\xd5[c\x0f\xa08\xf5>`o\xae\xb9\xdc`o\xa1\xb9|\x94<=\xc9\xe6\xcb 3\xc0\x1bU\xd6'"
Receive: 6 14.236455 14.236127 49: seq: 11, identify_response offset=1920 data=b'\xbd \x08\xa4|\xa9\x88\xa6\xe1,\x97\xa2u%\x8f\xa6\x9e\xff\x0c\xe7T\xab\x94V\xc8e<9\x86\xde\xe1\xcb\x96/\x19(\x83\xa7\x90\x8d'
Receive: 7 14.236837 14.236512 49: seq: 12, identify_response offset=1960 data=b'\xa6MI$\x94/)2U\xca\x11h\x953\xd9\x02\xfb\x9b\xe3\x06\x00S\n\x0cg-<\\\xe5SLj\x8c\xc9@\xb3%$J\x85'
Receive: 8 14.237282 14.236898 49: seq: 13, identify_response offset=2000 data=b'\xb2e)k\x8bL?\xearJ\xbe\xcb\xaaF$\xc3\xc0\x9aX\x05I\x84\xa5B\x14\xbb\x8a\xe7\xf0\x94(\x04\xbb\xbd\xa6W\xf4*\xad`'
Receive: 9 14.237668 14.237346 49: seq: 14, identify_response offset=2040 data=b'\xbac\x10_\x19\xe6(\x06i\x95r)\x93a\x92\xbd\xee\x0bhS\xb8\x13\xac\x81\x80\r\x07"\x10\x00k\xff\xd6!\x90`\xc89-\x81'
Receive: 10 14.238041 14.237721 49: seq: 15, identify_response offset=2080 data=b's\xda1`\x9e\xaa#Q-\x86\xde\xa4\x8aX\x1e\x02C%\xbd\x9ciTb\x0e\t\xd9`;^1]\xae0\xebA\xa7+\xaa \xb3'
Receive: 11 14.238459 14.238097 49: seq: 16, identify_response offset=2120 data=b"&m\x05L\xc9'\x8e\xd4\x99\x9eh9@\x1f\xd1\xc9:\xf2\xc7\xdf\x10Gc%\xef_\xaa\x927P\x1c\xf3\xceCBK\xb7\xfe\x8a}"
Receive: 12 14.238831 14.238517 49: seq: 17, identify_response offset=2160 data=b"Z\xae~$\x14\x8f=\xf0\x96\x87G=6u\xc7\x1e\xd6\xcbk5\x81i\x02'\x1e)#Q\x06\xba%\xbc\xc7\xc0\xdf\x99\xda\x95\xdeW"
Receive: 13 14.239271 14.238889 49: seq: 18, identify_response offset=2200 data=b'zB\x17hm\x9d\x99\xf0\x18\x81\x0bM\xa5J\xe5\xd2D\xec\x18\x90\xa1\xe8\xe9\x81\x03\x98\xa32\x8c\x9e<\xd4/\\K\xcf\xb0R\x87\x99'
Receive: 14 14.239653 14.239330 49: seq: 19, identify_response offset=2240 data=b"\xc7N\x9b\xba\x9e\xa9\xe4\xd1\x9b\xf9h^\xbd\xfe\xcc\xfe\x81#\x13\\\x18#\xff\xf0\x1c\x81\xb0\x00'\xbd\x00\x13\xb5;\xa8\x93\x1efJg"
Receive: 15 14.240043 14.239711 49: seq: 1a, identify_response offset=2280 data=b'\\!\xf7l_4\x8a[\xe8\xc81\x00\xde.\r\xdc\xcc]\xfa\x86\xb77\xd7:$pu\x07o\xf0\x14\xae\x93W\x19Z\xb8\xb2\t\x9c'
Receive: 16 14.240462 14.240117 49: seq: 1b, identify_response offset=2320 data=b'(\x84\x00K\x17\xf0T\xcb\xfb\x12K?\xb0\x18Q%S\t[\x9a\x03\x7f\xe1\xa8|\x04\x94__\xb0O\xdb\\:\x85\xa2\xc6\xca\xde\x1d'
Receive: 17 14.240838 14.240517 49: seq: 1c, identify_response offset=2360 data=b"j\\\x02m\x06\xadv[\xd6\xaf\x84\xd4?\x81'\xa5\x8c\xc4Ao\x95\xa1\x0e?C\xb8\x13h\x1fr\x02\xe3\x9d;QT\r\xe1Y\xaa"
Receive: 18 14.241268 14.240895 49: seq: 1d, identify_response offset=2400 data=b'r\xca\xa9\nOj\x87c\x99N\x8c\x835m\xbd\x03\x9b8\xc0\xd1S\x94m\x0b\x80\x10N\t\xba\xe6\x18\x07\xf0\xbd\xfe\xc0\x95P\xe8\xf9'
Receive: 19 14.241665 14.241349 49: seq: 1e, identify_response offset=2440 data=b'`\xae-l\x83\xaa\x06kBg\xc1\x8f\x1a\x1bCp\xa4\x1d\xf6Z\x94%\xe0\xa4\x0c\xf8\rj\xb1\x84\xfc\xecJ\xa3\xa1o\xac\xc0o\x15'
Receive: 20 14.242047 14.241723 49: seq: 1f, identify_response offset=2480 data=b'\x1bpt\xbaCy\x00\xa4(\x0e\xfdA\x8fi\x7f\x00\xf17\xba\xde*\xbf\xb9\x003\x19\x1ad\xacr?\xbflT\xac\xe8\xea\x9amS'
Receive: 21 14.242456 14.242111 49: seq: 10, identify_response offset=2520 data=b')\x1dI\x86\x85\xaeG\xd7\xa4Pe@(+\xccT\x97y\x94\xfa\xc0\x95\x00\x11\x05\x97\x81\xfa\xa9\x12}\x830\x11v\xc4\xb2\xbe\xb4o'
Receive: 22 14.242834 14.242514 49: seq: 11, identify_response offset=2560 data=b'\xfct"?[\xc1\xe3\xbf\xaf>\x03\x0f\x08\x8a9}\xd5p\xc6\x85\x9d\x80\x8b"c\x07\x88+\xeaV\xfa\'`M\xc12\xa1\xae\xd2V'
Receive: 23 14.243271 14.242901 49: seq: 12, identify_response offset=2600 data=b'\x97)\xfc\xd5U\t\x11\xf3\x05\x18\xa4\xcf\xa5\x0e\x84FR8\x80\xfc\\fB\xab\xfa\x88\x96S-S`\x81\t\xc3\x1c]q\x06\xd38'
Receive: 24 14.243887 14.243563 49: seq: 13, identify_response offset=2640 data=b'\x15\x1a\xa8-\xbd_\x8aZ\xa6-\xa6\x8e\xe04\x88E\xfd\x925b\xcdZE`\xb2u\x84\xee\x90\x99\x8e\xea\xba\x98\x9a\x00\xdf\x04\xde<'
Receive: 25 14.244360 14.243956 49: seq: 14, identify_response offset=2680 data=b'\x8ad\xd6S\x9dXfE\xea\xc4\x91\xbc,\xe8\xc4\xf1,B\x1c\x00\x9c\xca"\x03\xe5\xc0\xfa\xc9\xcd\xa7\'vs\xff\xd3\x0bb-\xd0F'
Receive: 26 14.244738 14.244418 49: seq: 15, identify_response offset=2720 data=b'\x03\x1e\xce\xe9[\xa1\xae\xea\x0c\n\x14\xd23\x93S/\xe0s\x0c\x8c\xfa\x9b\xdf`I\xea\xd4l\x98\x9c\xa1\x17\xce9f2S\xf1d\xaa'
Receive: 27 14.245112 14.244794 49: seq: 16, identify_response offset=2760 data=b'\xd5\xf7\xb8\xea\x02\x1e#j\x00S(\x0e\xe1\x1e\x98\xb8\xe8ml\x9f \xe7\x81\xf9\xa4\x07\x19PUH\xe5+E\xd6VqL_\xa6|'
Receive: 28 14.245503 14.245177 49: seq: 17, identify_response offset=2800 data=b'\xfaA\xdcH\xccc\x1cO!\x8b\xf5\xb2|\xf4-Q\xd5\x12\xd5H\x9c\xfd\xd1\x14uE[\x80\x85\x9b\x02\xf59\x06a]\x11\x1e\xb0\xde'
Receive: 29 14.245889 14.245565 49: seq: 18, identify_response offset=2840 data=b'\xd7\x07\x88t\xc7\x9b\xb8\x05g\\\x1f\xd9Jl\xa2o\xc7\xa9\xe4\xc8\xbeV\xa6g\xab\x9d\x0e\xad){\xd2\xcb\xf2\x02i\x11?Z\xa5\xb0'
Receive: 30 14.246360 14.245949 49: seq: 19, identify_response offset=2880 data=b'1\xe0!\xbd,B[\x1d=\xaaS9\x02\xe8\x1a\xa8\xab\x90\xd0\xa9l*\x9d\xe8G{\x9fe\xb2|\x8b\xe2\xe1{\x14\x8e\xe9~\x1d8'
Receive: 31 14.246739 14.246420 49: seq: 1a, identify_response offset=2920 data=b'\xc7tN\x8e\x0b(\x0f\x1e\xe3\xee\xe3X`\xa6\xad2>\xaa\x8d\x9ecbt\xd7\x0cJX\xb6\\\xa3\x8aL\xfa\tJ\xa5\x0e\x97\xe5s'
Receive: 32 14.247122 14.246800 49: seq: 1b, identify_response offset=2960 data=b'/\xa3xN\x85C\xc0K\x10\r\x12\x9df\x842\x17Y^\xb1\x01RW:O\xeb0:U\xff8\xbaI\xb7\xc6\xe5^\xa9\x17\r\x0b'
Receive: 33 14.247508 14.247186 49: seq: 1c, identify_response offset=3000 data=b'\x0e\x7fi\x02\xbeD\xafm\'q\xe2" ,+\xac\xe9\x8a\xfe\xa0\xfe\x88\xdf\x95\xef\xf8\xb6\x880\xaa0P\x15\xba@\xbe\xf1(\xf6\x0c'
Receive: 34 14.247890 14.247569 49: seq: 1d, identify_response offset=3040 data=b'\xef\xf4dH\xe8)\xda\xab\x8b\x8em\xe1\xe1X\x06,9\x90\xbc\x0b\xb7\x98`\x8d\r\x02\x81\xae\t\x9c\xae\xba;\xb6\x87\xb9\x87\xbe\x8a0'
Receive: 35 14.248365 14.247957 49: seq: 1e, identify_response offset=3080 data=b'\xfa\x10\xd9\x0fB\x05\xbe\xb3\xd4\x7f\xb1\x80\xe0\xf72\xbd\xf0\xfc\x8b\xe9y\x10.\xcewi\x10N\x830\\\x84\x93/\xff\x03u\x9f\x0c\xd8'
Receive: 36 14.248626 14.248427 9: seq: 1f, identify_response offset=3120 data=b''
Receive: 37 14.250889 14.250738 14: seq: 10, canbus_id canbus_uuid=b'\x8d`\xb0\xd4\xc7p' canbus_nodeid=4
Receive: 38 14.251230 14.251019 12: seq: 11, uptime high=2 clock=1359319496
Receive: 39 14.301624 14.301456 11: seq: 12, clock clock=1379501821
Receive: 40 14.352297 14.352066 11: seq: 13, clock clock=1399770341
Receive: 41 14.402860 14.402686 11: seq: 14, clock clock=1419994669
Receive: 42 14.453409 14.453245 11: seq: 15, clock clock=1440216381
Receive: 43 14.503853 14.503685 11: seq: 16, clock clock=1460393661
Receive: 44 14.554300 14.554123 11: seq: 17, clock clock=1480572209
Receive: 45 14.578021 14.554123 15: seq: 17, stats count=1604 sum=836433 sumsq=2311936
Receive: 46 14.604728 14.604567 11: seq: 18, clock clock=1500743825
Receive: 47 14.655250 14.655006 11: seq: 19, clock clock=1520921393
Receive: 48 14.656676 14.656526 11: seq: 1a, clock clock=1521523130
Receive: 49 15.164682 15.164486 10: seq: 1b, config is_config=0 crc=0 is_shutdown=0 move_count=0
Receive: 50 15.175495 15.174624 15: seq: 1c, config is_config=1 crc=924824692 is_shutdown=0 move_count=1024
Receive: 51 15.183683 15.183445 13: seq: 1d, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 52 15.184019 15.183781 13: seq: 1e, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 53 15.184420 15.184105 13: seq: 1f, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 54 15.184740 15.184506 13: seq: 10, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 55 15.185060 15.184823 13: seq: 11, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 56 15.185469 15.185232 13: seq: 12, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 57 15.185795 15.185556 13: seq: 13, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 58 15.186114 15.185880 13: seq: 14, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 59 15.186435 15.186198 13: seq: 15, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 60 15.186747 15.186517 13: seq: 16, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 61 15.187127 15.186884 13: seq: 17, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 62 15.187516 15.187277 13: seq: 18, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 63 15.187912 15.187667 13: seq: 19, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 64 15.188278 15.187994 13: seq: 1a, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 65 15.188604 15.188364 13: seq: 1b, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 66 15.188987 15.188748 13: seq: 1c, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 67 15.189367 15.189074 13: seq: 1d, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 68 15.189726 15.189489 13: seq: 1e, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 69 15.190058 15.189815 13: seq: 1f, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 70 15.190424 15.190140 13: seq: 10, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 71 15.190810 15.190566 13: seq: 11, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 72 15.191128 15.190892 13: seq: 12, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 73 15.191443 15.191207 13: seq: 13, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 74 15.191754 15.191523 13: seq: 14, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 75 15.192068 15.191833 13: seq: 15, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 76 15.192454 15.192218 13: seq: 16, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 77 15.192772 15.192535 13: seq: 17, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 78 15.193088 15.192851 13: seq: 18, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 79 15.193416 15.193167 13: seq: 19, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 80 15.193728 15.193494 13: seq: 1a, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 81 15.264890 15.263047 8: seq: 10, neopixel_result oid=6 success=1
Receive: 82 15.265522 15.265415 8: seq: 11, stepper_position oid=7 pos=0
Receive: 83 15.266004 15.265762 13: seq: 12, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 84 15.266287 15.266170 8: seq: 13, stepper_position oid=10 pos=0
Receive: 85 15.266643 15.266406 13: seq: 14, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 86 15.266859 15.266753 8: seq: 15, stepper_position oid=13 pos=0
Receive: 87 15.267277 15.266969 13: seq: 16, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 88 15.267450 15.267349 8: seq: 17, stepper_position oid=15 pos=0
Receive: 89 15.267795 15.267561 13: seq: 18, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 90 15.268015 15.267901 8: seq: 19, stepper_position oid=16 pos=0
Receive: 91 15.268424 15.268124 13: seq: 1a, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 92 15.268629 15.268527 8: seq: 1b, stepper_position oid=17 pos=0
Receive: 93 15.268978 15.268740 13: seq: 1c, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 94 15.274873 15.274631 13: seq: 1e, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 95 15.275283 15.274984 13: seq: 1f, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 96 15.275623 15.275383 13: seq: 10, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 97 15.275967 15.275726 13: seq: 11, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 98 15.276430 15.276133 13: seq: 12, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 99 15.279548 15.279315 12: seq: 13, shutdown clock=1770640888 static_string_id=Command request
MCU 'ebb' shutdown: Command request
clocksync state: mcu_freq=12000000 last_clock=305499220 clock_est=(14.827 301444260 12000864.932) min_half_rtt=0.000085 min_rtt_time=14.911 time_avg=14.827(0.017) clock_avg=301444260.621(201956.076) pred_variance=106141754.091 clock_adj=(0.329 12000073.250)
Dumping serial stats: bytes_write=1351 bytes_read=4910 bytes_retransmit=0 bytes_invalid=0 send_seq=143 receive_seq=143 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 14.697560 14.697560 9: seq: 1b, identify offset=1080 count=40
Sent 1 14.698689 14.698689 9: seq: 1c, identify offset=1120 count=40
Sent 2 14.699809 14.699809 9: seq: 1d, identify offset=1160 count=40
Sent 3 14.700932 14.700932 9: seq: 1e, identify offset=1200 count=40
Sent 4 14.702055 14.702055 9: seq: 1f, identify offset=1240 count=40
Sent 5 14.703263 14.703263 9: seq: 10, identify offset=1280 count=40
Sent 6 14.704388 14.704388 9: seq: 11, identify offset=1320 count=40
Sent 7 14.705507 14.705507 9: seq: 12, identify offset=1360 count=40
Sent 8 14.706623 14.706623 9: seq: 13, identify offset=1400 count=40
Sent 9 14.707833 14.707833 9: seq: 14, identify offset=1440 count=40
Sent 10 14.708959 14.708959 9: seq: 15, identify offset=1480 count=40
Sent 11 14.710082 14.710082 9: seq: 16, identify offset=1520 count=40
Sent 12 14.711300 14.711300 9: seq: 17, identify offset=1560 count=40
Sent 13 14.712434 14.712434 9: seq: 18, identify offset=1600 count=40
Sent 14 14.713569 14.713569 9: seq: 19, identify offset=1640 count=40
Sent 15 14.714684 14.714684 9: seq: 1a, identify offset=1680 count=40
Sent 16 14.715811 14.715811 9: seq: 1b, identify offset=1720 count=40
Sent 17 14.716934 14.716934 9: seq: 1c, identify offset=1760 count=40
Sent 18 14.718059 14.718059 9: seq: 1d, identify offset=1800 count=40
Sent 19 14.719248 14.719248 9: seq: 1e, identify offset=1840 count=40
Sent 20 14.720358 14.720358 9: seq: 1f, identify offset=1880 count=40
Sent 21 14.721487 14.721487 9: seq: 10, identify offset=1920 count=40
Sent 22 14.722594 14.722594 9: seq: 11, identify offset=1960 count=40
Sent 23 14.723708 14.723708 9: seq: 12, identify offset=2000 count=40
Sent 24 14.724831 14.724831 9: seq: 13, identify offset=2040 count=40
Sent 25 14.725956 14.725956 9: seq: 14, identify offset=2080 count=40
Sent 26 14.727083 14.727083 9: seq: 15, identify offset=2120 count=40
Sent 27 14.728294 14.728294 9: seq: 16, identify offset=2160 count=40
Sent 28 14.729412 14.729412 9: seq: 17, identify offset=2200 count=40
Sent 29 14.730528 14.730528 9: seq: 18, identify offset=2240 count=40
Sent 30 14.731638 14.731638 9: seq: 19, identify offset=2280 count=40
Sent 31 14.732760 14.732760 9: seq: 1a, identify offset=2320 count=40
Sent 32 14.733879 14.733879 9: seq: 1b, identify offset=2360 count=40
Sent 33 14.735005 14.735005 9: seq: 1c, identify offset=2400 count=40
Sent 34 14.736132 14.736132 9: seq: 1d, identify offset=2440 count=40
Sent 35 14.737292 14.737292 9: seq: 1e, identify offset=2480 count=40
Sent 36 14.738419 14.738419 9: seq: 1f, identify offset=2520 count=40
Sent 37 14.739542 14.739542 9: seq: 10, identify offset=2560 count=40
Sent 38 14.740662 14.740662 9: seq: 11, identify offset=2600 count=40
Sent 39 14.741780 14.741780 9: seq: 12, identify offset=2640 count=40
Sent 40 14.742900 14.742900 9: seq: 13, identify offset=2680 count=40
Sent 41 14.744043 14.744043 9: seq: 14, identify offset=2720 count=40
Sent 42 14.745164 14.745164 9: seq: 15, identify offset=2760 count=40
Sent 43 14.746293 14.746293 9: seq: 16, identify offset=2800 count=40
Sent 44 14.747406 14.747406 9: seq: 17, identify offset=2840 count=40
Sent 45 14.748530 14.748530 9: seq: 18, identify offset=2880 count=40
Sent 46 14.749645 14.749645 9: seq: 19, identify offset=2920 count=40
Sent 47 14.750760 14.750760 9: seq: 1a, identify offset=2960 count=40
Sent 48 14.751883 14.751883 9: seq: 1b, identify offset=3000 count=40
Sent 49 14.753007 14.753007 9: seq: 1c, identify offset=3040 count=40
Sent 50 14.754122 14.754122 9: seq: 1d, identify offset=3080 count=40
Sent 51 14.755293 14.755293 9: seq: 1e, identify offset=3120 count=40
Sent 52 14.755928 14.755928 9: seq: 1f, identify offset=3125 count=40
Sent 53 14.758180 14.758089 6: seq: 10, get_canbus_id
Sent 54 14.758828 14.758737 6: seq: 11, get_uptime
Sent 55 14.809472 14.809381 6: seq: 12, get_clock
Sent 56 14.860070 14.859979 6: seq: 13, get_clock
Sent 57 14.910659 14.910568 6: seq: 14, get_clock
Sent 58 14.961320 14.961229 6: seq: 15, get_clock
Sent 59 15.011980 15.011889 6: seq: 16, get_clock
Sent 60 15.062558 15.062467 6: seq: 17, get_clock
Sent 61 15.113126 15.113035 6: seq: 18, get_clock
Sent 62 15.163700 15.163609 6: seq: 19, get_clock
Sent 63 15.164593 15.164502 6: seq: 1a, get_clock
Sent 64 15.175924 15.175833 6: seq: 1b, get_config
Sent 65 15.176737 15.176638 7: seq: 1c, allocate_oids count=13
Sent 66 15.176899 15.176656 9: seq: 1d, config_spi oid=0 pin=gpio1 cs_active_high=0
Sent 67 15.177006 15.176700 8: seq: 1e, config_adxl345 oid=1 spi_oid=0
Sent 68 15.177168 15.176714 9: seq: 1f, config_spi oid=5 pin=gpio9 cs_active_high=0
Sent 69 15.177378 15.176762 15: seq: 10, spi_set_software_bus oid=0 miso_pin=gpio3 mosi_pin=gpio0 sclk_pin=gpio2 mode=3 rate=5000000
Sent 70 15.177540 15.176778 9: seq: 11, config_endstop oid=2 pin=gpio24 pull_up=0
Sent 71 15.177639 15.176793 7: seq: 12, config_trsync oid=3
Sent 72 15.177825 15.176807 12: seq: 13, config_tmcuart oid=4 rx_pin=gpio20 pull_up=0 tx_pin=gpio20 bit_time=300
Sent 73 15.178003 15.176819 11: seq: 14, config_digital_out oid=8 pin=gpio13 value=0 default_value=0 max_duration=0
Sent 74 15.178173 15.176827 10: seq: 15, set_digital_out_pwm_cycle oid=8 cycle_ticks=120000
Sent 75 15.178351 15.176836 11: seq: 16, config_digital_out oid=9 pin=gpio14 value=0 default_value=0 max_duration=0
Sent 76 15.178521 15.176842 10: seq: 17, set_digital_out_pwm_cycle oid=9 cycle_ticks=120000
Sent 77 15.179365 15.177899 59: seq: 18, config_analog_in oid=10 pin=gpio28, spi_set_software_bus oid=5 miso_pin=gpio11 mosi_pin=gpio8 sclk_pin=gpio10 mode=1 rate=4000000, config_thermocouple oid=6 spi_oid=5 thermocouple_type=MAX31865, config_digital_out oid=11 pin=gpio7 value=0 default_value=0 max_duration=60000000, set_digital_out_pwm_cycle oid=11 cycle_ticks=1200000, config_stepper oid=7 step_pin=gpio18 dir_pin=gpio19 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=12 pin=gpio17 value=1 default_value=1 max_duration=0, finalize_config crc=3237245062, spi_send oid=5 data=b'\x80\xc3'
Sent 78 15.181081 15.180245 58: seq: 19, queue_digital_out oid=8 clock=308039817 on_ticks=0, queue_digital_out oid=9 clock=308040062 on_ticks=0, query_analog_in oid=10 clock=321257795 sample_ticks=12000 sample_count=8 rest_ticks=3600000 min_value=0 max_value=32760 range_check_count=4, query_thermocouple oid=6 clock=320777795 rest_ticks=3600000 min_value=15240 max_value=32318 max_invalid_count=3
Sent 79 15.181674 15.181472 14: seq: 1a, queue_digital_out oid=11 clock=308040637 on_ticks=0, get_config
Sent 80 15.194103 15.193901 14: seq: 1b, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 81 15.198343 15.198054 19: seq: 1c, tmcuart_send oid=4 write=b'\xea\x03\x080\x80\x00\n\x08\xb8\x87' read=0
Sent 82 15.201072 15.200870 14: seq: 1d, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 83 15.205268 15.204979 19: seq: 1e, tmcuart_send oid=4 write=b'\xea\x03h0\x80\x00\x12\x08 \xda' read=0
Sent 84 15.207976 15.207774 14: seq: 1f, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 85 15.212602 15.212313 19: seq: 10, tmcuart_send oid=4 write=b'\xea\x03\x88=\x9a\x06\x02h*\xbf' read=0
Sent 86 15.215307 15.215105 14: seq: 11, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 87 15.219962 15.219673 19: seq: 12, tmcuart_send oid=4 write=b'\xea\x03\x082\x80\x10\x9ah"\x9c' read=0
Sent 88 15.222670 15.222468 14: seq: 13, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 89 15.227247 15.226958 19: seq: 14, tmcuart_send oid=4 write=b'\xea\x03h2\x80\x1e\xfa\xef?\xdf' read=0
Sent 90 15.229948 15.229746 14: seq: 15, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 91 15.234594 15.234305 19: seq: 16, tmcuart_send oid=4 write=b'\xea\x03\x08>\xe4\x1ar\x88\xa4\x85' read=0
Sent 92 15.237292 15.237090 14: seq: 17, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 93 15.241863 15.241574 19: seq: 18, tmcuart_send oid=4 write=b'\xea\x03(2\x80\x00\x02\x88"\xf3' read=0
Sent 94 15.244604 15.244402 14: seq: 19, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 95 15.249325 15.249036 19: seq: 1a, tmcuart_send oid=4 write=b'\xea\x03\x088\x80\x00\x02\x08 \xba' read=0
Sent 96 15.252054 15.251852 14: seq: 1b, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 97 15.269263 15.269164 7: seq: 1c, stepper_get_position oid=7
Sent 98 15.269893 15.269691 14: seq: 1d, tmcuart_send oid=4 write=b'\xea\x03H-\xd5' read=10
Sent 99 15.279470 15.279379 6: seq: 1e, emergency_stop
Dumping receive queue 100 messages
Receive: 0 14.683907 14.682836 49: seq: 1f, identify_response offset=560 data=b"\xdd\x101\x86\x8eA<\xf1|'\xb6;\xc5a\xb2\xf2\xe1\xc1\x91\xb65?\xe2\xa4v/\x1f^;N\xb2\x89''\x8d\xd3\x1f;\xac\xb7"
Receive: 1 14.685022 14.683949 49: seq: 10, identify_response offset=600 data=b'\xf2\xbd\xdc~\xff\xe6\xef\x10\xe5\x92dr\x16U\x8bfTJk&\x89\xb3\x1e9,\xd7.r\x94\xf2\x88\xb51)*;|m\xca|'
Receive: 2 14.686204 14.685066 49: seq: 11, identify_response offset=640 data=b'j\xcd\xac\xdcWyh\xe0\xd9\xda\xbb\x81c|\xb7\xa4\xc3T[\x13\xabDo\x86\x14\xeb\x14\xb0\x83\x1ak\xc9=\xa4\xb1cl\xd8\xf1~'
Receive: 3 14.687310 14.686247 49: seq: 12, identify_response offset=680 data=b'\xdfB(\xe9\x8eJ\xd4\xdfvB]8\xd7\x1e\xf6\xe5X\xf4\xd66\xfa\x97\xfc \x0e\xb1\xc1.\xa2\xe5\rb\xcf\x89\xb5\xc8a\xe9Q\x1e'
Receive: 4 14.688433 14.687353 49: seq: 13, identify_response offset=720 data=b'N\xac\x10Y+\xfe0\x82=\xb7\x90\xd9\xd6f\x06X\xb6\xca\x96I?\x91\x05\xc3\xc0\xcc\xda\xbe\xe2=\xde\x07y\xa5\xa7x\x15\x1b\x80\xe7'
Receive: 5 14.689556 14.688478 49: seq: 14, identify_response offset=760 data=b'^\x0c\xfc\x00\x02\x8d\x96\x00\x81\x14\xbe\xe7\xfd\x967\xe5k\x8e\x81\r\x88\x80%\nr\xf9\xae\xdd\xf3\x83\xb4#\x8b}\xe7;\x80\x9e\xdb\xa4'
Receive: 6 14.690678 14.689599 49: seq: 15, identify_response offset=800 data=b'3MK@\xba\x0b\xac\xc4\xae\x95q/\xb6[\xde#\x13\xb2\xa5\xe0\x10g\xeer\x95\xf4\x80\xa6b\xe0V@18\xe7F@:\x01\x97'
Receive: 7 14.691790 14.690722 49: seq: 16, identify_response offset=840 data=b'\xceI\x86\xac\xecK\n\x89og[\xf0\xe6\xb2h\x1eF\x99\x8b\n\xe4\x17\xeb%$\x1d\xe4\xaeg\xea\x18x\x08M\xc7\x0e\x15\x03\xae\xf9'
Receive: 8 14.692915 14.691832 49: seq: 17, identify_response offset=880 data=b'v\xa6\xc3u.\x81\x84\x1c\x8c\xd2f#\x1c\x93\xe8\x17Q\x00\x86Za^\xae\xd4`\xa0!\x8cT\xa4\x1fm"\\\xb9\x17\xc3\xb5\xbc\xe6'
Receive: 9 14.694038 14.692958 49: seq: 18, identify_response offset=920 data=b':\x03\xae\t\x10\xe3\x10\x90\xedG9\x98\xaa\x18\x05\xfc\xe3/\xaa\x8eK\xb2\xe34r\xa7d\xbb\x19\x9e\x8b\x9e\xfb\xc7\xc1\xf7\xac\xbfU\x85'
Receive: 10 14.695248 14.694080 49: seq: 19, identify_response offset=960 data=b'\x19\x1e\xc3\xb4H\t\x93\xb6\x93\x90\x8f\x14\xf9\xa8x3\x88\r\xd4\x1f\x9b\r\\\xa8\x1c\xd6\xa6e \xc4d\x00\xd8\x1b\xbfb2\xc3\x0e.'
Receive: 11 14.696381 14.695317 49: seq: 1a, identify_response offset=1000 data=b'\xdc\xb5u\xa5&\xdf6\x02\xc6\xfb\xbe\x9d\x18\xc5\n\xd4h\xe2\xbb\x12\xba5\x87\xcc\xdf\x19\xbb\xca\x99\n\x15V\xbb\xd1\xe3%\x03\xc3&\x9b'
Receive: 12 14.697516 14.696432 49: seq: 1b, identify_response offset=1040 data=b'\n\xaa\x9d\x89\xc1\xc2u\xeb\x00N\xd9\xe0\xe8\x82\xdfj\xe5\x00&\xe5O\x80h\x11\xc2\x85\x88\x16K\x0b\x10VH\xff\xa7\xb7\xed\x9d\xb7\xe9'
Receive: 13 14.698647 14.697560 49: seq: 1c, identify_response offset=1080 data=b'\xf4\xe3fP\x1dn\xe1\xe0\x8e\x97\x8f^]\x95D\x86\x86\xa0\xac\xb2\x14t-\x04\xb4\xf0~/Pg\x06\xc1\xa4\x10\t\x85\xba\x98@\x1d'
Receive: 14 14.699766 14.698689 49: seq: 1d, identify_response offset=1120 data=b'\x88\xd4"\t\xaa\x8e\x10\xcd<\x80S\xf6\x16\x04\x89\x95eiZ`\x04\xb8\x96\xcb)XH\xd3\xd2\x92\x1c\x94 !\x9e4\x80;@d'
Receive: 15 14.700887 14.699809 49: seq: 1e, identify_response offset=1160 data=b'\r\xef \x87\x7f\xa5\x96\xc7\x88\x04)[lHGK\xcb\x10a\x0e\x84\x04\x00\xd6d\x8f\xa5\xb5\xaf\\\xe2\xd9\xca\xc4Th\x02\xe9\x14\xa2'
Receive: 16 14.702012 14.700932 49: seq: 1f, identify_response offset=1200 data=b'l\xe5Y\xca\x82t4\xf2c5\xb5\xbd\xa3\xf5k\xa9\xc8\x1e\tJ)\x0bn\xcd\x13bMj\x801w3W;\xf2\x9e\xd2\x95\t;'
Receive: 17 14.703204 14.702055 49: seq: 10, identify_response offset=1240 data=b';\x15\xc2\xe0W@B\x80\x08\xa0\xaa8\x88\xf6\x91\x1e\xaa\xf3\x14\xf4\xc3\xfb\xe0\x00X\x10\xc2\xf8<\x04\x0f\x02\xa0;9\x00R\x1c\xa8\xd2'
Receive: 18 14.704338 14.703263 49: seq: 11, identify_response offset=1280 data=b'\xcf\xe2\x9c\xd4\x81phA\x87\x1a\xfe\xa2I\x80\xea\xc4\x86T\xd1S\x02\x8b\x08\xc8\xc8\xe3OjJ\x90\n\x92\xe2\xca;|\xe2m\x9c\x93'
Receive: 19 14.705463 14.704388 49: seq: 12, identify_response offset=1320 data=b'\xba\xe8\xb6\x9c\x13\x9c\x17\x1f\xbd\xdd$5\xbb\x934\x83K:\xcd\xec\xdb\x8a{I\x02\x8e,\xdc\x91c9f/dk2\xcb\xbe\x95\xe2'
Receive: 20 14.706580 14.705507 49: seq: 13, identify_response offset=1360 data=b'X\xddw\x80t\xa1\xb9\xf9:\x1f\t\x98\x0c\x95\x94\xdfJ\xc3\xd9j\nu<\x0bgK\x84R\xc5c\x8e\xa9\x1er\x82\xc0R\xdc\xfaM'
Receive: 21 14.706813 14.705507 14: seq: 13, stats count=401 sum=83057 sumsq=260899
Receive: 22 14.707791 14.706623 49: seq: 14, identify_response offset=1400 data=b'\xb4v\x00\xaa\xe6@\xeb\xa5\x84\xc4l~\xf2\xb2\x15\x9c\x80\x8bu\xe97\x11\xb5\xca\x9f6\xbdSr\x02\x8d\xe8\xd3(C\xf4\xe9#\x1e\x00'
Receive: 23 14.708915 14.707833 49: seq: 15, identify_response offset=1440 data=b"&\xb1rp\x83_R\xf2\xae\xedu\xf1B\xde\xab\xe6\xd6H\xf8K'@%~\xf5\xb4\xb6\x98\x02.| \x10\n\xa5\xcac~\xec\xf9"
Receive: 24 14.710039 14.708959 49: seq: 16, identify_response offset=1480 data=b'@\xfa\xc5\x94\xa9\xd8\xf78\x7fw\x91_\x9f\xff\x8a%\xc1\x1aT\xf4\xc3\xe7\xbb\xfc\xd3\xd5\xcd\x1d>\x1e\xe7\x05vZ:\xd1\xce\xdf\xe2\xdf'
Receive: 25 14.711248 14.710082 49: seq: 17, identify_response offset=1520 data=b'h\x16l?\xe8\xedTmg\xe1v\xa9\xb7Wj{\x1dnWz\x1bjZ\xf5\x93\x84\x00\xdc\x00,\x08`\x19\x02l4@L\xf4\xc5'
Receive: 26 14.712385 14.711300 49: seq: 18, identify_response offset=1560 data=b'\x07\x04n\r\x00Q\x18\x1f\x90\xb83\x00Dc\x1c\x12\x19\x19\t\x10\x8d!\x89\x91\x91\x00Q\x18\x12\x18\x19\tDZ\x80!\x81\x91\x95\x01'
Receive: 27 14.713524 14.712434 49: seq: 19, identify_response offset=1600 data=b'\x11\x18\x85\x04FV\x06D`t@\xa0\x95\x01Q\x18\x1f\x90he@4\xc6\x13"\xc1e\x03%\'\x04\x15\x02MU\xbdT\x7f\x17!'
Receive: 28 14.714640 14.713569 49: seq: 1a, identify_response offset=1640 data=b"P\x19(lM?\xab\x10\xae\n\xf4\xa6\xef\x0c/\xb5\xc2\xd7\xbcG\xf43\x0f\xc1\x1e\x02C\xca\xe8'\r\xe1\xca\xc0\x1a\x88\x8b\x18\xd9\xb8"
Receive: 29 14.715768 14.714684 49: seq: 1b, identify_response offset=1680 data=b'8\xbfA\xd0\x7f\xde^\xfe\xfc\xf9\xf2\xe6\xe2\xdf\xf8\x14S\xff`\xeb\xe3O\x17\x1f\xd4\x0e>\xbf\xcc\xea\xd5\xcd\xd5\xfd\xd5\xf9G\x85\xdc\n'
Receive: 30 14.716890 14.715811 49: seq: 1c, identify_response offset=1720 data=b'\x18\x10]_|\x86i\xdf\xc5s\xd5`\xfc\xf4\xcb59W\x8c\xd5\xd4\xed\xe5\xc5\xe5\xd5\xbf.\xf3_\xaen\xde\xfd\xf4\x0bF\xa9\x18\x17'
Receive: 31 14.718017 14.716934 49: seq: 1d, identify_response offset=1760 data=b'\xef.oaQ\x91\tt\x1c\xf8\xd4\xdd\xfd\xf9\xfd]~\xf7\xf9\xfa\xee\xe7\xfc\x87\xf3\xbbKD\xb6\xc0\xe5\xcbO\x9f.o\xf3\x1f~\xba'
Receive: 32 14.719205 14.718059 49: seq: 1e, identify_response offset=1800 data=b'\xff1\xbf|\xf7\x1e\xd6\xa3/\xf8\xc8\x1a\xe1\xd9\xa7\x1a\x13\xaa\xad\xa9\x1f\x1cz\x88\xca\xa6\x17\x0cj\x94\x1e\x1b\xa8\xb6\x98F\x95z$j'
Receive: 33 14.720312 14.719248 49: seq: 1f, identify_response offset=1840 data=b'\xdf\xa3\x07\x04:YF\xa3\xadz\x8ai\xb7Y\xaa\x11\xaahE\xa3\x07\xf5\xac\xd5V\x1f\xd1%h\xdf\x11\xdd\x82\x96\x1c\xd15h\xb3\x11'
Receive: 34 14.721441 14.720358 49: seq: 10, identify_response offset=1880 data=b'\xdd\x83\xd6\xa9\xe2\x11\xe4\x15\x13\x8c\xee/\xaf\x81\xaf\xf3\xfb\xcf\xb7\x8aU CY\xe7\xec\xec?\xf3\xb7\xc9\xfc\xbf_&i\x13\x1e\xf0\xaa'
Receive: 35 14.722552 14.721487 49: seq: 11, identify_response offset=1920 data=b'y\x1b%I\xa2X+d6O\x97\x95bn\xa8y6\x8fb\xa0,\xd6\xa7\xb4$\xb4\xd9Sf\xd5\x92\xd0\x06\x1c\xd3\x88$\xa1\x8d\x90'
Receive: 36 14.723666 14.722594 49: seq: 12, identify_response offset=1960 data=b'r,r\x98\xd1\x08\x8b&\xc4\x08E\x9b\xc0\xe0\xde\xc33^=L\x15\x07L\x85\xdd\r\xd5\xe5\xd46<\xafE!\xf1\xad\x0f\x06\x81\xa5'
Receive: 37 14.724778 14.723708 49: seq: 13, identify_response offset=2000 data=b'\x01+j\xd5ze\xbbB\xaa5\xde\x14\x0f5\xaf(\xb9\x9c\xebM\xf3 \xaeH^\xe7M\x8bU \x03#a\r$`VH)\xb6'
Receive: 38 14.725910 14.724831 49: seq: 14, identify_response offset=2040 data=b'\r\xaf\xe0\x19&$\xbbzG\xcd\xd4\x8b\xa2\x81\xed\x81Anb\x98\xdf\x19\x94$T\x870\x95b\xd8\xf3N\xc0\x98R\x85d\x1d$;'
Receive: 39 14.727040 14.725956 49: seq: 15, identify_response offset=2080 data=b'\xa0\x8c\n(8\xfb\x97\x01\x8b0\x86\x98\x8b\x1a0\x17\x03\x03\xe4\x86^\xeac\xd1{^\x03+"0\xcd\x90\xaeiU\xd5k\xaa\xdc\x85'
Receive: 40 14.728249 14.727083 49: seq: 16, identify_response offset=2120 data=b'\xebx\xc3L\xab\xc7\x9e\x079_P\xf7\x9duE/aK=\x0f\x95a\x99\x8d\x9eC\xd9(\x07eb?\xfe\x8ao\x10\xec\x82\xfeC'
Receive: 41 14.729369 14.728294 49: seq: 17, identify_response offset=2160 data=b"wA'bf\xd1IJ\x95\xe6U|\xc1n\xce/>\xd0\x0b\x08g\xe0@\xb7\xf7fm\xee\xaf\xdd^\x9e\xbf\xd3\x1b\x98bq\xe3\x9e"
Receive: 42 14.730485 14.729412 49: seq: 18, identify_response offset=2200 data=b'\xb29e\xef+\xaa\x95\x99\xe9a\xbbV<\x95\xacT\x7f\x19(\xfd5AY\x89[\x030\xe4\xb0\xd8s\xa8w\xa9Se6\xb1?\xab'
Receive: 43 14.731596 14.730528 49: seq: 19, identify_response offset=2240 data=b",2\xf3\xb0\xec\xdb'n8g\xd8\xe1D\x0fq\xdb\xb6\x1fj;\xa0\xd4k8\xd8\xd7\xaffKT\xe2\xf1\x03\xcab\xe4:\xe8\x92f"
Receive: 44 14.732716 14.731638 49: seq: 1a, identify_response offset=2280 data=b'\x15\x1b\x97DN2]4\xc5\x02V\x18\xde\xba~\xf1\x94;\xd1il\xa9wp\xf2`\xf1a@+\xd7\xc5\x0bjne\x04KE\xe9'
Receive: 45 14.733837 14.732760 49: seq: 1b, identify_response offset=2320 data=b'5\x97\xb2\x00U\xf2\xa6D\xeb\xd6\xf6\x80\x1bBJ\xb0r\tO\xdcj\xac\xd1\x8d\xe00V\xe3L\x17:\xca\x14\xf8\x13G\x8d`!\xfe'
Receive: 46 14.734962 14.733879 49: seq: 1c, identify_response offset=2360 data=b'\xf5\x03\xbb\xa2\xaf\x94Chh\xec\x88^\xa3\xc4\xd5\x03\x85\xc1\xa8\xdf\xd4\xed3\xbdpn\xc0\x8b\nF\xec\xa0_\xab \x85\xdf[\xd4F'
Receive: 47 14.736090 14.735005 49: seq: 1d, identify_response offset=2400 data=b'\x03O\x98\x8e*}\xea\xff\xeaU\xa0\xc5-/T\x0eP.\x8f\xae^\x89\r\x14\xc7p\xb3uHp\x90M\xdf\xee\xe1 97\x00\xc2'
Receive: 48 14.737250 14.736132 49: seq: 1e, identify_response offset=2440 data=b'/\xbe\xc6\xe1O-JNm\xc5[\xae\x99Ao\x87C\x16\xb0+\xd0A\xf0\x9b\xd2\x9d\x058\x90\n{\x16u\rue\xc9a\xd7\xef'
Receive: 49 14.738377 14.737292 49: seq: 1f, identify_response offset=2480 data=b']S\xa5\xecNZ\xc9|\xe3\x04~\xdb\xb9\x03\xe7&\xdd)\x02\x10B\xec\xc7\xbdY3\xce\x01B\xb93\xfdi\xf5\x8d\n\x90\xa9p\xa0'
Receive: 50 14.739499 14.738419 49: seq: 10, identify_response offset=2520 data=b'\xe2\x93\xff\xb9\xeaN\xc7\x87\xa1m\xd9\xa6P\xdc\x11g\xd8\x18\xbc\xf7M\t\xe3\x10\x00\xaa\x8e<\xf5\xb1\xee\x95<\xf0$\x94\xd4\x92\xab\xc8'
Receive: 51 14.740619 14.739542 49: seq: 11, identify_response offset=2560 data=b'\xad\xbe\xe6\xe5\xe5nl\x1e\x01T\xa8\xd0\x8a\x1f{\xbcu\xe96@Kd\xcbP\xf9\xcb\xb6W\xee\x07%\xb8d\xa5\xd4ztMw\x8a'
Receive: 52 14.741738 14.740662 49: seq: 12, identify_response offset=2600 data=b'lmSC0|\x02\x04\x18\xb7u\x8c\xb3\x0ca"\xd4n\x80\xb9\x8bp`OK}[\xb4\xb1T\x7fq\xac(_J\xec\xc6a\\'
Receive: 53 14.742858 14.741780 49: seq: 13, identify_response offset=2640 data=b'#\xfd\x96\xb0\x8d[\xa9}\x97(\x97W|\xd6E\x8f\x99%9^\xf1\xa3p\xe9rl\xf0\xeb\x90K\x06\x8e\xef\x1cH\\\x07Mp\xcc'
Receive: 54 14.743978 14.742900 49: seq: 14, identify_response offset=2680 data=b'\\P\xa7$\xd1*\xcbT^\xd4\x93\x85J\x8d4YdJS0Y,\x960N\xbe\x00&\xb4\xd0\x06e>{\x7f\xf3\x99\xbd\xff\xf4'
Receive: 55 14.745118 14.744043 49: seq: 15, identify_response offset=2720 data=b'\xf1\t\x0bP\x90Q\x07n\xcd\xe9\xc3\xaai\x81M\xba9\xca\x1d\xf3c\xed\x82\x13\x0c\x91\xe6\x03\xe9\xe4H\xe15\xb8\x98\xda\xa1\xe7\xe0\t'
Receive: 56 14.746250 14.745164 49: seq: 16, identify_response offset=2760 data=b"\xa6.\xdb\x1efz4\x8ex\xea\x14^nz\x01s&.\xe1\x1d\x98\xa9\xa8\x91\xe0\xdek'\x89\xfd\xfe\t)O\xb7\x93\xd5\x93N5"
Receive: 57 14.747364 14.746293 49: seq: 17, identify_response offset=2800 data=b'\xa2q\xcd\xa8X\xbd\x93!X\xe4\xb6s\x81T\xa8/\x1b\xaa\xd7\xf6-V\xf5\x11=\xc8\xbd\xfb\xd1@M\xfb_\x82y\xdbn\xfe\tF'
Receive: 58 14.748486 14.747406 49: seq: 18, identify_response offset=2840 data=b'^\xd3>\x9f\xa0\xde\xb5{\x08o\x87\x97\xf8\xddy<\x9f\xb9\xb6un\xb4\xe3\xb5\xbd\xd4\xdc\x083r\xada\x0f\xd6\xf6\x88\xe9\x19~\x8a'
Receive: 59 14.749602 14.748530 49: seq: 19, identify_response offset=2880 data=b'\xb0X\xe59\xa1\xb0\xb0\x1e"\xb9\xacS\xd7J>h\xeay\x0c\x98\x86\xb1/\x90\xd4k\x03k\x99\x98\x0e\xc7X\x96\xaa\xd7\x8d\xec\xe1\xe3'
Receive: 60 14.750717 14.749645 49: seq: 1a, identify_response offset=2920 data=b'\x1d\xc8\xf4?\xa5\x9c`\xfe&w\x86\xaa\xaf~\x9ct\x12$\xa6\xd7\xa6\xe4A#\xf9\x04\xb3\xa1\x7ff\xd2\xefs\xbd-\xdd\x913\xefu'
Receive: 61 14.751840 14.750760 49: seq: 1b, identify_response offset=2960 data=b'\xea\x0b\xf9(\x1fF\x15\xe6+\xea\xb2B\x81\x041"7\xb9EjsQ\xbd(\x17\x1dM[\xf8\xb8\x0c\xb3c\xcd\xa2\x03M\xfa\rA'
Receive: 62 14.752964 14.751883 49: seq: 1c, identify_response offset=3000 data=b'_\xa5Q6\xed\xce\xfc\xa9\t\xc4\xaa\xb8\xed\x07U\x18\xae\x13*u\xa53]9\xee\xf5\x8f\xfcM\xfbN\xec:.A;\x86Z\xf6\x02'
Receive: 63 14.754079 14.753007 49: seq: 1d, identify_response offset=3040 data=b'\xf1.\x82\xd83\xd5\xe9\xd1\x900R\xa8\xd7\x8a^\xb8.\xcd!\x0f\xd8\x9f!~\xd7~\xe7\xc5\x19\x1b\x04\x02\xd3@9\xfe\x89\xc2\xb3='
Receive: 64 14.755251 14.754122 49: seq: 1e, identify_response offset=3080 data=b'L<\xf4\t\x89\xd1W\xdbq\x12*\xf0\xad\xa5\xff?\n\x04\xbf\xa7\xf9i\x14\x9f\xceO\x92t}\xb2-\x92t\x9e\xa4\xe9:\x9d}\xf9'
Receive: 65 14.755816 14.755293 14: seq: 1f, identify_response offset=3120 data=b'\x1f\xdc\x00}\x1b'
Receive: 66 14.756431 14.755928 9: seq: 10, identify_response offset=3125 data=b''
Receive: 67 14.758399 14.758180 14: seq: 11, canbus_id canbus_uuid=b'\x9fQ\x0b\xf96a' canbus_nodeid=5
Receive: 68 14.759021 14.758828 12: seq: 12, uptime high=0 clock=300629439
Receive: 69 14.809649 14.809472 11: seq: 13, clock clock=301237346
Receive: 70 14.860246 14.860070 11: seq: 14, clock clock=301844515
Receive: 71 14.910829 14.910659 11: seq: 15, clock clock=302451482
Receive: 72 14.961507 14.961320 11: seq: 16, clock clock=303059647
Receive: 73 15.012152 15.011980 11: seq: 17, clock clock=303667433
Receive: 74 15.062731 15.062558 11: seq: 18, clock clock=304274375
Receive: 75 15.113298 15.113126 11: seq: 19, clock clock=304881230
Receive: 76 15.163873 15.163700 11: seq: 1a, clock clock=305488145
Receive: 77 15.164795 15.164593 11: seq: 1b, clock clock=305499220
Receive: 78 15.176105 15.175924 10: seq: 1c, config is_config=0 crc=0 is_shutdown=0 move_count=0
Receive: 79 15.181885 15.181674 15: seq: 1b, config is_config=1 crc=3237245062 is_shutdown=0 move_count=1024
Receive: 80 15.197639 15.194103 18: seq: 1c, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x08 \xa6'
Receive: 81 15.200699 15.198343 8: seq: 1d, tmcuart_response oid=4 read=b''
Receive: 82 15.204605 15.201072 18: seq: 1e, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02(\xa0\xe2'
Receive: 83 15.207612 15.205268 8: seq: 1f, tmcuart_response oid=4 read=b''
Receive: 84 15.211947 15.207976 18: seq: 10, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02H\xa0\xc5'
Receive: 85 15.214946 15.212602 8: seq: 11, tmcuart_response oid=4 read=b''
Receive: 86 15.219307 15.215307 18: seq: 12, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02h \x81'
Receive: 87 15.222309 15.219962 8: seq: 13, tmcuart_response oid=4 read=b''
Receive: 88 15.226599 15.222670 18: seq: 14, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x88 \xd6'
Receive: 89 15.229589 15.227247 8: seq: 15, tmcuart_response oid=4 read=b''
Receive: 90 15.233948 15.229948 18: seq: 16, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xa8\xa0\x92'
Receive: 91 15.236933 15.234594 8: seq: 17, tmcuart_response oid=4 read=b''
Receive: 92 15.241218 15.237292 18: seq: 18, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xc8\xa0\xb5'
Receive: 93 15.244215 15.241863 8: seq: 19, tmcuart_response oid=4 read=b''
Receive: 94 15.248533 15.244604 18: seq: 1a, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xe8 \xf1'
Receive: 95 15.251682 15.249325 8: seq: 1b, tmcuart_response oid=4 read=b''
Receive: 96 15.255992 15.252054 18: seq: 1c, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x08!\x9e'
Receive: 97 15.269414 15.269263 8: seq: 1d, stepper_position oid=7 pos=0
Receive: 98 15.273822 15.269893 18: seq: 1e, tmcuart_response oid=4 read=b'\n\xfaO-\x80\x00\x02H \xf9'
Receive: 99 15.279741 15.279470 12: seq: 1f, shutdown clock=306877635 static_string_id=Command request
Attempting MCU 'ebb' reset command
Attempting MCU 'mcu' reset command
b'Got error -1 in can read: (100)Network is down'
webhooks client 140732675254160: Disconnected
Restarting printer
Start printer at Tue Nov 19 19:38:18 2024 (1732016298.0 47.9)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.2
stealthchop_threshold = 0

[stepper_y]
step_pin = PE5
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = PF0
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.2
stealthchop_threshold = 0

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256
endstop_pin = probe:z_virtual_endstop
position_max = 335
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 256

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
webhooks client 140732676398288: New connection
webhooks client 140732676398288: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Sending MCU 'ebb' printer configuration...
Configured MCU 'ebb' (1024 moves)
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (25.0, 25.0)    | (25.0, 25.0)
  1   | (103.8, 25.0)   | (103.8, 25.0)
  2   | (182.5, 25.0)   | (182.5, 25.0)
  3   | (261.2, 25.0)   | (261.2, 25.0)
  4   | (340.0, 25.0)   | (340.0, 25.0)
  5   | (340.0, 103.8)  | (340.0, 103.8)
  6   | (261.2, 103.8)  | (261.2, 103.8)
  7   | (182.5, 103.8)  | (182.5, 103.8)
  8   | (103.8, 103.8)  | (103.8, 103.8)
  9   | (25.0, 103.8)   | (25.0, 103.8)
  10  | (25.0, 182.5)   | (25.0, 182.5)
  11  | (103.8, 182.5)  | (103.8, 182.5)
  12  | (182.5, 182.5)  | (182.5, 182.5)
  13  | (261.2, 182.5)  | (261.2, 182.5)
  14  | (340.0, 182.5)  | (340.0, 182.5)
  15  | (340.0, 261.2)  | (340.0, 261.2)
  16  | (261.2, 261.2)  | (261.2, 261.2)
  17  | (182.5, 261.2)  | (182.5, 261.2)
  18  | (103.8, 261.2)  | (103.8, 261.2)
  19  | (25.0, 261.2)   | (25.0, 261.2)
  20  | (25.0, 340.0)   | (25.0, 340.0)
  21  | (103.8, 340.0)  | (103.8, 340.0)
  22  | (182.5, 340.0)  | (182.5, 340.0)
  23  | (261.2, 340.0)  | (261.2, 340.0)
  24  | (340.0, 340.0)  | (340.0, 340.0)
TMC stepper_x failed to init: Unable to write tmc spi 'stepper_x' register GLOBALSCALER
TMC stepper_y failed to init: Unable to write tmc spi 'stepper_y' register GLOBALSCALER
TMC stepper_z failed to init: Unable to write tmc spi 'stepper_z' register GLOBALSCALER
TMC stepper_z1 failed to init: Unable to write tmc spi 'stepper_z1' register GLOBALSCALER
TMC stepper_z2 failed to init: Unable to write tmc spi 'stepper_z2' register GLOBALSCALER
TMC stepper_z3 failed to init: Unable to write tmc spi 'stepper_z3' register GLOBALSCALER
Starting heater checks for heater_bed
Starting heater checks for extruder
autotune_tmc set stepper_x pwm_freq=2
Unhandled exception during ready callback
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 314, in _connect
    cb()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 169, in handle_ready
    self.tune_driver()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 220, in tune_driver
    self._set_pwmfreq()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 286, in _set_pwmfreq
    self._set_driver_field('pwm_freq', pwm_freq)
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 249, in _set_driver_field
    tmco.mcu_tmc.set_register(register, val, None)
  File "/home/pi/klipper/klippy/extras/tmc2130.py", line 403, in set_register
    raise self.printer.command_error(
gcode.CommandError: Unable to write tmc spi 'stepper_x' register PWMCONF
Transition to shutdown state: Internal error during ready callback: Unable to write tmc spi 'stepper_x' register PWMCONF
Dumping gcode input 0 blocks
Dumping 5 requests for client 140732676398288
Received 48.345854: b'{"id": 140733765685392, "method": "info", "params": {"client_info": {"program": "Moonraker", "version": "v0.9.3-1-g4e00a07"}}}'
Received 48.346420: b'{"id": 140733786504592, "method": "list_endpoints", "params": {}}'
Received 48.598203: b'{"id": 140733765697488, "method": "info", "params": {}}'
Received 48.848939: b'{"id": 140733765695888, "method": "info", "params": {}}'
Received 49.099564: b'{"id": 140733765696912, "method": "info", "params": {}}'
gcode state: absolute_coord=True absolute_extrude=True base_position=[0.0, 0.0, 0.0, 0.0] last_position=[0.0, 0.0, 0.0, 0.0] homing_position=[0.0, 0.0, 0.0, 0.0] speed_factor=0.016666666666666666 extrude_factor=1.0 speed=25.0
Reactor garbage collection: (48.619992693, 0.0, 0.0)
MCU 'mcu' shutdown: Command request
clocksync state: mcu_freq=400000000 last_clock=602324484 clock_est=(48.181 467637411 400002224.430) min_half_rtt=0.000072 min_rtt_time=48.314 time_avg=48.181(0.017) clock_avg=467637411.340(6677956.067) pred_variance=117927188554.063
Dumping serial stats: bytes_write=2305 bytes_read=5384 bytes_retransmit=0 bytes_invalid=0 send_seq=176 receive_seq=176 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 48.104224 48.104224 9: seq: 1c, identify offset=2400 count=40
Sent 1 48.104582 48.104582 9: seq: 1d, identify offset=2440 count=40
Sent 2 48.104994 48.104994 9: seq: 1e, identify offset=2480 count=40
Sent 3 48.105354 48.105354 9: seq: 1f, identify offset=2520 count=40
Sent 4 48.105717 48.105717 9: seq: 10, identify offset=2560 count=40
Sent 5 48.106086 48.106086 9: seq: 11, identify offset=2600 count=40
Sent 6 48.106445 48.106445 9: seq: 12, identify offset=2640 count=40
Sent 7 48.106862 48.106862 9: seq: 13, identify offset=2680 count=40
Sent 8 48.107224 48.107224 9: seq: 14, identify offset=2720 count=40
Sent 9 48.107583 48.107583 9: seq: 15, identify offset=2760 count=40
Sent 10 48.107993 48.107993 9: seq: 16, identify offset=2800 count=40
Sent 11 48.108354 48.108354 9: seq: 17, identify offset=2840 count=40
Sent 12 48.108716 48.108716 9: seq: 18, identify offset=2880 count=40
Sent 13 48.109086 48.109086 9: seq: 19, identify offset=2920 count=40
Sent 14 48.109444 48.109444 9: seq: 1a, identify offset=2960 count=40
Sent 15 48.109862 48.109862 9: seq: 1b, identify offset=3000 count=40
Sent 16 48.110224 48.110224 9: seq: 1c, identify offset=3040 count=40
Sent 17 48.110584 48.110584 9: seq: 1d, identify offset=3080 count=40
Sent 18 48.110993 48.110993 9: seq: 1e, identify offset=3120 count=40
Sent 19 48.113066 48.113066 6: seq: 1f, get_canbus_id
Sent 20 48.113317 48.113317 6: seq: 10, get_uptime
Sent 21 48.163617 48.163617 6: seq: 11, get_clock
Sent 22 48.213946 48.213946 6: seq: 12, get_clock
Sent 23 48.264215 48.264215 6: seq: 13, get_clock
Sent 24 48.314473 48.314473 6: seq: 14, get_clock
Sent 25 48.365577 48.365577 6: seq: 15, get_clock
Sent 26 48.415932 48.415932 6: seq: 16, get_clock
Sent 27 48.466228 48.466228 6: seq: 17, get_clock
Sent 28 48.516528 48.516528 6: seq: 18, get_clock
Sent 29 48.517639 48.517639 6: seq: 19, get_clock
Sent 30 49.026753 49.026753 6: seq: 1a, get_config
Sent 31 49.027641 49.027641 7: seq: 1b, allocate_oids count=29
Sent 32 49.027681 49.027681 9: seq: 1c, config_spi oid=0 pin=PD6 cs_active_high=0
Sent 33 49.028094 49.028094 55: seq: 1d, config_spi oid=1 pin=PD5 cs_active_high=0, config_spi oid=2 pin=PD2 cs_active_high=0, config_spi oid=3 pin=PA15 cs_active_high=0, config_spi oid=4 pin=PA9 cs_active_high=0, config_spi oid=5 pin=PA10 cs_active_high=0, spi_set_software_bus oid=0 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, spi_set_software_bus oid=1 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, spi_set_software_bus oid=2 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 34 49.028094 49.028094 60: seq: 1e, spi_set_software_bus oid=3 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, spi_set_software_bus oid=4 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, spi_set_software_bus oid=5 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, config_analog_in oid=18 pin=PB0, config_digital_out oid=19 pin=PF6 value=0 default_value=0 max_duration=2000000000, set_digital_out_pwm_cycle oid=19 cycle_ticks=40000000, config_digital_out oid=20 pin=PA1 value=0 default_value=0 max_duration=0
Sent 35 49.028094 49.028094 60: seq: 1f, set_digital_out_pwm_cycle oid=20 cycle_ticks=20000000, config_digital_out oid=21 pin=PA4 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=21 cycle_ticks=20000000, config_analog_in oid=22 pin=PA7, config_neopixel oid=6 pin=PF12 data_size=150 bit_max_ticks=1600 reset_min_ticks=20000, config_stepper oid=7 step_pin=PC14 dir_pin=PC13 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=23 pin=PE6 value=1 default_value=1 max_duration=0, config_endstop oid=8 pin=PC15 pull_up=0, config_trsync oid=9, config_stepper oid=10 step_pin=PE5 dir_pin=PE4 invert_step=4294967295 step_pulse_ticks=0
Sent 36 49.028508 49.028508 60: seq: 10, config_digital_out oid=24 pin=PE3 value=1 default_value=1 max_duration=0, config_endstop oid=11 pin=PF0 pull_up=0, config_trsync oid=12, config_stepper oid=13 step_pin=PG9 dir_pin=PG10 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=25 pin=PG13 value=1 default_value=1 max_duration=0, config_trsync oid=14, config_stepper oid=15 step_pin=PG11 dir_pin=PD7 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=26 pin=PG12 value=1 default_value=1 max_duration=0, config_stepper oid=16 step_pin=PB4 dir_pin=PB3 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=27 pin=PB5 value=1 default_value=1 max_duration=0
Sent 37 49.035551 49.035551 63: seq: 11, config_stepper oid=17 step_pin=PG15 dir_pin=PB6 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=28 pin=PG14 value=1 default_value=1 max_duration=0, finalize_config crc=924824692, query_analog_in oid=18 clock=1272000000 sample_ticks=400000 sample_count=8 rest_ticks=120000000 min_value=14024 max_value=32038 range_check_count=4, queue_digital_out oid=19 clock=886086307 on_ticks=0, queue_digital_out oid=20 clock=886095670 on_ticks=0
Sent 38 49.036035 49.036035 34: seq: 12, queue_digital_out oid=21 clock=886100907 on_ticks=0, query_analog_in oid=22 clock=1288000000 sample_ticks=400000 sample_count=8 rest_ticks=120000000 min_value=0 max_value=32760 range_check_count=4, get_config
Sent 39 49.044290 49.044290 13: seq: 13, spi_send oid=0 data=b'\x8b\x00\x00\x00 '
Sent 40 49.044517 49.044517 13: seq: 14, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 41 49.044813 49.044813 21: seq: 15, spi_send oid=0 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 42 49.045148 49.045148 21: seq: 16, spi_send oid=0 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 43 49.045486 49.045486 21: seq: 17, spi_send oid=0 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 44 49.045871 49.045871 21: seq: 18, spi_send oid=0 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 45 49.046260 49.046260 13: seq: 19, spi_send oid=1 data=b'\x8b\x00\x00\x00 '
Sent 46 49.046298 49.046298 13: seq: 1a, spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 47 49.046647 49.046647 21: seq: 1b, spi_send oid=1 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 48 49.047005 49.047005 21: seq: 1c, spi_send oid=1 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 49 49.047340 49.047340 21: seq: 1d, spi_send oid=1 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 50 49.047680 49.047680 21: seq: 1e, spi_send oid=1 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 51 49.048115 49.048115 13: seq: 1f, spi_send oid=2 data=b'\x8b\x00\x00\x002'
Sent 52 49.048155 49.048155 13: seq: 10, spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 53 49.048501 49.048501 21: seq: 11, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 54 49.048878 49.048878 21: seq: 12, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 55 49.049210 49.049210 21: seq: 13, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 56 49.049546 49.049546 21: seq: 14, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 57 49.049968 49.049968 13: seq: 15, spi_send oid=3 data=b'\x8b\x00\x00\x002'
Sent 58 49.050006 49.050006 13: seq: 16, spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 59 49.050354 49.050354 21: seq: 17, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 60 49.050698 49.050698 21: seq: 18, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 61 49.051106 49.051106 21: seq: 19, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 62 49.051439 49.051439 21: seq: 1a, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 63 49.051814 49.051814 13: seq: 1b, spi_send oid=4 data=b'\x8b\x00\x00\x002'
Sent 64 49.051851 49.051851 13: seq: 1c, spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 65 49.052197 49.052197 21: seq: 1d, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 66 49.052532 49.052532 21: seq: 1e, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 67 49.052916 49.052916 21: seq: 1f, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 68 49.053250 49.053250 21: seq: 10, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 69 49.053632 49.053632 13: seq: 11, spi_send oid=5 data=b'\x8b\x00\x00\x002'
Sent 70 49.053670 49.053670 13: seq: 12, spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 71 49.054050 49.054050 21: seq: 13, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 72 49.054382 49.054382 21: seq: 14, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 73 49.054716 49.054716 21: seq: 15, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 74 49.055105 49.055105 21: seq: 16, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 75 49.118686 49.118686 15: seq: 17, neopixel_update oid=6 pos=0 data=b'\xff\xff\xff\xff\xff\xff'
Sent 76 49.118780 49.118780 45: seq: 18, neopixel_update oid=6 pos=6 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=22 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 77 49.118780 49.118780 45: seq: 19, neopixel_update oid=6 pos=38 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=54 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 78 49.118780 49.118780 45: seq: 1a, neopixel_update oid=6 pos=70 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=86 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 79 49.119262 49.119262 47: seq: 1b, neopixel_update oid=6 pos=102 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=118 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 80 49.125225 49.125225 28: seq: 1c, neopixel_update oid=6 pos=134 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_send oid=6
Sent 81 49.127468 49.127468 7: seq: 1d, stepper_get_position oid=7
Sent 82 49.127721 49.127721 21: seq: 1e, spi_send oid=0 data=b'j\x00\x00\x00\x00', spi_transfer oid=0 data=b'j\x00\x00\x00\x00'
Sent 83 49.128168 49.128168 7: seq: 1f, stepper_get_position oid=10
Sent 84 49.128391 49.128391 21: seq: 10, spi_send oid=1 data=b'j\x00\x00\x00\x00', spi_transfer oid=1 data=b'j\x00\x00\x00\x00'
Sent 85 49.128733 49.128733 7: seq: 11, stepper_get_position oid=13
Sent 86 49.128990 49.128990 21: seq: 12, spi_send oid=2 data=b'j\x00\x00\x00\x00', spi_transfer oid=2 data=b'j\x00\x00\x00\x00'
Sent 87 49.129334 49.129334 7: seq: 13, stepper_get_position oid=15
Sent 88 49.129549 49.129549 21: seq: 14, spi_send oid=3 data=b'j\x00\x00\x00\x00', spi_transfer oid=3 data=b'j\x00\x00\x00\x00'
Sent 89 49.129934 49.129934 7: seq: 15, stepper_get_position oid=16
Sent 90 49.130151 49.130151 21: seq: 16, spi_send oid=4 data=b'j\x00\x00\x00\x00', spi_transfer oid=4 data=b'j\x00\x00\x00\x00'
Sent 91 49.130490 49.130490 7: seq: 17, stepper_get_position oid=17
Sent 92 49.130697 49.130697 21: seq: 18, spi_send oid=5 data=b'j\x00\x00\x00\x00', spi_transfer oid=5 data=b'j\x00\x00\x00\x00'
Sent 93 49.136429 49.136429 13: seq: 19, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e'
Sent 94 49.136477 49.136477 13: seq: 1a, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 95 49.136813 49.136813 21: seq: 1b, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 96 49.137144 49.137144 21: seq: 1c, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 97 49.137476 49.137476 21: seq: 1d, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 98 49.137812 49.137812 21: seq: 1e, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 99 49.138916 49.138916 6: seq: 1f, emergency_stop
Dumping receive queue 100 messages
Receive: 0 48.097405 48.097085 49: seq: 1a, identify_response offset=1640 data=b'\xb0\x80\x9f\xd9xVn\xf0\x11d\xfb\x80\x9b|\x8cG\xf31N\xdf\xe0\xd67\xc8\xfeFJ\xb0Z~B\x9a\xab\x87\xdb\xeb\x9b\xb5\x84l'
Receive: 1 48.097818 48.097448 49: seq: 1b, identify_response offset=1680 data=b'\xab\x9f~^\xfd\x98|xX\xff\x82\xf7\xa9\xfe\x9dM\xeeVO\xb0^t\x87\xc0\xdf\xcf\xfc\xe0\xed\r\x16\xdf\xffzG\xf7\xeec\xa2\x7f'
Receive: 2 48.098180 48.097862 49: seq: 1c, identify_response offset=1720 data=b"X\xaf\xd6\xb7\xff^'\xbf\xde~\xba\xfe\xf9Wt \x1f\x077\xeb\x07\x18\x94\x87\x80\xcd\xf0\x0c\xd7p\x7f\xd7x}\x83\xc9\xa7\xcd\x95\xbc"
Receive: 3 48.098539 48.098223 49: seq: 1d, identify_response offset=1760 data=b'\x1f<\xfbR\x8a>\x98\xce\xdaw\xf0\x80R\x8a\x08\xeb?\xe2\xfa\xcd\xe3\xf2q\x93l\x9e\xee6\xbf$W\xcb\xcd\x1a\x0f\x12\xe3\xf0\xfa\xfe'
Receive: 4 48.098950 48.098581 49: seq: 1e, identify_response offset=1800 data=b'~\xfd\x90\\\xfd\xfc\xf81Y\x93\\_\xf0\xed\xd0\xc3kF\xbe\xb7e\xb5N\xe1h\xd5t\x0c\x95\xf0\xb9c\x97\x84\xa8\x07f\xe8\xcb!'
Receive: 5 48.099306 48.098992 49: seq: 1f, identify_response offset=1840 data=b'\xc7\xe6\x02\xd8\x01"\x9bv\x87\xc7\xf5\x1d\x1ca\xf9\xf8\xf4 O\x05!\xf6~9\x9d\\\xfegz\xe6\xc5\xff\x85\xce\x15v +Po'
Receive: 6 48.099670 48.099348 49: seq: 10, identify_response offset=1880 data=b"\x85\xbd\xc0W\xbdk\xec\x85s\xd5[c\x0f\xa08\xf5>`o\xae\xb9\xdc`o\xa1\xb9|\x94<=\xc9\xe6\xcb 3\xc0\x1bU\xd6'"
Receive: 7 48.100043 48.099712 49: seq: 11, identify_response offset=1920 data=b'\xbd \x08\xa4|\xa9\x88\xa6\xe1,\x97\xa2u%\x8f\xa6\x9e\xff\x0c\xe7T\xab\x94V\xc8e<9\x86\xde\xe1\xcb\x96/\x19(\x83\xa7\x90\x8d'
Receive: 8 48.100418 48.100097 49: seq: 12, identify_response offset=1960 data=b'\xa6MI$\x94/)2U\xca\x11h\x953\xd9\x02\xfb\x9b\xe3\x06\x00S\n\x0cg-<\\\xe5SLj\x8c\xc9@\xb3%$J\x85'
Receive: 9 48.100818 48.100464 49: seq: 13, identify_response offset=2000 data=b'\xb2e)k\x8bL?\xearJ\xbe\xcb\xaaF$\xc3\xc0\x9aX\x05I\x84\xa5B\x14\xbb\x8a\xe7\xf0\x94(\x04\xbb\xbd\xa6W\xf4*\xad`'
Receive: 10 48.101181 48.100862 49: seq: 14, identify_response offset=2040 data=b'\xbac\x10_\x19\xe6(\x06i\x95r)\x93a\x92\xbd\xee\x0bhS\xb8\x13\xac\x81\x80\r\x07"\x10\x00k\xff\xd6!\x90`\xc89-\x81'
Receive: 11 48.101540 48.101223 49: seq: 15, identify_response offset=2080 data=b's\xda1`\x9e\xaa#Q-\x86\xde\xa4\x8aX\x1e\x02C%\xbd\x9ciTb\x0e\t\xd9`;^1]\xae0\xebA\xa7+\xaa \xb3'
Receive: 12 48.101950 48.101582 49: seq: 16, identify_response offset=2120 data=b"&m\x05L\xc9'\x8e\xd4\x99\x9eh9@\x1f\xd1\xc9:\xf2\xc7\xdf\x10Gc%\xef_\xaa\x927P\x1c\xf3\xceCBK\xb7\xfe\x8a}"
Receive: 13 48.102306 48.101993 49: seq: 17, identify_response offset=2160 data=b"Z\xae~$\x14\x8f=\xf0\x96\x87G=6u\xc7\x1e\xd6\xcbk5\x81i\x02'\x1e)#Q\x06\xba%\xbc\xc7\xc0\xdf\x99\xda\x95\xdeW"
Receive: 14 48.102670 48.102349 49: seq: 18, identify_response offset=2200 data=b'zB\x17hm\x9d\x99\xf0\x18\x81\x0bM\xa5J\xe5\xd2D\xec\x18\x90\xa1\xe8\xe9\x81\x03\x98\xa32\x8c\x9e<\xd4/\\K\xcf\xb0R\x87\x99'
Receive: 15 48.103043 48.102712 49: seq: 19, identify_response offset=2240 data=b"\xc7N\x9b\xba\x9e\xa9\xe4\xd1\x9b\xf9h^\xbd\xfe\xcc\xfe\x81#\x13\\\x18#\xff\xf0\x1c\x81\xb0\x00'\xbd\x00\x13\xb5;\xa8\x93\x1efJg"
Receive: 16 48.103400 48.103086 49: seq: 1a, identify_response offset=2280 data=b'\\!\xf7l_4\x8a[\xe8\xc81\x00\xde.\r\xdc\xcc]\xfa\x86\xb77\xd7:$pu\x07o\xf0\x14\xae\x93W\x19Z\xb8\xb2\t\x9c'
Receive: 17 48.103818 48.103443 49: seq: 1b, identify_response offset=2320 data=b'(\x84\x00K\x17\xf0T\xcb\xfb\x12K?\xb0\x18Q%S\t[\x9a\x03\x7f\xe1\xa8|\x04\x94__\xb0O\xdb\\:\x85\xa2\xc6\xca\xde\x1d'
Receive: 18 48.104181 48.103862 49: seq: 1c, identify_response offset=2360 data=b"j\\\x02m\x06\xadv[\xd6\xaf\x84\xd4?\x81'\xa5\x8c\xc4Ao\x95\xa1\x0e?C\xb8\x13h\x1fr\x02\xe3\x9d;QT\r\xe1Y\xaa"
Receive: 19 48.104540 48.104224 49: seq: 1d, identify_response offset=2400 data=b'r\xca\xa9\nOj\x87c\x99N\x8c\x835m\xbd\x03\x9b8\xc0\xd1S\x94m\x0b\x80\x10N\t\xba\xe6\x18\x07\xf0\xbd\xfe\xc0\x95P\xe8\xf9'
Receive: 20 48.104951 48.104582 49: seq: 1e, identify_response offset=2440 data=b'`\xae-l\x83\xaa\x06kBg\xc1\x8f\x1a\x1bCp\xa4\x1d\xf6Z\x94%\xe0\xa4\x0c\xf8\rj\xb1\x84\xfc\xecJ\xa3\xa1o\xac\xc0o\x15'
Receive: 21 48.105310 48.104994 49: seq: 1f, identify_response offset=2480 data=b'\x1bpt\xbaCy\x00\xa4(\x0e\xfdA\x8fi\x7f\x00\xf17\xba\xde*\xbf\xb9\x003\x19\x1ad\xacr?\xbflT\xac\xe8\xea\x9amS'
Receive: 22 48.105674 48.105354 49: seq: 10, identify_response offset=2520 data=b')\x1dI\x86\x85\xaeG\xd7\xa4Pe@(+\xccT\x97y\x94\xfa\xc0\x95\x00\x11\x05\x97\x81\xfa\xa9\x12}\x830\x11v\xc4\xb2\xbe\xb4o'
Receive: 23 48.106043 48.105717 49: seq: 11, identify_response offset=2560 data=b'\xfct"?[\xc1\xe3\xbf\xaf>\x03\x0f\x08\x8a9}\xd5p\xc6\x85\x9d\x80\x8b"c\x07\x88+\xeaV\xfa\'`M\xc12\xa1\xae\xd2V'
Receive: 24 48.106402 48.106086 49: seq: 12, identify_response offset=2600 data=b'\x97)\xfc\xd5U\t\x11\xf3\x05\x18\xa4\xcf\xa5\x0e\x84FR8\x80\xfc\\fB\xab\xfa\x88\x96S-S`\x81\t\xc3\x1c]q\x06\xd38'
Receive: 25 48.106819 48.106445 49: seq: 13, identify_response offset=2640 data=b'\x15\x1a\xa8-\xbd_\x8aZ\xa6-\xa6\x8e\xe04\x88E\xfd\x925b\xcdZE`\xb2u\x84\xee\x90\x99\x8e\xea\xba\x98\x9a\x00\xdf\x04\xde<'
Receive: 26 48.107181 48.106862 49: seq: 14, identify_response offset=2680 data=b'\x8ad\xd6S\x9dXfE\xea\xc4\x91\xbc,\xe8\xc4\xf1,B\x1c\x00\x9c\xca"\x03\xe5\xc0\xfa\xc9\xcd\xa7\'vs\xff\xd3\x0bb-\xd0F'
Receive: 27 48.107540 48.107224 49: seq: 15, identify_response offset=2720 data=b'\x03\x1e\xce\xe9[\xa1\xae\xea\x0c\n\x14\xd23\x93S/\xe0s\x0c\x8c\xfa\x9b\xdf`I\xea\xd4l\x98\x9c\xa1\x17\xce9f2S\xf1d\xaa'
Receive: 28 48.107951 48.107583 49: seq: 16, identify_response offset=2760 data=b'\xd5\xf7\xb8\xea\x02\x1e#j\x00S(\x0e\xe1\x1e\x98\xb8\xe8ml\x9f \xe7\x81\xf9\xa4\x07\x19PUH\xe5+E\xd6VqL_\xa6|'
Receive: 29 48.108310 48.107993 49: seq: 17, identify_response offset=2800 data=b'\xfaA\xdcH\xccc\x1cO!\x8b\xf5\xb2|\xf4-Q\xd5\x12\xd5H\x9c\xfd\xd1\x14uE[\x80\x85\x9b\x02\xf59\x06a]\x11\x1e\xb0\xde'
Receive: 30 48.108673 48.108354 49: seq: 18, identify_response offset=2840 data=b'\xd7\x07\x88t\xc7\x9b\xb8\x05g\\\x1f\xd9Jl\xa2o\xc7\xa9\xe4\xc8\xbeV\xa6g\xab\x9d\x0e\xad){\xd2\xcb\xf2\x02i\x11?Z\xa5\xb0'
Receive: 31 48.109043 48.108716 49: seq: 19, identify_response offset=2880 data=b'1\xe0!\xbd,B[\x1d=\xaaS9\x02\xe8\x1a\xa8\xab\x90\xd0\xa9l*\x9d\xe8G{\x9fe\xb2|\x8b\xe2\xe1{\x14\x8e\xe9~\x1d8'
Receive: 32 48.109402 48.109086 49: seq: 1a, identify_response offset=2920 data=b'\xc7tN\x8e\x0b(\x0f\x1e\xe3\xee\xe3X`\xa6\xad2>\xaa\x8d\x9ecbt\xd7\x0cJX\xb6\\\xa3\x8aL\xfa\tJ\xa5\x0e\x97\xe5s'
Receive: 33 48.109819 48.109444 49: seq: 1b, identify_response offset=2960 data=b'/\xa3xN\x85C\xc0K\x10\r\x12\x9df\x842\x17Y^\xb1\x01RW:O\xeb0:U\xff8\xbaI\xb7\xc6\xe5^\xa9\x17\r\x0b'
Receive: 34 48.110181 48.109862 49: seq: 1c, identify_response offset=3000 data=b'\x0e\x7fi\x02\xbeD\xafm\'q\xe2" ,+\xac\xe9\x8a\xfe\xa0\xfe\x88\xdf\x95\xef\xf8\xb6\x880\xaa0P\x15\xba@\xbe\xf1(\xf6\x0c'
Receive: 35 48.110541 48.110224 49: seq: 1d, identify_response offset=3040 data=b'\xef\xf4dH\xe8)\xda\xab\x8b\x8em\xe1\xe1X\x06,9\x90\xbc\x0b\xb7\x98`\x8d\r\x02\x81\xae\t\x9c\xae\xba;\xb6\x87\xb9\x87\xbe\x8a0'
Receive: 36 48.110951 48.110584 49: seq: 1e, identify_response offset=3080 data=b'\xfa\x10\xd9\x0fB\x05\xbe\xb3\xd4\x7f\xb1\x80\xe0\xf72\xbd\xf0\xfc\x8b\xe9y\x10.\xcewi\x10N\x830\\\x84\x93/\xff\x03u\x9f\x0c\xd8'
Receive: 37 48.111182 48.110993 9: seq: 1f, identify_response offset=3120 data=b''
Receive: 38 48.113211 48.113066 14: seq: 10, canbus_id canbus_uuid=b'\x8d`\xb0\xd4\xc7p' canbus_nodeid=4
Receive: 39 48.113460 48.113317 12: seq: 11, uptime high=0 clock=440595530
Receive: 40 48.163820 48.163617 11: seq: 12, clock clock=460714911
Receive: 41 48.214091 48.213946 11: seq: 13, clock clock=480846479
Receive: 42 48.264362 48.264215 11: seq: 14, clock clock=500955837
Receive: 43 48.314616 48.314473 11: seq: 15, clock clock=521057985
Receive: 44 48.365783 48.365577 11: seq: 16, clock clock=541503231
Receive: 45 48.416078 48.415932 11: seq: 17, clock clock=561640983
Receive: 46 48.466378 48.466228 11: seq: 18, clock clock=581762453
Receive: 47 48.516672 48.516528 11: seq: 19, clock clock=601880079
Receive: 48 48.517881 48.517639 11: seq: 1a, clock clock=602324484
Receive: 49 49.026959 49.026753 10: seq: 1b, config is_config=0 crc=0 is_shutdown=0 move_count=0
Receive: 50 49.037126 49.036035 15: seq: 13, config is_config=1 crc=924824692 is_shutdown=0 move_count=1024
Receive: 51 49.044705 49.044517 13: seq: 15, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 52 49.045050 49.044813 13: seq: 16, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 53 49.045389 49.045148 13: seq: 17, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 54 49.045723 49.045486 13: seq: 18, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 55 49.046106 49.045871 13: seq: 19, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 56 49.046544 49.046298 13: seq: 1b, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 57 49.046908 49.046647 13: seq: 1c, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 58 49.047245 49.047005 13: seq: 1d, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 59 49.047577 49.047340 13: seq: 1e, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 60 49.047952 49.047680 13: seq: 1f, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 61 49.048398 49.048155 13: seq: 11, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 62 49.048736 49.048501 13: seq: 12, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 63 49.049113 49.048878 13: seq: 13, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 64 49.049450 49.049210 13: seq: 14, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 65 49.049862 49.049546 13: seq: 15, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 66 49.050253 49.050006 13: seq: 17, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 67 49.050592 49.050354 13: seq: 18, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 68 49.051009 49.050698 13: seq: 19, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 69 49.051344 49.051106 13: seq: 1a, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 70 49.051676 49.051439 13: seq: 1b, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 71 49.052095 49.051851 13: seq: 1d, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 72 49.052436 49.052197 13: seq: 1e, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 73 49.052816 49.052532 13: seq: 1f, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 74 49.053154 49.052916 13: seq: 10, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 75 49.053489 49.053250 13: seq: 11, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 76 49.053951 49.053670 13: seq: 13, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 77 49.054286 49.054050 13: seq: 14, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 78 49.054620 49.054382 13: seq: 15, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 79 49.055009 49.054716 13: seq: 16, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 80 49.055341 49.055105 13: seq: 17, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 81 49.127001 49.125225 8: seq: 1d, neopixel_result oid=6 success=1
Receive: 82 49.127615 49.127468 8: seq: 1e, stepper_position oid=7 pos=0
Receive: 83 49.128013 49.127721 13: seq: 1f, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 84 49.128273 49.128168 8: seq: 10, stepper_position oid=10 pos=0
Receive: 85 49.128624 49.128391 13: seq: 11, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 86 49.128878 49.128733 8: seq: 12, stepper_position oid=13 pos=0
Receive: 87 49.129230 49.128990 13: seq: 13, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 88 49.129441 49.129334 8: seq: 14, stepper_position oid=15 pos=0
Receive: 89 49.129865 49.129549 13: seq: 15, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 90 49.130079 49.129934 8: seq: 16, stepper_position oid=16 pos=0
Receive: 91 49.130389 49.130151 13: seq: 17, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 92 49.130590 49.130490 8: seq: 18, stepper_position oid=17 pos=0
Receive: 93 49.131002 49.130697 13: seq: 19, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 94 49.136711 49.136477 13: seq: 1b, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 95 49.137046 49.136813 13: seq: 1c, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 96 49.137378 49.137144 13: seq: 1d, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 97 49.137713 49.137476 13: seq: 1e, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 98 49.138047 49.137812 13: seq: 1f, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 99 49.139114 49.138916 12: seq: 10, shutdown clock=850837598 static_string_id=Command request
MCU 'ebb' shutdown: Command request
clocksync state: mcu_freq=12000000 last_clock=26727563 clock_est=(48.689 22667996 12000840.831) min_half_rtt=0.000082 min_rtt_time=48.823 time_avg=48.689(0.017) clock_avg=22667996.741(202415.358) pred_variance=106170938.363 clock_adj=(-0.212 12000727.000)
Dumping serial stats: bytes_write=1341 bytes_read=4880 bytes_retransmit=0 bytes_invalid=0 send_seq=142 receive_seq=142 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 48.557862 48.557862 9: seq: 1a, identify offset=1040 count=40
Sent 1 48.559000 48.559000 9: seq: 1b, identify offset=1080 count=40
Sent 2 48.560134 48.560134 9: seq: 1c, identify offset=1120 count=40
Sent 3 48.561271 48.561271 9: seq: 1d, identify offset=1160 count=40
Sent 4 48.562411 48.562411 9: seq: 1e, identify offset=1200 count=40
Sent 5 48.563540 48.563540 9: seq: 1f, identify offset=1240 count=40
Sent 6 48.564690 48.564690 9: seq: 10, identify offset=1280 count=40
Sent 7 48.565892 48.565892 9: seq: 11, identify offset=1320 count=40
Sent 8 48.567019 48.567019 9: seq: 12, identify offset=1360 count=40
Sent 9 48.568148 48.568148 9: seq: 13, identify offset=1400 count=40
Sent 10 48.569277 48.569277 9: seq: 14, identify offset=1440 count=40
Sent 11 48.570417 48.570417 9: seq: 15, identify offset=1480 count=40
Sent 12 48.571552 48.571552 9: seq: 16, identify offset=1520 count=40
Sent 13 48.572684 48.572684 9: seq: 17, identify offset=1560 count=40
Sent 14 48.573896 48.573896 9: seq: 18, identify offset=1600 count=40
Sent 15 48.575036 48.575036 9: seq: 19, identify offset=1640 count=40
Sent 16 48.576167 48.576167 9: seq: 1a, identify offset=1680 count=40
Sent 17 48.577309 48.577309 9: seq: 1b, identify offset=1720 count=40
Sent 18 48.578435 48.578435 9: seq: 1c, identify offset=1760 count=40
Sent 19 48.579576 48.579576 9: seq: 1d, identify offset=1800 count=40
Sent 20 48.580699 48.580699 9: seq: 1e, identify offset=1840 count=40
Sent 21 48.581894 48.581894 9: seq: 1f, identify offset=1880 count=40
Sent 22 48.583028 48.583028 9: seq: 10, identify offset=1920 count=40
Sent 23 48.584161 48.584161 9: seq: 11, identify offset=1960 count=40
Sent 24 48.585289 48.585289 9: seq: 12, identify offset=2000 count=40
Sent 25 48.586418 48.586418 9: seq: 13, identify offset=2040 count=40
Sent 26 48.587548 48.587548 9: seq: 14, identify offset=2080 count=40
Sent 27 48.588677 48.588677 9: seq: 15, identify offset=2120 count=40
Sent 28 48.589894 48.589894 9: seq: 16, identify offset=2160 count=40
Sent 29 48.591027 48.591027 9: seq: 17, identify offset=2200 count=40
Sent 30 48.592160 48.592160 9: seq: 18, identify offset=2240 count=40
Sent 31 48.593287 48.593287 9: seq: 19, identify offset=2280 count=40
Sent 32 48.594416 48.594416 9: seq: 1a, identify offset=2320 count=40
Sent 33 48.595540 48.595540 9: seq: 1b, identify offset=2360 count=40
Sent 34 48.596674 48.596674 9: seq: 1c, identify offset=2400 count=40
Sent 35 48.597893 48.597893 9: seq: 1d, identify offset=2440 count=40
Sent 36 48.599035 48.599035 9: seq: 1e, identify offset=2480 count=40
Sent 37 48.600174 48.600174 9: seq: 1f, identify offset=2520 count=40
Sent 38 48.601307 48.601307 9: seq: 10, identify offset=2560 count=40
Sent 39 48.602434 48.602434 9: seq: 11, identify offset=2600 count=40
Sent 40 48.603556 48.603556 9: seq: 12, identify offset=2640 count=40
Sent 41 48.604693 48.604693 9: seq: 13, identify offset=2680 count=40
Sent 42 48.605894 48.605894 9: seq: 14, identify offset=2720 count=40
Sent 43 48.607022 48.607022 9: seq: 15, identify offset=2760 count=40
Sent 44 48.608138 48.608138 9: seq: 16, identify offset=2800 count=40
Sent 45 48.609272 48.609272 9: seq: 17, identify offset=2840 count=40
Sent 46 48.610409 48.610409 9: seq: 18, identify offset=2880 count=40
Sent 47 48.611535 48.611535 9: seq: 19, identify offset=2920 count=40
Sent 48 48.612655 48.612655 9: seq: 1a, identify offset=2960 count=40
Sent 49 48.613850 48.613850 9: seq: 1b, identify offset=3000 count=40
Sent 50 48.614984 48.614984 9: seq: 1c, identify offset=3040 count=40
Sent 51 48.616120 48.616120 9: seq: 1d, identify offset=3080 count=40
Sent 52 48.617245 48.617245 9: seq: 1e, identify offset=3120 count=40
Sent 53 48.617882 48.617882 9: seq: 1f, identify offset=3125 count=40
Sent 54 48.620076 48.619985 6: seq: 10, get_canbus_id
Sent 55 48.620659 48.620568 6: seq: 11, get_uptime
Sent 56 48.671213 48.671122 6: seq: 12, get_clock
Sent 57 48.721792 48.721701 6: seq: 13, get_clock
Sent 58 48.772406 48.772315 6: seq: 14, get_clock
Sent 59 48.823010 48.822919 6: seq: 15, get_clock
Sent 60 48.874233 48.874142 6: seq: 16, get_clock
Sent 61 48.924816 48.924725 6: seq: 17, get_clock
Sent 62 48.975406 48.975315 6: seq: 18, get_clock
Sent 63 49.026032 49.025941 6: seq: 19, get_clock
Sent 64 49.026884 49.026793 6: seq: 1a, get_clock
Sent 65 49.037379 49.037288 6: seq: 1b, get_config
Sent 66 49.038197 49.038098 7: seq: 1c, allocate_oids count=13
Sent 67 49.038359 49.038137 9: seq: 1d, config_spi oid=0 pin=gpio1 cs_active_high=0
Sent 68 49.038466 49.038156 8: seq: 1e, config_adxl345 oid=1 spi_oid=0
Sent 69 49.038628 49.038165 9: seq: 1f, config_spi oid=5 pin=gpio9 cs_active_high=0
Sent 70 49.038838 49.038182 15: seq: 10, spi_set_software_bus oid=0 miso_pin=gpio3 mosi_pin=gpio0 sclk_pin=gpio2 mode=3 rate=5000000
Sent 71 49.039000 49.038200 9: seq: 11, config_endstop oid=2 pin=gpio24 pull_up=0
Sent 72 49.039099 49.038213 7: seq: 12, config_trsync oid=3
Sent 73 49.039285 49.038226 12: seq: 13, config_tmcuart oid=4 rx_pin=gpio20 pull_up=0 tx_pin=gpio20 bit_time=300
Sent 74 49.039463 49.038238 11: seq: 14, config_digital_out oid=8 pin=gpio13 value=0 default_value=0 max_duration=0
Sent 75 49.039633 49.038245 10: seq: 15, set_digital_out_pwm_cycle oid=8 cycle_ticks=120000
Sent 76 49.039811 49.038256 11: seq: 16, config_digital_out oid=9 pin=gpio14 value=0 default_value=0 max_duration=0
Sent 77 49.039981 49.038262 10: seq: 17, set_digital_out_pwm_cycle oid=9 cycle_ticks=120000
Sent 78 49.040825 49.039248 59: seq: 18, config_analog_in oid=10 pin=gpio28, spi_set_software_bus oid=5 miso_pin=gpio11 mosi_pin=gpio8 sclk_pin=gpio10 mode=1 rate=4000000, config_thermocouple oid=6 spi_oid=5 thermocouple_type=MAX31865, config_digital_out oid=11 pin=gpio7 value=0 default_value=0 max_duration=60000000, set_digital_out_pwm_cycle oid=11 cycle_ticks=1200000, config_stepper oid=7 step_pin=gpio18 dir_pin=gpio19 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=12 pin=gpio17 value=1 default_value=1 max_duration=0, finalize_config crc=3237245062, spi_send oid=5 data=b'\x80\xc3'
Sent 79 49.042600 49.041732 62: seq: 19, queue_digital_out oid=8 clock=29258521 on_ticks=0, queue_digital_out oid=9 clock=29258732 on_ticks=0, query_analog_in oid=10 clock=39747360 sample_ticks=12000 sample_count=8 rest_ticks=3600000 min_value=0 max_value=32760 range_check_count=4, query_thermocouple oid=6 clock=39267360 rest_ticks=3600000 min_value=15240 max_value=32318 max_invalid_count=3, queue_digital_out oid=11 clock=29259309 on_ticks=0, get_config
Sent 80 49.055697 49.055495 14: seq: 1a, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 81 49.060298 49.060009 19: seq: 1b, tmcuart_send oid=4 write=b'\xea\x03\x080\x80\x00\n\x08\xb8\x87' read=0
Sent 82 49.063078 49.062876 14: seq: 1c, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 83 49.067663 49.067374 19: seq: 1d, tmcuart_send oid=4 write=b'\xea\x03h0\x80\x00\x12\x08 \xda' read=0
Sent 84 49.070381 49.070179 14: seq: 1e, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 85 49.074968 49.074679 19: seq: 1f, tmcuart_send oid=4 write=b'\xea\x03\x88=\x9a\x06\x02h*\xbf' read=0
Sent 86 49.077679 49.077477 14: seq: 10, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 87 49.082251 49.081962 19: seq: 11, tmcuart_send oid=4 write=b'\xea\x03\x082\x80\x10\x9ah"\x9c' read=0
Sent 88 49.084956 49.084754 14: seq: 12, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 89 49.089544 49.089255 19: seq: 13, tmcuart_send oid=4 write=b'\xea\x03h2\x80\x1e\xfa\xef?\xdf' read=0
Sent 90 49.092258 49.092056 14: seq: 14, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 91 49.096834 49.096545 19: seq: 15, tmcuart_send oid=4 write=b'\xea\x03\x08>\xe4\x1ar\x88\xa4\x85' read=0
Sent 92 49.099541 49.099339 14: seq: 16, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 93 49.104200 49.103911 19: seq: 17, tmcuart_send oid=4 write=b'\xea\x03(2\x80\x00\x02\x88"\xf3' read=0
Sent 94 49.106914 49.106712 14: seq: 18, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 95 49.111552 49.111263 19: seq: 19, tmcuart_send oid=4 write=b'\xea\x03\x088\x80\x00\x02\x08 \xba' read=0
Sent 96 49.114272 49.114070 14: seq: 1a, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 97 49.131251 49.131152 7: seq: 1b, stepper_get_position oid=7
Sent 98 49.131849 49.131647 14: seq: 1c, tmcuart_send oid=4 write=b'\xea\x03H-\xd5' read=10
Sent 99 49.139034 49.138943 6: seq: 1d, emergency_stop
Dumping receive queue 100 messages
Receive: 0 48.544072 48.542992 49: seq: 1e, identify_response offset=520 data=b'\xf3!G\xddz>#9,\x81\xc8\x9cd3\xc7[\xf7\xbc?b7\xe5+\xf8\x91\xc3\xa1\xadf7\x86v\x04+\x07\x86\x94:\x8a\x81'
Receive: 1 48.545203 48.544130 49: seq: 1f, identify_response offset=560 data=b"\xdd\x101\x86\x8eA<\xf1|'\xb6;\xc5a\xb2\xf2\xe1\xc1\x91\xb65?\xe2\xa4v/\x1f^;N\xb2\x89''\x8d\xd3\x1f;\xac\xb7"
Receive: 2 48.546325 48.545260 49: seq: 10, identify_response offset=600 data=b'\xf2\xbd\xdc~\xff\xe6\xef\x10\xe5\x92dr\x16U\x8bfTJk&\x89\xb3\x1e9,\xd7.r\x94\xf2\x88\xb51)*;|m\xca|'
Receive: 3 48.547457 48.546382 49: seq: 11, identify_response offset=640 data=b'j\xcd\xac\xdcWyh\xe0\xd9\xda\xbb\x81c|\xb7\xa4\xc3T[\x13\xabDo\x86\x14\xeb\x14\xb0\x83\x1ak\xc9=\xa4\xb1cl\xd8\xf1~'
Receive: 4 48.548587 48.547512 49: seq: 12, identify_response offset=680 data=b'\xdfB(\xe9\x8eJ\xd4\xdfvB]8\xd7\x1e\xf6\xe5X\xf4\xd66\xfa\x97\xfc \x0e\xb1\xc1.\xa2\xe5\rb\xcf\x89\xb5\xc8a\xe9Q\x1e'
Receive: 5 48.549791 48.548644 49: seq: 13, identify_response offset=720 data=b'N\xac\x10Y+\xfe0\x82=\xb7\x90\xd9\xd6f\x06X\xb6\xca\x96I?\x91\x05\xc3\xc0\xcc\xda\xbe\xe2=\xde\x07y\xa5\xa7x\x15\x1b\x80\xe7'
Receive: 6 48.550927 48.549849 49: seq: 14, identify_response offset=760 data=b'^\x0c\xfc\x00\x02\x8d\x96\x00\x81\x14\xbe\xe7\xfd\x967\xe5k\x8e\x81\r\x88\x80%\nr\xf9\xae\xdd\xf3\x83\xb4#\x8b}\xe7;\x80\x9e\xdb\xa4'
Receive: 7 48.552061 48.550983 49: seq: 15, identify_response offset=800 data=b'3MK@\xba\x0b\xac\xc4\xae\x95q/\xb6[\xde#\x13\xb2\xa5\xe0\x10g\xeer\x95\xf4\x80\xa6b\xe0V@18\xe7F@:\x01\x97'
Receive: 8 48.553194 48.552118 49: seq: 16, identify_response offset=840 data=b'\xceI\x86\xac\xecK\n\x89og[\xf0\xe6\xb2h\x1eF\x99\x8b\n\xe4\x17\xeb%$\x1d\xe4\xaeg\xea\x18x\x08M\xc7\x0e\x15\x03\xae\xf9'
Receive: 9 48.554330 48.553251 49: seq: 17, identify_response offset=880 data=b'v\xa6\xc3u.\x81\x84\x1c\x8c\xd2f#\x1c\x93\xe8\x17Q\x00\x86Za^\xae\xd4`\xa0!\x8cT\xa4\x1fm"\\\xb9\x17\xc3\xb5\xbc\xe6'
Receive: 10 48.555463 48.554387 49: seq: 18, identify_response offset=920 data=b':\x03\xae\t\x10\xe3\x10\x90\xedG9\x98\xaa\x18\x05\xfc\xe3/\xaa\x8eK\xb2\xe34r\xa7d\xbb\x19\x9e\x8b\x9e\xfb\xc7\xc1\xf7\xac\xbfU\x85'
Receive: 11 48.556605 48.555519 49: seq: 19, identify_response offset=960 data=b'\x19\x1e\xc3\xb4H\t\x93\xb6\x93\x90\x8f\x14\xf9\xa8x3\x88\r\xd4\x1f\x9b\r\\\xa8\x1c\xd6\xa6e \xc4d\x00\xd8\x1b\xbfb2\xc3\x0e.'
Receive: 12 48.557805 48.556662 49: seq: 1a, identify_response offset=1000 data=b'\xdc\xb5u\xa5&\xdf6\x02\xc6\xfb\xbe\x9d\x18\xc5\n\xd4h\xe2\xbb\x12\xba5\x87\xcc\xdf\x19\xbb\xca\x99\n\x15V\xbb\xd1\xe3%\x03\xc3&\x9b'
Receive: 13 48.558944 48.557862 49: seq: 1b, identify_response offset=1040 data=b'\n\xaa\x9d\x89\xc1\xc2u\xeb\x00N\xd9\xe0\xe8\x82\xdfj\xe5\x00&\xe5O\x80h\x11\xc2\x85\x88\x16K\x0b\x10VH\xff\xa7\xb7\xed\x9d\xb7\xe9'
Receive: 14 48.560078 48.559000 49: seq: 1c, identify_response offset=1080 data=b'\xf4\xe3fP\x1dn\xe1\xe0\x8e\x97\x8f^]\x95D\x86\x86\xa0\xac\xb2\x14t-\x04\xb4\xf0~/Pg\x06\xc1\xa4\x10\t\x85\xba\x98@\x1d'
Receive: 15 48.561214 48.560134 49: seq: 1d, identify_response offset=1120 data=b'\x88\xd4"\t\xaa\x8e\x10\xcd<\x80S\xf6\x16\x04\x89\x95eiZ`\x04\xb8\x96\xcb)XH\xd3\xd2\x92\x1c\x94 !\x9e4\x80;@d'
Receive: 16 48.562354 48.561271 49: seq: 1e, identify_response offset=1160 data=b'\r\xef \x87\x7f\xa5\x96\xc7\x88\x04)[lHGK\xcb\x10a\x0e\x84\x04\x00\xd6d\x8f\xa5\xb5\xaf\\\xe2\xd9\xca\xc4Th\x02\xe9\x14\xa2'
Receive: 17 48.563485 48.562411 49: seq: 1f, identify_response offset=1200 data=b'l\xe5Y\xca\x82t4\xf2c5\xb5\xbd\xa3\xf5k\xa9\xc8\x1e\tJ)\x0bn\xcd\x13bMj\x801w3W;\xf2\x9e\xd2\x95\t;'
Receive: 18 48.564635 48.563540 49: seq: 10, identify_response offset=1240 data=b';\x15\xc2\xe0W@B\x80\x08\xa0\xaa8\x88\xf6\x91\x1e\xaa\xf3\x14\xf4\xc3\xfb\xe0\x00X\x10\xc2\xf8<\x04\x0f\x02\xa0;9\x00R\x1c\xa8\xd2'
Receive: 19 48.565837 48.564690 49: seq: 11, identify_response offset=1280 data=b'\xcf\xe2\x9c\xd4\x81phA\x87\x1a\xfe\xa2I\x80\xea\xc4\x86T\xd1S\x02\x8b\x08\xc8\xc8\xe3OjJ\x90\n\x92\xe2\xca;|\xe2m\x9c\x93'
Receive: 20 48.566964 48.565892 49: seq: 12, identify_response offset=1320 data=b'\xba\xe8\xb6\x9c\x13\x9c\x17\x1f\xbd\xdd$5\xbb\x934\x83K:\xcd\xec\xdb\x8a{I\x02\x8e,\xdc\x91c9f/dk2\xcb\xbe\x95\xe2'
Receive: 21 48.568093 48.567019 49: seq: 13, identify_response offset=1360 data=b'X\xddw\x80t\xa1\xb9\xf9:\x1f\t\x98\x0c\x95\x94\xdfJ\xc3\xd9j\nu<\x0bgK\x84R\xc5c\x8e\xa9\x1er\x82\xc0R\xdc\xfaM'
Receive: 22 48.569222 48.568148 49: seq: 14, identify_response offset=1400 data=b'\xb4v\x00\xaa\xe6@\xeb\xa5\x84\xc4l~\xf2\xb2\x15\x9c\x80\x8bu\xe97\x11\xb5\xca\x9f6\xbdSr\x02\x8d\xe8\xd3(C\xf4\xe9#\x1e\x00'
Receive: 23 48.570362 48.569277 49: seq: 15, identify_response offset=1440 data=b"&\xb1rp\x83_R\xf2\xae\xedu\xf1B\xde\xab\xe6\xd6H\xf8K'@%~\xf5\xb4\xb6\x98\x02.| \x10\n\xa5\xcac~\xec\xf9"
Receive: 24 48.571496 48.570417 49: seq: 16, identify_response offset=1480 data=b'@\xfa\xc5\x94\xa9\xd8\xf78\x7fw\x91_\x9f\xff\x8a%\xc1\x1aT\xf4\xc3\xe7\xbb\xfc\xd3\xd5\xcd\x1d>\x1e\xe7\x05vZ:\xd1\xce\xdf\xe2\xdf'
Receive: 25 48.572627 48.571552 49: seq: 17, identify_response offset=1520 data=b'h\x16l?\xe8\xedTmg\xe1v\xa9\xb7Wj{\x1dnWz\x1bjZ\xf5\x93\x84\x00\xdc\x00,\x08`\x19\x02l4@L\xf4\xc5'
Receive: 26 48.573842 48.572684 49: seq: 18, identify_response offset=1560 data=b'\x07\x04n\r\x00Q\x18\x1f\x90\xb83\x00Dc\x1c\x12\x19\x19\t\x10\x8d!\x89\x91\x91\x00Q\x18\x12\x18\x19\tDZ\x80!\x81\x91\x95\x01'
Receive: 27 48.574983 48.573896 49: seq: 19, identify_response offset=1600 data=b'\x11\x18\x85\x04FV\x06D`t@\xa0\x95\x01Q\x18\x1f\x90he@4\xc6\x13"\xc1e\x03%\'\x04\x15\x02MU\xbdT\x7f\x17!'
Receive: 28 48.576113 48.575036 49: seq: 1a, identify_response offset=1640 data=b"P\x19(lM?\xab\x10\xae\n\xf4\xa6\xef\x0c/\xb5\xc2\xd7\xbcG\xf43\x0f\xc1\x1e\x02C\xca\xe8'\r\xe1\xca\xc0\x1a\x88\x8b\x18\xd9\xb8"
Receive: 29 48.577257 48.576167 49: seq: 1b, identify_response offset=1680 data=b'8\xbfA\xd0\x7f\xde^\xfe\xfc\xf9\xf2\xe6\xe2\xdf\xf8\x14S\xff`\xeb\xe3O\x17\x1f\xd4\x0e>\xbf\xcc\xea\xd5\xcd\xd5\xfd\xd5\xf9G\x85\xdc\n'
Receive: 30 48.578382 48.577309 49: seq: 1c, identify_response offset=1720 data=b'\x18\x10]_|\x86i\xdf\xc5s\xd5`\xfc\xf4\xcb59W\x8c\xd5\xd4\xed\xe5\xc5\xe5\xd5\xbf.\xf3_\xaen\xde\xfd\xf4\x0bF\xa9\x18\x17'
Receive: 31 48.579524 48.578435 49: seq: 1d, identify_response offset=1760 data=b'\xef.oaQ\x91\tt\x1c\xf8\xd4\xdd\xfd\xf9\xfd]~\xf7\xf9\xfa\xee\xe7\xfc\x87\xf3\xbbKD\xb6\xc0\xe5\xcbO\x9f.o\xf3\x1f~\xba'
Receive: 32 48.580646 48.579576 49: seq: 1e, identify_response offset=1800 data=b'\xff1\xbf|\xf7\x1e\xd6\xa3/\xf8\xc8\x1a\xe1\xd9\xa7\x1a\x13\xaa\xad\xa9\x1f\x1cz\x88\xca\xa6\x17\x0cj\x94\x1e\x1b\xa8\xb6\x98F\x95z$j'
Receive: 33 48.581838 48.580699 49: seq: 1f, identify_response offset=1840 data=b'\xdf\xa3\x07\x04:YF\xa3\xadz\x8ai\xb7Y\xaa\x11\xaahE\xa3\x07\xf5\xac\xd5V\x1f\xd1%h\xdf\x11\xdd\x82\x96\x1c\xd15h\xb3\x11'
Receive: 34 48.582975 48.581894 49: seq: 10, identify_response offset=1880 data=b'\xdd\x83\xd6\xa9\xe2\x11\xe4\x15\x13\x8c\xee/\xaf\x81\xaf\xf3\xfb\xcf\xb7\x8aU CY\xe7\xec\xec?\xf3\xb7\xc9\xfc\xbf_&i\x13\x1e\xf0\xaa'
Receive: 35 48.584105 48.583028 49: seq: 11, identify_response offset=1920 data=b'y\x1b%I\xa2X+d6O\x97\x95bn\xa8y6\x8fb\xa0,\xd6\xa7\xb4$\xb4\xd9Sf\xd5\x92\xd0\x06\x1c\xd3\x88$\xa1\x8d\x90'
Receive: 36 48.585234 48.584161 49: seq: 12, identify_response offset=1960 data=b'r,r\x98\xd1\x08\x8b&\xc4\x08E\x9b\xc0\xe0\xde\xc33^=L\x15\x07L\x85\xdd\r\xd5\xe5\xd46<\xafE!\xf1\xad\x0f\x06\x81\xa5'
Receive: 37 48.586362 48.585289 49: seq: 13, identify_response offset=2000 data=b'\x01+j\xd5ze\xbbB\xaa5\xde\x14\x0f5\xaf(\xb9\x9c\xebM\xf3 \xaeH^\xe7M\x8bU \x03#a\r$`VH)\xb6'
Receive: 38 48.587493 48.586418 49: seq: 14, identify_response offset=2040 data=b'\r\xaf\xe0\x19&$\xbbzG\xcd\xd4\x8b\xa2\x81\xed\x81Anb\x98\xdf\x19\x94$T\x870\x95b\xd8\xf3N\xc0\x98R\x85d\x1d$;'
Receive: 39 48.588621 48.587548 49: seq: 15, identify_response offset=2080 data=b'\xa0\x8c\n(8\xfb\x97\x01\x8b0\x86\x98\x8b\x1a0\x17\x03\x03\xe4\x86^\xeac\xd1{^\x03+"0\xcd\x90\xaeiU\xd5k\xaa\xdc\x85'
Receive: 40 48.589837 48.588677 49: seq: 16, identify_response offset=2120 data=b'\xebx\xc3L\xab\xc7\x9e\x079_P\xf7\x9duE/aK=\x0f\x95a\x99\x8d\x9eC\xd9(\x07eb?\xfe\x8ao\x10\xec\x82\xfeC'
Receive: 41 48.590972 48.589894 49: seq: 17, identify_response offset=2160 data=b"wA'bf\xd1IJ\x95\xe6U|\xc1n\xce/>\xd0\x0b\x08g\xe0@\xb7\xf7fm\xee\xaf\xdd^\x9e\xbf\xd3\x1b\x98bq\xe3\x9e"
Receive: 42 48.592104 48.591027 49: seq: 18, identify_response offset=2200 data=b'\xb29e\xef+\xaa\x95\x99\xe9a\xbbV<\x95\xacT\x7f\x19(\xfd5AY\x89[\x030\xe4\xb0\xd8s\xa8w\xa9Se6\xb1?\xab'
Receive: 43 48.593235 48.592160 49: seq: 19, identify_response offset=2240 data=b",2\xf3\xb0\xec\xdb'n8g\xd8\xe1D\x0fq\xdb\xb6\x1fj;\xa0\xd4k8\xd8\xd7\xaffKT\xe2\xf1\x03\xcab\xe4:\xe8\x92f"
Receive: 44 48.594363 48.593287 49: seq: 1a, identify_response offset=2280 data=b'\x15\x1b\x97DN2]4\xc5\x02V\x18\xde\xba~\xf1\x94;\xd1il\xa9wp\xf2`\xf1a@+\xd7\xc5\x0bjne\x04KE\xe9'
Receive: 45 48.595486 48.594416 49: seq: 1b, identify_response offset=2320 data=b'5\x97\xb2\x00U\xf2\xa6D\xeb\xd6\xf6\x80\x1bBJ\xb0r\tO\xdcj\xac\xd1\x8d\xe00V\xe3L\x17:\xca\x14\xf8\x13G\x8d`!\xfe'
Receive: 46 48.596622 48.595540 49: seq: 1c, identify_response offset=2360 data=b'\xf5\x03\xbb\xa2\xaf\x94Chh\xec\x88^\xa3\xc4\xd5\x03\x85\xc1\xa8\xdf\xd4\xed3\xbdpn\xc0\x8b\nF\xec\xa0_\xab \x85\xdf[\xd4F'
Receive: 47 48.597838 48.596674 49: seq: 1d, identify_response offset=2400 data=b'\x03O\x98\x8e*}\xea\xff\xeaU\xa0\xc5-/T\x0eP.\x8f\xae^\x89\r\x14\xc7p\xb3uHp\x90M\xdf\xee\xe1 97\x00\xc2'
Receive: 48 48.598965 48.597893 49: seq: 1e, identify_response offset=2440 data=b'/\xbe\xc6\xe1O-JNm\xc5[\xae\x99Ao\x87C\x16\xb0+\xd0A\xf0\x9b\xd2\x9d\x058\x90\n{\x16u\rue\xc9a\xd7\xef'
Receive: 49 48.600113 48.599035 49: seq: 1f, identify_response offset=2480 data=b']S\xa5\xecNZ\xc9|\xe3\x04~\xdb\xb9\x03\xe7&\xdd)\x02\x10B\xec\xc7\xbdY3\xce\x01B\xb93\xfdi\xf5\x8d\n\x90\xa9p\xa0'
Receive: 50 48.601250 48.600174 49: seq: 10, identify_response offset=2520 data=b'\xe2\x93\xff\xb9\xeaN\xc7\x87\xa1m\xd9\xa6P\xdc\x11g\xd8\x18\xbc\xf7M\t\xe3\x10\x00\xaa\x8e<\xf5\xb1\xee\x95<\xf0$\x94\xd4\x92\xab\xc8'
Receive: 51 48.602382 48.601307 49: seq: 11, identify_response offset=2560 data=b'\xad\xbe\xe6\xe5\xe5nl\x1e\x01T\xa8\xd0\x8a\x1f{\xbcu\xe96@Kd\xcbP\xf9\xcb\xb6W\xee\x07%\xb8d\xa5\xd4ztMw\x8a'
Receive: 52 48.603502 48.602434 49: seq: 12, identify_response offset=2600 data=b'lmSC0|\x02\x04\x18\xb7u\x8c\xb3\x0ca"\xd4n\x80\xb9\x8bp`OK}[\xb4\xb1T\x7fq\xac(_J\xec\xc6a\\'
Receive: 53 48.604636 48.603556 49: seq: 13, identify_response offset=2640 data=b'#\xfd\x96\xb0\x8d[\xa9}\x97(\x97W|\xd6E\x8f\x99%9^\xf1\xa3p\xe9rl\xf0\xeb\x90K\x06\x8e\xef\x1cH\\\x07Mp\xcc'
Receive: 54 48.605839 48.604693 49: seq: 14, identify_response offset=2680 data=b'\\P\xa7$\xd1*\xcbT^\xd4\x93\x85J\x8d4YdJS0Y,\x960N\xbe\x00&\xb4\xd0\x06e>{\x7f\xf3\x99\xbd\xff\xf4'
Receive: 55 48.606966 48.605894 49: seq: 15, identify_response offset=2720 data=b'\xf1\t\x0bP\x90Q\x07n\xcd\xe9\xc3\xaai\x81M\xba9\xca\x1d\xf3c\xed\x82\x13\x0c\x91\xe6\x03\xe9\xe4H\xe15\xb8\x98\xda\xa1\xe7\xe0\t'
Receive: 56 48.608080 48.607022 49: seq: 16, identify_response offset=2760 data=b"\xa6.\xdb\x1efz4\x8ex\xea\x14^nz\x01s&.\xe1\x1d\x98\xa9\xa8\x91\xe0\xdek'\x89\xfd\xfe\t)O\xb7\x93\xd5\x93N5"
Receive: 57 48.609216 48.608138 49: seq: 17, identify_response offset=2800 data=b'\xa2q\xcd\xa8X\xbd\x93!X\xe4\xb6s\x81T\xa8/\x1b\xaa\xd7\xf6-V\xf5\x11=\xc8\xbd\xfb\xd1@M\xfb_\x82y\xdbn\xfe\tF'
Receive: 58 48.610353 48.609272 49: seq: 18, identify_response offset=2840 data=b'^\xd3>\x9f\xa0\xde\xb5{\x08o\x87\x97\xf8\xddy<\x9f\xb9\xb6un\xb4\xe3\xb5\xbd\xd4\xdc\x083r\xada\x0f\xd6\xf6\x88\xe9\x19~\x8a'
Receive: 59 48.611479 48.610409 49: seq: 19, identify_response offset=2880 data=b'\xb0X\xe59\xa1\xb0\xb0\x1e"\xb9\xacS\xd7J>h\xeay\x0c\x98\x86\xb1/\x90\xd4k\x03k\x99\x98\x0e\xc7X\x96\xaa\xd7\x8d\xec\xe1\xe3'
Receive: 60 48.612600 48.611535 49: seq: 1a, identify_response offset=2920 data=b'\x1d\xc8\xf4?\xa5\x9c`\xfe&w\x86\xaa\xaf~\x9ct\x12$\xa6\xd7\xa6\xe4A#\xf9\x04\xb3\xa1\x7ff\xd2\xefs\xbd-\xdd\x913\xefu'
Receive: 61 48.613794 48.612655 49: seq: 1b, identify_response offset=2960 data=b'\xea\x0b\xf9(\x1fF\x15\xe6+\xea\xb2B\x81\x041"7\xb9EjsQ\xbd(\x17\x1dM[\xf8\xb8\x0c\xb3c\xcd\xa2\x03M\xfa\rA'
Receive: 62 48.614929 48.613850 49: seq: 1c, identify_response offset=3000 data=b'_\xa5Q6\xed\xce\xfc\xa9\t\xc4\xaa\xb8\xed\x07U\x18\xae\x13*u\xa53]9\xee\xf5\x8f\xfcM\xfbN\xec:.A;\x86Z\xf6\x02'
Receive: 63 48.616062 48.614984 49: seq: 1d, identify_response offset=3040 data=b'\xf1.\x82\xd83\xd5\xe9\xd1\x900R\xa8\xd7\x8a^\xb8.\xcd!\x0f\xd8\x9f!~\xd7~\xe7\xc5\x19\x1b\x04\x02\xd3@9\xfe\x89\xc2\xb3='
Receive: 64 48.617188 48.616120 49: seq: 1e, identify_response offset=3080 data=b'L<\xf4\t\x89\xd1W\xdbq\x12*\xf0\xad\xa5\xff?\n\x04\xbf\xa7\xf9i\x14\x9f\xceO\x92t}\xb2-\x92t\x9e\xa4\xe9:\x9d}\xf9'
Receive: 65 48.617795 48.617245 14: seq: 1f, identify_response offset=3120 data=b'\x1f\xdc\x00}\x1b'
Receive: 66 48.618383 48.617882 9: seq: 10, identify_response offset=3125 data=b''
Receive: 67 48.620223 48.620076 14: seq: 11, canbus_id canbus_uuid=b'\x9fQ\x0b\xf96a' canbus_nodeid=5
Receive: 68 48.620824 48.620659 11: seq: 12, uptime high=0 clock=21852459
Receive: 69 48.671386 48.671213 10: seq: 13, clock clock=22459139
Receive: 70 48.722022 48.721792 10: seq: 14, clock clock=23066745
Receive: 71 48.772632 48.772406 10: seq: 15, clock clock=23673524
Receive: 72 48.823173 48.823010 10: seq: 16, clock clock=24280708
Receive: 73 48.874415 48.874233 10: seq: 17, clock clock=24895495
Receive: 74 48.925019 48.924816 10: seq: 18, clock clock=25502920
Receive: 75 48.975642 48.975406 10: seq: 19, clock clock=26109557
Receive: 76 49.026208 49.026032 10: seq: 1a, clock clock=26717184
Receive: 77 49.027076 49.026884 10: seq: 1b, clock clock=26727563
Receive: 78 49.037557 49.037379 10: seq: 1c, config is_config=0 crc=0 is_shutdown=0 move_count=0
Receive: 79 49.043144 49.042600 15: seq: 1a, config is_config=1 crc=3237245062 is_shutdown=0 move_count=1024
Receive: 80 49.059630 49.055697 18: seq: 1b, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x08!\x9e'
Receive: 81 49.062710 49.060298 8: seq: 1c, tmcuart_response oid=4 read=b''
Receive: 82 49.067006 49.063078 18: seq: 1d, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02(\xa1\xda'
Receive: 83 49.070015 49.067663 8: seq: 1e, tmcuart_response oid=4 read=b''
Receive: 84 49.074314 49.070381 18: seq: 1f, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02H\xa1\xfd'
Receive: 85 49.077315 49.074968 8: seq: 10, tmcuart_response oid=4 read=b''
Receive: 86 49.081599 49.077679 18: seq: 11, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02h!\xb9'
Receive: 87 49.084593 49.082251 8: seq: 12, tmcuart_response oid=4 read=b''
Receive: 88 49.088896 49.084956 18: seq: 13, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x88!\xee'
Receive: 89 49.091892 49.089544 8: seq: 14, tmcuart_response oid=4 read=b''
Receive: 90 49.096183 49.092258 18: seq: 15, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xa8\xa1\xaa'
Receive: 91 49.099180 49.096834 8: seq: 16, tmcuart_response oid=4 read=b''
Receive: 92 49.103536 49.099541 18: seq: 17, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xc8\xa1\x8d'
Receive: 93 49.106549 49.104200 8: seq: 18, tmcuart_response oid=4 read=b''
Receive: 94 49.110904 49.106914 18: seq: 19, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xe8!\xc9'
Receive: 95 49.113908 49.111552 8: seq: 1a, tmcuart_response oid=4 read=b''
Receive: 96 49.118202 49.114272 18: seq: 1b, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x08"\xba'
Receive: 97 49.131376 49.131251 8: seq: 1c, stepper_position oid=7 pos=0
Receive: 98 49.135770 49.131849 18: seq: 1d, tmcuart_response oid=4 read=b'\n\xfaO-\x80\x00\x02\x08\xa1\xa2'
Receive: 99 49.139323 49.139034 11: seq: 1e, shutdown clock=28073472 static_string_id=Command request
Attempting MCU 'ebb' reset command
Attempting MCU 'mcu' reset command
b'Got error -1 in can read: (100)Network is down'
webhooks client 140732676398288: Disconnected
Restarting printer
Start printer at Tue Nov 19 19:46:55 2024 (1732016815.3 565.1)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.2
stealthchop_threshold = 0

[stepper_y]
step_pin = PE5
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = PF0
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.2
stealthchop_threshold = 0

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_max = 300
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 232

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 279, in _connect
    self._read_config()
  File "/home/pi/klipper/klippy/klippy.py", line 214, in _read_config
    self.load_object(config, section_config.get_name(), None)
  File "/home/pi/klipper/klippy/klippy.py", line 198, in load_object
    self.objects[section] = init_func(config.getsection(section))
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/extras/tmc5160.py", line 411, in load_config_prefix
    return TMC5160(config)
           ^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/extras/tmc5160.py", line 359, in __init__
    cmdhelper = tmc.TMCCommandHelper(config, self.mcu_tmc, current_helper)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/extras/tmc.py", line 286, in __init__
    TMCMicrostepHelper(config, mcu_tmc)
  File "/home/pi/klipper/klippy/extras/tmc.py", line 730, in TMCMicrostepHelper
    mres = sconfig.getchoice("microsteps", steps)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/configfile.py", line 141, in getchoice
    raise error(
configparser.Error: Choice '232' for option 'microsteps' in section 'stepper_z2' is not a valid choice
webhooks client 140732685520848: New connection
webhooks client 140732685520848: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Unable to issue reset command on MCU 'mcu'
Unable to issue reset command on MCU 'ebb'
webhooks client 140732685520848: Disconnected
Restarting printer
Start printer at Tue Nov 19 19:47:19 2024 (1732016839.3 589.1)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.2
stealthchop_threshold = 0

[stepper_y]
step_pin = PE5
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = PF0
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.2
stealthchop_threshold = 0

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_max = 300
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
webhooks client 140732684234320: New connection
mcu 'mcu':  got {'count': 1569, 'sum': 817289, 'sumsq': 2261283, '#name': 'stats', '#sent_time': 589.434350371, '#receive_time': 589.47369176}
webhooks client 140732684234320: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Sending MCU 'ebb' printer configuration...
Configured MCU 'ebb' (1024 moves)
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (25.0, 25.0)    | (25.0, 25.0)
  1   | (103.8, 25.0)   | (103.8, 25.0)
  2   | (182.5, 25.0)   | (182.5, 25.0)
  3   | (261.2, 25.0)   | (261.2, 25.0)
  4   | (340.0, 25.0)   | (340.0, 25.0)
  5   | (340.0, 103.8)  | (340.0, 103.8)
  6   | (261.2, 103.8)  | (261.2, 103.8)
  7   | (182.5, 103.8)  | (182.5, 103.8)
  8   | (103.8, 103.8)  | (103.8, 103.8)
  9   | (25.0, 103.8)   | (25.0, 103.8)
  10  | (25.0, 182.5)   | (25.0, 182.5)
  11  | (103.8, 182.5)  | (103.8, 182.5)
  12  | (182.5, 182.5)  | (182.5, 182.5)
  13  | (261.2, 182.5)  | (261.2, 182.5)
  14  | (340.0, 182.5)  | (340.0, 182.5)
  15  | (340.0, 261.2)  | (340.0, 261.2)
  16  | (261.2, 261.2)  | (261.2, 261.2)
  17  | (182.5, 261.2)  | (182.5, 261.2)
  18  | (103.8, 261.2)  | (103.8, 261.2)
  19  | (25.0, 261.2)   | (25.0, 261.2)
  20  | (25.0, 340.0)   | (25.0, 340.0)
  21  | (103.8, 340.0)  | (103.8, 340.0)
  22  | (182.5, 340.0)  | (182.5, 340.0)
  23  | (261.2, 340.0)  | (261.2, 340.0)
  24  | (340.0, 340.0)  | (340.0, 340.0)
TMC stepper_x failed to init: Unable to write tmc spi 'stepper_x' register GLOBALSCALER
TMC stepper_y failed to init: Unable to write tmc spi 'stepper_y' register GLOBALSCALER
TMC stepper_z failed to init: Unable to write tmc spi 'stepper_z' register GLOBALSCALER
TMC stepper_z1 failed to init: Unable to write tmc spi 'stepper_z1' register GLOBALSCALER
TMC stepper_z2 failed to init: Unable to write tmc spi 'stepper_z2' register GLOBALSCALER
TMC stepper_z3 failed to init: Unable to write tmc spi 'stepper_z3' register GLOBALSCALER
Starting heater checks for heater_bed
Starting heater checks for extruder
autotune_tmc set stepper_x pwm_freq=2
Unhandled exception during ready callback
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 314, in _connect
    cb()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 169, in handle_ready
    self.tune_driver()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 220, in tune_driver
    self._set_pwmfreq()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 286, in _set_pwmfreq
    self._set_driver_field('pwm_freq', pwm_freq)
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 249, in _set_driver_field
    tmco.mcu_tmc.set_register(register, val, None)
  File "/home/pi/klipper/klippy/extras/tmc2130.py", line 403, in set_register
    raise self.printer.command_error(
gcode.CommandError: Unable to write tmc spi 'stepper_x' register PWMCONF
Transition to shutdown state: Internal error during ready callback: Unable to write tmc spi 'stepper_x' register PWMCONF
Dumping gcode input 0 blocks
Dumping 5 requests for client 140732684234320
Received 589.570105: b'{"id": 140733764857232, "method": "info", "params": {"client_info": {"program": "Moonraker", "version": "v0.9.3-1-g4e00a07"}}}'
Received 589.570642: b'{"id": 140733765332496, "method": "list_endpoints", "params": {}}'
Received 589.821246: b'{"id": 140733765322384, "method": "info", "params": {}}'
Received 590.071970: b'{"id": 140733765328400, "method": "info", "params": {}}'
Received 590.323673: b'{"id": 140733765325776, "method": "info", "params": {}}'
gcode state: absolute_coord=True absolute_extrude=True base_position=[0.0, 0.0, 0.0, 0.0] last_position=[0.0, 0.0, 0.0, 0.0] homing_position=[0.0, 0.0, 0.0, 0.0] speed_factor=0.016666666666666666 extrude_factor=1.0 speed=25.0
Reactor garbage collection: (589.888913574, 0.0, 0.0)
MCU 'mcu' shutdown: Command request
clocksync state: mcu_freq=400000000 last_clock=10205719012 clock_est=(589.452 10071216040 399907073.483) min_half_rtt=0.000071 min_rtt_time=589.636 time_avg=589.452(0.017) clock_avg=10071216040.732(6667242.983) pred_variance=118045116667.485
Dumping serial stats: bytes_write=2305 bytes_read=5399 bytes_retransmit=0 bytes_invalid=0 send_seq=176 receive_seq=176 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 589.374904 589.374904 9: seq: 1c, identify offset=2400 count=40
Sent 1 589.375313 589.375313 9: seq: 1d, identify offset=2440 count=40
Sent 2 589.375675 589.375675 9: seq: 1e, identify offset=2480 count=40
Sent 3 589.376038 589.376038 9: seq: 1f, identify offset=2520 count=40
Sent 4 589.376406 589.376406 9: seq: 10, identify offset=2560 count=40
Sent 5 589.376766 589.376766 9: seq: 11, identify offset=2600 count=40
Sent 6 589.377181 589.377181 9: seq: 12, identify offset=2640 count=40
Sent 7 589.377548 589.377548 9: seq: 13, identify offset=2680 count=40
Sent 8 589.377910 589.377910 9: seq: 14, identify offset=2720 count=40
Sent 9 589.378315 589.378315 9: seq: 15, identify offset=2760 count=40
Sent 10 589.378675 589.378675 9: seq: 16, identify offset=2800 count=40
Sent 11 589.379039 589.379039 9: seq: 17, identify offset=2840 count=40
Sent 12 589.379407 589.379407 9: seq: 18, identify offset=2880 count=40
Sent 13 589.379772 589.379772 9: seq: 19, identify offset=2920 count=40
Sent 14 589.380181 589.380181 9: seq: 1a, identify offset=2960 count=40
Sent 15 589.380540 589.380540 9: seq: 1b, identify offset=3000 count=40
Sent 16 589.380904 589.380904 9: seq: 1c, identify offset=3040 count=40
Sent 17 589.381314 589.381314 9: seq: 1d, identify offset=3080 count=40
Sent 18 589.381674 589.381674 9: seq: 1e, identify offset=3120 count=40
Sent 19 589.383717 589.383717 6: seq: 1f, get_canbus_id
Sent 20 589.383968 589.383968 6: seq: 10, get_uptime
Sent 21 589.434350 589.434350 6: seq: 11, get_clock
Sent 22 589.484626 589.484626 6: seq: 12, get_clock
Sent 23 589.534894 589.534894 6: seq: 13, get_clock
Sent 24 589.585786 589.585786 6: seq: 14, get_clock
Sent 25 589.636062 589.636062 6: seq: 15, get_clock
Sent 26 589.686322 589.686322 6: seq: 16, get_clock
Sent 27 589.736577 589.736577 6: seq: 17, get_clock
Sent 28 589.786834 589.786834 6: seq: 18, get_clock
Sent 29 589.787861 589.787861 6: seq: 19, get_clock
Sent 30 590.295261 590.295261 6: seq: 1a, get_config
Sent 31 590.296077 590.296077 7: seq: 1b, allocate_oids count=29
Sent 32 590.296122 590.296122 9: seq: 1c, config_spi oid=0 pin=PD6 cs_active_high=0
Sent 33 590.296166 590.296166 9: seq: 1d, config_spi oid=1 pin=PD5 cs_active_high=0
Sent 34 590.296589 590.296589 61: seq: 1e, config_spi oid=2 pin=PD2 cs_active_high=0, config_spi oid=3 pin=PA15 cs_active_high=0, config_spi oid=4 pin=PA9 cs_active_high=0, config_spi oid=5 pin=PA10 cs_active_high=0, spi_set_software_bus oid=0 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, spi_set_software_bus oid=1 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, spi_set_software_bus oid=2 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, spi_set_software_bus oid=3 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 35 590.296589 590.296589 62: seq: 1f, spi_set_software_bus oid=4 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, spi_set_software_bus oid=5 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, config_analog_in oid=18 pin=PB0, config_digital_out oid=19 pin=PF6 value=0 default_value=0 max_duration=2000000000, set_digital_out_pwm_cycle oid=19 cycle_ticks=40000000, config_digital_out oid=20 pin=PA1 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=20 cycle_ticks=20000000, config_digital_out oid=21 pin=PA4 value=0 default_value=0 max_duration=0
Sent 36 590.296643 590.296643 60: seq: 10, set_digital_out_pwm_cycle oid=21 cycle_ticks=20000000, config_analog_in oid=22 pin=PA7, config_neopixel oid=6 pin=PF12 data_size=150 bit_max_ticks=1600 reset_min_ticks=20000, config_stepper oid=7 step_pin=PC14 dir_pin=PC13 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=23 pin=PE6 value=1 default_value=1 max_duration=0, config_endstop oid=8 pin=PC15 pull_up=0, config_trsync oid=9, config_stepper oid=10 step_pin=PE5 dir_pin=PE4 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=24 pin=PE3 value=1 default_value=1 max_duration=0, config_endstop oid=11 pin=PF0 pull_up=0, config_trsync oid=12
Sent 37 590.297132 590.297132 62: seq: 11, config_stepper oid=13 step_pin=PG9 dir_pin=PG10 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=25 pin=PG13 value=1 default_value=1 max_duration=0, config_trsync oid=14, config_stepper oid=15 step_pin=PG11 dir_pin=PD7 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=26 pin=PG12 value=1 default_value=1 max_duration=0, config_stepper oid=16 step_pin=PB4 dir_pin=PB3 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=27 pin=PB5 value=1 default_value=1 max_duration=0, config_stepper oid=17 step_pin=PG15 dir_pin=PB6 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=28 pin=PG14 value=1 default_value=1 max_duration=0
Sent 38 590.304132 590.304132 57: seq: 12, finalize_config crc=924824692, query_analog_in oid=18 clock=2282065408 sample_ticks=400000 sample_count=8 rest_ticks=120000000 min_value=14024 max_value=32038 range_check_count=4, queue_digital_out oid=19 clock=1898795324 on_ticks=0, queue_digital_out oid=20 clock=1898802086 on_ticks=0, queue_digital_out oid=21 clock=1898805626 on_ticks=0
Sent 39 590.304576 590.304576 26: seq: 13, query_analog_in oid=22 clock=2298065408 sample_ticks=400000 sample_count=8 rest_ticks=120000000 min_value=0 max_value=32760 range_check_count=4, get_config
Sent 40 590.311218 590.311218 21: seq: 14, spi_send oid=0 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 41 590.311565 590.311565 21: seq: 15, spi_send oid=0 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 42 590.311902 590.311902 21: seq: 16, spi_send oid=0 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 43 590.312291 590.312291 21: seq: 17, spi_send oid=0 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 44 590.312628 590.312628 21: seq: 18, spi_send oid=0 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 45 590.313014 590.313014 13: seq: 19, spi_send oid=1 data=b'\x8b\x00\x00\x00 '
Sent 46 590.313052 590.313052 13: seq: 1a, spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 47 590.313474 590.313474 21: seq: 1b, spi_send oid=1 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 48 590.313806 590.313806 21: seq: 1c, spi_send oid=1 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 49 590.314191 590.314191 21: seq: 1d, spi_send oid=1 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 50 590.314536 590.314536 21: seq: 1e, spi_send oid=1 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 51 590.314913 590.314913 13: seq: 1f, spi_send oid=2 data=b'\x8b\x00\x00\x002'
Sent 52 590.314952 590.314952 13: seq: 10, spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 53 590.315326 590.315326 21: seq: 11, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 54 590.315658 590.315658 21: seq: 12, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 55 590.315990 590.315990 21: seq: 13, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 56 590.316367 590.316367 21: seq: 14, spi_send oid=2 data=b'\x8b\x00\x00\x002', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 57 590.316752 590.316752 13: seq: 15, spi_send oid=3 data=b'\x8b\x00\x00\x002'
Sent 58 590.316790 590.316790 13: seq: 16, spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 59 590.317201 590.317201 21: seq: 17, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 60 590.317541 590.317541 21: seq: 18, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 61 590.317877 590.317877 21: seq: 19, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 62 590.318243 590.318243 21: seq: 1a, spi_send oid=3 data=b'\x8b\x00\x00\x002', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 63 590.318620 590.318620 13: seq: 1b, spi_send oid=4 data=b'\x8b\x00\x00\x002'
Sent 64 590.318658 590.318658 13: seq: 1c, spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 65 590.319007 590.319007 21: seq: 1d, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 66 590.319424 590.319424 21: seq: 1e, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 67 590.319760 590.319760 21: seq: 1f, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 68 590.320096 590.320096 21: seq: 10, spi_send oid=4 data=b'\x8b\x00\x00\x002', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 69 590.320474 590.320474 13: seq: 11, spi_send oid=5 data=b'\x8b\x00\x00\x002'
Sent 70 590.320512 590.320512 13: seq: 12, spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 71 590.320865 590.320865 21: seq: 13, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 72 590.321244 590.321244 21: seq: 14, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 73 590.321583 590.321583 21: seq: 15, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 74 590.321916 590.321916 21: seq: 16, spi_send oid=5 data=b'\x8b\x00\x00\x002', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 75 590.385704 590.385704 15: seq: 17, neopixel_update oid=6 pos=0 data=b'\xff\xff\xff\xff\xff\xff'
Sent 76 590.385848 590.385848 45: seq: 18, neopixel_update oid=6 pos=6 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=22 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 77 590.385848 590.385848 45: seq: 19, neopixel_update oid=6 pos=38 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=54 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 78 590.385848 590.385848 45: seq: 1a, neopixel_update oid=6 pos=70 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=86 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 79 590.386313 590.386313 47: seq: 1b, neopixel_update oid=6 pos=102 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=118 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 80 590.392280 590.392280 28: seq: 1c, neopixel_update oid=6 pos=134 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_send oid=6
Sent 81 590.394543 590.394543 7: seq: 1d, stepper_get_position oid=7
Sent 82 590.394775 590.394775 21: seq: 1e, spi_send oid=0 data=b'j\x00\x00\x00\x00', spi_transfer oid=0 data=b'j\x00\x00\x00\x00'
Sent 83 590.395164 590.395164 7: seq: 1f, stepper_get_position oid=10
Sent 84 590.395380 590.395380 21: seq: 10, spi_send oid=1 data=b'j\x00\x00\x00\x00', spi_transfer oid=1 data=b'j\x00\x00\x00\x00'
Sent 85 590.395720 590.395720 7: seq: 11, stepper_get_position oid=13
Sent 86 590.395937 590.395937 21: seq: 12, spi_send oid=2 data=b'j\x00\x00\x00\x00', spi_transfer oid=2 data=b'j\x00\x00\x00\x00'
Sent 87 590.396333 590.396333 7: seq: 13, stepper_get_position oid=15
Sent 88 590.396543 590.396543 21: seq: 14, spi_send oid=3 data=b'j\x00\x00\x00\x00', spi_transfer oid=3 data=b'j\x00\x00\x00\x00'
Sent 89 590.396886 590.396886 7: seq: 15, stepper_get_position oid=16
Sent 90 590.397097 590.397097 21: seq: 16, spi_send oid=4 data=b'j\x00\x00\x00\x00', spi_transfer oid=4 data=b'j\x00\x00\x00\x00'
Sent 91 590.397434 590.397434 7: seq: 17, stepper_get_position oid=17
Sent 92 590.397644 590.397644 21: seq: 18, spi_send oid=5 data=b'j\x00\x00\x00\x00', spi_transfer oid=5 data=b'j\x00\x00\x00\x00'
Sent 93 590.403376 590.403376 13: seq: 19, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e'
Sent 94 590.403417 590.403417 13: seq: 1a, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 95 590.403776 590.403776 21: seq: 1b, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 96 590.404114 590.404114 21: seq: 1c, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 97 590.404459 590.404459 21: seq: 1d, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 98 590.404801 590.404801 21: seq: 1e, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 99 590.405856 590.405856 6: seq: 1f, emergency_stop
Dumping receive queue 100 messages
Receive: 0 589.368364 589.368039 49: seq: 1b, identify_response offset=1680 data=b'\xab\x9f~^\xfd\x98|xX\xff\x82\xf7\xa9\xfe\x9dM\xeeVO\xb0^t\x87\xc0\xdf\xcf\xfc\xe0\xed\r\x16\xdf\xffzG\xf7\xeec\xa2\x7f'
Receive: 1 589.368728 589.368407 49: seq: 1c, identify_response offset=1720 data=b"X\xaf\xd6\xb7\xff^'\xbf\xde~\xba\xfe\xf9Wt \x1f\x077\xeb\x07\x18\x94\x87\x80\xcd\xf0\x0c\xd7p\x7f\xd7x}\x83\xc9\xa7\xcd\x95\xbc"
Receive: 2 589.369183 589.368772 49: seq: 1d, identify_response offset=1760 data=b'\x1f<\xfbR\x8a>\x98\xce\xdaw\xf0\x80R\x8a\x08\xeb?\xe2\xfa\xcd\xe3\xf2q\x93l\x9e\xee6\xbf$W\xcb\xcd\x1a\x0f\x12\xe3\xf0\xfa\xfe'
Receive: 3 589.369545 589.369226 49: seq: 1e, identify_response offset=1800 data=b'~\xfd\x90\\\xfd\xfc\xf81Y\x93\\_\xf0\xed\xd0\xc3kF\xbe\xb7e\xb5N\xe1h\xd5t\x0c\x95\xf0\xb9c\x97\x84\xa8\x07f\xe8\xcb!'
Receive: 4 589.369903 589.369588 49: seq: 1f, identify_response offset=1840 data=b'\xc7\xe6\x02\xd8\x01"\x9bv\x87\xc7\xf5\x1d\x1ca\xf9\xf8\xf4 O\x05!\xf6~9\x9d\\\xfegz\xe6\xc5\xff\x85\xce\x15v +Po'
Receive: 5 589.370314 589.369946 49: seq: 10, identify_response offset=1880 data=b"\x85\xbd\xc0W\xbdk\xec\x85s\xd5[c\x0f\xa08\xf5>`o\xae\xb9\xdc`o\xa1\xb9|\x94<=\xc9\xe6\xcb 3\xc0\x1bU\xd6'"
Receive: 6 589.370673 589.370357 49: seq: 11, identify_response offset=1920 data=b'\xbd \x08\xa4|\xa9\x88\xa6\xe1,\x97\xa2u%\x8f\xa6\x9e\xff\x0c\xe7T\xab\x94V\xc8e<9\x86\xde\xe1\xcb\x96/\x19(\x83\xa7\x90\x8d'
Receive: 7 589.371090 589.370716 49: seq: 12, identify_response offset=1960 data=b'\xa6MI$\x94/)2U\xca\x11h\x953\xd9\x02\xfb\x9b\xe3\x06\x00S\n\x0cg-<\\\xe5SLj\x8c\xc9@\xb3%$J\x85'
Receive: 8 589.371447 589.371133 49: seq: 13, identify_response offset=2000 data=b'\xb2e)k\x8bL?\xearJ\xbe\xcb\xaaF$\xc3\xc0\x9aX\x05I\x84\xa5B\x14\xbb\x8a\xe7\xf0\x94(\x04\xbb\xbd\xa6W\xf4*\xad`'
Receive: 9 589.371810 589.371490 49: seq: 14, identify_response offset=2040 data=b'\xbac\x10_\x19\xe6(\x06i\x95r)\x93a\x92\xbd\xee\x0bhS\xb8\x13\xac\x81\x80\r\x07"\x10\x00k\xff\xd6!\x90`\xc89-\x81'
Receive: 10 589.372227 589.371853 49: seq: 15, identify_response offset=2080 data=b's\xda1`\x9e\xaa#Q-\x86\xde\xa4\x8aX\x1e\x02C%\xbd\x9ciTb\x0e\t\xd9`;^1]\xae0\xebA\xa7+\xaa \xb3'
Receive: 11 589.372589 589.372269 49: seq: 16, identify_response offset=2120 data=b"&m\x05L\xc9'\x8e\xd4\x99\x9eh9@\x1f\xd1\xc9:\xf2\xc7\xdf\x10Gc%\xef_\xaa\x927P\x1c\xf3\xceCBK\xb7\xfe\x8a}"
Receive: 12 589.372946 589.372633 49: seq: 17, identify_response offset=2160 data=b"Z\xae~$\x14\x8f=\xf0\x96\x87G=6u\xc7\x1e\xd6\xcbk5\x81i\x02'\x1e)#Q\x06\xba%\xbc\xc7\xc0\xdf\x99\xda\x95\xdeW"
Receive: 13 589.373367 589.372989 49: seq: 18, identify_response offset=2200 data=b'zB\x17hm\x9d\x99\xf0\x18\x81\x0bM\xa5J\xe5\xd2D\xec\x18\x90\xa1\xe8\xe9\x81\x03\x98\xa32\x8c\x9e<\xd4/\\K\xcf\xb0R\x87\x99'
Receive: 14 589.373726 589.373410 49: seq: 19, identify_response offset=2240 data=b"\xc7N\x9b\xba\x9e\xa9\xe4\xd1\x9b\xf9h^\xbd\xfe\xcc\xfe\x81#\x13\\\x18#\xff\xf0\x1c\x81\xb0\x00'\xbd\x00\x13\xb5;\xa8\x93\x1efJg"
Receive: 15 589.374138 589.373769 49: seq: 1a, identify_response offset=2280 data=b'\\!\xf7l_4\x8a[\xe8\xc81\x00\xde.\r\xdc\xcc]\xfa\x86\xb77\xd7:$pu\x07o\xf0\x14\xae\x93W\x19Z\xb8\xb2\t\x9c'
Receive: 16 589.374498 589.374181 49: seq: 1b, identify_response offset=2320 data=b'(\x84\x00K\x17\xf0T\xcb\xfb\x12K?\xb0\x18Q%S\t[\x9a\x03\x7f\xe1\xa8|\x04\x94__\xb0O\xdb\\:\x85\xa2\xc6\xca\xde\x1d'
Receive: 17 589.374860 589.374541 49: seq: 1c, identify_response offset=2360 data=b"j\\\x02m\x06\xadv[\xd6\xaf\x84\xd4?\x81'\xa5\x8c\xc4Ao\x95\xa1\x0e?C\xb8\x13h\x1fr\x02\xe3\x9d;QT\r\xe1Y\xaa"
Receive: 18 589.375271 589.374904 49: seq: 1d, identify_response offset=2400 data=b'r\xca\xa9\nOj\x87c\x99N\x8c\x835m\xbd\x03\x9b8\xc0\xd1S\x94m\x0b\x80\x10N\t\xba\xe6\x18\x07\xf0\xbd\xfe\xc0\x95P\xe8\xf9'
Receive: 19 589.375632 589.375313 49: seq: 1e, identify_response offset=2440 data=b'`\xae-l\x83\xaa\x06kBg\xc1\x8f\x1a\x1bCp\xa4\x1d\xf6Z\x94%\xe0\xa4\x0c\xf8\rj\xb1\x84\xfc\xecJ\xa3\xa1o\xac\xc0o\x15'
Receive: 20 589.375995 589.375675 49: seq: 1f, identify_response offset=2480 data=b'\x1bpt\xbaCy\x00\xa4(\x0e\xfdA\x8fi\x7f\x00\xf17\xba\xde*\xbf\xb9\x003\x19\x1ad\xacr?\xbflT\xac\xe8\xea\x9amS'
Receive: 21 589.376363 589.376038 49: seq: 10, identify_response offset=2520 data=b')\x1dI\x86\x85\xaeG\xd7\xa4Pe@(+\xccT\x97y\x94\xfa\xc0\x95\x00\x11\x05\x97\x81\xfa\xa9\x12}\x830\x11v\xc4\xb2\xbe\xb4o'
Receive: 22 589.376723 589.376406 49: seq: 11, identify_response offset=2560 data=b'\xfct"?[\xc1\xe3\xbf\xaf>\x03\x0f\x08\x8a9}\xd5p\xc6\x85\x9d\x80\x8b"c\x07\x88+\xeaV\xfa\'`M\xc12\xa1\xae\xd2V'
Receive: 23 589.377138 589.376766 49: seq: 12, identify_response offset=2600 data=b'\x97)\xfc\xd5U\t\x11\xf3\x05\x18\xa4\xcf\xa5\x0e\x84FR8\x80\xfc\\fB\xab\xfa\x88\x96S-S`\x81\t\xc3\x1c]q\x06\xd38'
Receive: 24 589.377505 589.377181 49: seq: 13, identify_response offset=2640 data=b'\x15\x1a\xa8-\xbd_\x8aZ\xa6-\xa6\x8e\xe04\x88E\xfd\x925b\xcdZE`\xb2u\x84\xee\x90\x99\x8e\xea\xba\x98\x9a\x00\xdf\x04\xde<'
Receive: 25 589.377867 589.377548 49: seq: 14, identify_response offset=2680 data=b'\x8ad\xd6S\x9dXfE\xea\xc4\x91\xbc,\xe8\xc4\xf1,B\x1c\x00\x9c\xca"\x03\xe5\xc0\xfa\xc9\xcd\xa7\'vs\xff\xd3\x0bb-\xd0F'
Receive: 26 589.378271 589.377910 49: seq: 15, identify_response offset=2720 data=b'\x03\x1e\xce\xe9[\xa1\xae\xea\x0c\n\x14\xd23\x93S/\xe0s\x0c\x8c\xfa\x9b\xdf`I\xea\xd4l\x98\x9c\xa1\x17\xce9f2S\xf1d\xaa'
Receive: 27 589.378632 589.378315 49: seq: 16, identify_response offset=2760 data=b'\xd5\xf7\xb8\xea\x02\x1e#j\x00S(\x0e\xe1\x1e\x98\xb8\xe8ml\x9f \xe7\x81\xf9\xa4\x07\x19PUH\xe5+E\xd6VqL_\xa6|'
Receive: 28 589.378996 589.378675 49: seq: 17, identify_response offset=2800 data=b'\xfaA\xdcH\xccc\x1cO!\x8b\xf5\xb2|\xf4-Q\xd5\x12\xd5H\x9c\xfd\xd1\x14uE[\x80\x85\x9b\x02\xf59\x06a]\x11\x1e\xb0\xde'
Receive: 29 589.379363 589.379039 49: seq: 18, identify_response offset=2840 data=b'\xd7\x07\x88t\xc7\x9b\xb8\x05g\\\x1f\xd9Jl\xa2o\xc7\xa9\xe4\xc8\xbeV\xa6g\xab\x9d\x0e\xad){\xd2\xcb\xf2\x02i\x11?Z\xa5\xb0'
Receive: 30 589.379730 589.379407 49: seq: 19, identify_response offset=2880 data=b'1\xe0!\xbd,B[\x1d=\xaaS9\x02\xe8\x1a\xa8\xab\x90\xd0\xa9l*\x9d\xe8G{\x9fe\xb2|\x8b\xe2\xe1{\x14\x8e\xe9~\x1d8'
Receive: 31 589.380138 589.379772 49: seq: 1a, identify_response offset=2920 data=b'\xc7tN\x8e\x0b(\x0f\x1e\xe3\xee\xe3X`\xa6\xad2>\xaa\x8d\x9ecbt\xd7\x0cJX\xb6\\\xa3\x8aL\xfa\tJ\xa5\x0e\x97\xe5s'
Receive: 32 589.380497 589.380181 49: seq: 1b, identify_response offset=2960 data=b'/\xa3xN\x85C\xc0K\x10\r\x12\x9df\x842\x17Y^\xb1\x01RW:O\xeb0:U\xff8\xbaI\xb7\xc6\xe5^\xa9\x17\r\x0b'
Receive: 33 589.380860 589.380540 49: seq: 1c, identify_response offset=3000 data=b'\x0e\x7fi\x02\xbeD\xafm\'q\xe2" ,+\xac\xe9\x8a\xfe\xa0\xfe\x88\xdf\x95\xef\xf8\xb6\x880\xaa0P\x15\xba@\xbe\xf1(\xf6\x0c'
Receive: 34 589.381270 589.380904 49: seq: 1d, identify_response offset=3040 data=b'\xef\xf4dH\xe8)\xda\xab\x8b\x8em\xe1\xe1X\x06,9\x90\xbc\x0b\xb7\x98`\x8d\r\x02\x81\xae\t\x9c\xae\xba;\xb6\x87\xb9\x87\xbe\x8a0'
Receive: 35 589.381631 589.381314 49: seq: 1e, identify_response offset=3080 data=b'\xfa\x10\xd9\x0fB\x05\xbe\xb3\xd4\x7f\xb1\x80\xe0\xf72\xbd\xf0\xfc\x8b\xe9y\x10.\xcewi\x10N\x830\\\x84\x93/\xff\x03u\x9f\x0c\xd8'
Receive: 36 589.381865 589.381674 9: seq: 1f, identify_response offset=3120 data=b''
Receive: 37 589.383861 589.383717 14: seq: 10, canbus_id canbus_uuid=b'\x8d`\xb0\xd4\xc7p' canbus_nodeid=4
Receive: 38 589.384190 589.383968 12: seq: 11, uptime high=2 clock=1454257942
Receive: 39 589.434495 589.434350 11: seq: 12, clock clock=1474379627
Receive: 40 589.473692 589.434350 15: seq: 12, stats count=1569 sum=817289 sumsq=2261283
Receive: 41 589.484775 589.484626 11: seq: 13, clock clock=1494492141
Receive: 42 589.535097 589.534894 11: seq: 14, clock clock=1514596813
Receive: 43 589.585935 589.585786 11: seq: 15, clock clock=1534955623
Receive: 44 589.636205 589.636062 11: seq: 16, clock clock=1555063973
Receive: 45 589.686467 589.686322 11: seq: 17, clock clock=1575168767
Receive: 46 589.736721 589.736577 11: seq: 18, clock clock=1595270805
Receive: 47 589.786977 589.786834 11: seq: 19, clock clock=1615372815
Receive: 48 589.788055 589.787861 11: seq: 1a, clock clock=1615784420
Receive: 49 590.295465 590.295261 10: seq: 1b, config is_config=0 crc=0 is_shutdown=0 move_count=0
Receive: 50 590.305619 590.304576 15: seq: 14, config is_config=1 crc=924824692 is_shutdown=0 move_count=1024
Receive: 51 590.311460 590.311218 13: seq: 15, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 52 590.311803 590.311565 13: seq: 16, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 53 590.312223 590.311902 13: seq: 17, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 54 590.312530 590.312291 13: seq: 18, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 55 590.312868 590.312628 13: seq: 19, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 56 590.313370 590.313052 13: seq: 1b, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 57 590.313709 590.313474 13: seq: 1c, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 58 590.314045 590.313806 13: seq: 1d, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 59 590.314431 590.314191 13: seq: 1e, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 60 590.314773 590.314536 13: seq: 1f, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 61 590.315225 590.314952 13: seq: 11, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 62 590.315560 590.315326 13: seq: 12, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 63 590.315893 590.315658 13: seq: 13, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 64 590.316270 590.315990 13: seq: 14, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 65 590.316606 590.316367 13: seq: 15, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 66 590.317037 590.316790 13: seq: 17, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 67 590.317442 590.317201 13: seq: 18, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 68 590.317780 590.317541 13: seq: 19, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 69 590.318180 590.317877 13: seq: 1a, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 70 590.318483 590.318243 13: seq: 1b, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 71 590.318904 590.318658 13: seq: 1d, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 72 590.319326 590.319007 13: seq: 1e, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 73 590.319662 590.319424 13: seq: 1f, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 74 590.320000 590.319760 13: seq: 10, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 75 590.320335 590.320096 13: seq: 11, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 76 590.320758 590.320512 13: seq: 13, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 77 590.321180 590.320865 13: seq: 14, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 78 590.321483 590.321244 13: seq: 15, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 79 590.321819 590.321583 13: seq: 16, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 80 590.322182 590.321916 13: seq: 17, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 81 590.394046 590.392280 8: seq: 1d, neopixel_result oid=6 success=1
Receive: 82 590.394652 590.394543 8: seq: 1e, stepper_position oid=7 pos=0
Receive: 83 590.395014 590.394775 13: seq: 1f, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 84 590.395271 590.395164 8: seq: 10, stepper_position oid=10 pos=0
Receive: 85 590.395616 590.395380 13: seq: 11, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 86 590.395864 590.395720 8: seq: 12, stepper_position oid=13 pos=0
Receive: 87 590.396229 590.395937 13: seq: 13, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 88 590.396435 590.396333 8: seq: 14, stepper_position oid=15 pos=0
Receive: 89 590.396781 590.396543 13: seq: 15, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 90 590.396989 590.396886 8: seq: 16, stepper_position oid=16 pos=0
Receive: 91 590.397333 590.397097 13: seq: 17, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 92 590.397537 590.397434 8: seq: 18, stepper_position oid=17 pos=0
Receive: 93 590.397882 590.397644 13: seq: 19, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 94 590.403663 590.403417 13: seq: 1b, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 95 590.404014 590.403776 13: seq: 1c, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 96 590.404353 590.404114 13: seq: 1d, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 97 590.404701 590.404459 13: seq: 1e, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 98 590.405039 590.404801 13: seq: 1f, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 99 590.406004 590.405856 12: seq: 10, shutdown clock=1862985218 static_string_id=Command request
Dumping stepper 'stepper_x' (mcu) 1 queue_step:
queue_step 0: t=10448342178 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_y' (mcu) 1 queue_step:
queue_step 0: t=10448589491 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z' (mcu) 1 queue_step:
queue_step 0: t=10448826703 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z1' (mcu) 1 queue_step:
queue_step 0: t=10449055220 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z2' (mcu) 1 queue_step:
queue_step 0: t=10449276480 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z3' (mcu) 1 queue_step:
queue_step 0: t=10449495710 p=0 i=0 c=0 a=0
MCU 'ebb' shutdown: Command request
clocksync state: mcu_freq=12000000 last_clock=314822041 clock_est=(589.958 310766867 12000736.955) min_half_rtt=0.000083 min_rtt_time=589.940 time_avg=589.957(0.017) clock_avg=310766867.574(202076.829) pred_variance=106139505.687 clock_adj=(-0.206 12003245.750)
Dumping serial stats: bytes_write=1296 bytes_read=4841 bytes_retransmit=0 bytes_invalid=0 send_seq=132 receive_seq=132 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 589.816201 589.816201 9: seq: 10, identify offset=640 count=40
Sent 1 589.817321 589.817321 9: seq: 11, identify offset=680 count=40
Sent 2 589.818426 589.818426 9: seq: 12, identify offset=720 count=40
Sent 3 589.819550 589.819550 9: seq: 13, identify offset=760 count=40
Sent 4 589.820675 589.820675 9: seq: 14, identify offset=800 count=40
Sent 5 589.821827 589.821827 9: seq: 15, identify offset=840 count=40
Sent 6 589.822954 589.822954 9: seq: 16, identify offset=880 count=40
Sent 7 589.824156 589.824156 9: seq: 17, identify offset=920 count=40
Sent 8 589.825276 589.825276 9: seq: 18, identify offset=960 count=40
Sent 9 589.826404 589.826404 9: seq: 19, identify offset=1000 count=40
Sent 10 589.827504 589.827504 9: seq: 1a, identify offset=1040 count=40
Sent 11 589.828636 589.828636 9: seq: 1b, identify offset=1080 count=40
Sent 12 589.829763 589.829763 9: seq: 1c, identify offset=1120 count=40
Sent 13 589.830885 589.830885 9: seq: 1d, identify offset=1160 count=40
Sent 14 589.831999 589.831999 9: seq: 1e, identify offset=1200 count=40
Sent 15 589.833199 589.833199 9: seq: 1f, identify offset=1240 count=40
Sent 16 589.834333 589.834333 9: seq: 10, identify offset=1280 count=40
Sent 17 589.835446 589.835446 9: seq: 11, identify offset=1320 count=40
Sent 18 589.836572 589.836572 9: seq: 12, identify offset=1360 count=40
Sent 19 589.837699 589.837699 9: seq: 13, identify offset=1400 count=40
Sent 20 589.838815 589.838815 9: seq: 14, identify offset=1440 count=40
Sent 21 589.839938 589.839938 9: seq: 15, identify offset=1480 count=40
Sent 22 589.841059 589.841059 9: seq: 16, identify offset=1520 count=40
Sent 23 589.842200 589.842200 9: seq: 17, identify offset=1560 count=40
Sent 24 589.843327 589.843327 9: seq: 18, identify offset=1600 count=40
Sent 25 589.844453 589.844453 9: seq: 19, identify offset=1640 count=40
Sent 26 589.845577 589.845577 9: seq: 1a, identify offset=1680 count=40
Sent 27 589.846712 589.846712 9: seq: 1b, identify offset=1720 count=40
Sent 28 589.847829 589.847829 9: seq: 1c, identify offset=1760 count=40
Sent 29 589.848961 589.848961 9: seq: 1d, identify offset=1800 count=40
Sent 30 589.850159 589.850159 9: seq: 1e, identify offset=1840 count=40
Sent 31 589.851283 589.851283 9: seq: 1f, identify offset=1880 count=40
Sent 32 589.852409 589.852409 9: seq: 10, identify offset=1920 count=40
Sent 33 589.853523 589.853523 9: seq: 11, identify offset=1960 count=40
Sent 34 589.854640 589.854640 9: seq: 12, identify offset=2000 count=40
Sent 35 589.855760 589.855760 9: seq: 13, identify offset=2040 count=40
Sent 36 589.856880 589.856880 9: seq: 14, identify offset=2080 count=40
Sent 37 589.857994 589.857994 9: seq: 15, identify offset=2120 count=40
Sent 38 589.859198 589.859198 9: seq: 16, identify offset=2160 count=40
Sent 39 589.860327 589.860327 9: seq: 17, identify offset=2200 count=40
Sent 40 589.861442 589.861442 9: seq: 18, identify offset=2240 count=40
Sent 41 589.862556 589.862556 9: seq: 19, identify offset=2280 count=40
Sent 42 589.863674 589.863674 9: seq: 1a, identify offset=2320 count=40
Sent 43 589.864801 589.864801 9: seq: 1b, identify offset=2360 count=40
Sent 44 589.865925 589.865925 9: seq: 1c, identify offset=2400 count=40
Sent 45 589.867047 589.867047 9: seq: 1d, identify offset=2440 count=40
Sent 46 589.868199 589.868199 9: seq: 1e, identify offset=2480 count=40
Sent 47 589.869321 589.869321 9: seq: 1f, identify offset=2520 count=40
Sent 48 589.870430 589.870430 9: seq: 10, identify offset=2560 count=40
Sent 49 589.871546 589.871546 9: seq: 11, identify offset=2600 count=40
Sent 50 589.872668 589.872668 9: seq: 12, identify offset=2640 count=40
Sent 51 589.873788 589.873788 9: seq: 13, identify offset=2680 count=40
Sent 52 589.874907 589.874907 9: seq: 14, identify offset=2720 count=40
Sent 53 589.876023 589.876023 9: seq: 15, identify offset=2760 count=40
Sent 54 589.877201 589.877201 9: seq: 16, identify offset=2800 count=40
Sent 55 589.878315 589.878315 9: seq: 17, identify offset=2840 count=40
Sent 56 589.879431 589.879431 9: seq: 18, identify offset=2880 count=40
Sent 57 589.880540 589.880540 9: seq: 19, identify offset=2920 count=40
Sent 58 589.881656 589.881656 9: seq: 1a, identify offset=2960 count=40
Sent 59 589.882774 589.882774 9: seq: 1b, identify offset=3000 count=40
Sent 60 589.883887 589.883887 9: seq: 1c, identify offset=3040 count=40
Sent 61 589.885006 589.885006 9: seq: 1d, identify offset=3080 count=40
Sent 62 589.886202 589.886202 9: seq: 1e, identify offset=3120 count=40
Sent 63 589.886830 589.886830 9: seq: 1f, identify offset=3125 count=40
Sent 64 589.888998 589.888907 6: seq: 10, get_canbus_id
Sent 65 589.889573 589.889482 6: seq: 11, get_uptime
Sent 66 589.940180 589.940089 6: seq: 12, get_clock
Sent 67 589.990772 589.990681 6: seq: 13, get_clock
Sent 68 590.041363 590.041272 6: seq: 14, get_clock
Sent 69 590.092263 590.092172 6: seq: 15, get_clock
Sent 70 590.142851 590.142760 6: seq: 16, get_clock
Sent 71 590.193426 590.193335 6: seq: 17, get_clock
Sent 72 590.244009 590.243918 6: seq: 18, get_clock
Sent 73 590.294568 590.294477 6: seq: 19, get_clock
Sent 74 590.295373 590.295282 6: seq: 1a, get_clock
Sent 75 590.305905 590.305814 6: seq: 1b, get_config
Sent 76 590.306699 590.306600 7: seq: 1c, allocate_oids count=13
Sent 77 590.307758 590.306874 64: seq: 1d, config_spi oid=0 pin=gpio1 cs_active_high=0, config_adxl345 oid=1 spi_oid=0, config_spi oid=5 pin=gpio9 cs_active_high=0, spi_set_software_bus oid=0 miso_pin=gpio3 mosi_pin=gpio0 sclk_pin=gpio2 mode=3 rate=5000000, config_endstop oid=2 pin=gpio24 pull_up=0, config_trsync oid=3, config_tmcuart oid=4 rx_pin=gpio20 pull_up=0 tx_pin=gpio20 bit_time=300, config_digital_out oid=8 pin=gpio13 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=8 cycle_ticks=120000, config_digital_out oid=9 pin=gpio14 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=9 cycle_ticks=120000, config_analog_in oid=10 pin=gpio28
Sent 78 590.308646 590.306874 64: seq: 1e, spi_set_software_bus oid=5 miso_pin=gpio11 mosi_pin=gpio8 sclk_pin=gpio10 mode=1 rate=4000000, config_thermocouple oid=6 spi_oid=5 thermocouple_type=MAX31865, config_digital_out oid=11 pin=gpio7 value=0 default_value=0 max_duration=60000000, set_digital_out_pwm_cycle oid=11 cycle_ticks=1200000, config_stepper oid=7 step_pin=gpio18 dir_pin=gpio19 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=12 pin=gpio17 value=1 default_value=1 max_duration=0, finalize_config crc=3237245062, spi_send oid=5 data=b'\x80\xc3', queue_digital_out oid=8 clock=317353568 on_ticks=0
Sent 79 590.309490 590.306925 59: seq: 1f, queue_digital_out oid=9 clock=317353759 on_ticks=0, query_analog_in oid=10 clock=327764605 sample_ticks=12000 sample_count=8 rest_ticks=3600000 min_value=0 max_value=32760 range_check_count=4, query_thermocouple oid=6 clock=327284605 rest_ticks=3600000 min_value=15240 max_value=32318 max_invalid_count=3, queue_digital_out oid=11 clock=317354237 on_ticks=0, get_config
Sent 80 590.322539 590.322337 14: seq: 10, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 81 590.327162 590.326873 19: seq: 11, tmcuart_send oid=4 write=b'\xea\x03\x080\x80\x00\n\x08\xb8\x87' read=0
Sent 82 590.329897 590.329695 14: seq: 12, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 83 590.334516 590.334227 19: seq: 13, tmcuart_send oid=4 write=b'\xea\x03h0\x80\x00\x12\x08 \xda' read=0
Sent 84 590.337235 590.337033 14: seq: 14, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 85 590.341881 590.341592 19: seq: 15, tmcuart_send oid=4 write=b'\xea\x03\x88=\x9a\x06\x02h*\xbf' read=0
Sent 86 590.344601 590.344399 14: seq: 16, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 87 590.349202 590.348913 19: seq: 17, tmcuart_send oid=4 write=b'\xea\x03\x082\x80\x10\x9ah"\x9c' read=0
Sent 88 590.351925 590.351723 14: seq: 18, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 89 590.356564 590.356275 19: seq: 19, tmcuart_send oid=4 write=b'\xea\x03h2\x80\x1e\xfa\xef?\xdf' read=0
Sent 90 590.359282 590.359080 14: seq: 1a, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 91 590.363878 590.363589 19: seq: 1b, tmcuart_send oid=4 write=b'\xea\x03\x08>\xe4\x1ar\x88\xa4\x85' read=0
Sent 92 590.366595 590.366393 14: seq: 1c, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 93 590.371179 590.370890 19: seq: 1d, tmcuart_send oid=4 write=b'\xea\x03(2\x80\x00\x02\x88"\xf3' read=0
Sent 94 590.373898 590.373696 14: seq: 1e, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 95 590.378516 590.378227 19: seq: 1f, tmcuart_send oid=4 write=b'\xea\x03\x088\x80\x00\x02\x08 \xba' read=0
Sent 96 590.381240 590.381038 14: seq: 10, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 97 590.398127 590.398028 7: seq: 11, stepper_get_position oid=7
Sent 98 590.398809 590.398607 14: seq: 12, tmcuart_send oid=4 write=b'\xea\x03H-\xd5' read=10
Sent 99 590.406028 590.405937 6: seq: 13, emergency_stop
Dumping receive queue 100 messages
Receive: 0 589.813825 589.812759 49: seq: 1e, identify_response offset=520 data=b'\xf3!G\xddz>#9,\x81\xc8\x9cd3\xc7[\xf7\xbc?b7\xe5+\xf8\x91\xc3\xa1\xadf7\x86v\x04+\x07\x86\x94:\x8a\x81'
Receive: 1 589.814939 589.813869 49: seq: 1f, identify_response offset=560 data=b"\xdd\x101\x86\x8eA<\xf1|'\xb6;\xc5a\xb2\xf2\xe1\xc1\x91\xb65?\xe2\xa4v/\x1f^;N\xb2\x89''\x8d\xd3\x1f;\xac\xb7"
Receive: 2 589.816154 589.814996 49: seq: 10, identify_response offset=600 data=b'\xf2\xbd\xdc~\xff\xe6\xef\x10\xe5\x92dr\x16U\x8bfTJk&\x89\xb3\x1e9,\xd7.r\x94\xf2\x88\xb51)*;|m\xca|'
Receive: 3 589.817275 589.816201 49: seq: 11, identify_response offset=640 data=b'j\xcd\xac\xdcWyh\xe0\xd9\xda\xbb\x81c|\xb7\xa4\xc3T[\x13\xabDo\x86\x14\xeb\x14\xb0\x83\x1ak\xc9=\xa4\xb1cl\xd8\xf1~'
Receive: 4 589.818382 589.817321 49: seq: 12, identify_response offset=680 data=b'\xdfB(\xe9\x8eJ\xd4\xdfvB]8\xd7\x1e\xf6\xe5X\xf4\xd66\xfa\x97\xfc \x0e\xb1\xc1.\xa2\xe5\rb\xcf\x89\xb5\xc8a\xe9Q\x1e'
Receive: 5 589.819505 589.818426 49: seq: 13, identify_response offset=720 data=b'N\xac\x10Y+\xfe0\x82=\xb7\x90\xd9\xd6f\x06X\xb6\xca\x96I?\x91\x05\xc3\xc0\xcc\xda\xbe\xe2=\xde\x07y\xa5\xa7x\x15\x1b\x80\xe7'
Receive: 6 589.820630 589.819550 49: seq: 14, identify_response offset=760 data=b'^\x0c\xfc\x00\x02\x8d\x96\x00\x81\x14\xbe\xe7\xfd\x967\xe5k\x8e\x81\r\x88\x80%\nr\xf9\xae\xdd\xf3\x83\xb4#\x8b}\xe7;\x80\x9e\xdb\xa4'
Receive: 7 589.821751 589.820675 49: seq: 15, identify_response offset=800 data=b'3MK@\xba\x0b\xac\xc4\xae\x95q/\xb6[\xde#\x13\xb2\xa5\xe0\x10g\xeer\x95\xf4\x80\xa6b\xe0V@18\xe7F@:\x01\x97'
Receive: 8 589.822904 589.821827 49: seq: 16, identify_response offset=840 data=b'\xceI\x86\xac\xecK\n\x89og[\xf0\xe6\xb2h\x1eF\x99\x8b\n\xe4\x17\xeb%$\x1d\xe4\xaeg\xea\x18x\x08M\xc7\x0e\x15\x03\xae\xf9'
Receive: 9 589.824110 589.822954 49: seq: 17, identify_response offset=880 data=b'v\xa6\xc3u.\x81\x84\x1c\x8c\xd2f#\x1c\x93\xe8\x17Q\x00\x86Za^\xae\xd4`\xa0!\x8cT\xa4\x1fm"\\\xb9\x17\xc3\xb5\xbc\xe6'
Receive: 10 589.825232 589.824156 49: seq: 18, identify_response offset=920 data=b':\x03\xae\t\x10\xe3\x10\x90\xedG9\x98\xaa\x18\x05\xfc\xe3/\xaa\x8eK\xb2\xe34r\xa7d\xbb\x19\x9e\x8b\x9e\xfb\xc7\xc1\xf7\xac\xbfU\x85'
Receive: 11 589.826360 589.825276 49: seq: 19, identify_response offset=960 data=b'\x19\x1e\xc3\xb4H\t\x93\xb6\x93\x90\x8f\x14\xf9\xa8x3\x88\r\xd4\x1f\x9b\r\\\xa8\x1c\xd6\xa6e \xc4d\x00\xd8\x1b\xbfb2\xc3\x0e.'
Receive: 12 589.827460 589.826404 49: seq: 1a, identify_response offset=1000 data=b'\xdc\xb5u\xa5&\xdf6\x02\xc6\xfb\xbe\x9d\x18\xc5\n\xd4h\xe2\xbb\x12\xba5\x87\xcc\xdf\x19\xbb\xca\x99\n\x15V\xbb\xd1\xe3%\x03\xc3&\x9b'
Receive: 13 589.828592 589.827504 49: seq: 1b, identify_response offset=1040 data=b'\n\xaa\x9d\x89\xc1\xc2u\xeb\x00N\xd9\xe0\xe8\x82\xdfj\xe5\x00&\xe5O\x80h\x11\xc2\x85\x88\x16K\x0b\x10VH\xff\xa7\xb7\xed\x9d\xb7\xe9'
Receive: 14 589.829719 589.828636 49: seq: 1c, identify_response offset=1080 data=b'\xf4\xe3fP\x1dn\xe1\xe0\x8e\x97\x8f^]\x95D\x86\x86\xa0\xac\xb2\x14t-\x04\xb4\xf0~/Pg\x06\xc1\xa4\x10\t\x85\xba\x98@\x1d'
Receive: 15 589.830841 589.829763 49: seq: 1d, identify_response offset=1120 data=b'\x88\xd4"\t\xaa\x8e\x10\xcd<\x80S\xf6\x16\x04\x89\x95eiZ`\x04\xb8\x96\xcb)XH\xd3\xd2\x92\x1c\x94 !\x9e4\x80;@d'
Receive: 16 589.831956 589.830885 49: seq: 1e, identify_response offset=1160 data=b'\r\xef \x87\x7f\xa5\x96\xc7\x88\x04)[lHGK\xcb\x10a\x0e\x84\x04\x00\xd6d\x8f\xa5\xb5\xaf\\\xe2\xd9\xca\xc4Th\x02\xe9\x14\xa2'
Receive: 17 589.833155 589.831999 49: seq: 1f, identify_response offset=1200 data=b'l\xe5Y\xca\x82t4\xf2c5\xb5\xbd\xa3\xf5k\xa9\xc8\x1e\tJ)\x0bn\xcd\x13bMj\x801w3W;\xf2\x9e\xd2\x95\t;'
Receive: 18 589.834290 589.833199 49: seq: 10, identify_response offset=1240 data=b';\x15\xc2\xe0W@B\x80\x08\xa0\xaa8\x88\xf6\x91\x1e\xaa\xf3\x14\xf4\xc3\xfb\xe0\x00X\x10\xc2\xf8<\x04\x0f\x02\xa0;9\x00R\x1c\xa8\xd2'
Receive: 19 589.835403 589.834333 49: seq: 11, identify_response offset=1280 data=b'\xcf\xe2\x9c\xd4\x81phA\x87\x1a\xfe\xa2I\x80\xea\xc4\x86T\xd1S\x02\x8b\x08\xc8\xc8\xe3OjJ\x90\n\x92\xe2\xca;|\xe2m\x9c\x93'
Receive: 20 589.836520 589.835446 49: seq: 12, identify_response offset=1320 data=b'\xba\xe8\xb6\x9c\x13\x9c\x17\x1f\xbd\xdd$5\xbb\x934\x83K:\xcd\xec\xdb\x8a{I\x02\x8e,\xdc\x91c9f/dk2\xcb\xbe\x95\xe2'
Receive: 21 589.837653 589.836572 49: seq: 13, identify_response offset=1360 data=b'X\xddw\x80t\xa1\xb9\xf9:\x1f\t\x98\x0c\x95\x94\xdfJ\xc3\xd9j\nu<\x0bgK\x84R\xc5c\x8e\xa9\x1er\x82\xc0R\xdc\xfaM'
Receive: 22 589.838771 589.837699 49: seq: 14, identify_response offset=1400 data=b'\xb4v\x00\xaa\xe6@\xeb\xa5\x84\xc4l~\xf2\xb2\x15\x9c\x80\x8bu\xe97\x11\xb5\xca\x9f6\xbdSr\x02\x8d\xe8\xd3(C\xf4\xe9#\x1e\x00'
Receive: 23 589.839894 589.838815 49: seq: 15, identify_response offset=1440 data=b"&\xb1rp\x83_R\xf2\xae\xedu\xf1B\xde\xab\xe6\xd6H\xf8K'@%~\xf5\xb4\xb6\x98\x02.| \x10\n\xa5\xcac~\xec\xf9"
Receive: 24 589.841015 589.839938 49: seq: 16, identify_response offset=1480 data=b'@\xfa\xc5\x94\xa9\xd8\xf78\x7fw\x91_\x9f\xff\x8a%\xc1\x1aT\xf4\xc3\xe7\xbb\xfc\xd3\xd5\xcd\x1d>\x1e\xe7\x05vZ:\xd1\xce\xdf\xe2\xdf'
Receive: 25 589.842156 589.841059 49: seq: 17, identify_response offset=1520 data=b'h\x16l?\xe8\xedTmg\xe1v\xa9\xb7Wj{\x1dnWz\x1bjZ\xf5\x93\x84\x00\xdc\x00,\x08`\x19\x02l4@L\xf4\xc5'
Receive: 26 589.843283 589.842200 49: seq: 18, identify_response offset=1560 data=b'\x07\x04n\r\x00Q\x18\x1f\x90\xb83\x00Dc\x1c\x12\x19\x19\t\x10\x8d!\x89\x91\x91\x00Q\x18\x12\x18\x19\tDZ\x80!\x81\x91\x95\x01'
Receive: 27 589.844410 589.843327 49: seq: 19, identify_response offset=1600 data=b'\x11\x18\x85\x04FV\x06D`t@\xa0\x95\x01Q\x18\x1f\x90he@4\xc6\x13"\xc1e\x03%\'\x04\x15\x02MU\xbdT\x7f\x17!'
Receive: 28 589.845534 589.844453 49: seq: 1a, identify_response offset=1640 data=b"P\x19(lM?\xab\x10\xae\n\xf4\xa6\xef\x0c/\xb5\xc2\xd7\xbcG\xf43\x0f\xc1\x1e\x02C\xca\xe8'\r\xe1\xca\xc0\x1a\x88\x8b\x18\xd9\xb8"
Receive: 29 589.846668 589.845577 49: seq: 1b, identify_response offset=1680 data=b'8\xbfA\xd0\x7f\xde^\xfe\xfc\xf9\xf2\xe6\xe2\xdf\xf8\x14S\xff`\xeb\xe3O\x17\x1f\xd4\x0e>\xbf\xcc\xea\xd5\xcd\xd5\xfd\xd5\xf9G\x85\xdc\n'
Receive: 30 589.847785 589.846712 49: seq: 1c, identify_response offset=1720 data=b'\x18\x10]_|\x86i\xdf\xc5s\xd5`\xfc\xf4\xcb59W\x8c\xd5\xd4\xed\xe5\xc5\xe5\xd5\xbf.\xf3_\xaen\xde\xfd\xf4\x0bF\xa9\x18\x17'
Receive: 31 589.848906 589.847829 49: seq: 1d, identify_response offset=1760 data=b'\xef.oaQ\x91\tt\x1c\xf8\xd4\xdd\xfd\xf9\xfd]~\xf7\xf9\xfa\xee\xe7\xfc\x87\xf3\xbbKD\xb6\xc0\xe5\xcbO\x9f.o\xf3\x1f~\xba'
Receive: 32 589.850112 589.848961 49: seq: 1e, identify_response offset=1800 data=b'\xff1\xbf|\xf7\x1e\xd6\xa3/\xf8\xc8\x1a\xe1\xd9\xa7\x1a\x13\xaa\xad\xa9\x1f\x1cz\x88\xca\xa6\x17\x0cj\x94\x1e\x1b\xa8\xb6\x98F\x95z$j'
Receive: 33 589.851240 589.850159 49: seq: 1f, identify_response offset=1840 data=b'\xdf\xa3\x07\x04:YF\xa3\xadz\x8ai\xb7Y\xaa\x11\xaahE\xa3\x07\xf5\xac\xd5V\x1f\xd1%h\xdf\x11\xdd\x82\x96\x1c\xd15h\xb3\x11'
Receive: 34 589.852366 589.851283 49: seq: 10, identify_response offset=1880 data=b'\xdd\x83\xd6\xa9\xe2\x11\xe4\x15\x13\x8c\xee/\xaf\x81\xaf\xf3\xfb\xcf\xb7\x8aU CY\xe7\xec\xec?\xf3\xb7\xc9\xfc\xbf_&i\x13\x1e\xf0\xaa'
Receive: 35 589.853480 589.852409 49: seq: 11, identify_response offset=1920 data=b'y\x1b%I\xa2X+d6O\x97\x95bn\xa8y6\x8fb\xa0,\xd6\xa7\xb4$\xb4\xd9Sf\xd5\x92\xd0\x06\x1c\xd3\x88$\xa1\x8d\x90'
Receive: 36 589.854597 589.853523 49: seq: 12, identify_response offset=1960 data=b'r,r\x98\xd1\x08\x8b&\xc4\x08E\x9b\xc0\xe0\xde\xc33^=L\x15\x07L\x85\xdd\r\xd5\xe5\xd46<\xafE!\xf1\xad\x0f\x06\x81\xa5'
Receive: 37 589.855717 589.854640 49: seq: 13, identify_response offset=2000 data=b'\x01+j\xd5ze\xbbB\xaa5\xde\x14\x0f5\xaf(\xb9\x9c\xebM\xf3 \xaeH^\xe7M\x8bU \x03#a\r$`VH)\xb6'
Receive: 38 589.856836 589.855760 49: seq: 14, identify_response offset=2040 data=b'\r\xaf\xe0\x19&$\xbbzG\xcd\xd4\x8b\xa2\x81\xed\x81Anb\x98\xdf\x19\x94$T\x870\x95b\xd8\xf3N\xc0\x98R\x85d\x1d$;'
Receive: 39 589.857951 589.856880 49: seq: 15, identify_response offset=2080 data=b'\xa0\x8c\n(8\xfb\x97\x01\x8b0\x86\x98\x8b\x1a0\x17\x03\x03\xe4\x86^\xeac\xd1{^\x03+"0\xcd\x90\xaeiU\xd5k\xaa\xdc\x85'
Receive: 40 589.859156 589.857994 49: seq: 16, identify_response offset=2120 data=b'\xebx\xc3L\xab\xc7\x9e\x079_P\xf7\x9duE/aK=\x0f\x95a\x99\x8d\x9eC\xd9(\x07eb?\xfe\x8ao\x10\xec\x82\xfeC'
Receive: 41 589.860284 589.859198 49: seq: 17, identify_response offset=2160 data=b"wA'bf\xd1IJ\x95\xe6U|\xc1n\xce/>\xd0\x0b\x08g\xe0@\xb7\xf7fm\xee\xaf\xdd^\x9e\xbf\xd3\x1b\x98bq\xe3\x9e"
Receive: 42 589.861399 589.860327 49: seq: 18, identify_response offset=2200 data=b'\xb29e\xef+\xaa\x95\x99\xe9a\xbbV<\x95\xacT\x7f\x19(\xfd5AY\x89[\x030\xe4\xb0\xd8s\xa8w\xa9Se6\xb1?\xab'
Receive: 43 589.862512 589.861442 49: seq: 19, identify_response offset=2240 data=b",2\xf3\xb0\xec\xdb'n8g\xd8\xe1D\x0fq\xdb\xb6\x1fj;\xa0\xd4k8\xd8\xd7\xaffKT\xe2\xf1\x03\xcab\xe4:\xe8\x92f"
Receive: 44 589.863630 589.862556 49: seq: 1a, identify_response offset=2280 data=b'\x15\x1b\x97DN2]4\xc5\x02V\x18\xde\xba~\xf1\x94;\xd1il\xa9wp\xf2`\xf1a@+\xd7\xc5\x0bjne\x04KE\xe9'
Receive: 45 589.864756 589.863674 49: seq: 1b, identify_response offset=2320 data=b'5\x97\xb2\x00U\xf2\xa6D\xeb\xd6\xf6\x80\x1bBJ\xb0r\tO\xdcj\xac\xd1\x8d\xe00V\xe3L\x17:\xca\x14\xf8\x13G\x8d`!\xfe'
Receive: 46 589.865882 589.864801 49: seq: 1c, identify_response offset=2360 data=b'\xf5\x03\xbb\xa2\xaf\x94Chh\xec\x88^\xa3\xc4\xd5\x03\x85\xc1\xa8\xdf\xd4\xed3\xbdpn\xc0\x8b\nF\xec\xa0_\xab \x85\xdf[\xd4F'
Receive: 47 589.867004 589.865925 49: seq: 1d, identify_response offset=2400 data=b'\x03O\x98\x8e*}\xea\xff\xeaU\xa0\xc5-/T\x0eP.\x8f\xae^\x89\r\x14\xc7p\xb3uHp\x90M\xdf\xee\xe1 97\x00\xc2'
Receive: 48 589.868156 589.867047 49: seq: 1e, identify_response offset=2440 data=b'/\xbe\xc6\xe1O-JNm\xc5[\xae\x99Ao\x87C\x16\xb0+\xd0A\xf0\x9b\xd2\x9d\x058\x90\n{\x16u\rue\xc9a\xd7\xef'
Receive: 49 589.869278 589.868199 49: seq: 1f, identify_response offset=2480 data=b']S\xa5\xecNZ\xc9|\xe3\x04~\xdb\xb9\x03\xe7&\xdd)\x02\x10B\xec\xc7\xbdY3\xce\x01B\xb93\xfdi\xf5\x8d\n\x90\xa9p\xa0'
Receive: 50 589.870386 589.869321 49: seq: 10, identify_response offset=2520 data=b'\xe2\x93\xff\xb9\xeaN\xc7\x87\xa1m\xd9\xa6P\xdc\x11g\xd8\x18\xbc\xf7M\t\xe3\x10\x00\xaa\x8e<\xf5\xb1\xee\x95<\xf0$\x94\xd4\x92\xab\xc8'
Receive: 51 589.871503 589.870430 49: seq: 11, identify_response offset=2560 data=b'\xad\xbe\xe6\xe5\xe5nl\x1e\x01T\xa8\xd0\x8a\x1f{\xbcu\xe96@Kd\xcbP\xf9\xcb\xb6W\xee\x07%\xb8d\xa5\xd4ztMw\x8a'
Receive: 52 589.872624 589.871546 49: seq: 12, identify_response offset=2600 data=b'lmSC0|\x02\x04\x18\xb7u\x8c\xb3\x0ca"\xd4n\x80\xb9\x8bp`OK}[\xb4\xb1T\x7fq\xac(_J\xec\xc6a\\'
Receive: 53 589.873744 589.872668 49: seq: 13, identify_response offset=2640 data=b'#\xfd\x96\xb0\x8d[\xa9}\x97(\x97W|\xd6E\x8f\x99%9^\xf1\xa3p\xe9rl\xf0\xeb\x90K\x06\x8e\xef\x1cH\\\x07Mp\xcc'
Receive: 54 589.874863 589.873788 49: seq: 14, identify_response offset=2680 data=b'\\P\xa7$\xd1*\xcbT^\xd4\x93\x85J\x8d4YdJS0Y,\x960N\xbe\x00&\xb4\xd0\x06e>{\x7f\xf3\x99\xbd\xff\xf4'
Receive: 55 589.875979 589.874907 49: seq: 15, identify_response offset=2720 data=b'\xf1\t\x0bP\x90Q\x07n\xcd\xe9\xc3\xaai\x81M\xba9\xca\x1d\xf3c\xed\x82\x13\x0c\x91\xe6\x03\xe9\xe4H\xe15\xb8\x98\xda\xa1\xe7\xe0\t'
Receive: 56 589.877157 589.876023 49: seq: 16, identify_response offset=2760 data=b"\xa6.\xdb\x1efz4\x8ex\xea\x14^nz\x01s&.\xe1\x1d\x98\xa9\xa8\x91\xe0\xdek'\x89\xfd\xfe\t)O\xb7\x93\xd5\x93N5"
Receive: 57 589.878271 589.877201 49: seq: 17, identify_response offset=2800 data=b'\xa2q\xcd\xa8X\xbd\x93!X\xe4\xb6s\x81T\xa8/\x1b\xaa\xd7\xf6-V\xf5\x11=\xc8\xbd\xfb\xd1@M\xfb_\x82y\xdbn\xfe\tF'
Receive: 58 589.879387 589.878315 49: seq: 18, identify_response offset=2840 data=b'^\xd3>\x9f\xa0\xde\xb5{\x08o\x87\x97\xf8\xddy<\x9f\xb9\xb6un\xb4\xe3\xb5\xbd\xd4\xdc\x083r\xada\x0f\xd6\xf6\x88\xe9\x19~\x8a'
Receive: 59 589.880497 589.879431 49: seq: 19, identify_response offset=2880 data=b'\xb0X\xe59\xa1\xb0\xb0\x1e"\xb9\xacS\xd7J>h\xeay\x0c\x98\x86\xb1/\x90\xd4k\x03k\x99\x98\x0e\xc7X\x96\xaa\xd7\x8d\xec\xe1\xe3'
Receive: 60 589.881612 589.880540 49: seq: 1a, identify_response offset=2920 data=b'\x1d\xc8\xf4?\xa5\x9c`\xfe&w\x86\xaa\xaf~\x9ct\x12$\xa6\xd7\xa6\xe4A#\xf9\x04\xb3\xa1\x7ff\xd2\xefs\xbd-\xdd\x913\xefu'
Receive: 61 589.882732 589.881656 49: seq: 1b, identify_response offset=2960 data=b'\xea\x0b\xf9(\x1fF\x15\xe6+\xea\xb2B\x81\x041"7\xb9EjsQ\xbd(\x17\x1dM[\xf8\xb8\x0c\xb3c\xcd\xa2\x03M\xfa\rA'
Receive: 62 589.883844 589.882774 49: seq: 1c, identify_response offset=3000 data=b'_\xa5Q6\xed\xce\xfc\xa9\t\xc4\xaa\xb8\xed\x07U\x18\xae\x13*u\xa53]9\xee\xf5\x8f\xfcM\xfbN\xec:.A;\x86Z\xf6\x02'
Receive: 63 589.884963 589.883887 49: seq: 1d, identify_response offset=3040 data=b'\xf1.\x82\xd83\xd5\xe9\xd1\x900R\xa8\xd7\x8a^\xb8.\xcd!\x0f\xd8\x9f!~\xd7~\xe7\xc5\x19\x1b\x04\x02\xd3@9\xfe\x89\xc2\xb3='
Receive: 64 589.886158 589.885006 49: seq: 1e, identify_response offset=3080 data=b'L<\xf4\t\x89\xd1W\xdbq\x12*\xf0\xad\xa5\xff?\n\x04\xbf\xa7\xf9i\x14\x9f\xceO\x92t}\xb2-\x92t\x9e\xa4\xe9:\x9d}\xf9'
Receive: 65 589.886723 589.886202 14: seq: 1f, identify_response offset=3120 data=b'\x1f\xdc\x00}\x1b'
Receive: 66 589.887326 589.886830 9: seq: 10, identify_response offset=3125 data=b''
Receive: 67 589.889150 589.888998 14: seq: 11, canbus_id canbus_uuid=b'\x9fQ\x0b\xf96a' canbus_nodeid=5
Receive: 68 589.889740 589.889573 12: seq: 12, uptime high=0 clock=309951835
Receive: 69 589.940347 589.940180 11: seq: 13, clock clock=310559123
Receive: 70 589.990941 589.990772 11: seq: 14, clock clock=311166294
Receive: 71 590.041535 590.041363 11: seq: 15, clock clock=311773407
Receive: 72 590.092431 590.092263 11: seq: 16, clock clock=312384179
Receive: 73 590.143023 590.142851 11: seq: 17, clock clock=312991292
Receive: 74 590.193598 590.193426 11: seq: 18, clock clock=313598213
Receive: 75 590.244180 590.244009 11: seq: 19, clock clock=314205238
Receive: 76 590.294739 590.294568 11: seq: 1a, clock clock=314811945
Receive: 77 590.295577 590.295373 11: seq: 1b, clock clock=314822041
Receive: 78 590.306086 590.305905 10: seq: 1c, config is_config=0 crc=0 is_shutdown=0 move_count=0
Receive: 79 590.309986 590.309490 15: seq: 10, config is_config=1 crc=3237245062 is_shutdown=0 move_count=1024
Receive: 80 590.326466 590.322539 18: seq: 11, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x08"\xba'
Receive: 81 590.329522 590.327162 8: seq: 12, tmcuart_response oid=4 read=b''
Receive: 82 590.333853 590.329897 18: seq: 13, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02(\xa2\xfe'
Receive: 83 590.336865 590.334516 8: seq: 14, tmcuart_response oid=4 read=b''
Receive: 84 590.341220 590.337235 18: seq: 15, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02H\xa2\xd9'
Receive: 85 590.344230 590.341881 8: seq: 16, tmcuart_response oid=4 read=b''
Receive: 86 590.348530 590.344601 18: seq: 17, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02h"\x9d'
Receive: 87 590.351554 590.349202 8: seq: 18, tmcuart_response oid=4 read=b''
Receive: 88 590.355898 590.351925 18: seq: 19, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x88"\xca'
Receive: 89 590.358912 590.356564 8: seq: 1a, tmcuart_response oid=4 read=b''
Receive: 90 590.363214 590.359282 18: seq: 1b, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xa8\xa2\x8e'
Receive: 91 590.366225 590.363878 8: seq: 1c, tmcuart_response oid=4 read=b''
Receive: 92 590.370519 590.366595 18: seq: 1d, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xc8\xa2\xa9'
Receive: 93 590.373526 590.371179 8: seq: 1e, tmcuart_response oid=4 read=b''
Receive: 94 590.377855 590.373898 18: seq: 1f, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xe8"\xed'
Receive: 95 590.380868 590.378516 8: seq: 10, tmcuart_response oid=4 read=b''
Receive: 96 590.385228 590.381240 18: seq: 11, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x08#\x82'
Receive: 97 590.398333 590.398127 8: seq: 12, stepper_position oid=7 pos=0
Receive: 98 590.402735 590.398809 18: seq: 13, tmcuart_response oid=4 read=b'\n\xfaO-\x80\x00\x02\x08\xa1\xa2'
Receive: 99 590.406305 590.406028 12: seq: 14, shutdown clock=316149780 static_string_id=Command request
Attempting MCU 'ebb' reset command
Attempting MCU 'mcu' reset command
b'Got error -1 in can read: (19)No such device'
webhooks client 140732684234320: Disconnected
Restarting printer
Start printer at Tue Nov 19 19:52:34 2024 (1732017154.6 904.4)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_bus = spi1
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.2
stealthchop_threshold = 0

[stepper_y]
step_pin = PE5
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = PF0
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_bus = spi1
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.2
stealthchop_threshold = 0

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_max = 300
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_bus = spi1
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_bus = spi1
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_bus = spi1
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_bus = spi1
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 279, in _connect
    self._read_config()
  File "/home/pi/klipper/klippy/klippy.py", line 222, in _read_config
    pconfig.check_unused_options(config, error_on_unused)
  File "/home/pi/klipper/klippy/configfile.py", line 468, in check_unused_options
    raise error(
configparser.Error: Option 'spi_bus' is not valid in section 'tmc5160 stepper_x'
webhooks client 140732672031824: New connection
webhooks client 140732672031824: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Unable to issue reset command on MCU 'mcu'
Unable to issue reset command on MCU 'ebb'
webhooks client 140732672031824: Disconnected
Restarting printer
Start printer at Tue Nov 19 19:53:19 2024 (1732017199.2 949.0)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_bus = spi1
sense_resistor = 0.022
run_current = 1.2
stealthchop_threshold = 0

[stepper_y]
step_pin = PE5
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = PF0
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_bus = spi1
3spi_software_miso_pin = PC7
sense_resistor = 0.022
run_current = 1.2
stealthchop_threshold = 0

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_max = 300
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_bus = spi1
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_bus = spi1
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_bus = spi1
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_bus = spi1
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 279, in _connect
    self._read_config()
  File "/home/pi/klipper/klippy/klippy.py", line 222, in _read_config
    pconfig.check_unused_options(config, error_on_unused)
  File "/home/pi/klipper/klippy/configfile.py", line 468, in check_unused_options
    raise error(
configparser.Error: Option '3spi_software_miso_pin' is not valid in section 'tmc5160 stepper_y'
webhooks client 140732671752912: New connection
webhooks client 140732671752912: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Unable to issue reset command on MCU 'mcu'
Unable to issue reset command on MCU 'ebb'
webhooks client 140732671752912: Disconnected
Restarting printer
Start printer at Tue Nov 19 19:53:42 2024 (1732017222.0 971.8)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_bus = spi1
sense_resistor = 0.022
run_current = 1.2
stealthchop_threshold = 0

[stepper_y]
step_pin = PE5
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = PF0
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_bus = spi1
sense_resistor = 0.022
run_current = 1.2
stealthchop_threshold = 0

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_max = 300
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_bus = spi1
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_bus = spi1
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_bus = spi1
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_bus = spi1
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 279, in _connect
    self._read_config()
  File "/home/pi/klipper/klippy/klippy.py", line 222, in _read_config
    pconfig.check_unused_options(config, error_on_unused)
  File "/home/pi/klipper/klippy/configfile.py", line 468, in check_unused_options
    raise error(
configparser.Error: Option 'spi_bus' is not valid in section 'tmc5160 stepper_z'
webhooks client 140732683972240: New connection
webhooks client 140732683972240: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Unable to issue reset command on MCU 'mcu'
Unable to issue reset command on MCU 'ebb'
webhooks client 140732683972240: Disconnected
Restarting printer
Start printer at Tue Nov 19 19:54:21 2024 (1732017262.0 1011.8)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_bus = spi1
sense_resistor = 0.022
run_current = 1.2
stealthchop_threshold = 0

[stepper_y]
step_pin = PE5
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = PF0
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_bus = spi1
sense_resistor = 0.022
run_current = 1.2
stealthchop_threshold = 0

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_max = 300
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_bus = spi1
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_bus = spi1
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_bus = spi1
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_bus = spi1
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
webhooks client 140732684178896: New connection
webhooks client 140732684178896: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 284, in _connect
    cb()
  File "/home/pi/klipper/klippy/mcu.py", line 1103, in _connect
    self._send_config(None)
  File "/home/pi/klipper/klippy/mcu.py", line 1001, in _send_config
    cmdlist[i] = pin_resolver.update_command(cmd)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/pins.py", line 68, in update_command
    return re_pin.sub(pin_fixup, cmd)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/pins.py", line 63, in pin_fixup
    raise error(
pins.error: pin PA7 is reserved for spi1
=======================
Starting Klippy...
Args: ['/home/pi/klipper/klippy/klippy.py', '/home/pi/printer_data/config/printer.cfg', '-I', '/home/pi/printer_data/comms/klippy.serial', '-l', '/home/pi/printer_data/logs/klippy.log', '-a', '/home/pi/printer_data/comms/klippy.sock']
App Name: Danger-Klipper
Git version: 'v0.12.0-509-g568ae9f2'
Branch: master
Remote: origin
Tracked URL: https://github.com/DangerKlippers/danger-klipper
CPU: 4 core ?
Python: '3.11.2 (main, Sep 14 2024, 03:00:30) [GCC 12.2.0]'
Start printer at Tue Nov 19 19:57:39 2024 (1732017459.8 14.9)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = PC13
enable_pin = !PE6
microsteps = 16
rotation_distance = 40
endstop_pin = PC15
position_endstop = 0
position_max = 200
homing_speed = 50

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_bus = spi1
sense_resistor = 0.022
run_current = 1.2
stealthchop_threshold = 0

[stepper_y]
step_pin = PE5
dir_pin = PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = PF0
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_bus = spi1
sense_resistor = 0.022
run_current = 1.2
stealthchop_threshold = 0

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_max = 300
position_min = -2.5
homing_speed = 10
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_bus = spi1
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_bus = spi1
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z2]
step_pin = PB4
dir_pin = !PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_bus = spi1
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_bus = spi1
run_current = 0.6
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
webhooks client 140733524860112: New connection
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 284, in _connect
    cb()
  File "/home/pi/klipper/klippy/mcu.py", line 1103, in _connect
    self._send_config(None)
  File "/home/pi/klipper/klippy/mcu.py", line 1001, in _send_config
    cmdlist[i] = pin_resolver.update_command(cmd)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/pins.py", line 68, in update_command
    return re_pin.sub(pin_fixup, cmd)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/pins.py", line 63, in pin_fixup
    raise error(
pins.error: pin PA7 is reserved for spi1
webhooks client 140733524860112: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Attempting MCU 'ebb' reset command
Attempting MCU 'mcu' reset command
b'Got error -1 in can read: (100)Network is down'
webhooks client 140733524860112: Disconnected
Restarting printer
Start printer at Tue Nov 19 20:59:56 2024 (1732021196.6 1720.5)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = !PC13
enable_pin = !PE6
rotation_distance = 40
microsteps = 64
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_x:virtual_endstop
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 1.2
sense_resistor = 0.022
diag1_pin = !PC15
driver_sgt = 1
driver_tbl = 1
driver_toff = 3
driver_hstrt = 0
driver_hend = 1

[stepper_y]
step_pin = PE5
dir_pin = !PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 64
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_y:virtual_endstop
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 1.2
sense_resistor = 0.022
diag1_pin = !PF0
driver_sgt = 1
driver_tbl = 1
driver_toff = 3
driver_hstrt = 0
driver_hend = 1

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_min = -3
position_max = 290
homing_speed = 20
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 0.8
sense_resistor = 0.075

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075

[stepper_z2]
step_pin = PB4
dir_pin = PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = !PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
webhooks client 140733521503760: New connection
webhooks client 140733521503760: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Sending MCU 'ebb' printer configuration...
Configured MCU 'ebb' (1024 moves)
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (25.0, 25.0)    | (25.0, 25.0)
  1   | (103.8, 25.0)   | (103.8, 25.0)
  2   | (182.5, 25.0)   | (182.5, 25.0)
  3   | (261.2, 25.0)   | (261.2, 25.0)
  4   | (340.0, 25.0)   | (340.0, 25.0)
  5   | (340.0, 103.8)  | (340.0, 103.8)
  6   | (261.2, 103.8)  | (261.2, 103.8)
  7   | (182.5, 103.8)  | (182.5, 103.8)
  8   | (103.8, 103.8)  | (103.8, 103.8)
  9   | (25.0, 103.8)   | (25.0, 103.8)
  10  | (25.0, 182.5)   | (25.0, 182.5)
  11  | (103.8, 182.5)  | (103.8, 182.5)
  12  | (182.5, 182.5)  | (182.5, 182.5)
  13  | (261.2, 182.5)  | (261.2, 182.5)
  14  | (340.0, 182.5)  | (340.0, 182.5)
  15  | (340.0, 261.2)  | (340.0, 261.2)
  16  | (261.2, 261.2)  | (261.2, 261.2)
  17  | (182.5, 261.2)  | (182.5, 261.2)
  18  | (103.8, 261.2)  | (103.8, 261.2)
  19  | (25.0, 261.2)   | (25.0, 261.2)
  20  | (25.0, 340.0)   | (25.0, 340.0)
  21  | (103.8, 340.0)  | (103.8, 340.0)
  22  | (182.5, 340.0)  | (182.5, 340.0)
  23  | (261.2, 340.0)  | (261.2, 340.0)
  24  | (340.0, 340.0)  | (340.0, 340.0)
TMC stepper_x failed to init: Unable to write tmc spi 'stepper_x' register GLOBALSCALER
TMC stepper_y failed to init: Unable to write tmc spi 'stepper_y' register GLOBALSCALER
TMC stepper_z failed to init: Unable to write tmc spi 'stepper_z' register GLOBALSCALER
TMC stepper_z1 failed to init: Unable to write tmc spi 'stepper_z1' register GLOBALSCALER
TMC stepper_z2 failed to init: Unable to write tmc spi 'stepper_z2' register GLOBALSCALER
TMC stepper_z3 failed to init: Unable to write tmc spi 'stepper_z3' register GLOBALSCALER
Starting heater checks for heater_bed
Starting heater checks for extruder
autotune_tmc set stepper_x pwm_freq=2
Unhandled exception during ready callback
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 314, in _connect
    cb()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 169, in handle_ready
    self.tune_driver()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 220, in tune_driver
    self._set_pwmfreq()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 286, in _set_pwmfreq
    self._set_driver_field('pwm_freq', pwm_freq)
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 249, in _set_driver_field
    tmco.mcu_tmc.set_register(register, val, None)
  File "/home/pi/klipper/klippy/extras/tmc2130.py", line 403, in set_register
    raise self.printer.command_error(
gcode.CommandError: Unable to write tmc spi 'stepper_x' register PWMCONF
Transition to shutdown state: Internal error during ready callback: Unable to write tmc spi 'stepper_x' register PWMCONF
Dumping gcode input 0 blocks
Dumping 5 requests for client 140733521503760
Received 1720.993817: b'{"id": 140733079640016, "method": "info", "params": {"client_info": {"program": "Moonraker", "version": "v0.9.3-1-g4e00a07"}}}'
Received 1720.994359: b'{"id": 140733079649296, "method": "list_endpoints", "params": {}}'
Received 1721.245046: b'{"id": 140733079640016, "method": "info", "params": {}}'
Received 1721.495664: b'{"id": 140733079649232, "method": "info", "params": {}}'
Received 1721.747639: b'{"id": 140733079641104, "method": "info", "params": {}}'
gcode state: absolute_coord=True absolute_extrude=True base_position=[0.0, 0.0, 0.0, 0.0] last_position=[0.0, 0.0, 0.0, 0.0] homing_position=[0.0, 0.0, 0.0, 0.0] speed_factor=0.016666666666666666 extrude_factor=1.0 speed=25.0
Reactor garbage collection: (1721.267594641, 0.0, 0.0)
Dumping stepper 'stepper_x' (mcu) 1 queue_step:
queue_step 0: t=845259766 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_y' (mcu) 1 queue_step:
queue_step 0: t=845579527 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z' (mcu) 1 queue_step:
queue_step 0: t=845810436 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z1' (mcu) 1 queue_step:
queue_step 0: t=846062081 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z2' (mcu) 1 queue_step:
queue_step 0: t=846287339 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z3' (mcu) 1 queue_step:
queue_step 0: t=846534207 p=0 i=0 c=0 a=0
MCU 'mcu' shutdown: Command request
clocksync state: mcu_freq=400000000 last_clock=602880808 clock_est=(1720.830 468253628 399931575.414) min_half_rtt=0.000069 min_rtt_time=1720.863 time_avg=1720.830(0.017) clock_avg=468253628.764(6674030.961) pred_variance=117995722955.235
Dumping serial stats: bytes_write=2405 bytes_read=5484 bytes_retransmit=0 bytes_invalid=0 send_seq=196 receive_seq=196 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 1720.762259 1720.762259 6: seq: 10, get_uptime
Sent 1 1720.812620 1720.812620 6: seq: 11, get_clock
Sent 2 1720.862912 1720.862912 6: seq: 12, get_clock
Sent 3 1720.913171 1720.913171 6: seq: 13, get_clock
Sent 4 1720.963490 1720.963490 6: seq: 14, get_clock
Sent 5 1721.014518 1721.014518 6: seq: 15, get_clock
Sent 6 1721.064814 1721.064814 6: seq: 16, get_clock
Sent 7 1721.115084 1721.115084 6: seq: 17, get_clock
Sent 8 1721.165356 1721.165356 6: seq: 18, get_clock
Sent 9 1721.166466 1721.166466 6: seq: 19, get_clock
Sent 10 1721.674383 1721.674383 6: seq: 1a, get_config
Sent 11 1721.675258 1721.675258 7: seq: 1b, allocate_oids count=29
Sent 12 1721.675304 1721.675304 9: seq: 1c, config_spi oid=0 pin=PD6 cs_active_high=0
Sent 13 1721.675335 1721.675335 9: seq: 1d, config_spi oid=1 pin=PD5 cs_active_high=0
Sent 14 1721.675349 1721.675349 9: seq: 1e, config_spi oid=2 pin=PD2 cs_active_high=0
Sent 15 1721.675362 1721.675362 9: seq: 1f, config_spi oid=3 pin=PA15 cs_active_high=0
Sent 16 1721.675374 1721.675374 9: seq: 10, config_spi oid=4 pin=PA9 cs_active_high=0
Sent 17 1721.675400 1721.675400 9: seq: 11, config_spi oid=5 pin=PA10 cs_active_high=0
Sent 18 1721.675423 1721.675423 15: seq: 12, spi_set_software_bus oid=0 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 19 1721.675449 1721.675449 15: seq: 13, spi_set_software_bus oid=1 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 20 1721.675460 1721.675460 15: seq: 14, spi_set_software_bus oid=2 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 21 1721.675485 1721.675485 15: seq: 15, spi_set_software_bus oid=3 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 22 1721.675501 1721.675501 15: seq: 16, spi_set_software_bus oid=4 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 23 1721.675570 1721.675570 34: seq: 17, spi_set_software_bus oid=5 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, config_analog_in oid=18 pin=PB0, config_digital_out oid=19 pin=PF6 value=0 default_value=0 max_duration=2000000000, set_digital_out_pwm_cycle oid=19 cycle_ticks=40000000
Sent 24 1721.675970 1721.675970 60: seq: 18, config_digital_out oid=20 pin=PA1 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=20 cycle_ticks=20000000, config_digital_out oid=21 pin=PA4 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=21 cycle_ticks=20000000, config_analog_in oid=22 pin=PA7, config_neopixel oid=6 pin=PF12 data_size=150 bit_max_ticks=1600 reset_min_ticks=20000, config_stepper oid=7 step_pin=PC14 dir_pin=PC13 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=23 pin=PE6 value=1 default_value=1 max_duration=0, config_endstop oid=8 pin=PC15 pull_up=0, config_trsync oid=9
Sent 25 1721.676676 1721.676676 60: seq: 19, config_stepper oid=10 step_pin=PE5 dir_pin=PE4 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=24 pin=PE3 value=1 default_value=1 max_duration=0, config_endstop oid=11 pin=PF0 pull_up=0, config_trsync oid=12, config_stepper oid=13 step_pin=PG9 dir_pin=PG10 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=25 pin=PG13 value=1 default_value=1 max_duration=0, config_trsync oid=14, config_stepper oid=15 step_pin=PG11 dir_pin=PD7 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=26 pin=PG12 value=1 default_value=1 max_duration=0, config_stepper oid=16 step_pin=PB4 dir_pin=PB3 invert_step=4294967295 step_pulse_ticks=0
Sent 26 1721.683707 1721.683707 61: seq: 1a, config_digital_out oid=27 pin=PB5 value=1 default_value=1 max_duration=0, config_stepper oid=17 step_pin=PG15 dir_pin=PB6 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=28 pin=PG14 value=1 default_value=1 max_duration=0, finalize_config crc=924824692, query_analog_in oid=18 clock=1272000000 sample_ticks=400000 sample_count=8 rest_ticks=120000000 min_value=14024 max_value=32038 range_check_count=4, queue_digital_out oid=19 clock=886109850 on_ticks=0
Sent 27 1721.684150 1721.684150 42: seq: 1b, queue_digital_out oid=20 clock=886117679 on_ticks=0, queue_digital_out oid=21 clock=886122159 on_ticks=0, query_analog_in oid=22 clock=1288000000 sample_ticks=400000 sample_count=8 rest_ticks=120000000 min_value=0 max_value=32760 range_check_count=4, get_config
Sent 28 1721.691242 1721.691242 13: seq: 1c, spi_send oid=0 data=b'\x8b\x00\x00\x00 '
Sent 29 1721.691306 1721.691306 13: seq: 1d, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 30 1721.691704 1721.691704 13: seq: 1e, spi_send oid=0 data=b'\x8b\x00\x00\x00 '
Sent 31 1721.691723 1721.691723 13: seq: 1f, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 32 1721.692089 1721.692089 13: seq: 10, spi_send oid=0 data=b'\x8b\x00\x00\x00 '
Sent 33 1721.692108 1721.692108 13: seq: 11, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 34 1721.692527 1721.692527 13: seq: 12, spi_send oid=0 data=b'\x8b\x00\x00\x00 '
Sent 35 1721.692546 1721.692546 13: seq: 13, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 36 1721.692895 1721.692895 21: seq: 14, spi_send oid=0 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 37 1721.693285 1721.693285 13: seq: 15, spi_send oid=1 data=b'\x8b\x00\x00\x00 '
Sent 38 1721.693311 1721.693311 13: seq: 16, spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 39 1721.693729 1721.693729 21: seq: 17, spi_send oid=1 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 40 1721.694045 1721.694045 21: seq: 18, spi_send oid=1 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 41 1721.694361 1721.694361 13: seq: 19, spi_send oid=1 data=b'\x8b\x00\x00\x00 '
Sent 42 1721.694378 1721.694378 13: seq: 1a, spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 43 1721.694719 1721.694719 21: seq: 1b, spi_send oid=1 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 44 1721.695093 1721.695093 13: seq: 1c, spi_send oid=2 data=b'\x8b\x00\x00\x00C'
Sent 45 1721.695116 1721.695116 13: seq: 1d, spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 46 1721.695506 1721.695506 21: seq: 1e, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 47 1721.695814 1721.695814 21: seq: 1f, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 48 1721.696129 1721.696129 21: seq: 10, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 49 1721.696488 1721.696488 21: seq: 11, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 50 1721.696856 1721.696856 13: seq: 12, spi_send oid=3 data=b'\x8b\x00\x00\x00C'
Sent 51 1721.696874 1721.696874 13: seq: 13, spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 52 1721.697220 1721.697220 21: seq: 14, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 53 1721.697569 1721.697569 21: seq: 15, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 54 1721.697880 1721.697880 21: seq: 16, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 55 1721.698193 1721.698193 21: seq: 17, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 56 1721.698619 1721.698619 13: seq: 18, spi_send oid=4 data=b'\x8b\x00\x00\x00C'
Sent 57 1721.698640 1721.698640 13: seq: 19, spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 58 1721.698998 1721.698998 21: seq: 1a, spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 59 1721.699315 1721.699315 21: seq: 1b, spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 60 1721.699671 1721.699671 21: seq: 1c, spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 61 1721.699983 1721.699983 21: seq: 1d, spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 62 1721.700353 1721.700353 13: seq: 1e, spi_send oid=5 data=b'\x8b\x00\x00\x00C'
Sent 63 1721.700371 1721.700371 13: seq: 1f, spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 64 1721.700716 1721.700716 21: seq: 10, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 65 1721.701035 1721.701035 21: seq: 11, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 66 1721.701346 1721.701346 21: seq: 12, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 67 1721.701665 1721.701665 21: seq: 13, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 68 1721.764675 1721.764675 15: seq: 14, neopixel_update oid=6 pos=0 data=b'\xff\xff\xff\xff\xff\xff'
Sent 69 1721.764709 1721.764709 45: seq: 15, neopixel_update oid=6 pos=6 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=22 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 70 1721.764749 1721.764749 45: seq: 16, neopixel_update oid=6 pos=38 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=54 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 71 1721.764795 1721.764795 45: seq: 17, neopixel_update oid=6 pos=70 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=86 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 72 1721.765130 1721.765130 47: seq: 18, neopixel_update oid=6 pos=102 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=118 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 73 1721.770209 1721.770209 28: seq: 19, neopixel_update oid=6 pos=134 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_send oid=6
Sent 74 1721.772494 1721.772494 7: seq: 1a, stepper_get_position oid=7
Sent 75 1721.772793 1721.772793 13: seq: 1b, spi_send oid=0 data=b'j\x00\x00\x00\x00'
Sent 76 1721.772811 1721.772811 13: seq: 1c, spi_transfer oid=0 data=b'j\x00\x00\x00\x00'
Sent 77 1721.773222 1721.773222 7: seq: 1d, stepper_get_position oid=10
Sent 78 1721.773501 1721.773501 13: seq: 1e, spi_send oid=1 data=b'j\x00\x00\x00\x00'
Sent 79 1721.773515 1721.773515 13: seq: 1f, spi_transfer oid=1 data=b'j\x00\x00\x00\x00'
Sent 80 1721.773875 1721.773875 7: seq: 10, stepper_get_position oid=13
Sent 81 1721.774066 1721.774066 13: seq: 11, spi_send oid=2 data=b'j\x00\x00\x00\x00'
Sent 82 1721.774084 1721.774084 13: seq: 12, spi_transfer oid=2 data=b'j\x00\x00\x00\x00'
Sent 83 1721.774507 1721.774507 7: seq: 13, stepper_get_position oid=15
Sent 84 1721.774694 1721.774694 13: seq: 14, spi_send oid=3 data=b'j\x00\x00\x00\x00'
Sent 85 1721.774712 1721.774712 13: seq: 15, spi_transfer oid=3 data=b'j\x00\x00\x00\x00'
Sent 86 1721.775069 1721.775069 7: seq: 16, stepper_get_position oid=16
Sent 87 1721.775257 1721.775257 13: seq: 17, spi_send oid=4 data=b'j\x00\x00\x00\x00'
Sent 88 1721.775275 1721.775275 13: seq: 18, spi_transfer oid=4 data=b'j\x00\x00\x00\x00'
Sent 89 1721.775688 1721.775688 7: seq: 19, stepper_get_position oid=17
Sent 90 1721.775876 1721.775876 13: seq: 1a, spi_send oid=5 data=b'j\x00\x00\x00\x00'
Sent 91 1721.775894 1721.775894 13: seq: 1b, spi_transfer oid=5 data=b'j\x00\x00\x00\x00'
Sent 92 1721.781743 1721.781743 13: seq: 1c, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e'
Sent 93 1721.781767 1721.781767 13: seq: 1d, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 94 1721.782120 1721.782120 13: seq: 1e, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e'
Sent 95 1721.782138 1721.782138 13: seq: 1f, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 96 1721.782544 1721.782544 21: seq: 10, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 97 1721.782854 1721.782854 21: seq: 11, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 98 1721.783169 1721.783169 21: seq: 12, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 99 1721.785955 1721.785955 6: seq: 13, emergency_stop
Dumping receive queue 100 messages
Receive: 0 1720.746267 1720.745949 49: seq: 1a, identify_response offset=1640 data=b'\xb0\x80\x9f\xd9xVn\xf0\x11d\xfb\x80\x9b|\x8cG\xf31N\xdf\xe0\xd67\xc8\xfeFJ\xb0Z~B\x9a\xab\x87\xdb\xeb\x9b\xb5\x84l'
Receive: 1 1720.746635 1720.746312 49: seq: 1b, identify_response offset=1680 data=b'\xab\x9f~^\xfd\x98|xX\xff\x82\xf7\xa9\xfe\x9dM\xeeVO\xb0^t\x87\xc0\xdf\xcf\xfc\xe0\xed\r\x16\xdf\xffzG\xf7\xeec\xa2\x7f'
Receive: 2 1720.746999 1720.746680 49: seq: 1c, identify_response offset=1720 data=b"X\xaf\xd6\xb7\xff^'\xbf\xde~\xba\xfe\xf9Wt \x1f\x077\xeb\x07\x18\x94\x87\x80\xcd\xf0\x0c\xd7p\x7f\xd7x}\x83\xc9\xa7\xcd\x95\xbc"
Receive: 3 1720.747454 1720.747045 49: seq: 1d, identify_response offset=1760 data=b'\x1f<\xfbR\x8a>\x98\xce\xdaw\xf0\x80R\x8a\x08\xeb?\xe2\xfa\xcd\xe3\xf2q\x93l\x9e\xee6\xbf$W\xcb\xcd\x1a\x0f\x12\xe3\xf0\xfa\xfe'
Receive: 4 1720.747817 1720.747499 49: seq: 1e, identify_response offset=1800 data=b'~\xfd\x90\\\xfd\xfc\xf81Y\x93\\_\xf0\xed\xd0\xc3kF\xbe\xb7e\xb5N\xe1h\xd5t\x0c\x95\xf0\xb9c\x97\x84\xa8\x07f\xe8\xcb!'
Receive: 5 1720.748174 1720.747861 49: seq: 1f, identify_response offset=1840 data=b'\xc7\xe6\x02\xd8\x01"\x9bv\x87\xc7\xf5\x1d\x1ca\xf9\xf8\xf4 O\x05!\xf6~9\x9d\\\xfegz\xe6\xc5\xff\x85\xce\x15v +Po'
Receive: 6 1720.748585 1720.748221 49: seq: 10, identify_response offset=1880 data=b"\x85\xbd\xc0W\xbdk\xec\x85s\xd5[c\x0f\xa08\xf5>`o\xae\xb9\xdc`o\xa1\xb9|\x94<=\xc9\xe6\xcb 3\xc0\x1bU\xd6'"
Receive: 7 1720.748952 1720.748631 49: seq: 11, identify_response offset=1920 data=b'\xbd \x08\xa4|\xa9\x88\xa6\xe1,\x97\xa2u%\x8f\xa6\x9e\xff\x0c\xe7T\xab\x94V\xc8e<9\x86\xde\xe1\xcb\x96/\x19(\x83\xa7\x90\x8d'
Receive: 8 1720.749360 1720.748997 49: seq: 12, identify_response offset=1960 data=b'\xa6MI$\x94/)2U\xca\x11h\x953\xd9\x02\xfb\x9b\xe3\x06\x00S\n\x0cg-<\\\xe5SLj\x8c\xc9@\xb3%$J\x85'
Receive: 9 1720.749719 1720.749406 49: seq: 13, identify_response offset=2000 data=b'\xb2e)k\x8bL?\xearJ\xbe\xcb\xaaF$\xc3\xc0\x9aX\x05I\x84\xa5B\x14\xbb\x8a\xe7\xf0\x94(\x04\xbb\xbd\xa6W\xf4*\xad`'
Receive: 10 1720.750082 1720.749764 49: seq: 14, identify_response offset=2040 data=b'\xbac\x10_\x19\xe6(\x06i\x95r)\x93a\x92\xbd\xee\x0bhS\xb8\x13\xac\x81\x80\r\x07"\x10\x00k\xff\xd6!\x90`\xc89-\x81'
Receive: 11 1720.750498 1720.750128 49: seq: 15, identify_response offset=2080 data=b's\xda1`\x9e\xaa#Q-\x86\xde\xa4\x8aX\x1e\x02C%\xbd\x9ciTb\x0e\t\xd9`;^1]\xae0\xebA\xa7+\xaa \xb3'
Receive: 12 1720.750860 1720.750543 49: seq: 16, identify_response offset=2120 data=b"&m\x05L\xc9'\x8e\xd4\x99\x9eh9@\x1f\xd1\xc9:\xf2\xc7\xdf\x10Gc%\xef_\xaa\x927P\x1c\xf3\xceCBK\xb7\xfe\x8a}"
Receive: 13 1720.751225 1720.750906 49: seq: 17, identify_response offset=2160 data=b"Z\xae~$\x14\x8f=\xf0\x96\x87G=6u\xc7\x1e\xd6\xcbk5\x81i\x02'\x1e)#Q\x06\xba%\xbc\xc7\xc0\xdf\x99\xda\x95\xdeW"
Receive: 14 1720.751638 1720.751271 49: seq: 18, identify_response offset=2200 data=b'zB\x17hm\x9d\x99\xf0\x18\x81\x0bM\xa5J\xe5\xd2D\xec\x18\x90\xa1\xe8\xe9\x81\x03\x98\xa32\x8c\x9e<\xd4/\\K\xcf\xb0R\x87\x99'
Receive: 15 1720.752005 1720.751683 49: seq: 19, identify_response offset=2240 data=b"\xc7N\x9b\xba\x9e\xa9\xe4\xd1\x9b\xf9h^\xbd\xfe\xcc\xfe\x81#\x13\\\x18#\xff\xf0\x1c\x81\xb0\x00'\xbd\x00\x13\xb5;\xa8\x93\x1efJg"
Receive: 16 1720.752409 1720.752050 49: seq: 1a, identify_response offset=2280 data=b'\\!\xf7l_4\x8a[\xe8\xc81\x00\xde.\r\xdc\xcc]\xfa\x86\xb77\xd7:$pu\x07o\xf0\x14\xae\x93W\x19Z\xb8\xb2\t\x9c'
Receive: 17 1720.752775 1720.752454 49: seq: 1b, identify_response offset=2320 data=b'(\x84\x00K\x17\xf0T\xcb\xfb\x12K?\xb0\x18Q%S\t[\x9a\x03\x7f\xe1\xa8|\x04\x94__\xb0O\xdb\\:\x85\xa2\xc6\xca\xde\x1d'
Receive: 18 1720.753137 1720.752820 49: seq: 1c, identify_response offset=2360 data=b"j\\\x02m\x06\xadv[\xd6\xaf\x84\xd4?\x81'\xa5\x8c\xc4Ao\x95\xa1\x0e?C\xb8\x13h\x1fr\x02\xe3\x9d;QT\r\xe1Y\xaa"
Receive: 19 1720.753542 1720.753183 49: seq: 1d, identify_response offset=2400 data=b'r\xca\xa9\nOj\x87c\x99N\x8c\x835m\xbd\x03\x9b8\xc0\xd1S\x94m\x0b\x80\x10N\t\xba\xe6\x18\x07\xf0\xbd\xfe\xc0\x95P\xe8\xf9'
Receive: 20 1720.753902 1720.753586 49: seq: 1e, identify_response offset=2440 data=b'`\xae-l\x83\xaa\x06kBg\xc1\x8f\x1a\x1bCp\xa4\x1d\xf6Z\x94%\xe0\xa4\x0c\xf8\rj\xb1\x84\xfc\xecJ\xa3\xa1o\xac\xc0o\x15'
Receive: 21 1720.754271 1720.753949 49: seq: 1f, identify_response offset=2480 data=b'\x1bpt\xbaCy\x00\xa4(\x0e\xfdA\x8fi\x7f\x00\xf17\xba\xde*\xbf\xb9\x003\x19\x1ad\xacr?\xbflT\xac\xe8\xea\x9amS'
Receive: 22 1720.754634 1720.754318 49: seq: 10, identify_response offset=2520 data=b')\x1dI\x86\x85\xaeG\xd7\xa4Pe@(+\xccT\x97y\x94\xfa\xc0\x95\x00\x11\x05\x97\x81\xfa\xa9\x12}\x830\x11v\xc4\xb2\xbe\xb4o'
Receive: 23 1720.755001 1720.754680 49: seq: 11, identify_response offset=2560 data=b'\xfct"?[\xc1\xe3\xbf\xaf>\x03\x0f\x08\x8a9}\xd5p\xc6\x85\x9d\x80\x8b"c\x07\x88+\xeaV\xfa\'`M\xc12\xa1\xae\xd2V'
Receive: 24 1720.755409 1720.755047 49: seq: 12, identify_response offset=2600 data=b'\x97)\xfc\xd5U\t\x11\xf3\x05\x18\xa4\xcf\xa5\x0e\x84FR8\x80\xfc\\fB\xab\xfa\x88\x96S-S`\x81\t\xc3\x1c]q\x06\xd38'
Receive: 25 1720.755775 1720.755454 49: seq: 13, identify_response offset=2640 data=b'\x15\x1a\xa8-\xbd_\x8aZ\xa6-\xa6\x8e\xe04\x88E\xfd\x925b\xcdZE`\xb2u\x84\xee\x90\x99\x8e\xea\xba\x98\x9a\x00\xdf\x04\xde<'
Receive: 26 1720.756138 1720.755821 49: seq: 14, identify_response offset=2680 data=b'\x8ad\xd6S\x9dXfE\xea\xc4\x91\xbc,\xe8\xc4\xf1,B\x1c\x00\x9c\xca"\x03\xe5\xc0\xfa\xc9\xcd\xa7\'vs\xff\xd3\x0bb-\xd0F'
Receive: 27 1720.756542 1720.756185 49: seq: 15, identify_response offset=2720 data=b'\x03\x1e\xce\xe9[\xa1\xae\xea\x0c\n\x14\xd23\x93S/\xe0s\x0c\x8c\xfa\x9b\xdf`I\xea\xd4l\x98\x9c\xa1\x17\xce9f2S\xf1d\xaa'
Receive: 28 1720.756903 1720.756588 49: seq: 16, identify_response offset=2760 data=b'\xd5\xf7\xb8\xea\x02\x1e#j\x00S(\x0e\xe1\x1e\x98\xb8\xe8ml\x9f \xe7\x81\xf9\xa4\x07\x19PUH\xe5+E\xd6VqL_\xa6|'
Receive: 29 1720.757266 1720.756947 49: seq: 17, identify_response offset=2800 data=b'\xfaA\xdcH\xccc\x1cO!\x8b\xf5\xb2|\xf4-Q\xd5\x12\xd5H\x9c\xfd\xd1\x14uE[\x80\x85\x9b\x02\xf59\x06a]\x11\x1e\xb0\xde'
Receive: 30 1720.757634 1720.757312 49: seq: 18, identify_response offset=2840 data=b'\xd7\x07\x88t\xc7\x9b\xb8\x05g\\\x1f\xd9Jl\xa2o\xc7\xa9\xe4\xc8\xbeV\xa6g\xab\x9d\x0e\xad){\xd2\xcb\xf2\x02i\x11?Z\xa5\xb0'
Receive: 31 1720.758001 1720.757680 49: seq: 19, identify_response offset=2880 data=b'1\xe0!\xbd,B[\x1d=\xaaS9\x02\xe8\x1a\xa8\xab\x90\xd0\xa9l*\x9d\xe8G{\x9fe\xb2|\x8b\xe2\xe1{\x14\x8e\xe9~\x1d8'
Receive: 32 1720.758409 1720.758046 49: seq: 1a, identify_response offset=2920 data=b'\xc7tN\x8e\x0b(\x0f\x1e\xe3\xee\xe3X`\xa6\xad2>\xaa\x8d\x9ecbt\xd7\x0cJX\xb6\\\xa3\x8aL\xfa\tJ\xa5\x0e\x97\xe5s'
Receive: 33 1720.758775 1720.758455 49: seq: 1b, identify_response offset=2960 data=b'/\xa3xN\x85C\xc0K\x10\r\x12\x9df\x842\x17Y^\xb1\x01RW:O\xeb0:U\xff8\xbaI\xb7\xc6\xe5^\xa9\x17\r\x0b'
Receive: 34 1720.759138 1720.758821 49: seq: 1c, identify_response offset=3000 data=b'\x0e\x7fi\x02\xbeD\xafm\'q\xe2" ,+\xac\xe9\x8a\xfe\xa0\xfe\x88\xdf\x95\xef\xf8\xb6\x880\xaa0P\x15\xba@\xbe\xf1(\xf6\x0c'
Receive: 35 1720.759541 1720.759184 49: seq: 1d, identify_response offset=3040 data=b'\xef\xf4dH\xe8)\xda\xab\x8b\x8em\xe1\xe1X\x06,9\x90\xbc\x0b\xb7\x98`\x8d\r\x02\x81\xae\t\x9c\xae\xba;\xb6\x87\xb9\x87\xbe\x8a0'
Receive: 36 1720.759901 1720.759587 49: seq: 1e, identify_response offset=3080 data=b'\xfa\x10\xd9\x0fB\x05\xbe\xb3\xd4\x7f\xb1\x80\xe0\xf72\xbd\xf0\xfc\x8b\xe9y\x10.\xcewi\x10N\x830\\\x84\x93/\xff\x03u\x9f\x0c\xd8'
Receive: 37 1720.760135 1720.759946 9: seq: 1f, identify_response offset=3120 data=b''
Receive: 38 1720.762153 1720.762010 14: seq: 10, canbus_id canbus_uuid=b'\x8d`\xb0\xd4\xc7p' canbus_nodeid=4
Receive: 39 1720.762461 1720.762259 12: seq: 11, uptime high=0 clock=441220984
Receive: 40 1720.812765 1720.812620 11: seq: 12, clock clock=461342511
Receive: 41 1720.863050 1720.862912 11: seq: 13, clock clock=481456495
Receive: 42 1720.913367 1720.913171 11: seq: 14, clock clock=501562111
Receive: 43 1720.963634 1720.963490 11: seq: 15, clock clock=521690305
Receive: 44 1721.014663 1721.014518 11: seq: 16, clock clock=542101535
Receive: 45 1721.064957 1721.064814 11: seq: 17, clock clock=562219307
Receive: 46 1721.115231 1721.115084 11: seq: 18, clock clock=582329337
Receive: 47 1721.165500 1721.165356 11: seq: 19, clock clock=602436675
Receive: 48 1721.166621 1721.166466 11: seq: 1a, clock clock=602880808
Receive: 49 1721.674541 1721.674383 10: seq: 1b, config is_config=0 crc=0 is_shutdown=0 move_count=0
Receive: 50 1721.685152 1721.684150 15: seq: 1c, config is_config=1 crc=924824692 is_shutdown=0 move_count=1024
Receive: 51 1721.691621 1721.691306 13: seq: 1e, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 52 1721.691982 1721.691723 13: seq: 10, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 53 1721.692444 1721.692108 13: seq: 12, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 54 1721.692808 1721.692546 13: seq: 14, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 55 1721.693132 1721.692895 13: seq: 15, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 56 1721.693637 1721.693311 13: seq: 17, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 57 1721.693961 1721.693729 13: seq: 18, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 58 1721.694280 1721.694045 13: seq: 19, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 59 1721.694637 1721.694378 13: seq: 1b, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 60 1721.694958 1721.694719 13: seq: 1c, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 61 1721.695445 1721.695116 13: seq: 1e, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 62 1721.695735 1721.695506 13: seq: 1f, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 63 1721.696049 1721.695814 13: seq: 10, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 64 1721.696444 1721.696129 13: seq: 11, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 65 1721.696725 1721.696488 13: seq: 12, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 66 1721.697135 1721.696874 13: seq: 14, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 67 1721.697490 1721.697220 13: seq: 15, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 68 1721.697801 1721.697569 13: seq: 16, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 69 1721.698115 1721.697880 13: seq: 17, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 70 1721.698490 1721.698193 13: seq: 18, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 71 1721.698900 1721.698640 13: seq: 1a, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 72 1721.699234 1721.698998 13: seq: 1b, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 73 1721.699592 1721.699315 13: seq: 1c, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 74 1721.699904 1721.699671 13: seq: 1d, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 75 1721.700223 1721.699983 13: seq: 1e, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 76 1721.700631 1721.700371 13: seq: 10, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 77 1721.700955 1721.700716 13: seq: 11, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 78 1721.701270 1721.701035 13: seq: 12, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 79 1721.701587 1721.701346 13: seq: 13, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 80 1721.701899 1721.701665 13: seq: 14, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 81 1721.772043 1721.770209 8: seq: 1a, neopixel_result oid=6 success=1
Receive: 82 1721.772602 1721.772494 8: seq: 1b, stepper_position oid=7 pos=0
Receive: 83 1721.773069 1721.772811 13: seq: 1d, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 84 1721.773401 1721.773222 8: seq: 1e, stepper_position oid=10 pos=0
Receive: 85 1721.773776 1721.773515 13: seq: 10, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 86 1721.773978 1721.773875 8: seq: 11, stepper_position oid=13 pos=0
Receive: 87 1721.774400 1721.774084 13: seq: 13, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 88 1721.774608 1721.774507 8: seq: 14, stepper_position oid=15 pos=0
Receive: 89 1721.774976 1721.774712 13: seq: 16, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 90 1721.775171 1721.775069 8: seq: 17, stepper_position oid=16 pos=0
Receive: 91 1721.775624 1721.775275 13: seq: 19, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 92 1721.775788 1721.775688 8: seq: 1a, stepper_position oid=17 pos=0
Receive: 93 1721.776157 1721.775894 13: seq: 1c, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 94 1721.782024 1721.781767 13: seq: 1e, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 95 1721.782449 1721.782138 13: seq: 10, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 96 1721.782774 1721.782544 13: seq: 11, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 97 1721.783090 1721.782854 13: seq: 12, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 98 1721.783449 1721.783169 13: seq: 13, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 99 1721.786104 1721.785955 12: seq: 14, shutdown clock=850678384 static_string_id=Command request
MCU 'ebb' shutdown: Command request
clocksync state: mcu_freq=12000000 last_clock=26730606 clock_est=(1721.336 22670238 12000680.445) min_half_rtt=0.000081 min_rtt_time=1721.471 time_avg=1721.336(0.017) clock_avg=22670238.002(202487.008) pred_variance=106158917.546 clock_adj=(-0.212 12002582.000)
Dumping serial stats: bytes_write=1291 bytes_read=4830 bytes_retransmit=0 bytes_invalid=0 send_seq=132 receive_seq=132 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 1721.194860 1721.194860 9: seq: 10, identify offset=640 count=40
Sent 1 1721.195982 1721.195982 9: seq: 11, identify offset=680 count=40
Sent 2 1721.197106 1721.197106 9: seq: 12, identify offset=720 count=40
Sent 3 1721.198235 1721.198235 9: seq: 13, identify offset=760 count=40
Sent 4 1721.199426 1721.199426 9: seq: 14, identify offset=800 count=40
Sent 5 1721.200552 1721.200552 9: seq: 15, identify offset=840 count=40
Sent 6 1721.201680 1721.201680 9: seq: 16, identify offset=880 count=40
Sent 7 1721.202814 1721.202814 9: seq: 17, identify offset=920 count=40
Sent 8 1721.203937 1721.203937 9: seq: 18, identify offset=960 count=40
Sent 9 1721.205071 1721.205071 9: seq: 19, identify offset=1000 count=40
Sent 10 1721.206191 1721.206191 9: seq: 1a, identify offset=1040 count=40
Sent 11 1721.207321 1721.207321 9: seq: 1b, identify offset=1080 count=40
Sent 12 1721.208470 1721.208470 9: seq: 1c, identify offset=1120 count=40
Sent 13 1721.209590 1721.209590 9: seq: 1d, identify offset=1160 count=40
Sent 14 1721.210719 1721.210719 9: seq: 1e, identify offset=1200 count=40
Sent 15 1721.211845 1721.211845 9: seq: 1f, identify offset=1240 count=40
Sent 16 1721.212990 1721.212990 9: seq: 10, identify offset=1280 count=40
Sent 17 1721.214117 1721.214117 9: seq: 11, identify offset=1320 count=40
Sent 18 1721.215238 1721.215238 9: seq: 12, identify offset=1360 count=40
Sent 19 1721.216427 1721.216427 9: seq: 13, identify offset=1400 count=40
Sent 20 1721.217551 1721.217551 9: seq: 14, identify offset=1440 count=40
Sent 21 1721.218684 1721.218684 9: seq: 15, identify offset=1480 count=40
Sent 22 1721.219814 1721.219814 9: seq: 16, identify offset=1520 count=40
Sent 23 1721.220930 1721.220930 9: seq: 17, identify offset=1560 count=40
Sent 24 1721.222067 1721.222067 9: seq: 18, identify offset=1600 count=40
Sent 25 1721.223200 1721.223200 9: seq: 19, identify offset=1640 count=40
Sent 26 1721.224322 1721.224322 9: seq: 1a, identify offset=1680 count=40
Sent 27 1721.225471 1721.225471 9: seq: 1b, identify offset=1720 count=40
Sent 28 1721.226593 1721.226593 9: seq: 1c, identify offset=1760 count=40
Sent 29 1721.227722 1721.227722 9: seq: 1d, identify offset=1800 count=40
Sent 30 1721.228842 1721.228842 9: seq: 1e, identify offset=1840 count=40
Sent 31 1721.229961 1721.229961 9: seq: 1f, identify offset=1880 count=40
Sent 32 1721.231095 1721.231095 9: seq: 10, identify offset=1920 count=40
Sent 33 1721.232217 1721.232217 9: seq: 11, identify offset=1960 count=40
Sent 34 1721.233342 1721.233342 9: seq: 12, identify offset=2000 count=40
Sent 35 1721.234471 1721.234471 9: seq: 13, identify offset=2040 count=40
Sent 36 1721.235601 1721.235601 9: seq: 14, identify offset=2080 count=40
Sent 37 1721.236723 1721.236723 9: seq: 15, identify offset=2120 count=40
Sent 38 1721.237848 1721.237848 9: seq: 16, identify offset=2160 count=40
Sent 39 1721.238976 1721.238976 9: seq: 17, identify offset=2200 count=40
Sent 40 1721.240098 1721.240098 9: seq: 18, identify offset=2240 count=40
Sent 41 1721.241216 1721.241216 9: seq: 19, identify offset=2280 count=40
Sent 42 1721.242341 1721.242341 9: seq: 1a, identify offset=2320 count=40
Sent 43 1721.243471 1721.243471 9: seq: 1b, identify offset=2360 count=40
Sent 44 1721.244598 1721.244598 9: seq: 1c, identify offset=2400 count=40
Sent 45 1721.245731 1721.245731 9: seq: 1d, identify offset=2440 count=40
Sent 46 1721.246850 1721.246850 9: seq: 1e, identify offset=2480 count=40
Sent 47 1721.247971 1721.247971 9: seq: 1f, identify offset=2520 count=40
Sent 48 1721.249093 1721.249093 9: seq: 10, identify offset=2560 count=40
Sent 49 1721.250218 1721.250218 9: seq: 11, identify offset=2600 count=40
Sent 50 1721.251335 1721.251335 9: seq: 12, identify offset=2640 count=40
Sent 51 1721.252472 1721.252472 9: seq: 13, identify offset=2680 count=40
Sent 52 1721.253599 1721.253599 9: seq: 14, identify offset=2720 count=40
Sent 53 1721.254720 1721.254720 9: seq: 15, identify offset=2760 count=40
Sent 54 1721.255827 1721.255827 9: seq: 16, identify offset=2800 count=40
Sent 55 1721.256944 1721.256944 9: seq: 17, identify offset=2840 count=40
Sent 56 1721.258073 1721.258073 9: seq: 18, identify offset=2880 count=40
Sent 57 1721.259189 1721.259189 9: seq: 19, identify offset=2920 count=40
Sent 58 1721.260296 1721.260296 9: seq: 1a, identify offset=2960 count=40
Sent 59 1721.261471 1721.261471 9: seq: 1b, identify offset=3000 count=40
Sent 60 1721.262599 1721.262599 9: seq: 1c, identify offset=3040 count=40
Sent 61 1721.263731 1721.263731 9: seq: 1d, identify offset=3080 count=40
Sent 62 1721.264848 1721.264848 9: seq: 1e, identify offset=3120 count=40
Sent 63 1721.265485 1721.265485 9: seq: 1f, identify offset=3125 count=40
Sent 64 1721.267679 1721.267588 6: seq: 10, get_canbus_id
Sent 65 1721.268257 1721.268166 6: seq: 11, get_uptime
Sent 66 1721.318817 1721.318726 6: seq: 12, get_clock
Sent 67 1721.369391 1721.369300 6: seq: 13, get_clock
Sent 68 1721.419986 1721.419895 6: seq: 14, get_clock
Sent 69 1721.470602 1721.470511 6: seq: 15, get_clock
Sent 70 1721.521945 1721.521854 6: seq: 16, get_clock
Sent 71 1721.572531 1721.572440 6: seq: 17, get_clock
Sent 72 1721.623083 1721.622992 6: seq: 18, get_clock
Sent 73 1721.673648 1721.673557 6: seq: 19, get_clock
Sent 74 1721.674555 1721.674464 6: seq: 1a, get_clock
Sent 75 1721.685645 1721.685554 6: seq: 1b, get_config
Sent 76 1721.686499 1721.686400 7: seq: 1c, allocate_oids count=13
Sent 77 1721.687609 1721.686725 64: seq: 1d, config_spi oid=0 pin=gpio1 cs_active_high=0, config_adxl345 oid=1 spi_oid=0, config_spi oid=5 pin=gpio9 cs_active_high=0, spi_set_software_bus oid=0 miso_pin=gpio3 mosi_pin=gpio0 sclk_pin=gpio2 mode=3 rate=5000000, config_endstop oid=2 pin=gpio24 pull_up=0, config_trsync oid=3, config_tmcuart oid=4 rx_pin=gpio20 pull_up=0 tx_pin=gpio20 bit_time=300, config_digital_out oid=8 pin=gpio13 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=8 cycle_ticks=120000, config_digital_out oid=9 pin=gpio14 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=9 cycle_ticks=120000, config_analog_in oid=10 pin=gpio28
Sent 78 1721.688489 1721.686725 63: seq: 1e, spi_set_software_bus oid=5 miso_pin=gpio11 mosi_pin=gpio8 sclk_pin=gpio10 mode=1 rate=4000000, config_thermocouple oid=6 spi_oid=5 thermocouple_type=MAX31865, config_digital_out oid=11 pin=gpio7 value=0 default_value=0 max_duration=60000000, set_digital_out_pwm_cycle oid=11 cycle_ticks=1200000, config_stepper oid=7 step_pin=gpio18 dir_pin=gpio19 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=12 pin=gpio17 value=1 default_value=1 max_duration=0, finalize_config crc=3237245062, spi_send oid=5 data=b'\x80\xc3', queue_digital_out oid=8 clock=29268997 on_ticks=0
Sent 79 1721.689258 1721.686725 55: seq: 1f, queue_digital_out oid=9 clock=29269322 on_ticks=0, query_analog_in oid=10 clock=39750507 sample_ticks=12000 sample_count=8 rest_ticks=3600000 min_value=0 max_value=32760 range_check_count=4, query_thermocouple oid=6 clock=39270507 rest_ticks=3600000 min_value=15240 max_value=32318 max_invalid_count=3, queue_digital_out oid=11 clock=29269950 on_ticks=0, get_config
Sent 80 1721.702269 1721.702067 14: seq: 10, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 81 1721.706498 1721.706209 19: seq: 11, tmcuart_send oid=4 write=b'\xea\x03\x080\x80\x00\n\x08\xb8\x87' read=0
Sent 82 1721.709242 1721.709040 14: seq: 12, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 83 1721.713449 1721.713160 19: seq: 13, tmcuart_send oid=4 write=b'\xea\x03h0\x80\x00\x12\x08 \xda' read=0
Sent 84 1721.716169 1721.715967 14: seq: 14, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 85 1721.720793 1721.720504 19: seq: 15, tmcuart_send oid=4 write=b'\xea\x03\x88=\x9a\x06\x02h*\xbf' read=0
Sent 86 1721.723527 1721.723325 14: seq: 16, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 87 1721.728160 1721.727871 19: seq: 17, tmcuart_send oid=4 write=b'\xea\x03\x082\x80\x10\x9ah"\x9c' read=0
Sent 88 1721.730897 1721.730695 14: seq: 18, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 89 1721.735497 1721.735208 19: seq: 19, tmcuart_send oid=4 write=b'\xea\x03h2\x80\x1e\xfa\xef?\xdf' read=0
Sent 90 1721.738232 1721.738030 14: seq: 1a, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 91 1721.742844 1721.742555 19: seq: 1b, tmcuart_send oid=4 write=b'\xea\x03\x08>\xe4\x1ar\x88\xa4\x85' read=0
Sent 92 1721.745569 1721.745367 14: seq: 1c, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 93 1721.750175 1721.749886 19: seq: 1d, tmcuart_send oid=4 write=b'\xea\x03(2\x80\x00\x02\x88"\xf3' read=0
Sent 94 1721.752912 1721.752710 14: seq: 1e, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 95 1721.757519 1721.757230 19: seq: 1f, tmcuart_send oid=4 write=b'\xea\x03\x088\x80\x00\x02\x08 \xba' read=0
Sent 96 1721.760253 1721.760051 14: seq: 10, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 97 1721.776405 1721.776306 7: seq: 11, stepper_get_position oid=7
Sent 98 1721.777078 1721.776876 14: seq: 12, tmcuart_send oid=4 write=b'\xea\x03H-\xd5' read=10
Sent 99 1721.786132 1721.786041 6: seq: 13, emergency_stop
Dumping receive queue 100 messages
Receive: 0 1721.192550 1721.191472 49: seq: 1e, identify_response offset=520 data=b'\xf3!G\xddz>#9,\x81\xc8\x9cd3\xc7[\xf7\xbc?b7\xe5+\xf8\x91\xc3\xa1\xadf7\x86v\x04+\x07\x86\x94:\x8a\x81'
Receive: 1 1721.193684 1721.192609 49: seq: 1f, identify_response offset=560 data=b"\xdd\x101\x86\x8eA<\xf1|'\xb6;\xc5a\xb2\xf2\xe1\xc1\x91\xb65?\xe2\xa4v/\x1f^;N\xb2\x89''\x8d\xd3\x1f;\xac\xb7"
Receive: 2 1721.194812 1721.193736 49: seq: 10, identify_response offset=600 data=b'\xf2\xbd\xdc~\xff\xe6\xef\x10\xe5\x92dr\x16U\x8bfTJk&\x89\xb3\x1e9,\xd7.r\x94\xf2\x88\xb51)*;|m\xca|'
Receive: 3 1721.195935 1721.194860 49: seq: 11, identify_response offset=640 data=b'j\xcd\xac\xdcWyh\xe0\xd9\xda\xbb\x81c|\xb7\xa4\xc3T[\x13\xabDo\x86\x14\xeb\x14\xb0\x83\x1ak\xc9=\xa4\xb1cl\xd8\xf1~'
Receive: 4 1721.197058 1721.195982 49: seq: 12, identify_response offset=680 data=b'\xdfB(\xe9\x8eJ\xd4\xdfvB]8\xd7\x1e\xf6\xe5X\xf4\xd66\xfa\x97\xfc \x0e\xb1\xc1.\xa2\xe5\rb\xcf\x89\xb5\xc8a\xe9Q\x1e'
Receive: 5 1721.198187 1721.197106 49: seq: 13, identify_response offset=720 data=b'N\xac\x10Y+\xfe0\x82=\xb7\x90\xd9\xd6f\x06X\xb6\xca\x96I?\x91\x05\xc3\xc0\xcc\xda\xbe\xe2=\xde\x07y\xa5\xa7x\x15\x1b\x80\xe7'
Receive: 6 1721.199378 1721.198235 49: seq: 14, identify_response offset=760 data=b'^\x0c\xfc\x00\x02\x8d\x96\x00\x81\x14\xbe\xe7\xfd\x967\xe5k\x8e\x81\r\x88\x80%\nr\xf9\xae\xdd\xf3\x83\xb4#\x8b}\xe7;\x80\x9e\xdb\xa4'
Receive: 7 1721.200504 1721.199426 49: seq: 15, identify_response offset=800 data=b'3MK@\xba\x0b\xac\xc4\xae\x95q/\xb6[\xde#\x13\xb2\xa5\xe0\x10g\xeer\x95\xf4\x80\xa6b\xe0V@18\xe7F@:\x01\x97'
Receive: 8 1721.201633 1721.200552 49: seq: 16, identify_response offset=840 data=b'\xceI\x86\xac\xecK\n\x89og[\xf0\xe6\xb2h\x1eF\x99\x8b\n\xe4\x17\xeb%$\x1d\xe4\xaeg\xea\x18x\x08M\xc7\x0e\x15\x03\xae\xf9'
Receive: 9 1721.202766 1721.201680 49: seq: 17, identify_response offset=880 data=b'v\xa6\xc3u.\x81\x84\x1c\x8c\xd2f#\x1c\x93\xe8\x17Q\x00\x86Za^\xae\xd4`\xa0!\x8cT\xa4\x1fm"\\\xb9\x17\xc3\xb5\xbc\xe6'
Receive: 10 1721.203890 1721.202814 49: seq: 18, identify_response offset=920 data=b':\x03\xae\t\x10\xe3\x10\x90\xedG9\x98\xaa\x18\x05\xfc\xe3/\xaa\x8eK\xb2\xe34r\xa7d\xbb\x19\x9e\x8b\x9e\xfb\xc7\xc1\xf7\xac\xbfU\x85'
Receive: 11 1721.205024 1721.203937 49: seq: 19, identify_response offset=960 data=b'\x19\x1e\xc3\xb4H\t\x93\xb6\x93\x90\x8f\x14\xf9\xa8x3\x88\r\xd4\x1f\x9b\r\\\xa8\x1c\xd6\xa6e \xc4d\x00\xd8\x1b\xbfb2\xc3\x0e.'
Receive: 12 1721.206144 1721.205071 49: seq: 1a, identify_response offset=1000 data=b'\xdc\xb5u\xa5&\xdf6\x02\xc6\xfb\xbe\x9d\x18\xc5\n\xd4h\xe2\xbb\x12\xba5\x87\xcc\xdf\x19\xbb\xca\x99\n\x15V\xbb\xd1\xe3%\x03\xc3&\x9b'
Receive: 13 1721.207275 1721.206191 49: seq: 1b, identify_response offset=1040 data=b'\n\xaa\x9d\x89\xc1\xc2u\xeb\x00N\xd9\xe0\xe8\x82\xdfj\xe5\x00&\xe5O\x80h\x11\xc2\x85\x88\x16K\x0b\x10VH\xff\xa7\xb7\xed\x9d\xb7\xe9'
Receive: 14 1721.208423 1721.207321 49: seq: 1c, identify_response offset=1080 data=b'\xf4\xe3fP\x1dn\xe1\xe0\x8e\x97\x8f^]\x95D\x86\x86\xa0\xac\xb2\x14t-\x04\xb4\xf0~/Pg\x06\xc1\xa4\x10\t\x85\xba\x98@\x1d'
Receive: 15 1721.209544 1721.208470 49: seq: 1d, identify_response offset=1120 data=b'\x88\xd4"\t\xaa\x8e\x10\xcd<\x80S\xf6\x16\x04\x89\x95eiZ`\x04\xb8\x96\xcb)XH\xd3\xd2\x92\x1c\x94 !\x9e4\x80;@d'
Receive: 16 1721.210672 1721.209590 49: seq: 1e, identify_response offset=1160 data=b'\r\xef \x87\x7f\xa5\x96\xc7\x88\x04)[lHGK\xcb\x10a\x0e\x84\x04\x00\xd6d\x8f\xa5\xb5\xaf\\\xe2\xd9\xca\xc4Th\x02\xe9\x14\xa2'
Receive: 17 1721.211798 1721.210719 49: seq: 1f, identify_response offset=1200 data=b'l\xe5Y\xca\x82t4\xf2c5\xb5\xbd\xa3\xf5k\xa9\xc8\x1e\tJ)\x0bn\xcd\x13bMj\x801w3W;\xf2\x9e\xd2\x95\t;'
Receive: 18 1721.212942 1721.211845 49: seq: 10, identify_response offset=1240 data=b';\x15\xc2\xe0W@B\x80\x08\xa0\xaa8\x88\xf6\x91\x1e\xaa\xf3\x14\xf4\xc3\xfb\xe0\x00X\x10\xc2\xf8<\x04\x0f\x02\xa0;9\x00R\x1c\xa8\xd2'
Receive: 19 1721.214070 1721.212990 49: seq: 11, identify_response offset=1280 data=b'\xcf\xe2\x9c\xd4\x81phA\x87\x1a\xfe\xa2I\x80\xea\xc4\x86T\xd1S\x02\x8b\x08\xc8\xc8\xe3OjJ\x90\n\x92\xe2\xca;|\xe2m\x9c\x93'
Receive: 20 1721.215192 1721.214117 49: seq: 12, identify_response offset=1320 data=b'\xba\xe8\xb6\x9c\x13\x9c\x17\x1f\xbd\xdd$5\xbb\x934\x83K:\xcd\xec\xdb\x8a{I\x02\x8e,\xdc\x91c9f/dk2\xcb\xbe\x95\xe2'
Receive: 21 1721.216379 1721.215238 49: seq: 13, identify_response offset=1360 data=b'X\xddw\x80t\xa1\xb9\xf9:\x1f\t\x98\x0c\x95\x94\xdfJ\xc3\xd9j\nu<\x0bgK\x84R\xc5c\x8e\xa9\x1er\x82\xc0R\xdc\xfaM'
Receive: 22 1721.217504 1721.216427 49: seq: 14, identify_response offset=1400 data=b'\xb4v\x00\xaa\xe6@\xeb\xa5\x84\xc4l~\xf2\xb2\x15\x9c\x80\x8bu\xe97\x11\xb5\xca\x9f6\xbdSr\x02\x8d\xe8\xd3(C\xf4\xe9#\x1e\x00'
Receive: 23 1721.218637 1721.217551 49: seq: 15, identify_response offset=1440 data=b"&\xb1rp\x83_R\xf2\xae\xedu\xf1B\xde\xab\xe6\xd6H\xf8K'@%~\xf5\xb4\xb6\x98\x02.| \x10\n\xa5\xcac~\xec\xf9"
Receive: 24 1721.219768 1721.218684 49: seq: 16, identify_response offset=1480 data=b'@\xfa\xc5\x94\xa9\xd8\xf78\x7fw\x91_\x9f\xff\x8a%\xc1\x1aT\xf4\xc3\xe7\xbb\xfc\xd3\xd5\xcd\x1d>\x1e\xe7\x05vZ:\xd1\xce\xdf\xe2\xdf'
Receive: 25 1721.220882 1721.219814 49: seq: 17, identify_response offset=1520 data=b'h\x16l?\xe8\xedTmg\xe1v\xa9\xb7Wj{\x1dnWz\x1bjZ\xf5\x93\x84\x00\xdc\x00,\x08`\x19\x02l4@L\xf4\xc5'
Receive: 26 1721.222022 1721.220930 49: seq: 18, identify_response offset=1560 data=b'\x07\x04n\r\x00Q\x18\x1f\x90\xb83\x00Dc\x1c\x12\x19\x19\t\x10\x8d!\x89\x91\x91\x00Q\x18\x12\x18\x19\tDZ\x80!\x81\x91\x95\x01'
Receive: 27 1721.223154 1721.222067 49: seq: 19, identify_response offset=1600 data=b'\x11\x18\x85\x04FV\x06D`t@\xa0\x95\x01Q\x18\x1f\x90he@4\xc6\x13"\xc1e\x03%\'\x04\x15\x02MU\xbdT\x7f\x17!'
Receive: 28 1721.224275 1721.223200 49: seq: 1a, identify_response offset=1640 data=b"P\x19(lM?\xab\x10\xae\n\xf4\xa6\xef\x0c/\xb5\xc2\xd7\xbcG\xf43\x0f\xc1\x1e\x02C\xca\xe8'\r\xe1\xca\xc0\x1a\x88\x8b\x18\xd9\xb8"
Receive: 29 1721.225424 1721.224322 49: seq: 1b, identify_response offset=1680 data=b'8\xbfA\xd0\x7f\xde^\xfe\xfc\xf9\xf2\xe6\xe2\xdf\xf8\x14S\xff`\xeb\xe3O\x17\x1f\xd4\x0e>\xbf\xcc\xea\xd5\xcd\xd5\xfd\xd5\xf9G\x85\xdc\n'
Receive: 30 1721.226545 1721.225471 49: seq: 1c, identify_response offset=1720 data=b'\x18\x10]_|\x86i\xdf\xc5s\xd5`\xfc\xf4\xcb59W\x8c\xd5\xd4\xed\xe5\xc5\xe5\xd5\xbf.\xf3_\xaen\xde\xfd\xf4\x0bF\xa9\x18\x17'
Receive: 31 1721.227675 1721.226593 49: seq: 1d, identify_response offset=1760 data=b'\xef.oaQ\x91\tt\x1c\xf8\xd4\xdd\xfd\xf9\xfd]~\xf7\xf9\xfa\xee\xe7\xfc\x87\xf3\xbbKD\xb6\xc0\xe5\xcbO\x9f.o\xf3\x1f~\xba'
Receive: 32 1721.228795 1721.227722 49: seq: 1e, identify_response offset=1800 data=b'\xff1\xbf|\xf7\x1e\xd6\xa3/\xf8\xc8\x1a\xe1\xd9\xa7\x1a\x13\xaa\xad\xa9\x1f\x1cz\x88\xca\xa6\x17\x0cj\x94\x1e\x1b\xa8\xb6\x98F\x95z$j'
Receive: 33 1721.229915 1721.228842 49: seq: 1f, identify_response offset=1840 data=b'\xdf\xa3\x07\x04:YF\xa3\xadz\x8ai\xb7Y\xaa\x11\xaahE\xa3\x07\xf5\xac\xd5V\x1f\xd1%h\xdf\x11\xdd\x82\x96\x1c\xd15h\xb3\x11'
Receive: 34 1721.231047 1721.229961 49: seq: 10, identify_response offset=1880 data=b'\xdd\x83\xd6\xa9\xe2\x11\xe4\x15\x13\x8c\xee/\xaf\x81\xaf\xf3\xfb\xcf\xb7\x8aU CY\xe7\xec\xec?\xf3\xb7\xc9\xfc\xbf_&i\x13\x1e\xf0\xaa'
Receive: 35 1721.232169 1721.231095 49: seq: 11, identify_response offset=1920 data=b'y\x1b%I\xa2X+d6O\x97\x95bn\xa8y6\x8fb\xa0,\xd6\xa7\xb4$\xb4\xd9Sf\xd5\x92\xd0\x06\x1c\xd3\x88$\xa1\x8d\x90'
Receive: 36 1721.233294 1721.232217 49: seq: 12, identify_response offset=1960 data=b'r,r\x98\xd1\x08\x8b&\xc4\x08E\x9b\xc0\xe0\xde\xc33^=L\x15\x07L\x85\xdd\r\xd5\xe5\xd46<\xafE!\xf1\xad\x0f\x06\x81\xa5'
Receive: 37 1721.234424 1721.233342 49: seq: 13, identify_response offset=2000 data=b'\x01+j\xd5ze\xbbB\xaa5\xde\x14\x0f5\xaf(\xb9\x9c\xebM\xf3 \xaeH^\xe7M\x8bU \x03#a\r$`VH)\xb6'
Receive: 38 1721.235553 1721.234471 49: seq: 14, identify_response offset=2040 data=b'\r\xaf\xe0\x19&$\xbbzG\xcd\xd4\x8b\xa2\x81\xed\x81Anb\x98\xdf\x19\x94$T\x870\x95b\xd8\xf3N\xc0\x98R\x85d\x1d$;'
Receive: 39 1721.236675 1721.235601 49: seq: 15, identify_response offset=2080 data=b'\xa0\x8c\n(8\xfb\x97\x01\x8b0\x86\x98\x8b\x1a0\x17\x03\x03\xe4\x86^\xeac\xd1{^\x03+"0\xcd\x90\xaeiU\xd5k\xaa\xdc\x85'
Receive: 40 1721.237801 1721.236723 49: seq: 16, identify_response offset=2120 data=b'\xebx\xc3L\xab\xc7\x9e\x079_P\xf7\x9duE/aK=\x0f\x95a\x99\x8d\x9eC\xd9(\x07eb?\xfe\x8ao\x10\xec\x82\xfeC'
Receive: 41 1721.238930 1721.237848 49: seq: 17, identify_response offset=2160 data=b"wA'bf\xd1IJ\x95\xe6U|\xc1n\xce/>\xd0\x0b\x08g\xe0@\xb7\xf7fm\xee\xaf\xdd^\x9e\xbf\xd3\x1b\x98bq\xe3\x9e"
Receive: 42 1721.240047 1721.238976 49: seq: 18, identify_response offset=2200 data=b'\xb29e\xef+\xaa\x95\x99\xe9a\xbbV<\x95\xacT\x7f\x19(\xfd5AY\x89[\x030\xe4\xb0\xd8s\xa8w\xa9Se6\xb1?\xab'
Receive: 43 1721.241168 1721.240098 49: seq: 19, identify_response offset=2240 data=b",2\xf3\xb0\xec\xdb'n8g\xd8\xe1D\x0fq\xdb\xb6\x1fj;\xa0\xd4k8\xd8\xd7\xaffKT\xe2\xf1\x03\xcab\xe4:\xe8\x92f"
Receive: 44 1721.242295 1721.241216 49: seq: 1a, identify_response offset=2280 data=b'\x15\x1b\x97DN2]4\xc5\x02V\x18\xde\xba~\xf1\x94;\xd1il\xa9wp\xf2`\xf1a@+\xd7\xc5\x0bjne\x04KE\xe9'
Receive: 45 1721.243424 1721.242341 49: seq: 1b, identify_response offset=2320 data=b'5\x97\xb2\x00U\xf2\xa6D\xeb\xd6\xf6\x80\x1bBJ\xb0r\tO\xdcj\xac\xd1\x8d\xe00V\xe3L\x17:\xca\x14\xf8\x13G\x8d`!\xfe'
Receive: 46 1721.244551 1721.243471 49: seq: 1c, identify_response offset=2360 data=b'\xf5\x03\xbb\xa2\xaf\x94Chh\xec\x88^\xa3\xc4\xd5\x03\x85\xc1\xa8\xdf\xd4\xed3\xbdpn\xc0\x8b\nF\xec\xa0_\xab \x85\xdf[\xd4F'
Receive: 47 1721.245672 1721.244598 49: seq: 1d, identify_response offset=2400 data=b'\x03O\x98\x8e*}\xea\xff\xeaU\xa0\xc5-/T\x0eP.\x8f\xae^\x89\r\x14\xc7p\xb3uHp\x90M\xdf\xee\xe1 97\x00\xc2'
Receive: 48 1721.246800 1721.245731 49: seq: 1e, identify_response offset=2440 data=b'/\xbe\xc6\xe1O-JNm\xc5[\xae\x99Ao\x87C\x16\xb0+\xd0A\xf0\x9b\xd2\x9d\x058\x90\n{\x16u\rue\xc9a\xd7\xef'
Receive: 49 1721.247923 1721.246850 49: seq: 1f, identify_response offset=2480 data=b']S\xa5\xecNZ\xc9|\xe3\x04~\xdb\xb9\x03\xe7&\xdd)\x02\x10B\xec\xc7\xbdY3\xce\x01B\xb93\xfdi\xf5\x8d\n\x90\xa9p\xa0'
Receive: 50 1721.249044 1721.247971 49: seq: 10, identify_response offset=2520 data=b'\xe2\x93\xff\xb9\xeaN\xc7\x87\xa1m\xd9\xa6P\xdc\x11g\xd8\x18\xbc\xf7M\t\xe3\x10\x00\xaa\x8e<\xf5\xb1\xee\x95<\xf0$\x94\xd4\x92\xab\xc8'
Receive: 51 1721.250170 1721.249093 49: seq: 11, identify_response offset=2560 data=b'\xad\xbe\xe6\xe5\xe5nl\x1e\x01T\xa8\xd0\x8a\x1f{\xbcu\xe96@Kd\xcbP\xf9\xcb\xb6W\xee\x07%\xb8d\xa5\xd4ztMw\x8a'
Receive: 52 1721.251288 1721.250218 49: seq: 12, identify_response offset=2600 data=b'lmSC0|\x02\x04\x18\xb7u\x8c\xb3\x0ca"\xd4n\x80\xb9\x8bp`OK}[\xb4\xb1T\x7fq\xac(_J\xec\xc6a\\'
Receive: 53 1721.252425 1721.251335 49: seq: 13, identify_response offset=2640 data=b'#\xfd\x96\xb0\x8d[\xa9}\x97(\x97W|\xd6E\x8f\x99%9^\xf1\xa3p\xe9rl\xf0\xeb\x90K\x06\x8e\xef\x1cH\\\x07Mp\xcc'
Receive: 54 1721.253552 1721.252472 49: seq: 14, identify_response offset=2680 data=b'\\P\xa7$\xd1*\xcbT^\xd4\x93\x85J\x8d4YdJS0Y,\x960N\xbe\x00&\xb4\xd0\x06e>{\x7f\xf3\x99\xbd\xff\xf4'
Receive: 55 1721.254673 1721.253599 49: seq: 15, identify_response offset=2720 data=b'\xf1\t\x0bP\x90Q\x07n\xcd\xe9\xc3\xaai\x81M\xba9\xca\x1d\xf3c\xed\x82\x13\x0c\x91\xe6\x03\xe9\xe4H\xe15\xb8\x98\xda\xa1\xe7\xe0\t'
Receive: 56 1721.255781 1721.254720 49: seq: 16, identify_response offset=2760 data=b"\xa6.\xdb\x1efz4\x8ex\xea\x14^nz\x01s&.\xe1\x1d\x98\xa9\xa8\x91\xe0\xdek'\x89\xfd\xfe\t)O\xb7\x93\xd5\x93N5"
Receive: 57 1721.256897 1721.255827 49: seq: 17, identify_response offset=2800 data=b'\xa2q\xcd\xa8X\xbd\x93!X\xe4\xb6s\x81T\xa8/\x1b\xaa\xd7\xf6-V\xf5\x11=\xc8\xbd\xfb\xd1@M\xfb_\x82y\xdbn\xfe\tF'
Receive: 58 1721.258026 1721.256944 49: seq: 18, identify_response offset=2840 data=b'^\xd3>\x9f\xa0\xde\xb5{\x08o\x87\x97\xf8\xddy<\x9f\xb9\xb6un\xb4\xe3\xb5\xbd\xd4\xdc\x083r\xada\x0f\xd6\xf6\x88\xe9\x19~\x8a'
Receive: 59 1721.259143 1721.258073 49: seq: 19, identify_response offset=2880 data=b'\xb0X\xe59\xa1\xb0\xb0\x1e"\xb9\xacS\xd7J>h\xeay\x0c\x98\x86\xb1/\x90\xd4k\x03k\x99\x98\x0e\xc7X\x96\xaa\xd7\x8d\xec\xe1\xe3'
Receive: 60 1721.260249 1721.259189 49: seq: 1a, identify_response offset=2920 data=b'\x1d\xc8\xf4?\xa5\x9c`\xfe&w\x86\xaa\xaf~\x9ct\x12$\xa6\xd7\xa6\xe4A#\xf9\x04\xb3\xa1\x7ff\xd2\xefs\xbd-\xdd\x913\xefu'
Receive: 61 1721.261425 1721.260296 49: seq: 1b, identify_response offset=2960 data=b'\xea\x0b\xf9(\x1fF\x15\xe6+\xea\xb2B\x81\x041"7\xb9EjsQ\xbd(\x17\x1dM[\xf8\xb8\x0c\xb3c\xcd\xa2\x03M\xfa\rA'
Receive: 62 1721.262552 1721.261471 49: seq: 1c, identify_response offset=3000 data=b'_\xa5Q6\xed\xce\xfc\xa9\t\xc4\xaa\xb8\xed\x07U\x18\xae\x13*u\xa53]9\xee\xf5\x8f\xfcM\xfbN\xec:.A;\x86Z\xf6\x02'
Receive: 63 1721.263680 1721.262599 49: seq: 1d, identify_response offset=3040 data=b'\xf1.\x82\xd83\xd5\xe9\xd1\x900R\xa8\xd7\x8a^\xb8.\xcd!\x0f\xd8\x9f!~\xd7~\xe7\xc5\x19\x1b\x04\x02\xd3@9\xfe\x89\xc2\xb3='
Receive: 64 1721.264800 1721.263731 49: seq: 1e, identify_response offset=3080 data=b'L<\xf4\t\x89\xd1W\xdbq\x12*\xf0\xad\xa5\xff?\n\x04\xbf\xa7\xf9i\x14\x9f\xceO\x92t}\xb2-\x92t\x9e\xa4\xe9:\x9d}\xf9'
Receive: 65 1721.265381 1721.264848 14: seq: 1f, identify_response offset=3120 data=b'\x1f\xdc\x00}\x1b'
Receive: 66 1721.265989 1721.265485 9: seq: 10, identify_response offset=3125 data=b''
Receive: 67 1721.267822 1721.267679 14: seq: 11, canbus_id canbus_uuid=b'\x9fQ\x0b\xf96a' canbus_nodeid=5
Receive: 68 1721.268431 1721.268257 11: seq: 12, uptime high=0 clock=21854576
Receive: 69 1721.318991 1721.318817 10: seq: 13, clock clock=22461297
Receive: 70 1721.369607 1721.369391 10: seq: 14, clock clock=23068751
Receive: 71 1721.420217 1721.419986 10: seq: 15, clock clock=23675325
Receive: 72 1721.470764 1721.470602 10: seq: 16, clock clock=24282742
Receive: 73 1721.522129 1721.521945 10: seq: 17, clock clock=24899032
Receive: 74 1721.572703 1721.572531 10: seq: 18, clock clock=25505996
Receive: 75 1721.623251 1721.623083 10: seq: 19, clock clock=26112602
Receive: 76 1721.673818 1721.673648 10: seq: 1a, clock clock=26719521
Receive: 77 1721.675075 1721.674555 10: seq: 1b, clock clock=26730606
Receive: 78 1721.685824 1721.685645 10: seq: 1c, config is_config=0 crc=0 is_shutdown=0 move_count=0
Receive: 79 1721.689748 1721.689258 15: seq: 10, config is_config=1 crc=3237245062 is_shutdown=0 move_count=1024
Receive: 80 1721.705802 1721.702269 18: seq: 11, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x08 \xa6'
Receive: 81 1721.708853 1721.706498 8: seq: 12, tmcuart_response oid=4 read=b''
Receive: 82 1721.712768 1721.709242 18: seq: 13, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02(\xa0\xe2'
Receive: 83 1721.715793 1721.713449 8: seq: 14, tmcuart_response oid=4 read=b''
Receive: 84 1721.720117 1721.716169 18: seq: 15, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02H\xa0\xc5'
Receive: 85 1721.723145 1721.720793 8: seq: 16, tmcuart_response oid=4 read=b''
Receive: 86 1721.727485 1721.723527 18: seq: 17, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02h \x81'
Receive: 87 1721.730515 1721.728160 8: seq: 18, tmcuart_response oid=4 read=b''
Receive: 88 1721.734827 1721.730897 18: seq: 19, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x88 \xd6'
Receive: 89 1721.737846 1721.735497 8: seq: 1a, tmcuart_response oid=4 read=b''
Receive: 90 1721.742174 1721.738232 18: seq: 1b, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xa8\xa0\x92'
Receive: 91 1721.745189 1721.742844 8: seq: 1c, tmcuart_response oid=4 read=b''
Receive: 92 1721.749498 1721.745569 18: seq: 1d, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xc8\xa0\xb5'
Receive: 93 1721.752530 1721.750175 8: seq: 1e, tmcuart_response oid=4 read=b''
Receive: 94 1721.756848 1721.752912 18: seq: 1f, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xe8 \xf1'
Receive: 95 1721.759874 1721.757519 8: seq: 10, tmcuart_response oid=4 read=b''
Receive: 96 1721.764182 1721.760253 18: seq: 11, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x08!\x9e'
Receive: 97 1721.776591 1721.776405 8: seq: 12, stepper_position oid=7 pos=0
Receive: 98 1721.781005 1721.777078 18: seq: 13, tmcuart_response oid=4 read=b'\n\xfaO-\x80\x00\x02H \xf9'
Receive: 99 1721.786425 1721.786132 11: seq: 14, shutdown clock=28069707 static_string_id=Command request
=======================
Starting Klippy...
Args: ['/home/pi/klipper/klippy/klippy.py', '/home/pi/printer_data/config/printer.cfg', '-I', '/home/pi/printer_data/comms/klippy.serial', '-l', '/home/pi/printer_data/logs/klippy.log', '-a', '/home/pi/printer_data/comms/klippy.sock']
App Name: Danger-Klipper
Git version: 'v0.12.0-509-g568ae9f2'
Branch: master
Remote: origin
Tracked URL: https://github.com/DangerKlippers/danger-klipper
CPU: 4 core ?
Python: '3.11.2 (main, Sep 14 2024, 03:00:30) [GCC 12.2.0]'
Start printer at Tue Nov 19 21:16:33 2024 (1732022193.1 13.6)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = !PC13
enable_pin = !PE6
rotation_distance = 40
microsteps = 64
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_x:virtual_endstop
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 1.2
sense_resistor = 0.022
diag1_pin = !PC15
driver_sgt = 1
driver_tbl = 1
driver_toff = 3
driver_hstrt = 0
driver_hend = 1

[stepper_y]
step_pin = PE5
dir_pin = !PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 64
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_y:virtual_endstop
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 1.2
sense_resistor = 0.022
diag1_pin = !PF0
driver_sgt = 1
driver_tbl = 1
driver_toff = 3
driver_hstrt = 0
driver_hend = 1

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_min = -3
position_max = 290
homing_speed = 20
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 0.8
sense_resistor = 0.075

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075

[stepper_z2]
step_pin = PB4
dir_pin = PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = !PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
mcu 'mcu':  got {'oid': 18, 'next_clock': 41472, 'value': 31306, '#name': 'analog_in_state', '#sent_time': 14.576678158, '#receive_time': 14.602707973}
mcu 'mcu':  got {'oid': 22, 'next_clock': 16041472, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 14.627221713, '#receive_time': 14.642704343}
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
mcu 'mcu':  got {'oid': 18, 'next_clock': 120041472, 'value': 31313, '#name': 'analog_in_state', '#sent_time': 14.881576472, '#receive_time': 14.902791898}
mcu 'mcu':  got {'oid': 22, 'next_clock': 136041472, 'value': 31376, '#name': 'analog_in_state', '#sent_time': 14.881576472, '#receive_time': 14.942706139}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3401815915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 15.037919158, '#receive_time': 15.086415028000001}
mcu 'mcu':  got {'oid': 18, 'next_clock': 240041472, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 14.881576472, '#receive_time': 15.20270238}
webhooks client 140734881307408: New connection
mcu 'mcu':  got {'oid': 22, 'next_clock': 256041472, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 14.881576472, '#receive_time': 15.242695472}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3405415915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 15.342392213, '#receive_time': 15.386406768}
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
MCU error during connect
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 284, in _connect
    cb()
  File "/home/pi/klipper/klippy/mcu.py", line 1097, in _connect
    config_params = self._send_get_config()
                    ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/mcu.py", line 1048, in _send_get_config
    raise error(
mcu.error: Can not update MCU 'mcu' config as it is shutdown
Build file /home/pi/klipper/klippy/../.config(2257): Sun Nov 17 17:46:28 2024
========= Last MCU build config =========
CONFIG_LOW_LEVEL_OPTIONS=y
# CONFIG_MACH_AVR is not set
# CONFIG_MACH_ATSAM is not set
# CONFIG_MACH_ATSAMD is not set
# CONFIG_MACH_LPC176X is not set
# CONFIG_MACH_STM32 is not set
# CONFIG_MACH_HC32F460 is not set
CONFIG_MACH_RP2040=y
# CONFIG_MACH_PRU is not set
# CONFIG_MACH_AR100 is not set
# CONFIG_MACH_LINUX is not set
# CONFIG_MACH_SIMU is not set
CONFIG_BOARD_DIRECTORY="rp2040"
CONFIG_MCU="rp2040"
CONFIG_CLOCK_FREQ=12000000
CONFIG_FLASH_SIZE=0x200000
CONFIG_FLASH_BOOT_ADDRESS=0x10000100
CONFIG_RAM_START=0x20000000
CONFIG_RAM_SIZE=0x42000
CONFIG_STACK_SIZE=512
CONFIG_FLASH_APPLICATION_ADDRESS=0x10000100
CONFIG_RP2040_SELECT=y
CONFIG_RP2040_HAVE_STAGE2=y
CONFIG_RP2040_FLASH_START_0100=y
# CONFIG_RP2040_FLASH_START_4000 is not set
CONFIG_RP2040_FLASH_W25Q080=y
# CONFIG_RP2040_FLASH_GENERIC_03 is not set
CONFIG_RP2040_STAGE2_FILE="boot2_w25q080.S"
CONFIG_RP2040_STAGE2_CLKDIV=2
# CONFIG_RP2040_USB is not set
# CONFIG_RP2040_SERIAL_UART0_PINS_0_1 is not set
# CONFIG_RP2040_SERIAL_UART0_PINS_12_13 is not set
# CONFIG_RP2040_SERIAL_UART0_PINS_16_17 is not set
# CONFIG_RP2040_SERIAL_UART0_PINS_28_29 is not set
# CONFIG_RP2040_SERIAL_UART1_PINS_4_5 is not set
# CONFIG_RP2040_SERIAL_UART1_PINS_8_9 is not set
# CONFIG_RP2040_SERIAL_UART1_PINS_20_21 is not set
# CONFIG_RP2040_SERIAL_UART1_PINS_24_25 is not set
CONFIG_RP2040_CANBUS=y
# CONFIG_RP2040_USBCANBUS is not set
CONFIG_RP2040_CANBUS_GPIO_RX=4
CONFIG_RP2040_CANBUS_GPIO_TX=5
CONFIG_USB_VENDOR_ID=0x1d50
CONFIG_USB_DEVICE_ID=0x614e
CONFIG_USB_SERIAL_NUMBER="12345"

#
# CAN bus UUID
#
CONFIG_CAN_UUID_USE_CHIPID=y
CONFIG_CAN_UUID_CUSTOM="abc1234"
# end of CAN bus UUID

CONFIG_WANT_GPIO_BITBANGING=y
CONFIG_WANT_DISPLAYS=y
CONFIG_WANT_SENSORS=y
CONFIG_WANT_LIS2DW=y
CONFIG_WANT_LDC1612=y
CONFIG_WANT_HX71X=y
CONFIG_WANT_ADS1220=y
CONFIG_WANT_SOFTWARE_I2C=y
CONFIG_WANT_SOFTWARE_SPI=y
CONFIG_NEED_SENSOR_BULK=y
CONFIG_CANSERIAL=y
CONFIG_CANBUS=y
CONFIG_CANBUS_FREQUENCY=1000000
CONFIG_CANBUS_FILTER=y
CONFIG_INITIAL_PINS=""
CONFIG_HAVE_GPIO=y
CONFIG_HAVE_GPIO_ADC=y
CONFIG_HAVE_GPIO_SPI=y
CONFIG_HAVE_GPIO_I2C=y
CONFIG_HAVE_GPIO_HARD_PWM=y
CONFIG_HAVE_STRICT_TIMING=y
CONFIG_HAVE_CHIPID=y
CONFIG_HAVE_STEPPER_BOTH_EDGE=y
CONFIG_HAVE_BOOTLOADER_REQUEST=y
CONFIG_INLINE_STEPPER_HACK=y
=======================
Build file /home/pi/klipper/klippy/../out/klipper.dict(8935): Sun Nov 17 17:46:37 2024
Last MCU build version: v0.12.0-509-g568ae9f2
Last MCU build tools: gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40
Last MCU build config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi0e=gpio4,gpio3,gpio2 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Build file /home/pi/klipper/klippy/../out/klipper.elf(1796320): Sun Nov 17 17:46:39 2024
webhooks client 140734881307408: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
mcu 'mcu':  got {'oid': 18, 'next_clock': 360041472, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 15.393773491, '#receive_time': 15.502705416}
mcu 'mcu':  got {'oid': 22, 'next_clock': 376041472, 'value': 31374, '#name': 'analog_in_state', '#sent_time': 15.393773491, '#receive_time': 15.542702583}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3409015915, 'value': 30705, '#name': 'analog_in_state', '#sent_time': 15.393881528, '#receive_time': 15.686391305}
mcu 'mcu':  got {'oid': 18, 'next_clock': 480041472, 'value': 31310, '#name': 'analog_in_state', '#sent_time': 15.393773491, '#receive_time': 15.802702453}
mcu 'mcu':  got {'oid': 22, 'next_clock': 496041472, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 15.393773491, '#receive_time': 15.84269975}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3412615915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 15.393881528, '#receive_time': 15.986385731}
mcu 'mcu':  got {'oid': 18, 'next_clock': 600041472, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 15.866057231, '#receive_time': 16.102702046}
mcu 'mcu':  got {'oid': 22, 'next_clock': 616041472, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 15.866057231, '#receive_time': 16.142700398}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3416215915, 'value': 30695, '#name': 'analog_in_state', '#sent_time': 15.393881528, '#receive_time': 16.286365305}
mcu 'mcu':  got {'oid': 18, 'next_clock': 720041472, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 15.866057231, '#receive_time': 16.40269812}
mcu 'mcu':  got {'oid': 22, 'next_clock': 736041472, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 15.866057231, '#receive_time': 16.442697342}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3419815915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 16.378788768, '#receive_time': 16.586364138}
mcu 'mcu':  got {'oid': 18, 'next_clock': 840041472, 'value': 31310, '#name': 'analog_in_state', '#sent_time': 15.866057231, '#receive_time': 16.70269586}
mcu 'mcu':  got {'oid': 22, 'next_clock': 856041472, 'value': 31376, '#name': 'analog_in_state', '#sent_time': 15.866057231, '#receive_time': 16.742697342}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3423415915, 'value': 30702, '#name': 'analog_in_state', '#sent_time': 16.378788768, '#receive_time': 16.886343249}
mcu 'mcu':  got {'oid': 18, 'next_clock': 960041472, 'value': 31309, '#name': 'analog_in_state', '#sent_time': 16.850315805, '#receive_time': 17.002699656}
mcu 'mcu':  got {'oid': 22, 'next_clock': 976041472, 'value': 31376, '#name': 'analog_in_state', '#sent_time': 16.850315805, '#receive_time': 17.042697193}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3427015915, 'value': 30698, '#name': 'analog_in_state', '#sent_time': 16.378788768, '#receive_time': 17.186337953000002}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1080041472, 'value': 31309, '#name': 'analog_in_state', '#sent_time': 16.850315805, '#receive_time': 17.30270073}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1096041472, 'value': 31379, '#name': 'analog_in_state', '#sent_time': 16.850315805, '#receive_time': 17.342700712}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3430615915, 'value': 30690, '#name': 'analog_in_state', '#sent_time': 17.363102675, '#receive_time': 17.486323656}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1200041472, 'value': 31309, '#name': 'analog_in_state', '#sent_time': 16.850315805, '#receive_time': 17.602700823}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1216041472, 'value': 31379, '#name': 'analog_in_state', '#sent_time': 16.850315805, '#receive_time': 17.642696786}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3434215915, 'value': 30701, '#name': 'analog_in_state', '#sent_time': 17.363102675, '#receive_time': 17.786316267}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1320041472, 'value': 31310, '#name': 'analog_in_state', '#sent_time': 17.834722748, '#receive_time': 17.902699915}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1336041472, 'value': 31379, '#name': 'analog_in_state', '#sent_time': 17.834722748, '#receive_time': 17.942688026}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3437815915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 17.363102675, '#receive_time': 18.086301156}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1440041472, 'value': 31308, '#name': 'analog_in_state', '#sent_time': 17.834722748, '#receive_time': 18.2026981}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1456041472, 'value': 31374, '#name': 'analog_in_state', '#sent_time': 17.834722748, '#receive_time': 18.242691933}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3441415915, 'value': 30695, '#name': 'analog_in_state', '#sent_time': 18.347470452, '#receive_time': 18.386285878000002}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1560041472, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 17.834722748, '#receive_time': 18.502701822}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1576041472, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 17.834722748, '#receive_time': 18.542696878}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3445015915, 'value': 30695, '#name': 'analog_in_state', '#sent_time': 18.347470452, '#receive_time': 18.686282859000002}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1680041472, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 17.834722748, '#receive_time': 18.802699766}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1696041472, 'value': 31378, '#name': 'analog_in_state', '#sent_time': 18.819041896, '#receive_time': 18.842696081}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3448615915, 'value': 30695, '#name': 'analog_in_state', '#sent_time': 18.347470452, '#receive_time': 18.986269137}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1800041472, 'value': 31310, '#name': 'analog_in_state', '#sent_time': 18.819041896, '#receive_time': 19.102697192}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1816041472, 'value': 31373, '#name': 'analog_in_state', '#sent_time': 18.819041896, '#receive_time': 19.142699729}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3452215915, 'value': 30702, '#name': 'analog_in_state', '#sent_time': 18.347470452, '#receive_time': 19.286259192}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1920041472, 'value': 31309, '#name': 'analog_in_state', '#sent_time': 18.819041896, '#receive_time': 19.402696062}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1936041472, 'value': 31378, '#name': 'analog_in_state', '#sent_time': 18.819041896, '#receive_time': 19.442698359}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3455815915, 'value': 30696, '#name': 'analog_in_state', '#sent_time': 19.331781025, '#receive_time': 19.586260525}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2040041472, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 18.819041896, '#receive_time': 19.702695266}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2056041472, 'value': 31378, '#name': 'analog_in_state', '#sent_time': 18.819041896, '#receive_time': 19.742698747}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3459415915, 'value': 30697, '#name': 'analog_in_state', '#sent_time': 19.331781025, '#receive_time': 19.886232358}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2160041472, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 19.803291469, '#receive_time': 20.002693803}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2176041472, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 19.803291469, '#receive_time': 20.042690247}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3463015915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 19.331781025, '#receive_time': 20.186239414}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2280041472, 'value': 31313, '#name': 'analog_in_state', '#sent_time': 19.803291469, '#receive_time': 20.302695117}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2296041472, 'value': 31380, '#name': 'analog_in_state', '#sent_time': 19.803291469, '#receive_time': 20.342693265}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3466615915, 'value': 30701, '#name': 'analog_in_state', '#sent_time': 20.316026469, '#receive_time': 20.486251339000003}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2400041472, 'value': 31307, '#name': 'analog_in_state', '#sent_time': 19.803291469, '#receive_time': 20.602698876}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2416041472, 'value': 31378, '#name': 'analog_in_state', '#sent_time': 19.803291469, '#receive_time': 20.642693376}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3470215915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 20.316026469, '#receive_time': 20.786263099}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2520041472, 'value': 31308, '#name': 'analog_in_state', '#sent_time': 20.78756695, '#receive_time': 20.902697691}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2536041472, 'value': 31376, '#name': 'analog_in_state', '#sent_time': 20.78756695, '#receive_time': 20.942694339}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3473815915, 'value': 30698, '#name': 'analog_in_state', '#sent_time': 20.316026469, '#receive_time': 21.086188209}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2640041472, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 20.78756695, '#receive_time': 21.20269108}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2656041472, 'value': 31379, '#name': 'analog_in_state', '#sent_time': 20.78756695, '#receive_time': 21.242692358}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3477415915, 'value': 30699, '#name': 'analog_in_state', '#sent_time': 21.300311802, '#receive_time': 21.386172876}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2760041472, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 20.78756695, '#receive_time': 21.502696135}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2776041472, 'value': 31376, '#name': 'analog_in_state', '#sent_time': 20.78756695, '#receive_time': 21.542696098}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3481015915, 'value': 30701, '#name': 'analog_in_state', '#sent_time': 21.300311802, '#receive_time': 21.686166654}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2880041472, 'value': 31314, '#name': 'analog_in_state', '#sent_time': 21.771862283, '#receive_time': 21.802694431}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2896041472, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 21.771862283, '#receive_time': 21.842694765}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3484615915, 'value': 30697, '#name': 'analog_in_state', '#sent_time': 21.300311802, '#receive_time': 21.986154357}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3000041472, 'value': 31314, '#name': 'analog_in_state', '#sent_time': 21.771862283, '#receive_time': 22.102692783}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3016041472, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 21.771862283, '#receive_time': 22.142694931}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3488215915, 'value': 30696, '#name': 'analog_in_state', '#sent_time': 22.284500931, '#receive_time': 22.286143838}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3120041472, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 21.771862283, '#receive_time': 22.402692449}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3136041472, 'value': 31379, '#name': 'analog_in_state', '#sent_time': 21.771862283, '#receive_time': 22.442693283}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3491815915, 'value': 30698, '#name': 'analog_in_state', '#sent_time': 22.284500931, '#receive_time': 22.58613606}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3240041472, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 21.771862283, '#receive_time': 22.70269169}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3256041472, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 21.771862283, '#receive_time': 22.742693616}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3495415915, 'value': 30698, '#name': 'analog_in_state', '#sent_time': 22.284500931, '#receive_time': 22.886127468}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3360041472, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 22.756060764, '#receive_time': 23.002688653}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3376041472, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 22.756060764, '#receive_time': 23.042690005}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3499015915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 22.284500931, '#receive_time': 23.186108967}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3480041472, 'value': 31310, '#name': 'analog_in_state', '#sent_time': 22.756060764, '#receive_time': 23.302689319}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3496041472, 'value': 31378, '#name': 'analog_in_state', '#sent_time': 22.756060764, '#receive_time': 23.342689375}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3502615915, 'value': 30701, '#name': 'analog_in_state', '#sent_time': 23.268856004, '#receive_time': 23.486100801}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3600041472, 'value': 31314, '#name': 'analog_in_state', '#sent_time': 22.756060764, '#receive_time': 23.602693004}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3616041472, 'value': 31376, '#name': 'analog_in_state', '#sent_time': 22.756060764, '#receive_time': 23.642687689}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3506215915, 'value': 30702, '#name': 'analog_in_state', '#sent_time': 23.268856004, '#receive_time': 23.786091393}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3720041472, 'value': 31314, '#name': 'analog_in_state', '#sent_time': 23.740346782, '#receive_time': 23.902693541}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3736041472, 'value': 31376, '#name': 'analog_in_state', '#sent_time': 23.740346782, '#receive_time': 23.942686393}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3509815915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 23.268856004, '#receive_time': 24.086075856}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3840041472, 'value': 31308, '#name': 'analog_in_state', '#sent_time': 23.740346782, '#receive_time': 24.202686874}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3856041472, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 23.740346782, '#receive_time': 24.242685411}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3513415915, 'value': 30701, '#name': 'analog_in_state', '#sent_time': 24.253184096000002, '#receive_time': 24.386065448}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3960041472, 'value': 31309, '#name': 'analog_in_state', '#sent_time': 23.740346782, '#receive_time': 24.502693207}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3976041472, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 23.740346782, '#receive_time': 24.542684374}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3517015915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 24.253184096000002, '#receive_time': 24.686055467}
mcu 'mcu':  got {'oid': 18, 'next_clock': 4080041472, 'value': 31313, '#name': 'analog_in_state', '#sent_time': 24.724712596, '#receive_time': 24.802694763}
mcu 'mcu':  got {'oid': 22, 'next_clock': 4096041472, 'value': 31376, '#name': 'analog_in_state', '#sent_time': 24.724712596, '#receive_time': 24.842696892}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3520615915, 'value': 30695, '#name': 'analog_in_state', '#sent_time': 24.253184096000002, '#receive_time': 24.986040318}
mcu 'mcu':  got {'oid': 18, 'next_clock': 4200041472, 'value': 31308, '#name': 'analog_in_state', '#sent_time': 24.724712596, '#receive_time': 25.102686355}
mcu 'mcu':  got {'oid': 22, 'next_clock': 4216041472, 'value': 31376, '#name': 'analog_in_state', '#sent_time': 24.724712596, '#receive_time': 25.142688429}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3524215915, 'value': 30701, '#name': 'analog_in_state', '#sent_time': 25.237553763, '#receive_time': 25.286022744}
mcu 'mcu':  got {'oid': 18, 'next_clock': 25074176, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 24.724712596, '#receive_time': 25.402697188}
mcu 'mcu':  got {'oid': 22, 'next_clock': 41074176, 'value': 31376, '#name': 'analog_in_state', '#sent_time': 24.724712596, '#receive_time': 25.44269967}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3527815915, 'value': 30695, '#name': 'analog_in_state', '#sent_time': 25.237553763, '#receive_time': 25.586008373000002}
mcu 'mcu':  got {'oid': 18, 'next_clock': 145074176, 'value': 31310, '#name': 'analog_in_state', '#sent_time': 24.724712596, '#receive_time': 25.702717299}
mcu 'mcu':  got {'oid': 22, 'next_clock': 161074176, 'value': 31378, '#name': 'analog_in_state', '#sent_time': 25.709071633, '#receive_time': 25.742714318}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3531415915, 'value': 30701, '#name': 'analog_in_state', '#sent_time': 25.237553763, '#receive_time': 25.886008188}
mcu 'mcu':  got {'oid': 18, 'next_clock': 265074176, 'value': 31309, '#name': 'analog_in_state', '#sent_time': 25.709071633, '#receive_time': 26.002724188}
mcu 'mcu':  got {'oid': 22, 'next_clock': 281074176, 'value': 31376, '#name': 'analog_in_state', '#sent_time': 25.709071633, '#receive_time': 26.042725595}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3535015915, 'value': 30704, '#name': 'analog_in_state', '#sent_time': 25.237553763, '#receive_time': 26.185994503}
mcu 'mcu':  got {'oid': 18, 'next_clock': 385074176, 'value': 31310, '#name': 'analog_in_state', '#sent_time': 25.709071633, '#receive_time': 26.30273691}
mcu 'mcu':  got {'oid': 22, 'next_clock': 401074176, 'value': 31380, '#name': 'analog_in_state', '#sent_time': 25.709071633, '#receive_time': 26.342737521}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3538615915, 'value': 30696, '#name': 'analog_in_state', '#sent_time': 26.221773299000002, '#receive_time': 26.485981447}
mcu 'mcu':  got {'oid': 18, 'next_clock': 505074176, 'value': 31309, '#name': 'analog_in_state', '#sent_time': 25.709071633, '#receive_time': 26.602747502}
mcu 'mcu':  got {'oid': 22, 'next_clock': 521074176, 'value': 31383, '#name': 'analog_in_state', '#sent_time': 25.709071633, '#receive_time': 26.642749577}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3542215915, 'value': 30701, '#name': 'analog_in_state', '#sent_time': 26.221773299000002, '#receive_time': 26.785972206}
mcu 'mcu':  got {'oid': 18, 'next_clock': 625074176, 'value': 31309, '#name': 'analog_in_state', '#sent_time': 26.69329328, '#receive_time': 26.902760558}
mcu 'mcu':  got {'oid': 22, 'next_clock': 641074176, 'value': 31381, '#name': 'analog_in_state', '#sent_time': 26.69329328, '#receive_time': 26.942714465}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3545815915, 'value': 30704, '#name': 'analog_in_state', '#sent_time': 26.221773299000002, '#receive_time': 27.085957261}
mcu 'mcu':  got {'oid': 18, 'next_clock': 745074176, 'value': 31307, '#name': 'analog_in_state', '#sent_time': 26.69329328, '#receive_time': 27.202723798}
mcu 'mcu':  got {'oid': 22, 'next_clock': 761074176, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 26.69329328, '#receive_time': 27.242725724}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3549415915, 'value': 30699, '#name': 'analog_in_state', '#sent_time': 27.206032521, '#receive_time': 27.385944669}
mcu 'mcu':  got {'oid': 18, 'next_clock': 865074176, 'value': 31309, '#name': 'analog_in_state', '#sent_time': 26.69329328, '#receive_time': 27.502736428}
mcu 'mcu':  got {'oid': 22, 'next_clock': 881074176, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 26.69329328, '#receive_time': 27.542738002}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3553015915, 'value': 30699, '#name': 'analog_in_state', '#sent_time': 27.206032521, '#receive_time': 27.685929909000002}
mcu 'mcu':  got {'oid': 18, 'next_clock': 985074176, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 27.677557798, '#receive_time': 27.802685817}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1001074176, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 27.677557798, '#receive_time': 27.842686946}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3556615915, 'value': 30702, '#name': 'analog_in_state', '#sent_time': 27.206032521, '#receive_time': 27.985929816000002}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1105074176, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 27.677557798, '#receive_time': 28.102682113}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1121074176, 'value': 31378, '#name': 'analog_in_state', '#sent_time': 27.677557798, '#receive_time': 28.142682372}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3560215915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 28.190278853000002, '#receive_time': 28.285913316000002}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1225074176, 'value': 31313, '#name': 'analog_in_state', '#sent_time': 27.677557798, '#receive_time': 28.402682261}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1241074176, 'value': 31381, '#name': 'analog_in_state', '#sent_time': 27.677557798, '#receive_time': 28.44268452}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3563815915, 'value': 30696, '#name': 'analog_in_state', '#sent_time': 28.190278853000002, '#receive_time': 28.585903816000002}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1345074176, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 28.661806649, '#receive_time': 28.702680446}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1361074176, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 28.661806649, '#receive_time': 28.742683612}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3567415915, 'value': 30701, '#name': 'analog_in_state', '#sent_time': 28.190278853000002, '#receive_time': 28.88588752}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1465074176, 'value': 31310, '#name': 'analog_in_state', '#sent_time': 28.661806649, '#receive_time': 29.002679483}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1481074176, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 28.661806649, '#receive_time': 29.042682538}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3571015915, 'value': 30702, '#name': 'analog_in_state', '#sent_time': 29.174543316, '#receive_time': 29.185877927}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1585074176, 'value': 31307, '#name': 'analog_in_state', '#sent_time': 28.661806649, '#receive_time': 29.302678871}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1601074176, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 28.661806649, '#receive_time': 29.342680112}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3574615915, 'value': 30702, '#name': 'analog_in_state', '#sent_time': 29.174543316, '#receive_time': 29.485870001000002}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1705074176, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 28.661806649, '#receive_time': 29.602677834}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1721074176, 'value': 31376, '#name': 'analog_in_state', '#sent_time': 28.661806649, '#receive_time': 29.642674556}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3578215915, 'value': 30699, '#name': 'analog_in_state', '#sent_time': 29.174543316, '#receive_time': 29.785850630000002}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1825074176, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 29.646057001, '#receive_time': 29.902682112}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1841074176, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 29.646057001, '#receive_time': 29.942676926}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3581815915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 29.174543316, '#receive_time': 30.085847797}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1945074176, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 29.646057001, '#receive_time': 30.2026805}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1961074176, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 29.646057001, '#receive_time': 30.242672871}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3585415915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 30.158831574, '#receive_time': 30.385829408}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2065074176, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 29.646057001, '#receive_time': 30.502676056}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2081074176, 'value': 31374, '#name': 'analog_in_state', '#sent_time': 29.646057001, '#receive_time': 30.542679667}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3589015915, 'value': 30703, '#name': 'analog_in_state', '#sent_time': 30.158831574, '#receive_time': 30.685814148000002}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2185074176, 'value': 31309, '#name': 'analog_in_state', '#sent_time': 30.630302833000002, '#receive_time': 30.802680833}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2201074176, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 30.630302833000002, '#receive_time': 30.842680648}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3592615915, 'value': 30702, '#name': 'analog_in_state', '#sent_time': 30.158831574, '#receive_time': 30.98580737}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2305074176, 'value': 31309, '#name': 'analog_in_state', '#sent_time': 30.630302833000002, '#receive_time': 31.102677666}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2321074176, 'value': 31374, '#name': 'analog_in_state', '#sent_time': 30.630302833000002, '#receive_time': 31.142679666}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3596215915, 'value': 30697, '#name': 'analog_in_state', '#sent_time': 31.143039315000003, '#receive_time': 31.285805240000002}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2425074176, 'value': 31309, '#name': 'analog_in_state', '#sent_time': 30.630302833000002, '#receive_time': 31.402678426}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2441074176, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 30.630302833000002, '#receive_time': 31.442677426}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3599815915, 'value': 30699, '#name': 'analog_in_state', '#sent_time': 31.143039315000003, '#receive_time': 31.585786074}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2545074176, 'value': 31313, '#name': 'analog_in_state', '#sent_time': 31.614575685, '#receive_time': 31.702676148}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2561074176, 'value': 31374, '#name': 'analog_in_state', '#sent_time': 31.614575685, '#receive_time': 31.742679222}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3603415915, 'value': 30699, '#name': 'analog_in_state', '#sent_time': 31.143039315000003, '#receive_time': 31.885773536000002}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2665074176, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 31.614575685, '#receive_time': 32.002675203}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2681074176, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 31.614575685, '#receive_time': 32.042675407}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3607015915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 32.127328073, '#receive_time': 32.185759018}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2785074176, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 31.614575685, '#receive_time': 32.30267511}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2801074176, 'value': 31374, '#name': 'analog_in_state', '#sent_time': 31.614575685, '#receive_time': 32.342675055}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3610615915, 'value': 30699, '#name': 'analog_in_state', '#sent_time': 32.127328073, '#receive_time': 32.485771295}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2905074176, 'value': 31308, '#name': 'analog_in_state', '#sent_time': 32.598841184, '#receive_time': 32.60267298}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2921074176, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 32.598841184, '#receive_time': 32.642673758}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3614215915, 'value': 30697, '#name': 'analog_in_state', '#sent_time': 32.127328073, '#receive_time': 32.785737962}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3025074176, 'value': 31308, '#name': 'analog_in_state', '#sent_time': 32.598841184, '#receive_time': 32.902688443}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3041074176, 'value': 31378, '#name': 'analog_in_state', '#sent_time': 32.598841184, '#receive_time': 32.942673128}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3617815915, 'value': 30701, '#name': 'analog_in_state', '#sent_time': 32.127328073, '#receive_time': 33.085749406}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3145074176, 'value': 31309, '#name': 'analog_in_state', '#sent_time': 32.598841184, '#receive_time': 33.202680573}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3161074176, 'value': 31376, '#name': 'analog_in_state', '#sent_time': 32.598841184, '#receive_time': 33.242676499}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3621415915, 'value': 30699, '#name': 'analog_in_state', '#sent_time': 33.111593721, '#receive_time': 33.385761812999995}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3265074176, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 32.598841184, '#receive_time': 33.502675832}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3281074176, 'value': 31378, '#name': 'analog_in_state', '#sent_time': 32.598841184, '#receive_time': 33.542671165}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3625015915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 33.111593721, '#receive_time': 33.685773534999996}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3385074176, 'value': 31309, '#name': 'analog_in_state', '#sent_time': 33.583112498, '#receive_time': 33.80267848}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3401074176, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 33.583112498, '#receive_time': 33.842669239}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3628615915, 'value': 30699, '#name': 'analog_in_state', '#sent_time': 33.111593721, '#receive_time': 33.985692793999995}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3505074176, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 33.583112498, '#receive_time': 34.102673294}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3521074176, 'value': 31370, '#name': 'analog_in_state', '#sent_time': 33.583112498, '#receive_time': 34.142674831}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3632215915, 'value': 30696, '#name': 'analog_in_state', '#sent_time': 34.095823202, '#receive_time': 34.285683905}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3625074176, 'value': 31310, '#name': 'analog_in_state', '#sent_time': 33.583112498, '#receive_time': 34.402668183}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3641074176, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 33.583112498, '#receive_time': 34.442673979}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3635815915, 'value': 30702, '#name': 'analog_in_state', '#sent_time': 34.095823202, '#receive_time': 34.585668035}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3745074176, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 34.567326164, '#receive_time': 34.702671979}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3761074176, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 34.567326164, '#receive_time': 34.742679627}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3639415915, 'value': 30701, '#name': 'analog_in_state', '#sent_time': 34.095823202, '#receive_time': 34.885658127}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3865074176, 'value': 31310, '#name': 'analog_in_state', '#sent_time': 34.567326164, '#receive_time': 35.002670109}
mcu 'mcu':  got {'oid': 22, 'next_clock': 3881074176, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 34.567326164, '#receive_time': 35.042676646}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3643015915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 35.08008572, '#receive_time': 35.185648683}
mcu 'mcu':  got {'oid': 18, 'next_clock': 3985074176, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 34.567326164, '#receive_time': 35.302669608}
mcu 'mcu':  got {'oid': 22, 'next_clock': 4001074176, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 34.567326164, '#receive_time': 35.342663701}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3646615915, 'value': 30703, '#name': 'analog_in_state', '#sent_time': 35.08008572, '#receive_time': 35.485641404999996}
mcu 'mcu':  got {'oid': 18, 'next_clock': 4105074176, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 35.551661571, '#receive_time': 35.602670071}
mcu 'mcu':  got {'oid': 22, 'next_clock': 4121074176, 'value': 31374, '#name': 'analog_in_state', '#sent_time': 35.551661571, '#receive_time': 35.642670256}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3650215915, 'value': 30696, '#name': 'analog_in_state', '#sent_time': 35.08008572, '#receive_time': 35.785621238}
mcu 'mcu':  got {'oid': 18, 'next_clock': 4225074176, 'value': 31313, '#name': 'analog_in_state', '#sent_time': 35.551661571, '#receive_time': 35.902672404}
mcu 'mcu':  got {'oid': 22, 'next_clock': 4241074176, 'value': 31376, '#name': 'analog_in_state', '#sent_time': 35.551661571, '#receive_time': 35.942670515}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3653815915, 'value': 30704, '#name': 'analog_in_state', '#sent_time': 36.064493903999995, '#receive_time': 36.085612088999994}
mcu 'mcu':  got {'oid': 18, 'next_clock': 50106880, 'value': 31308, '#name': 'analog_in_state', '#sent_time': 35.551661571, '#receive_time': 36.202668108}
mcu 'mcu':  got {'oid': 22, 'next_clock': 66106880, 'value': 31376, '#name': 'analog_in_state', '#sent_time': 35.551661571, '#receive_time': 36.242666886}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3657415915, 'value': 30696, '#name': 'analog_in_state', '#sent_time': 36.064493903999995, '#receive_time': 36.385606810999995}
mcu 'mcu':  got {'oid': 18, 'next_clock': 170106880, 'value': 31308, '#name': 'analog_in_state', '#sent_time': 35.551661571, '#receive_time': 36.502671237}
mcu 'mcu':  got {'oid': 22, 'next_clock': 186106880, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 36.536055534, '#receive_time': 36.542665385}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3661015915, 'value': 30697, '#name': 'analog_in_state', '#sent_time': 36.064493903999995, '#receive_time': 36.685590958999995}
mcu 'mcu':  got {'oid': 18, 'next_clock': 290106880, 'value': 31309, '#name': 'analog_in_state', '#sent_time': 36.536055534, '#receive_time': 36.802671922}
mcu 'mcu':  got {'oid': 22, 'next_clock': 306106880, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 36.536055534, '#receive_time': 36.842665496}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3664615915, 'value': 30702, '#name': 'analog_in_state', '#sent_time': 36.064493903999995, '#receive_time': 36.985575718999996}
mcu 'mcu':  got {'oid': 18, 'next_clock': 410106880, 'value': 31310, '#name': 'analog_in_state', '#sent_time': 36.536055534, '#receive_time': 37.102669718}
mcu 'mcu':  got {'oid': 22, 'next_clock': 426106880, 'value': 31373, '#name': 'analog_in_state', '#sent_time': 36.536055534, '#receive_time': 37.142664348}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3668215915, 'value': 30701, '#name': 'analog_in_state', '#sent_time': 37.049270125999996, '#receive_time': 37.285568163}
mcu 'mcu':  got {'oid': 18, 'next_clock': 530106880, 'value': 31310, '#name': 'analog_in_state', '#sent_time': 36.536055534, '#receive_time': 37.402676144}
mcu 'mcu':  got {'oid': 22, 'next_clock': 546106880, 'value': 31372, '#name': 'analog_in_state', '#sent_time': 36.536055534, '#receive_time': 37.442669126}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3671815915, 'value': 30701, '#name': 'analog_in_state', '#sent_time': 37.049270125999996, '#receive_time': 37.585550792}
mcu 'mcu':  got {'oid': 18, 'next_clock': 650106880, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 37.521073903, '#receive_time': 37.702669385}
mcu 'mcu':  got {'oid': 22, 'next_clock': 666106880, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 37.521073903, '#receive_time': 37.74266607}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3675415915, 'value': 30698, '#name': 'analog_in_state', '#sent_time': 37.049270125999996, '#receive_time': 37.885539107}
mcu 'mcu':  got {'oid': 18, 'next_clock': 770106880, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 37.521073903, '#receive_time': 38.002662477}
mcu 'mcu':  got {'oid': 22, 'next_clock': 786106880, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 37.521073903, '#receive_time': 38.042662959}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3679015915, 'value': 30698, '#name': 'analog_in_state', '#sent_time': 38.033335033, '#receive_time': 38.185530107}
mcu 'mcu':  got {'oid': 18, 'next_clock': 890106880, 'value': 31310, '#name': 'analog_in_state', '#sent_time': 37.521073903, '#receive_time': 38.302659718}
mcu 'mcu':  got {'oid': 22, 'next_clock': 906106880, 'value': 31373, '#name': 'analog_in_state', '#sent_time': 37.521073903, '#receive_time': 38.342661866}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3682615915, 'value': 30694, '#name': 'analog_in_state', '#sent_time': 38.033335033, '#receive_time': 38.485515254999996}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1010106880, 'value': 31310, '#name': 'analog_in_state', '#sent_time': 38.506180847, '#receive_time': 38.602659662}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1026106880, 'value': 31376, '#name': 'analog_in_state', '#sent_time': 38.506180847, '#receive_time': 38.642661995}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3686215915, 'value': 30698, '#name': 'analog_in_state', '#sent_time': 38.033335033, '#receive_time': 38.78550418}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1130106880, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 38.506180847, '#receive_time': 38.902658717}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1146106880, 'value': 31379, '#name': 'analog_in_state', '#sent_time': 38.506180847, '#receive_time': 38.942658995}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3689815915, 'value': 30706, '#name': 'analog_in_state', '#sent_time': 39.018367458, '#receive_time': 39.085493402}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1250106880, 'value': 31310, '#name': 'analog_in_state', '#sent_time': 38.506180847, '#receive_time': 39.20267381}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1266106880, 'value': 31381, '#name': 'analog_in_state', '#sent_time': 38.506180847, '#receive_time': 39.242658976}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3693415915, 'value': 30702, '#name': 'analog_in_state', '#sent_time': 39.018367458, '#receive_time': 39.385481457999994}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1370106880, 'value': 31311, '#name': 'analog_in_state', '#sent_time': 39.490757995, '#receive_time': 39.502656624}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1386106880, 'value': 31380, '#name': 'analog_in_state', '#sent_time': 39.490757995, '#receive_time': 39.542658273}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3697015915, 'value': 30702, '#name': 'analog_in_state', '#sent_time': 39.018367458, '#receive_time': 39.685471105999994}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1490106880, 'value': 31308, '#name': 'analog_in_state', '#sent_time': 39.490757995, '#receive_time': 39.802662458}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1506106880, 'value': 31370, '#name': 'analog_in_state', '#sent_time': 39.490757995, '#receive_time': 39.842657495}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3700615915, 'value': 30697, '#name': 'analog_in_state', '#sent_time': 39.018367458, '#receive_time': 39.985460290999995}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1610106880, 'value': 31308, '#name': 'analog_in_state', '#sent_time': 39.490757995, '#receive_time': 40.102662013}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1626106880, 'value': 31378, '#name': 'analog_in_state', '#sent_time': 39.490757995, '#receive_time': 40.142656383}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3704215915, 'value': 30695, '#name': 'analog_in_state', '#sent_time': 40.002948661, '#receive_time': 40.285450456999996}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1730106880, 'value': 31307, '#name': 'analog_in_state', '#sent_time': 39.490757995, '#receive_time': 40.402663976}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1746106880, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 39.490757995, '#receive_time': 40.442656531}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3707815915, 'value': 30702, '#name': 'analog_in_state', '#sent_time': 40.002948661, '#receive_time': 40.585442994}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1850106880, 'value': 31309, '#name': 'analog_in_state', '#sent_time': 40.475804976, '#receive_time': 40.702652939000004}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1866106880, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 40.475804976, '#receive_time': 40.742655846}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3711415915, 'value': 30694, '#name': 'analog_in_state', '#sent_time': 40.002948661, '#receive_time': 40.885424011999994}
mcu 'mcu':  got {'oid': 18, 'next_clock': 1970106880, 'value': 31308, '#name': 'analog_in_state', '#sent_time': 40.475804976, '#receive_time': 41.002657438}
mcu 'mcu':  got {'oid': 22, 'next_clock': 1986106880, 'value': 31375, '#name': 'analog_in_state', '#sent_time': 40.475804976, '#receive_time': 41.042659846}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3715015915, 'value': 30699, '#name': 'analog_in_state', '#sent_time': 40.987882198, '#receive_time': 41.185415309}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2090106880, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 40.475804976, '#receive_time': 41.302656438}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2106106880, 'value': 31374, '#name': 'analog_in_state', '#sent_time': 40.475804976, '#receive_time': 41.342658679}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3718615915, 'value': 30698, '#name': 'analog_in_state', '#sent_time': 40.987882198, '#receive_time': 41.485401159999995}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2210106880, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 41.460713883, '#receive_time': 41.602648845}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2226106880, 'value': 31377, '#name': 'analog_in_state', '#sent_time': 41.460713883, '#receive_time': 41.642658031}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3722215915, 'value': 30700, '#name': 'analog_in_state', '#sent_time': 40.987882198, '#receive_time': 41.785394771}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2330106880, 'value': 31312, '#name': 'analog_in_state', '#sent_time': 41.460713883, '#receive_time': 41.90265616}
mcu 'mcu':  got {'oid': 22, 'next_clock': 2346106880, 'value': 31378, '#name': 'analog_in_state', '#sent_time': 41.460713883, '#receive_time': 41.94265266}
mcu 'ebb':  got {'oid': 10, 'next_clock': 3725815915, 'value': 30701, '#name': 'analog_in_state', '#sent_time': 41.972129697, '#receive_time': 42.085379196999995}
mcu 'mcu':  got {'oid': 18, 'next_clock': 2450106880, 'value': 31314, '#name': 'analog_in_state', '#sent_time': 41.460713883, '#receive_time': 42.202654475}
Attempting MCU 'ebb' reset command
Attempting MCU 'mcu' reset command
b'Got error -1 in can read: (100)Network is down'
webhooks client 140734881307408: Disconnected
Restarting printer
Start printer at Tue Nov 19 21:17:02 2024 (1732022222.7 43.3)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = !PC13
enable_pin = !PE6
rotation_distance = 40
microsteps = 64
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_x:virtual_endstop
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 1.2
sense_resistor = 0.022
diag1_pin = !PC15
driver_sgt = 1
driver_tbl = 1
driver_toff = 3
driver_hstrt = 0
driver_hend = 1

[stepper_y]
step_pin = PE5
dir_pin = !PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 64
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_y:virtual_endstop
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 1.2
sense_resistor = 0.022
diag1_pin = !PF0
driver_sgt = 1
driver_tbl = 1
driver_toff = 3
driver_hstrt = 0
driver_hend = 1

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_min = -3
position_max = 290
homing_speed = 20
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 0.8
sense_resistor = 0.075

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075

[stepper_z2]
step_pin = PB4
dir_pin = PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = !PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
webhooks client 140734891391632: New connection
webhooks client 140734891391632: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Sending MCU 'ebb' printer configuration...
Configured MCU 'ebb' (1024 moves)
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (25.0, 25.0)    | (25.0, 25.0)
  1   | (103.8, 25.0)   | (103.8, 25.0)
  2   | (182.5, 25.0)   | (182.5, 25.0)
  3   | (261.2, 25.0)   | (261.2, 25.0)
  4   | (340.0, 25.0)   | (340.0, 25.0)
  5   | (340.0, 103.8)  | (340.0, 103.8)
  6   | (261.2, 103.8)  | (261.2, 103.8)
  7   | (182.5, 103.8)  | (182.5, 103.8)
  8   | (103.8, 103.8)  | (103.8, 103.8)
  9   | (25.0, 103.8)   | (25.0, 103.8)
  10  | (25.0, 182.5)   | (25.0, 182.5)
  11  | (103.8, 182.5)  | (103.8, 182.5)
  12  | (182.5, 182.5)  | (182.5, 182.5)
  13  | (261.2, 182.5)  | (261.2, 182.5)
  14  | (340.0, 182.5)  | (340.0, 182.5)
  15  | (340.0, 261.2)  | (340.0, 261.2)
  16  | (261.2, 261.2)  | (261.2, 261.2)
  17  | (182.5, 261.2)  | (182.5, 261.2)
  18  | (103.8, 261.2)  | (103.8, 261.2)
  19  | (25.0, 261.2)   | (25.0, 261.2)
  20  | (25.0, 340.0)   | (25.0, 340.0)
  21  | (103.8, 340.0)  | (103.8, 340.0)
  22  | (182.5, 340.0)  | (182.5, 340.0)
  23  | (261.2, 340.0)  | (261.2, 340.0)
  24  | (340.0, 340.0)  | (340.0, 340.0)
TMC stepper_x failed to init: Unable to write tmc spi 'stepper_x' register GLOBALSCALER
TMC stepper_y failed to init: Unable to write tmc spi 'stepper_y' register GLOBALSCALER
TMC stepper_z failed to init: Unable to write tmc spi 'stepper_z' register GLOBALSCALER
TMC stepper_z1 failed to init: Unable to write tmc spi 'stepper_z1' register GLOBALSCALER
TMC stepper_z2 failed to init: Unable to write tmc spi 'stepper_z2' register GLOBALSCALER
TMC stepper_z3 failed to init: Unable to write tmc spi 'stepper_z3' register GLOBALSCALER
Starting heater checks for heater_bed
Starting heater checks for extruder
autotune_tmc set stepper_x pwm_freq=2
Unhandled exception during ready callback
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 314, in _connect
    cb()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 169, in handle_ready
    self.tune_driver()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 220, in tune_driver
    self._set_pwmfreq()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 286, in _set_pwmfreq
    self._set_driver_field('pwm_freq', pwm_freq)
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 249, in _set_driver_field
    tmco.mcu_tmc.set_register(register, val, None)
  File "/home/pi/klipper/klippy/extras/tmc2130.py", line 403, in set_register
    raise self.printer.command_error(
gcode.CommandError: Unable to write tmc spi 'stepper_x' register PWMCONF
Transition to shutdown state: Internal error during ready callback: Unable to write tmc spi 'stepper_x' register PWMCONF
Dumping gcode input 0 blocks
Dumping 5 requests for client 140734891391632
Received 43.766656: b'{"id": 140736241072080, "method": "info", "params": {"client_info": {"program": "Moonraker", "version": "v0.9.3-1-g4e00a07"}}}'
Received 43.767215: b'{"id": 140736255586320, "method": "list_endpoints", "params": {}}'
Received 44.018010: b'{"id": 140736255586256, "method": "info", "params": {}}'
Received 44.268782: b'{"id": 140736255586256, "method": "info", "params": {}}'
Received 44.519933: b'{"id": 140736241073168, "method": "info", "params": {}}'
gcode state: absolute_coord=True absolute_extrude=True base_position=[0.0, 0.0, 0.0, 0.0] last_position=[0.0, 0.0, 0.0, 0.0] homing_position=[0.0, 0.0, 0.0, 0.0] speed_factor=0.016666666666666666 extrude_factor=1.0 speed=25.0
Reactor garbage collection: (44.030417881, 0.0, 0.0)
MCU 'mcu' shutdown: Command request
clocksync state: mcu_freq=400000000 last_clock=600400352 clock_est=(43.593 465710107 400010317.557) min_half_rtt=0.000071 min_rtt_time=43.878 time_avg=43.593(0.017) clock_avg=465710107.085(6678443.667) pred_variance=117944160995.380
Dumping serial stats: bytes_write=2300 bytes_read=5379 bytes_retransmit=0 bytes_invalid=0 send_seq=175 receive_seq=175 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 43.515565 43.515565 9: seq: 1b, identify offset=2360 count=40
Sent 1 43.515989 43.515989 9: seq: 1c, identify offset=2400 count=40
Sent 2 43.516352 43.516352 9: seq: 1d, identify offset=2440 count=40
Sent 3 43.516707 43.516707 9: seq: 1e, identify offset=2480 count=40
Sent 4 43.517071 43.517071 9: seq: 1f, identify offset=2520 count=40
Sent 5 43.517502 43.517502 9: seq: 10, identify offset=2560 count=40
Sent 6 43.517865 43.517865 9: seq: 11, identify offset=2600 count=40
Sent 7 43.518225 43.518225 9: seq: 12, identify offset=2640 count=40
Sent 8 43.518634 43.518634 9: seq: 13, identify offset=2680 count=40
Sent 9 43.518997 43.518997 9: seq: 14, identify offset=2720 count=40
Sent 10 43.519410 43.519410 9: seq: 15, identify offset=2760 count=40
Sent 11 43.519767 43.519767 9: seq: 16, identify offset=2800 count=40
Sent 12 43.520130 43.520130 9: seq: 17, identify offset=2840 count=40
Sent 13 43.520545 43.520545 9: seq: 18, identify offset=2880 count=40
Sent 14 43.520903 43.520903 9: seq: 19, identify offset=2920 count=40
Sent 15 43.521261 43.521261 9: seq: 1a, identify offset=2960 count=40
Sent 16 43.521688 43.521688 9: seq: 1b, identify offset=3000 count=40
Sent 17 43.522049 43.522049 9: seq: 1c, identify offset=3040 count=40
Sent 18 43.522459 43.522459 9: seq: 1d, identify offset=3080 count=40
Sent 19 43.522812 43.522812 9: seq: 1e, identify offset=3120 count=40
Sent 20 43.524851 43.524851 6: seq: 1f, get_canbus_id
Sent 21 43.525101 43.525101 6: seq: 10, get_uptime
Sent 22 43.575399 43.575399 6: seq: 11, get_clock
Sent 23 43.625710 43.625710 6: seq: 12, get_clock
Sent 24 43.675981 43.675981 6: seq: 13, get_clock
Sent 25 43.726286 43.726286 6: seq: 14, get_clock
Sent 26 43.777375 43.777375 6: seq: 15, get_clock
Sent 27 43.827730 43.827730 6: seq: 16, get_clock
Sent 28 43.878019 43.878019 6: seq: 17, get_clock
Sent 29 43.928320 43.928320 6: seq: 18, get_clock
Sent 30 43.929431 43.929431 6: seq: 19, get_clock
Sent 31 44.436602 44.436602 6: seq: 1a, get_config
Sent 32 44.437653 44.437653 7: seq: 1b, allocate_oids count=29
Sent 33 44.438092 44.438092 59: seq: 1c, config_spi oid=0 pin=PD6 cs_active_high=0, config_spi oid=1 pin=PD5 cs_active_high=0, config_spi oid=2 pin=PD2 cs_active_high=0, config_spi oid=3 pin=PA15 cs_active_high=0, config_spi oid=4 pin=PA9 cs_active_high=0, config_spi oid=5 pin=PA10 cs_active_high=0, spi_set_software_bus oid=0 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, spi_set_software_bus oid=1 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, spi_set_software_bus oid=2 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 34 44.438092 44.438092 60: seq: 1d, spi_set_software_bus oid=3 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, spi_set_software_bus oid=4 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, spi_set_software_bus oid=5 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000, config_analog_in oid=18 pin=PB0, config_digital_out oid=19 pin=PF6 value=0 default_value=0 max_duration=2000000000, set_digital_out_pwm_cycle oid=19 cycle_ticks=40000000, config_digital_out oid=20 pin=PA1 value=0 default_value=0 max_duration=0
Sent 35 44.438092 44.438092 60: seq: 1e, set_digital_out_pwm_cycle oid=20 cycle_ticks=20000000, config_digital_out oid=21 pin=PA4 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=21 cycle_ticks=20000000, config_analog_in oid=22 pin=PA7, config_neopixel oid=6 pin=PF12 data_size=150 bit_max_ticks=1600 reset_min_ticks=20000, config_stepper oid=7 step_pin=PC14 dir_pin=PC13 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=23 pin=PE6 value=1 default_value=1 max_duration=0, config_endstop oid=8 pin=PC15 pull_up=0, config_trsync oid=9, config_stepper oid=10 step_pin=PE5 dir_pin=PE4 invert_step=4294967295 step_pulse_ticks=0
Sent 36 44.438598 44.438598 60: seq: 1f, config_digital_out oid=24 pin=PE3 value=1 default_value=1 max_duration=0, config_endstop oid=11 pin=PF0 pull_up=0, config_trsync oid=12, config_stepper oid=13 step_pin=PG9 dir_pin=PG10 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=25 pin=PG13 value=1 default_value=1 max_duration=0, config_trsync oid=14, config_stepper oid=15 step_pin=PG11 dir_pin=PD7 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=26 pin=PG12 value=1 default_value=1 max_duration=0, config_stepper oid=16 step_pin=PB4 dir_pin=PB3 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=27 pin=PB5 value=1 default_value=1 max_duration=0
Sent 37 44.445514 44.445514 63: seq: 10, config_stepper oid=17 step_pin=PG15 dir_pin=PB6 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=28 pin=PG14 value=1 default_value=1 max_duration=0, finalize_config crc=924824692, query_analog_in oid=18 clock=1272000000 sample_ticks=400000 sample_count=8 rest_ticks=120000000 min_value=14024 max_value=32038 range_check_count=4, queue_digital_out oid=19 clock=883376712 on_ticks=0, queue_digital_out oid=20 clock=883385690 on_ticks=0
Sent 38 44.445957 44.445957 34: seq: 11, queue_digital_out oid=21 clock=883390127 on_ticks=0, query_analog_in oid=22 clock=1288000000 sample_ticks=400000 sample_count=8 rest_ticks=120000000 min_value=0 max_value=32760 range_check_count=4, get_config
Sent 39 44.454429 44.454429 13: seq: 12, spi_send oid=0 data=b'\x8b\x00\x00\x00 '
Sent 40 44.454499 44.454499 13: seq: 13, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 41 44.454833 44.454833 21: seq: 14, spi_send oid=0 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 42 44.455174 44.455174 21: seq: 15, spi_send oid=0 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 43 44.455566 44.455566 21: seq: 16, spi_send oid=0 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 44 44.455902 44.455902 21: seq: 17, spi_send oid=0 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 45 44.456293 44.456293 13: seq: 18, spi_send oid=1 data=b'\x8b\x00\x00\x00 '
Sent 46 44.456332 44.456332 13: seq: 19, spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 47 44.456746 44.456746 21: seq: 1a, spi_send oid=1 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 48 44.457088 44.457088 21: seq: 1b, spi_send oid=1 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 49 44.457466 44.457466 21: seq: 1c, spi_send oid=1 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 50 44.457800 44.457800 21: seq: 1d, spi_send oid=1 data=b'\x8b\x00\x00\x00 ', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 51 44.458183 44.458183 13: seq: 1e, spi_send oid=2 data=b'\x8b\x00\x00\x00C'
Sent 52 44.458226 44.458226 13: seq: 1f, spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 53 44.458599 44.458599 21: seq: 10, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 54 44.458934 44.458934 21: seq: 11, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 55 44.459271 44.459271 21: seq: 12, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 56 44.459639 44.459639 21: seq: 13, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 57 44.460020 44.460020 13: seq: 14, spi_send oid=3 data=b'\x8b\x00\x00\x00C'
Sent 58 44.460059 44.460059 13: seq: 15, spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 59 44.460408 44.460408 21: seq: 16, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 60 44.460741 44.460741 21: seq: 17, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 61 44.461072 44.461072 21: seq: 18, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 62 44.461406 44.461406 21: seq: 19, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 63 44.461780 44.461780 13: seq: 1a, spi_send oid=4 data=b'\x8b\x00\x00\x00C'
Sent 64 44.461820 44.461820 13: seq: 1b, spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 65 44.462165 44.462165 21: seq: 1c, spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 66 44.462552 44.462552 21: seq: 1d, spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 67 44.462887 44.462887 21: seq: 1e, spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 68 44.463231 44.463231 21: seq: 1f, spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 69 44.463638 44.463638 13: seq: 10, spi_send oid=5 data=b'\x8b\x00\x00\x00C'
Sent 70 44.463676 44.463676 13: seq: 11, spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 71 44.464022 44.464022 21: seq: 12, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 72 44.464354 44.464354 21: seq: 13, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 73 44.464692 44.464692 21: seq: 14, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 74 44.465028 44.465028 21: seq: 15, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 75 44.528409 44.528409 15: seq: 16, neopixel_update oid=6 pos=0 data=b'\xff\xff\xff\xff\xff\xff'
Sent 76 44.528534 44.528534 45: seq: 17, neopixel_update oid=6 pos=6 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=22 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 77 44.528534 44.528534 45: seq: 18, neopixel_update oid=6 pos=38 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=54 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 78 44.528534 44.528534 45: seq: 19, neopixel_update oid=6 pos=70 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=86 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 79 44.528913 44.528913 47: seq: 1a, neopixel_update oid=6 pos=102 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=118 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 80 44.534908 44.534908 28: seq: 1b, neopixel_update oid=6 pos=134 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_send oid=6
Sent 81 44.537142 44.537142 7: seq: 1c, stepper_get_position oid=7
Sent 82 44.537457 44.537457 21: seq: 1d, spi_send oid=0 data=b'j\x00\x00\x00\x00', spi_transfer oid=0 data=b'j\x00\x00\x00\x00'
Sent 83 44.537851 44.537851 7: seq: 1e, stepper_get_position oid=10
Sent 84 44.538068 44.538068 21: seq: 1f, spi_send oid=1 data=b'j\x00\x00\x00\x00', spi_transfer oid=1 data=b'j\x00\x00\x00\x00'
Sent 85 44.538412 44.538412 7: seq: 10, stepper_get_position oid=13
Sent 86 44.538631 44.538631 21: seq: 11, spi_send oid=2 data=b'j\x00\x00\x00\x00', spi_transfer oid=2 data=b'j\x00\x00\x00\x00'
Sent 87 44.538977 44.538977 7: seq: 12, stepper_get_position oid=15
Sent 88 44.539194 44.539194 21: seq: 13, spi_send oid=3 data=b'j\x00\x00\x00\x00', spi_transfer oid=3 data=b'j\x00\x00\x00\x00'
Sent 89 44.539564 44.539564 7: seq: 14, stepper_get_position oid=16
Sent 90 44.539780 44.539780 21: seq: 15, spi_send oid=4 data=b'j\x00\x00\x00\x00', spi_transfer oid=4 data=b'j\x00\x00\x00\x00'
Sent 91 44.540123 44.540123 7: seq: 16, stepper_get_position oid=17
Sent 92 44.540337 44.540337 21: seq: 17, spi_send oid=5 data=b'j\x00\x00\x00\x00', spi_transfer oid=5 data=b'j\x00\x00\x00\x00'
Sent 93 44.546064 44.546064 13: seq: 18, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e'
Sent 94 44.546106 44.546106 13: seq: 19, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 95 44.546523 44.546523 21: seq: 1a, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 96 44.546874 44.546874 21: seq: 1b, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 97 44.547212 44.547212 21: seq: 1c, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 98 44.547610 44.547610 21: seq: 1d, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 99 44.550318 44.550318 6: seq: 1e, emergency_stop
Dumping receive queue 100 messages
Receive: 0 43.508653 43.508333 49: seq: 1a, identify_response offset=1640 data=b'\xb0\x80\x9f\xd9xVn\xf0\x11d\xfb\x80\x9b|\x8cG\xf31N\xdf\xe0\xd67\xc8\xfeFJ\xb0Z~B\x9a\xab\x87\xdb\xeb\x9b\xb5\x84l'
Receive: 1 43.509009 43.508697 49: seq: 1b, identify_response offset=1680 data=b'\xab\x9f~^\xfd\x98|xX\xff\x82\xf7\xa9\xfe\x9dM\xeeVO\xb0^t\x87\xc0\xdf\xcf\xfc\xe0\xed\r\x16\xdf\xffzG\xf7\xeec\xa2\x7f'
Receive: 2 43.509460 43.509057 49: seq: 1c, identify_response offset=1720 data=b"X\xaf\xd6\xb7\xff^'\xbf\xde~\xba\xfe\xf9Wt \x1f\x077\xeb\x07\x18\x94\x87\x80\xcd\xf0\x0c\xd7p\x7f\xd7x}\x83\xc9\xa7\xcd\x95\xbc"
Receive: 3 43.509818 43.509503 49: seq: 1d, identify_response offset=1760 data=b'\x1f<\xfbR\x8a>\x98\xce\xdaw\xf0\x80R\x8a\x08\xeb?\xe2\xfa\xcd\xe3\xf2q\x93l\x9e\xee6\xbf$W\xcb\xcd\x1a\x0f\x12\xe3\xf0\xfa\xfe'
Receive: 4 43.510181 43.509860 49: seq: 1e, identify_response offset=1800 data=b'~\xfd\x90\\\xfd\xfc\xf81Y\x93\\_\xf0\xed\xd0\xc3kF\xbe\xb7e\xb5N\xe1h\xd5t\x0c\x95\xf0\xb9c\x97\x84\xa8\x07f\xe8\xcb!'
Receive: 5 43.510591 43.510226 49: seq: 1f, identify_response offset=1840 data=b'\xc7\xe6\x02\xd8\x01"\x9bv\x87\xc7\xf5\x1d\x1ca\xf9\xf8\xf4 O\x05!\xf6~9\x9d\\\xfegz\xe6\xc5\xff\x85\xce\x15v +Po'
Receive: 6 43.510954 43.510637 49: seq: 10, identify_response offset=1880 data=b"\x85\xbd\xc0W\xbdk\xec\x85s\xd5[c\x0f\xa08\xf5>`o\xae\xb9\xdc`o\xa1\xb9|\x94<=\xc9\xe6\xcb 3\xc0\x1bU\xd6'"
Receive: 7 43.511433 43.510998 49: seq: 11, identify_response offset=1920 data=b'\xbd \x08\xa4|\xa9\x88\xa6\xe1,\x97\xa2u%\x8f\xa6\x9e\xff\x0c\xe7T\xab\x94V\xc8e<9\x86\xde\xe1\xcb\x96/\x19(\x83\xa7\x90\x8d'
Receive: 8 43.511808 43.511482 49: seq: 12, identify_response offset=1960 data=b'\xa6MI$\x94/)2U\xca\x11h\x953\xd9\x02\xfb\x9b\xe3\x06\x00S\n\x0cg-<\\\xe5SLj\x8c\xc9@\xb3%$J\x85'
Receive: 9 43.512236 43.511912 49: seq: 13, identify_response offset=2000 data=b'\xb2e)k\x8bL?\xearJ\xbe\xcb\xaaF$\xc3\xc0\x9aX\x05I\x84\xa5B\x14\xbb\x8a\xe7\xf0\x94(\x04\xbb\xbd\xa6W\xf4*\xad`'
Receive: 10 43.512647 43.512287 49: seq: 14, identify_response offset=2040 data=b'\xbac\x10_\x19\xe6(\x06i\x95r)\x93a\x92\xbd\xee\x0bhS\xb8\x13\xac\x81\x80\r\x07"\x10\x00k\xff\xd6!\x90`\xc89-\x81'
Receive: 11 43.513052 43.512698 49: seq: 15, identify_response offset=2080 data=b's\xda1`\x9e\xaa#Q-\x86\xde\xa4\x8aX\x1e\x02C%\xbd\x9ciTb\x0e\t\xd9`;^1]\xae0\xebA\xa7+\xaa \xb3'
Receive: 12 43.513468 43.513102 49: seq: 16, identify_response offset=2120 data=b"&m\x05L\xc9'\x8e\xd4\x99\x9eh9@\x1f\xd1\xc9:\xf2\xc7\xdf\x10Gc%\xef_\xaa\x927P\x1c\xf3\xceCBK\xb7\xfe\x8a}"
Receive: 13 43.513895 43.513523 49: seq: 17, identify_response offset=2160 data=b"Z\xae~$\x14\x8f=\xf0\x96\x87G=6u\xc7\x1e\xd6\xcbk5\x81i\x02'\x1e)#Q\x06\xba%\xbc\xc7\xc0\xdf\x99\xda\x95\xdeW"
Receive: 14 43.514297 43.513972 49: seq: 18, identify_response offset=2200 data=b'zB\x17hm\x9d\x99\xf0\x18\x81\x0bM\xa5J\xe5\xd2D\xec\x18\x90\xa1\xe8\xe9\x81\x03\x98\xa32\x8c\x9e<\xd4/\\K\xcf\xb0R\x87\x99'
Receive: 15 43.514701 43.514376 49: seq: 19, identify_response offset=2240 data=b"\xc7N\x9b\xba\x9e\xa9\xe4\xd1\x9b\xf9h^\xbd\xfe\xcc\xfe\x81#\x13\\\x18#\xff\xf0\x1c\x81\xb0\x00'\xbd\x00\x13\xb5;\xa8\x93\x1efJg"
Receive: 16 43.515077 43.514755 49: seq: 1a, identify_response offset=2280 data=b'\\!\xf7l_4\x8a[\xe8\xc81\x00\xde.\r\xdc\xcc]\xfa\x86\xb77\xd7:$pu\x07o\xf0\x14\xae\x93W\x19Z\xb8\xb2\t\x9c'
Receive: 17 43.515513 43.515128 49: seq: 1b, identify_response offset=2320 data=b'(\x84\x00K\x17\xf0T\xcb\xfb\x12K?\xb0\x18Q%S\t[\x9a\x03\x7f\xe1\xa8|\x04\x94__\xb0O\xdb\\:\x85\xa2\xc6\xca\xde\x1d'
Receive: 18 43.515939 43.515565 49: seq: 1c, identify_response offset=2360 data=b"j\\\x02m\x06\xadv[\xd6\xaf\x84\xd4?\x81'\xa5\x8c\xc4Ao\x95\xa1\x0e?C\xb8\x13h\x1fr\x02\xe3\x9d;QT\r\xe1Y\xaa"
Receive: 19 43.516308 43.515989 49: seq: 1d, identify_response offset=2400 data=b'r\xca\xa9\nOj\x87c\x99N\x8c\x835m\xbd\x03\x9b8\xc0\xd1S\x94m\x0b\x80\x10N\t\xba\xe6\x18\x07\xf0\xbd\xfe\xc0\x95P\xe8\xf9'
Receive: 20 43.516665 43.516352 49: seq: 1e, identify_response offset=2440 data=b'`\xae-l\x83\xaa\x06kBg\xc1\x8f\x1a\x1bCp\xa4\x1d\xf6Z\x94%\xe0\xa4\x0c\xf8\rj\xb1\x84\xfc\xecJ\xa3\xa1o\xac\xc0o\x15'
Receive: 21 43.517028 43.516707 49: seq: 1f, identify_response offset=2480 data=b'\x1bpt\xbaCy\x00\xa4(\x0e\xfdA\x8fi\x7f\x00\xf17\xba\xde*\xbf\xb9\x003\x19\x1ad\xacr?\xbflT\xac\xe8\xea\x9amS'
Receive: 22 43.517460 43.517071 49: seq: 10, identify_response offset=2520 data=b')\x1dI\x86\x85\xaeG\xd7\xa4Pe@(+\xccT\x97y\x94\xfa\xc0\x95\x00\x11\x05\x97\x81\xfa\xa9\x12}\x830\x11v\xc4\xb2\xbe\xb4o'
Receive: 23 43.517823 43.517502 49: seq: 11, identify_response offset=2560 data=b'\xfct"?[\xc1\xe3\xbf\xaf>\x03\x0f\x08\x8a9}\xd5p\xc6\x85\x9d\x80\x8b"c\x07\x88+\xeaV\xfa\'`M\xc12\xa1\xae\xd2V'
Receive: 24 43.518181 43.517865 49: seq: 12, identify_response offset=2600 data=b'\x97)\xfc\xd5U\t\x11\xf3\x05\x18\xa4\xcf\xa5\x0e\x84FR8\x80\xfc\\fB\xab\xfa\x88\x96S-S`\x81\t\xc3\x1c]q\x06\xd38'
Receive: 25 43.518592 43.518225 49: seq: 13, identify_response offset=2640 data=b'\x15\x1a\xa8-\xbd_\x8aZ\xa6-\xa6\x8e\xe04\x88E\xfd\x925b\xcdZE`\xb2u\x84\xee\x90\x99\x8e\xea\xba\x98\x9a\x00\xdf\x04\xde<'
Receive: 26 43.518955 43.518634 49: seq: 14, identify_response offset=2680 data=b'\x8ad\xd6S\x9dXfE\xea\xc4\x91\xbc,\xe8\xc4\xf1,B\x1c\x00\x9c\xca"\x03\xe5\xc0\xfa\xc9\xcd\xa7\'vs\xff\xd3\x0bb-\xd0F'
Receive: 27 43.519367 43.518997 49: seq: 15, identify_response offset=2720 data=b'\x03\x1e\xce\xe9[\xa1\xae\xea\x0c\n\x14\xd23\x93S/\xe0s\x0c\x8c\xfa\x9b\xdf`I\xea\xd4l\x98\x9c\xa1\x17\xce9f2S\xf1d\xaa'
Receive: 28 43.519726 43.519410 49: seq: 16, identify_response offset=2760 data=b'\xd5\xf7\xb8\xea\x02\x1e#j\x00S(\x0e\xe1\x1e\x98\xb8\xe8ml\x9f \xe7\x81\xf9\xa4\x07\x19PUH\xe5+E\xd6VqL_\xa6|'
Receive: 29 43.520088 43.519767 49: seq: 17, identify_response offset=2800 data=b'\xfaA\xdcH\xccc\x1cO!\x8b\xf5\xb2|\xf4-Q\xd5\x12\xd5H\x9c\xfd\xd1\x14uE[\x80\x85\x9b\x02\xf59\x06a]\x11\x1e\xb0\xde'
Receive: 30 43.520503 43.520130 49: seq: 18, identify_response offset=2840 data=b'\xd7\x07\x88t\xc7\x9b\xb8\x05g\\\x1f\xd9Jl\xa2o\xc7\xa9\xe4\xc8\xbeV\xa6g\xab\x9d\x0e\xad){\xd2\xcb\xf2\x02i\x11?Z\xa5\xb0'
Receive: 31 43.520861 43.520545 49: seq: 19, identify_response offset=2880 data=b'1\xe0!\xbd,B[\x1d=\xaaS9\x02\xe8\x1a\xa8\xab\x90\xd0\xa9l*\x9d\xe8G{\x9fe\xb2|\x8b\xe2\xe1{\x14\x8e\xe9~\x1d8'
Receive: 32 43.521218 43.520903 49: seq: 1a, identify_response offset=2920 data=b'\xc7tN\x8e\x0b(\x0f\x1e\xe3\xee\xe3X`\xa6\xad2>\xaa\x8d\x9ecbt\xd7\x0cJX\xb6\\\xa3\x8aL\xfa\tJ\xa5\x0e\x97\xe5s'
Receive: 33 43.521645 43.521261 49: seq: 1b, identify_response offset=2960 data=b'/\xa3xN\x85C\xc0K\x10\r\x12\x9df\x842\x17Y^\xb1\x01RW:O\xeb0:U\xff8\xbaI\xb7\xc6\xe5^\xa9\x17\r\x0b'
Receive: 34 43.522007 43.521688 49: seq: 1c, identify_response offset=3000 data=b'\x0e\x7fi\x02\xbeD\xafm\'q\xe2" ,+\xac\xe9\x8a\xfe\xa0\xfe\x88\xdf\x95\xef\xf8\xb6\x880\xaa0P\x15\xba@\xbe\xf1(\xf6\x0c'
Receive: 35 43.522416 43.522049 49: seq: 1d, identify_response offset=3040 data=b'\xef\xf4dH\xe8)\xda\xab\x8b\x8em\xe1\xe1X\x06,9\x90\xbc\x0b\xb7\x98`\x8d\r\x02\x81\xae\t\x9c\xae\xba;\xb6\x87\xb9\x87\xbe\x8a0'
Receive: 36 43.522770 43.522459 49: seq: 1e, identify_response offset=3080 data=b'\xfa\x10\xd9\x0fB\x05\xbe\xb3\xd4\x7f\xb1\x80\xe0\xf72\xbd\xf0\xfc\x8b\xe9y\x10.\xcewi\x10N\x830\\\x84\x93/\xff\x03u\x9f\x0c\xd8'
Receive: 37 43.523004 43.522812 9: seq: 1f, identify_response offset=3120 data=b''
Receive: 38 43.524996 43.524851 14: seq: 10, canbus_id canbus_uuid=b'\x8d`\xb0\xd4\xc7p' canbus_nodeid=4
Receive: 39 43.525244 43.525101 12: seq: 11, uptime high=0 clock=438667060
Receive: 40 43.575544 43.575399 11: seq: 12, clock clock=458786759
Receive: 41 43.625852 43.625710 11: seq: 13, clock clock=478907815
Receive: 42 43.676126 43.675981 11: seq: 14, clock clock=499019311
Receive: 43 43.726476 43.726286 11: seq: 15, clock clock=519159509
Receive: 44 43.777529 43.777375 11: seq: 16, clock clock=539579695
Receive: 45 43.827879 43.827730 11: seq: 17, clock clock=559720117
Receive: 46 43.878160 43.878019 11: seq: 18, clock clock=579832939
Receive: 47 43.928480 43.928320 11: seq: 19, clock clock=599961423
Receive: 48 43.929627 43.929431 11: seq: 1a, clock clock=600400352
Receive: 49 44.436764 44.436602 10: seq: 1b, config is_config=0 crc=0 is_shutdown=0 move_count=0
Receive: 50 44.447029 44.445957 15: seq: 12, config is_config=1 crc=924824692 is_shutdown=0 move_count=1024
Receive: 51 44.454719 44.454499 13: seq: 14, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 52 44.455070 44.454833 13: seq: 15, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 53 44.455496 44.455174 13: seq: 16, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 54 44.455802 44.455566 13: seq: 17, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 55 44.456140 44.455902 13: seq: 18, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 56 44.456639 44.456332 13: seq: 1a, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 57 44.456985 44.456746 13: seq: 1b, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 58 44.457326 44.457088 13: seq: 1c, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 59 44.457704 44.457466 13: seq: 1d, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 60 44.458039 44.457800 13: seq: 1e, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 61 44.458498 44.458226 13: seq: 10, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 62 44.458834 44.458599 13: seq: 11, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 63 44.459173 44.458934 13: seq: 12, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 64 44.459542 44.459271 13: seq: 13, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 65 44.459878 44.459639 13: seq: 14, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 66 44.460305 44.460059 13: seq: 16, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 67 44.460645 44.460408 13: seq: 17, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 68 44.460977 44.460741 13: seq: 18, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 69 44.461309 44.461072 13: seq: 19, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 70 44.461641 44.461406 13: seq: 1a, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 71 44.462063 44.461820 13: seq: 1c, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 72 44.462455 44.462165 13: seq: 1d, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 73 44.462790 44.462552 13: seq: 1e, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 74 44.463127 44.462887 13: seq: 1f, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 75 44.463499 44.463231 13: seq: 10, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 76 44.463920 44.463676 13: seq: 12, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 77 44.464257 44.464022 13: seq: 13, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 78 44.464595 44.464354 13: seq: 14, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 79 44.464930 44.464692 13: seq: 15, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 80 44.465263 44.465028 13: seq: 16, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 81 44.536675 44.534908 8: seq: 1c, neopixel_result oid=6 success=1
Receive: 82 44.537246 44.537142 8: seq: 1d, stepper_position oid=7 pos=0
Receive: 83 44.537696 44.537457 13: seq: 1e, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 84 44.537953 44.537851 8: seq: 1f, stepper_position oid=10 pos=0
Receive: 85 44.538305 44.538068 13: seq: 10, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 86 44.538555 44.538412 8: seq: 11, stepper_position oid=13 pos=0
Receive: 87 44.538871 44.538631 13: seq: 12, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 88 44.539083 44.538977 8: seq: 13, stepper_position oid=15 pos=0
Receive: 89 44.539457 44.539194 13: seq: 14, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 90 44.539671 44.539564 8: seq: 15, stepper_position oid=16 pos=0
Receive: 91 44.540019 44.539780 13: seq: 16, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 92 44.540224 44.540123 8: seq: 17, stepper_position oid=17 pos=0
Receive: 93 44.540601 44.540337 13: seq: 18, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 94 44.546409 44.546106 13: seq: 1a, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 95 44.546761 44.546523 13: seq: 1b, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 96 44.547113 44.546874 13: seq: 1c, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 97 44.547544 44.547212 13: seq: 1d, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 98 44.547848 44.547610 13: seq: 1e, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 99 44.550567 44.550318 12: seq: 1f, shutdown clock=848771824 static_string_id=Command request
MCU 'ebb' shutdown: Command request
clocksync state: mcu_freq=12000000 last_clock=26644819 clock_est=(44.099 22591072 12000650.627) min_half_rtt=0.000080 min_rtt_time=44.436 time_avg=44.099(0.017) clock_avg=22591072.991(201801.925) pred_variance=106157576.492 clock_adj=(-0.212 12000278.250)
Dumping serial stats: bytes_write=1341 bytes_read=4880 bytes_retransmit=0 bytes_invalid=0 send_seq=142 receive_seq=142 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 43.968953 43.968953 9: seq: 1a, identify offset=1040 count=40
Sent 1 43.970084 43.970084 9: seq: 1b, identify offset=1080 count=40
Sent 2 43.971211 43.971211 9: seq: 1c, identify offset=1120 count=40
Sent 3 43.972333 43.972333 9: seq: 1d, identify offset=1160 count=40
Sent 4 43.973472 43.973472 9: seq: 1e, identify offset=1200 count=40
Sent 5 43.974588 43.974588 9: seq: 1f, identify offset=1240 count=40
Sent 6 43.975724 43.975724 9: seq: 10, identify offset=1280 count=40
Sent 7 43.976844 43.976844 9: seq: 11, identify offset=1320 count=40
Sent 8 43.977960 43.977960 9: seq: 12, identify offset=1360 count=40
Sent 9 43.979076 43.979076 9: seq: 13, identify offset=1400 count=40
Sent 10 43.980195 43.980195 9: seq: 14, identify offset=1440 count=40
Sent 11 43.981321 43.981321 9: seq: 15, identify offset=1480 count=40
Sent 12 43.982479 43.982479 9: seq: 16, identify offset=1520 count=40
Sent 13 43.983596 43.983596 9: seq: 17, identify offset=1560 count=40
Sent 14 43.984725 43.984725 9: seq: 18, identify offset=1600 count=40
Sent 15 43.985858 43.985858 9: seq: 19, identify offset=1640 count=40
Sent 16 43.986979 43.986979 9: seq: 1a, identify offset=1680 count=40
Sent 17 43.988111 43.988111 9: seq: 1b, identify offset=1720 count=40
Sent 18 43.989228 43.989228 9: seq: 1c, identify offset=1760 count=40
Sent 19 43.990429 43.990429 9: seq: 1d, identify offset=1800 count=40
Sent 20 43.991551 43.991551 9: seq: 1e, identify offset=1840 count=40
Sent 21 43.992667 43.992667 9: seq: 1f, identify offset=1880 count=40
Sent 22 43.993796 43.993796 9: seq: 10, identify offset=1920 count=40
Sent 23 43.994909 43.994909 9: seq: 11, identify offset=1960 count=40
Sent 24 43.996023 43.996023 9: seq: 12, identify offset=2000 count=40
Sent 25 43.997134 43.997134 9: seq: 13, identify offset=2040 count=40
Sent 26 43.998252 43.998252 9: seq: 14, identify offset=2080 count=40
Sent 27 43.999428 43.999428 9: seq: 15, identify offset=2120 count=40
Sent 28 44.000558 44.000558 9: seq: 16, identify offset=2160 count=40
Sent 29 44.001685 44.001685 9: seq: 17, identify offset=2200 count=40
Sent 30 44.002805 44.002805 9: seq: 18, identify offset=2240 count=40
Sent 31 44.003922 44.003922 9: seq: 19, identify offset=2280 count=40
Sent 32 44.005035 44.005035 9: seq: 1a, identify offset=2320 count=40
Sent 33 44.006155 44.006155 9: seq: 1b, identify offset=2360 count=40
Sent 34 44.007294 44.007294 9: seq: 1c, identify offset=2400 count=40
Sent 35 44.008480 44.008480 9: seq: 1d, identify offset=2440 count=40
Sent 36 44.009595 44.009595 9: seq: 1e, identify offset=2480 count=40
Sent 37 44.010713 44.010713 9: seq: 1f, identify offset=2520 count=40
Sent 38 44.011830 44.011830 9: seq: 10, identify offset=2560 count=40
Sent 39 44.012950 44.012950 9: seq: 11, identify offset=2600 count=40
Sent 40 44.014062 44.014062 9: seq: 12, identify offset=2640 count=40
Sent 41 44.015182 44.015182 9: seq: 13, identify offset=2680 count=40
Sent 42 44.016303 44.016303 9: seq: 14, identify offset=2720 count=40
Sent 43 44.017475 44.017475 9: seq: 15, identify offset=2760 count=40
Sent 44 44.018610 44.018610 9: seq: 16, identify offset=2800 count=40
Sent 45 44.019731 44.019731 9: seq: 17, identify offset=2840 count=40
Sent 46 44.020878 44.020878 9: seq: 18, identify offset=2880 count=40
Sent 47 44.022000 44.022000 9: seq: 19, identify offset=2920 count=40
Sent 48 44.023117 44.023117 9: seq: 1a, identify offset=2960 count=40
Sent 49 44.024235 44.024235 9: seq: 1b, identify offset=3000 count=40
Sent 50 44.025456 44.025456 9: seq: 1c, identify offset=3040 count=40
Sent 51 44.026585 44.026585 9: seq: 1d, identify offset=3080 count=40
Sent 52 44.027699 44.027699 9: seq: 1e, identify offset=3120 count=40
Sent 53 44.028333 44.028333 9: seq: 1f, identify offset=3125 count=40
Sent 54 44.030503 44.030412 6: seq: 10, get_canbus_id
Sent 55 44.031078 44.030987 6: seq: 11, get_uptime
Sent 56 44.081670 44.081579 6: seq: 12, get_clock
Sent 57 44.132264 44.132173 6: seq: 13, get_clock
Sent 58 44.182819 44.182728 6: seq: 14, get_clock
Sent 59 44.233385 44.233294 6: seq: 15, get_clock
Sent 60 44.284060 44.283969 6: seq: 16, get_clock
Sent 61 44.334649 44.334558 6: seq: 17, get_clock
Sent 62 44.385264 44.385173 6: seq: 18, get_clock
Sent 63 44.435855 44.435764 6: seq: 19, get_clock
Sent 64 44.436732 44.436641 6: seq: 1a, get_clock
Sent 65 44.447439 44.447348 6: seq: 1b, get_config
Sent 66 44.448246 44.448147 7: seq: 1c, allocate_oids count=13
Sent 67 44.448408 44.448178 9: seq: 1d, config_spi oid=0 pin=gpio1 cs_active_high=0
Sent 68 44.448515 44.448192 8: seq: 1e, config_adxl345 oid=1 spi_oid=0
Sent 69 44.448677 44.448204 9: seq: 1f, config_spi oid=5 pin=gpio9 cs_active_high=0
Sent 70 44.448887 44.448221 15: seq: 10, spi_set_software_bus oid=0 miso_pin=gpio3 mosi_pin=gpio0 sclk_pin=gpio2 mode=3 rate=5000000
Sent 71 44.449049 44.448230 9: seq: 11, config_endstop oid=2 pin=gpio24 pull_up=0
Sent 72 44.449148 44.448249 7: seq: 12, config_trsync oid=3
Sent 73 44.449334 44.448262 12: seq: 13, config_tmcuart oid=4 rx_pin=gpio20 pull_up=0 tx_pin=gpio20 bit_time=300
Sent 74 44.449512 44.448274 11: seq: 14, config_digital_out oid=8 pin=gpio13 value=0 default_value=0 max_duration=0
Sent 75 44.449682 44.448282 10: seq: 15, set_digital_out_pwm_cycle oid=8 cycle_ticks=120000
Sent 76 44.449860 44.448291 11: seq: 16, config_digital_out oid=9 pin=gpio14 value=0 default_value=0 max_duration=0
Sent 77 44.450030 44.448297 10: seq: 17, set_digital_out_pwm_cycle oid=9 cycle_ticks=120000
Sent 78 44.450874 44.449298 59: seq: 18, config_analog_in oid=10 pin=gpio28, spi_set_software_bus oid=5 miso_pin=gpio11 mosi_pin=gpio8 sclk_pin=gpio10 mode=1 rate=4000000, config_thermocouple oid=6 spi_oid=5 thermocouple_type=MAX31865, config_digital_out oid=11 pin=gpio7 value=0 default_value=0 max_duration=60000000, set_digital_out_pwm_cycle oid=11 cycle_ticks=1200000, config_stepper oid=7 step_pin=gpio18 dir_pin=gpio19 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=12 pin=gpio17 value=1 default_value=1 max_duration=0, finalize_config crc=3237245062, spi_send oid=5 data=b'\x80\xc3'
Sent 79 44.452621 44.451753 62: seq: 19, queue_digital_out oid=8 clock=29178178 on_ticks=0, queue_digital_out oid=9 clock=29178417 on_ticks=0, query_analog_in oid=10 clock=39745017 sample_ticks=12000 sample_count=8 rest_ticks=3600000 min_value=0 max_value=32760 range_check_count=4, query_thermocouple oid=6 clock=39265017 rest_ticks=3600000 min_value=15240 max_value=32318 max_invalid_count=3, queue_digital_out oid=11 clock=29178989 on_ticks=0, get_config
Sent 80 44.465636 44.465434 14: seq: 1a, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 81 44.470230 44.469941 19: seq: 1b, tmcuart_send oid=4 write=b'\xea\x03\x080\x80\x00\n\x08\xb8\x87' read=0
Sent 82 44.472939 44.472737 14: seq: 1c, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 83 44.477505 44.477216 19: seq: 1d, tmcuart_send oid=4 write=b'\xea\x03h0\x80\x00\x12\x08 \xda' read=0
Sent 84 44.480215 44.480013 14: seq: 1e, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 85 44.484815 44.484526 19: seq: 1f, tmcuart_send oid=4 write=b'\xea\x03\x88=\x9a\x06\x02h*\xbf' read=0
Sent 86 44.487513 44.487311 14: seq: 10, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 87 44.492141 44.491852 19: seq: 11, tmcuart_send oid=4 write=b'\xea\x03\x082\x80\x10\x9ah"\x9c' read=0
Sent 88 44.494840 44.494638 14: seq: 12, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 89 44.499410 44.499121 19: seq: 13, tmcuart_send oid=4 write=b'\xea\x03h2\x80\x1e\xfa\xef?\xdf' read=0
Sent 90 44.502114 44.501912 14: seq: 14, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 91 44.506679 44.506390 19: seq: 15, tmcuart_send oid=4 write=b'\xea\x03\x08>\xe4\x1ar\x88\xa4\x85' read=0
Sent 92 44.509392 44.509190 14: seq: 16, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 93 44.513971 44.513682 19: seq: 17, tmcuart_send oid=4 write=b'\xea\x03(2\x80\x00\x02\x88"\xf3' read=0
Sent 94 44.516678 44.516476 14: seq: 18, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 95 44.521282 44.520993 19: seq: 19, tmcuart_send oid=4 write=b'\xea\x03\x088\x80\x00\x02\x08 \xba' read=0
Sent 96 44.523991 44.523789 14: seq: 1a, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 97 44.540848 44.540749 7: seq: 1b, stepper_get_position oid=7
Sent 98 44.541443 44.541241 14: seq: 1c, tmcuart_send oid=4 write=b'\xea\x03H-\xd5' read=10
Sent 99 44.550440 44.550349 6: seq: 1d, emergency_stop
Dumping receive queue 100 messages
Receive: 0 43.955429 43.954333 49: seq: 1e, identify_response offset=520 data=b'\xf3!G\xddz>#9,\x81\xc8\x9cd3\xc7[\xf7\xbc?b7\xe5+\xf8\x91\xc3\xa1\xadf7\x86v\x04+\x07\x86\x94:\x8a\x81'
Receive: 1 43.956551 43.955475 49: seq: 1f, identify_response offset=560 data=b"\xdd\x101\x86\x8eA<\xf1|'\xb6;\xc5a\xb2\xf2\xe1\xc1\x91\xb65?\xe2\xa4v/\x1f^;N\xb2\x89''\x8d\xd3\x1f;\xac\xb7"
Receive: 2 43.957658 43.956596 49: seq: 10, identify_response offset=600 data=b'\xf2\xbd\xdc~\xff\xe6\xef\x10\xe5\x92dr\x16U\x8bfTJk&\x89\xb3\x1e9,\xd7.r\x94\xf2\x88\xb51)*;|m\xca|'
Receive: 3 43.958775 43.957703 49: seq: 11, identify_response offset=640 data=b'j\xcd\xac\xdcWyh\xe0\xd9\xda\xbb\x81c|\xb7\xa4\xc3T[\x13\xabDo\x86\x14\xeb\x14\xb0\x83\x1ak\xc9=\xa4\xb1cl\xd8\xf1~'
Receive: 4 43.959888 43.958819 49: seq: 12, identify_response offset=680 data=b'\xdfB(\xe9\x8eJ\xd4\xdfvB]8\xd7\x1e\xf6\xe5X\xf4\xd66\xfa\x97\xfc \x0e\xb1\xc1.\xa2\xe5\rb\xcf\x89\xb5\xc8a\xe9Q\x1e'
Receive: 5 43.961007 43.959931 49: seq: 13, identify_response offset=720 data=b'N\xac\x10Y+\xfe0\x82=\xb7\x90\xd9\xd6f\x06X\xb6\xca\x96I?\x91\x05\xc3\xc0\xcc\xda\xbe\xe2=\xde\x07y\xa5\xa7x\x15\x1b\x80\xe7'
Receive: 6 43.962128 43.961051 49: seq: 14, identify_response offset=760 data=b'^\x0c\xfc\x00\x02\x8d\x96\x00\x81\x14\xbe\xe7\xfd\x967\xe5k\x8e\x81\r\x88\x80%\nr\xf9\xae\xdd\xf3\x83\xb4#\x8b}\xe7;\x80\x9e\xdb\xa4'
Receive: 7 43.963246 43.962172 49: seq: 15, identify_response offset=800 data=b'3MK@\xba\x0b\xac\xc4\xae\x95q/\xb6[\xde#\x13\xb2\xa5\xe0\x10g\xeer\x95\xf4\x80\xa6b\xe0V@18\xe7F@:\x01\x97'
Receive: 8 43.964430 43.963289 49: seq: 16, identify_response offset=840 data=b'\xceI\x86\xac\xecK\n\x89og[\xf0\xe6\xb2h\x1eF\x99\x8b\n\xe4\x17\xeb%$\x1d\xe4\xaeg\xea\x18x\x08M\xc7\x0e\x15\x03\xae\xf9'
Receive: 9 43.965551 43.964474 49: seq: 17, identify_response offset=880 data=b'v\xa6\xc3u.\x81\x84\x1c\x8c\xd2f#\x1c\x93\xe8\x17Q\x00\x86Za^\xae\xd4`\xa0!\x8cT\xa4\x1fm"\\\xb9\x17\xc3\xb5\xbc\xe6'
Receive: 10 43.966671 43.965594 49: seq: 18, identify_response offset=920 data=b':\x03\xae\t\x10\xe3\x10\x90\xedG9\x98\xaa\x18\x05\xfc\xe3/\xaa\x8eK\xb2\xe34r\xa7d\xbb\x19\x9e\x8b\x9e\xfb\xc7\xc1\xf7\xac\xbfU\x85'
Receive: 11 43.967796 43.966714 49: seq: 19, identify_response offset=960 data=b'\x19\x1e\xc3\xb4H\t\x93\xb6\x93\x90\x8f\x14\xf9\xa8x3\x88\r\xd4\x1f\x9b\r\\\xa8\x1c\xd6\xa6e \xc4d\x00\xd8\x1b\xbfb2\xc3\x0e.'
Receive: 12 43.968909 43.967839 49: seq: 1a, identify_response offset=1000 data=b'\xdc\xb5u\xa5&\xdf6\x02\xc6\xfb\xbe\x9d\x18\xc5\n\xd4h\xe2\xbb\x12\xba5\x87\xcc\xdf\x19\xbb\xca\x99\n\x15V\xbb\xd1\xe3%\x03\xc3&\x9b'
Receive: 13 43.970041 43.968953 49: seq: 1b, identify_response offset=1040 data=b'\n\xaa\x9d\x89\xc1\xc2u\xeb\x00N\xd9\xe0\xe8\x82\xdfj\xe5\x00&\xe5O\x80h\x11\xc2\x85\x88\x16K\x0b\x10VH\xff\xa7\xb7\xed\x9d\xb7\xe9'
Receive: 14 43.971168 43.970084 49: seq: 1c, identify_response offset=1080 data=b'\xf4\xe3fP\x1dn\xe1\xe0\x8e\x97\x8f^]\x95D\x86\x86\xa0\xac\xb2\x14t-\x04\xb4\xf0~/Pg\x06\xc1\xa4\x10\t\x85\xba\x98@\x1d'
Receive: 15 43.972290 43.971211 49: seq: 1d, identify_response offset=1120 data=b'\x88\xd4"\t\xaa\x8e\x10\xcd<\x80S\xf6\x16\x04\x89\x95eiZ`\x04\xb8\x96\xcb)XH\xd3\xd2\x92\x1c\x94 !\x9e4\x80;@d'
Receive: 16 43.973430 43.972333 49: seq: 1e, identify_response offset=1160 data=b'\r\xef \x87\x7f\xa5\x96\xc7\x88\x04)[lHGK\xcb\x10a\x0e\x84\x04\x00\xd6d\x8f\xa5\xb5\xaf\\\xe2\xd9\xca\xc4Th\x02\xe9\x14\xa2'
Receive: 17 43.974546 43.973472 49: seq: 1f, identify_response offset=1200 data=b'l\xe5Y\xca\x82t4\xf2c5\xb5\xbd\xa3\xf5k\xa9\xc8\x1e\tJ)\x0bn\xcd\x13bMj\x801w3W;\xf2\x9e\xd2\x95\t;'
Receive: 18 43.975682 43.974588 49: seq: 10, identify_response offset=1240 data=b';\x15\xc2\xe0W@B\x80\x08\xa0\xaa8\x88\xf6\x91\x1e\xaa\xf3\x14\xf4\xc3\xfb\xe0\x00X\x10\xc2\xf8<\x04\x0f\x02\xa0;9\x00R\x1c\xa8\xd2'
Receive: 19 43.976802 43.975724 49: seq: 11, identify_response offset=1280 data=b'\xcf\xe2\x9c\xd4\x81phA\x87\x1a\xfe\xa2I\x80\xea\xc4\x86T\xd1S\x02\x8b\x08\xc8\xc8\xe3OjJ\x90\n\x92\xe2\xca;|\xe2m\x9c\x93'
Receive: 20 43.977917 43.976844 49: seq: 12, identify_response offset=1320 data=b'\xba\xe8\xb6\x9c\x13\x9c\x17\x1f\xbd\xdd$5\xbb\x934\x83K:\xcd\xec\xdb\x8a{I\x02\x8e,\xdc\x91c9f/dk2\xcb\xbe\x95\xe2'
Receive: 21 43.979033 43.977960 49: seq: 13, identify_response offset=1360 data=b'X\xddw\x80t\xa1\xb9\xf9:\x1f\t\x98\x0c\x95\x94\xdfJ\xc3\xd9j\nu<\x0bgK\x84R\xc5c\x8e\xa9\x1er\x82\xc0R\xdc\xfaM'
Receive: 22 43.980152 43.979076 49: seq: 14, identify_response offset=1400 data=b'\xb4v\x00\xaa\xe6@\xeb\xa5\x84\xc4l~\xf2\xb2\x15\x9c\x80\x8bu\xe97\x11\xb5\xca\x9f6\xbdSr\x02\x8d\xe8\xd3(C\xf4\xe9#\x1e\x00'
Receive: 23 43.981279 43.980195 49: seq: 15, identify_response offset=1440 data=b"&\xb1rp\x83_R\xf2\xae\xedu\xf1B\xde\xab\xe6\xd6H\xf8K'@%~\xf5\xb4\xb6\x98\x02.| \x10\n\xa5\xcac~\xec\xf9"
Receive: 24 43.982436 43.981321 49: seq: 16, identify_response offset=1480 data=b'@\xfa\xc5\x94\xa9\xd8\xf78\x7fw\x91_\x9f\xff\x8a%\xc1\x1aT\xf4\xc3\xe7\xbb\xfc\xd3\xd5\xcd\x1d>\x1e\xe7\x05vZ:\xd1\xce\xdf\xe2\xdf'
Receive: 25 43.983552 43.982479 49: seq: 17, identify_response offset=1520 data=b'h\x16l?\xe8\xedTmg\xe1v\xa9\xb7Wj{\x1dnWz\x1bjZ\xf5\x93\x84\x00\xdc\x00,\x08`\x19\x02l4@L\xf4\xc5'
Receive: 26 43.984683 43.983596 49: seq: 18, identify_response offset=1560 data=b'\x07\x04n\r\x00Q\x18\x1f\x90\xb83\x00Dc\x1c\x12\x19\x19\t\x10\x8d!\x89\x91\x91\x00Q\x18\x12\x18\x19\tDZ\x80!\x81\x91\x95\x01'
Receive: 27 43.985815 43.984725 49: seq: 19, identify_response offset=1600 data=b'\x11\x18\x85\x04FV\x06D`t@\xa0\x95\x01Q\x18\x1f\x90he@4\xc6\x13"\xc1e\x03%\'\x04\x15\x02MU\xbdT\x7f\x17!'
Receive: 28 43.986937 43.985858 49: seq: 1a, identify_response offset=1640 data=b"P\x19(lM?\xab\x10\xae\n\xf4\xa6\xef\x0c/\xb5\xc2\xd7\xbcG\xf43\x0f\xc1\x1e\x02C\xca\xe8'\r\xe1\xca\xc0\x1a\x88\x8b\x18\xd9\xb8"
Receive: 29 43.988069 43.986979 49: seq: 1b, identify_response offset=1680 data=b'8\xbfA\xd0\x7f\xde^\xfe\xfc\xf9\xf2\xe6\xe2\xdf\xf8\x14S\xff`\xeb\xe3O\x17\x1f\xd4\x0e>\xbf\xcc\xea\xd5\xcd\xd5\xfd\xd5\xf9G\x85\xdc\n'
Receive: 30 43.989185 43.988111 49: seq: 1c, identify_response offset=1720 data=b'\x18\x10]_|\x86i\xdf\xc5s\xd5`\xfc\xf4\xcb59W\x8c\xd5\xd4\xed\xe5\xc5\xe5\xd5\xbf.\xf3_\xaen\xde\xfd\xf4\x0bF\xa9\x18\x17'
Receive: 31 43.990387 43.989228 49: seq: 1d, identify_response offset=1760 data=b'\xef.oaQ\x91\tt\x1c\xf8\xd4\xdd\xfd\xf9\xfd]~\xf7\xf9\xfa\xee\xe7\xfc\x87\xf3\xbbKD\xb6\xc0\xe5\xcbO\x9f.o\xf3\x1f~\xba'
Receive: 32 43.991509 43.990429 49: seq: 1e, identify_response offset=1800 data=b'\xff1\xbf|\xf7\x1e\xd6\xa3/\xf8\xc8\x1a\xe1\xd9\xa7\x1a\x13\xaa\xad\xa9\x1f\x1cz\x88\xca\xa6\x17\x0cj\x94\x1e\x1b\xa8\xb6\x98F\x95z$j'
Receive: 33 43.992623 43.991551 49: seq: 1f, identify_response offset=1840 data=b'\xdf\xa3\x07\x04:YF\xa3\xadz\x8ai\xb7Y\xaa\x11\xaahE\xa3\x07\xf5\xac\xd5V\x1f\xd1%h\xdf\x11\xdd\x82\x96\x1c\xd15h\xb3\x11'
Receive: 34 43.993754 43.992667 49: seq: 10, identify_response offset=1880 data=b'\xdd\x83\xd6\xa9\xe2\x11\xe4\x15\x13\x8c\xee/\xaf\x81\xaf\xf3\xfb\xcf\xb7\x8aU CY\xe7\xec\xec?\xf3\xb7\xc9\xfc\xbf_&i\x13\x1e\xf0\xaa'
Receive: 35 43.994866 43.993796 49: seq: 11, identify_response offset=1920 data=b'y\x1b%I\xa2X+d6O\x97\x95bn\xa8y6\x8fb\xa0,\xd6\xa7\xb4$\xb4\xd9Sf\xd5\x92\xd0\x06\x1c\xd3\x88$\xa1\x8d\x90'
Receive: 36 43.995981 43.994909 49: seq: 12, identify_response offset=1960 data=b'r,r\x98\xd1\x08\x8b&\xc4\x08E\x9b\xc0\xe0\xde\xc33^=L\x15\x07L\x85\xdd\r\xd5\xe5\xd46<\xafE!\xf1\xad\x0f\x06\x81\xa5'
Receive: 37 43.997092 43.996023 49: seq: 13, identify_response offset=2000 data=b'\x01+j\xd5ze\xbbB\xaa5\xde\x14\x0f5\xaf(\xb9\x9c\xebM\xf3 \xaeH^\xe7M\x8bU \x03#a\r$`VH)\xb6'
Receive: 38 43.998210 43.997134 49: seq: 14, identify_response offset=2040 data=b'\r\xaf\xe0\x19&$\xbbzG\xcd\xd4\x8b\xa2\x81\xed\x81Anb\x98\xdf\x19\x94$T\x870\x95b\xd8\xf3N\xc0\x98R\x85d\x1d$;'
Receive: 39 43.999387 43.998252 49: seq: 15, identify_response offset=2080 data=b'\xa0\x8c\n(8\xfb\x97\x01\x8b0\x86\x98\x8b\x1a0\x17\x03\x03\xe4\x86^\xeac\xd1{^\x03+"0\xcd\x90\xaeiU\xd5k\xaa\xdc\x85'
Receive: 40 44.000515 43.999428 49: seq: 16, identify_response offset=2120 data=b'\xebx\xc3L\xab\xc7\x9e\x079_P\xf7\x9duE/aK=\x0f\x95a\x99\x8d\x9eC\xd9(\x07eb?\xfe\x8ao\x10\xec\x82\xfeC'
Receive: 41 44.001643 44.000558 49: seq: 17, identify_response offset=2160 data=b"wA'bf\xd1IJ\x95\xe6U|\xc1n\xce/>\xd0\x0b\x08g\xe0@\xb7\xf7fm\xee\xaf\xdd^\x9e\xbf\xd3\x1b\x98bq\xe3\x9e"
Receive: 42 44.002761 44.001685 49: seq: 18, identify_response offset=2200 data=b'\xb29e\xef+\xaa\x95\x99\xe9a\xbbV<\x95\xacT\x7f\x19(\xfd5AY\x89[\x030\xe4\xb0\xd8s\xa8w\xa9Se6\xb1?\xab'
Receive: 43 44.003879 44.002805 49: seq: 19, identify_response offset=2240 data=b",2\xf3\xb0\xec\xdb'n8g\xd8\xe1D\x0fq\xdb\xb6\x1fj;\xa0\xd4k8\xd8\xd7\xaffKT\xe2\xf1\x03\xcab\xe4:\xe8\x92f"
Receive: 44 44.004993 44.003922 49: seq: 1a, identify_response offset=2280 data=b'\x15\x1b\x97DN2]4\xc5\x02V\x18\xde\xba~\xf1\x94;\xd1il\xa9wp\xf2`\xf1a@+\xd7\xc5\x0bjne\x04KE\xe9'
Receive: 45 44.006113 44.005035 49: seq: 1b, identify_response offset=2320 data=b'5\x97\xb2\x00U\xf2\xa6D\xeb\xd6\xf6\x80\x1bBJ\xb0r\tO\xdcj\xac\xd1\x8d\xe00V\xe3L\x17:\xca\x14\xf8\x13G\x8d`!\xfe'
Receive: 46 44.007235 44.006155 49: seq: 1c, identify_response offset=2360 data=b'\xf5\x03\xbb\xa2\xaf\x94Chh\xec\x88^\xa3\xc4\xd5\x03\x85\xc1\xa8\xdf\xd4\xed3\xbdpn\xc0\x8b\nF\xec\xa0_\xab \x85\xdf[\xd4F'
Receive: 47 44.008432 44.007294 49: seq: 1d, identify_response offset=2400 data=b'\x03O\x98\x8e*}\xea\xff\xeaU\xa0\xc5-/T\x0eP.\x8f\xae^\x89\r\x14\xc7p\xb3uHp\x90M\xdf\xee\xe1 97\x00\xc2'
Receive: 48 44.009551 44.008480 49: seq: 1e, identify_response offset=2440 data=b'/\xbe\xc6\xe1O-JNm\xc5[\xae\x99Ao\x87C\x16\xb0+\xd0A\xf0\x9b\xd2\x9d\x058\x90\n{\x16u\rue\xc9a\xd7\xef'
Receive: 49 44.010669 44.009595 49: seq: 1f, identify_response offset=2480 data=b']S\xa5\xecNZ\xc9|\xe3\x04~\xdb\xb9\x03\xe7&\xdd)\x02\x10B\xec\xc7\xbdY3\xce\x01B\xb93\xfdi\xf5\x8d\n\x90\xa9p\xa0'
Receive: 50 44.011786 44.010713 49: seq: 10, identify_response offset=2520 data=b'\xe2\x93\xff\xb9\xeaN\xc7\x87\xa1m\xd9\xa6P\xdc\x11g\xd8\x18\xbc\xf7M\t\xe3\x10\x00\xaa\x8e<\xf5\xb1\xee\x95<\xf0$\x94\xd4\x92\xab\xc8'
Receive: 51 44.012906 44.011830 49: seq: 11, identify_response offset=2560 data=b'\xad\xbe\xe6\xe5\xe5nl\x1e\x01T\xa8\xd0\x8a\x1f{\xbcu\xe96@Kd\xcbP\xf9\xcb\xb6W\xee\x07%\xb8d\xa5\xd4ztMw\x8a'
Receive: 52 44.014018 44.012950 49: seq: 12, identify_response offset=2600 data=b'lmSC0|\x02\x04\x18\xb7u\x8c\xb3\x0ca"\xd4n\x80\xb9\x8bp`OK}[\xb4\xb1T\x7fq\xac(_J\xec\xc6a\\'
Receive: 53 44.015139 44.014062 49: seq: 13, identify_response offset=2640 data=b'#\xfd\x96\xb0\x8d[\xa9}\x97(\x97W|\xd6E\x8f\x99%9^\xf1\xa3p\xe9rl\xf0\xeb\x90K\x06\x8e\xef\x1cH\\\x07Mp\xcc'
Receive: 54 44.016261 44.015182 49: seq: 14, identify_response offset=2680 data=b'\\P\xa7$\xd1*\xcbT^\xd4\x93\x85J\x8d4YdJS0Y,\x960N\xbe\x00&\xb4\xd0\x06e>{\x7f\xf3\x99\xbd\xff\xf4'
Receive: 55 44.017433 44.016303 49: seq: 15, identify_response offset=2720 data=b'\xf1\t\x0bP\x90Q\x07n\xcd\xe9\xc3\xaai\x81M\xba9\xca\x1d\xf3c\xed\x82\x13\x0c\x91\xe6\x03\xe9\xe4H\xe15\xb8\x98\xda\xa1\xe7\xe0\t'
Receive: 56 44.018534 44.017475 49: seq: 16, identify_response offset=2760 data=b"\xa6.\xdb\x1efz4\x8ex\xea\x14^nz\x01s&.\xe1\x1d\x98\xa9\xa8\x91\xe0\xdek'\x89\xfd\xfe\t)O\xb7\x93\xd5\x93N5"
Receive: 57 44.019681 44.018610 49: seq: 17, identify_response offset=2800 data=b'\xa2q\xcd\xa8X\xbd\x93!X\xe4\xb6s\x81T\xa8/\x1b\xaa\xd7\xf6-V\xf5\x11=\xc8\xbd\xfb\xd1@M\xfb_\x82y\xdbn\xfe\tF'
Receive: 58 44.020811 44.019731 49: seq: 18, identify_response offset=2840 data=b'^\xd3>\x9f\xa0\xde\xb5{\x08o\x87\x97\xf8\xddy<\x9f\xb9\xb6un\xb4\xe3\xb5\xbd\xd4\xdc\x083r\xada\x0f\xd6\xf6\x88\xe9\x19~\x8a'
Receive: 59 44.021951 44.020878 49: seq: 19, identify_response offset=2880 data=b'\xb0X\xe59\xa1\xb0\xb0\x1e"\xb9\xacS\xd7J>h\xeay\x0c\x98\x86\xb1/\x90\xd4k\x03k\x99\x98\x0e\xc7X\x96\xaa\xd7\x8d\xec\xe1\xe3'
Receive: 60 44.023071 44.022000 49: seq: 1a, identify_response offset=2920 data=b'\x1d\xc8\xf4?\xa5\x9c`\xfe&w\x86\xaa\xaf~\x9ct\x12$\xa6\xd7\xa6\xe4A#\xf9\x04\xb3\xa1\x7ff\xd2\xefs\xbd-\xdd\x913\xefu'
Receive: 61 44.024190 44.023117 49: seq: 1b, identify_response offset=2960 data=b'\xea\x0b\xf9(\x1fF\x15\xe6+\xea\xb2B\x81\x041"7\xb9EjsQ\xbd(\x17\x1dM[\xf8\xb8\x0c\xb3c\xcd\xa2\x03M\xfa\rA'
Receive: 62 44.025389 44.024235 49: seq: 1c, identify_response offset=3000 data=b'_\xa5Q6\xed\xce\xfc\xa9\t\xc4\xaa\xb8\xed\x07U\x18\xae\x13*u\xa53]9\xee\xf5\x8f\xfcM\xfbN\xec:.A;\x86Z\xf6\x02'
Receive: 63 44.026535 44.025456 49: seq: 1d, identify_response offset=3040 data=b'\xf1.\x82\xd83\xd5\xe9\xd1\x900R\xa8\xd7\x8a^\xb8.\xcd!\x0f\xd8\x9f!~\xd7~\xe7\xc5\x19\x1b\x04\x02\xd3@9\xfe\x89\xc2\xb3='
Receive: 64 44.027654 44.026585 49: seq: 1e, identify_response offset=3080 data=b'L<\xf4\t\x89\xd1W\xdbq\x12*\xf0\xad\xa5\xff?\n\x04\xbf\xa7\xf9i\x14\x9f\xceO\x92t}\xb2-\x92t\x9e\xa4\xe9:\x9d}\xf9'
Receive: 65 44.028212 44.027699 14: seq: 1f, identify_response offset=3120 data=b'\x1f\xdc\x00}\x1b'
Receive: 66 44.028844 44.028333 9: seq: 10, identify_response offset=3125 data=b''
Receive: 67 44.030648 44.030503 14: seq: 11, canbus_id canbus_uuid=b'\x9fQ\x0b\xf96a' canbus_nodeid=5
Receive: 68 44.031242 44.031078 11: seq: 12, uptime high=0 clock=21776632
Receive: 69 44.081835 44.081670 10: seq: 13, clock clock=22383697
Receive: 70 44.132435 44.132264 10: seq: 14, clock clock=22990873
Receive: 71 44.182989 44.182819 10: seq: 15, clock clock=23597572
Receive: 72 44.233599 44.233385 10: seq: 16, clock clock=24205073
Receive: 73 44.284229 44.284060 10: seq: 17, clock clock=24812527
Receive: 74 44.334815 44.334649 10: seq: 18, clock clock=25419596
Receive: 75 44.385433 44.385264 10: seq: 19, clock clock=26027000
Receive: 76 44.436015 44.435855 10: seq: 1a, clock clock=26634108
Receive: 77 44.436913 44.436732 10: seq: 1b, clock clock=26644819
Receive: 78 44.447624 44.447439 10: seq: 1c, config is_config=0 crc=0 is_shutdown=0 move_count=0
Receive: 79 44.453196 44.452621 15: seq: 1a, config is_config=1 crc=3237245062 is_shutdown=0 move_count=1024
Receive: 80 44.469566 44.465636 18: seq: 1b, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x08!\x9e'
Receive: 81 44.472578 44.470230 8: seq: 1c, tmcuart_response oid=4 read=b''
Receive: 82 44.476855 44.472939 18: seq: 1d, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02(\xa1\xda'
Receive: 83 44.479858 44.477505 8: seq: 1e, tmcuart_response oid=4 read=b''
Receive: 84 44.484170 44.480215 18: seq: 1f, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02H\xa1\xfd'
Receive: 85 44.487157 44.484815 8: seq: 10, tmcuart_response oid=4 read=b''
Receive: 86 44.491494 44.487513 18: seq: 11, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02h!\xb9'
Receive: 87 44.494483 44.492141 8: seq: 12, tmcuart_response oid=4 read=b''
Receive: 88 44.498767 44.494840 18: seq: 13, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x88!\xee'
Receive: 89 44.501760 44.499410 8: seq: 14, tmcuart_response oid=4 read=b''
Receive: 90 44.506038 44.502114 18: seq: 15, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xa8\xa1\xaa'
Receive: 91 44.509027 44.506679 8: seq: 16, tmcuart_response oid=4 read=b''
Receive: 92 44.513325 44.509392 18: seq: 17, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xc8\xa1\x8d'
Receive: 93 44.516317 44.513971 8: seq: 18, tmcuart_response oid=4 read=b''
Receive: 94 44.520604 44.516678 18: seq: 19, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xe8!\xc9'
Receive: 95 44.523633 44.521282 8: seq: 1a, tmcuart_response oid=4 read=b''
Receive: 96 44.527915 44.523991 18: seq: 1b, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x08"\xba'
Receive: 97 44.540977 44.540848 8: seq: 1c, stepper_position oid=7 pos=0
Receive: 98 44.545359 44.541443 18: seq: 1d, tmcuart_response oid=4 read=b'\n\xfaO-\x80\x00\x02\x08\xa1\xa2'
Receive: 99 44.552824 44.550440 11: seq: 1e, shutdown clock=28009904 static_string_id=Command request
Attempting MCU 'ebb' reset command
Attempting MCU 'mcu' reset command
b'Got error -1 in can read: (100)Network is down'
webhooks client 140734891391632: Disconnected
Restarting printer
Start printer at Tue Nov 19 21:18:26 2024 (1732022306.4 127.0)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = !PC13
enable_pin = !PE6
rotation_distance = 40
microsteps = 64
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_x:virtual_endstop
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 1.8
sense_resistor = 0.022
diag1_pin = !PC15
driver_sgt = 1
driver_tbl = 1
driver_toff = 2
driver_hend = 1

[stepper_y]
step_pin = PE5
dir_pin = !PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 64
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_y:virtual_endstop
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 1.8
sense_resistor = 0.022
diag1_pin = !PF0
driver_sgt = 1
driver_tbl = 1
driver_toff = 2
driver_hend = 1

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_min = -3
position_max = 290
homing_speed = 20
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 0.8
sense_resistor = 0.075

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075

[stepper_z2]
step_pin = PB4
dir_pin = PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = !PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[autotune_tmc stepper_x]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_y]
motor = ldo-42sth48-2804ah

[autotune_tmc stepper_z]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z1]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z2]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc stepper_z3]
motor = biqu-42SHDB4036Z-24B

[autotune_tmc extruder]
motor = ldo-36sth20-1004ahg

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	SAVE_GCODE
	G1 X320 Y320 F1000
	_TOOLHEAD_PARK_PAUSE_CANCEL
	TURN_OFF_FANS
	SFS_DISABLE
	ENCODER_DISABLE
	CANCEL_PRINT_BASE
	
	M140 S0
	M104 S0
	M106 S0
variable_park = True

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	SAVE_GCODE
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X335 Y335 F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	
	
	
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro PRINT_START]
gcode = 
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=1
	
	G28
	G90
	
	
	{% set target_bed = params.BED|int %}
	{% set target_extruder = params.EXTRUDER|int %}
	{% set target_chamber = params.CHAMBER|default("40")|int %}
	{% set x_wait = printer.toolhead.axis_maximum.x|float / 2 %}
	{% set y_wait = printer.toolhead.axis_maximum.y|float / 2 %}
	
	
	{% if params.BED|int > 90 %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 f3000
	M190 S{target_bed}
	
	SET_DISPLAY_TEXT MSG="Heatsoak: {target_chamber}c"
	TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target_chamber}
	{% else %}
	SET_DISPLAY_TEXT MSG="Bed: {target_bed}c"
	
	G1 X{x_wait} Y{y_wait} Z15 F9000
	G1 X175 Y175 Z15 F3000
	
	M190 S{target_bed}
	{% endif %}
	
	SET_DISPLAY_TEXT MSG="Hotend: 150c"
	M109 S150
	SET_DISPLAY_TEXT MSG="QGL"
	
	
	
	BED_MESH_PROFILE LOAD=default
	
	
	
	
	
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress
	SET_DISPLAY_TEXT MSG="Hotend: {target_extruder}c"
	
	
	G1 X175 Y175 Z15 f30000
	M107
	M109 S{target_extruder}
	SFS_ENABLE
	ENCODER_DISABLE
	
	
	SET_DISPLAY_TEXT MSG="Printer goes brr"
	
	G0 X15 Y15 F1000
	G0 Z0.4
	G91
	G1 X200 E20 F1000
	G90
	G92 E0
	SET_FAN_SPEED FAN=Basement_fans SPEED=1
	PRINT_PERCENT
	LEDS_ON

[gcode_macro START_PRINT]
gcode = 
	PRINT_START

[gcode_macro PRINT_END]
gcode = 
	
	G91
	
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	
	M140 S0
	M104 S0
	M106 S0
	
	G1 Z10 F3000
	G90
	
	
	
	G1 X0 Y235
	
	M84 X Y E
	G92 E0
	M117 Print complete
	SFS_DISABLE
	ENCODER_DISABLE
	TURN_OFF_FANS

[gcode_macro END_PRINT]
gcode = 
	PRINT_END

[gcode_macro M600]
gcode = 
	PAUSE

[gcode_macro SAVE_GCODE]
gcode = 
	SAVE_GCODE_STATE NAME=LATEST

[gcode_macro RESTORE_GCODE]
gcode = 
	RESTORE_GCODE_STATE NAME=LATEST MOVE=1

[gcode_macro LEDS_ON]
gcode = 
	SET_LED_EFFECT EFFECT=Running_Lights

[gcode_macro LEDS_OFF]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro FILTEROFF]
gcode = 
	SET_FAN_SPEED FAN=Filter SPEED=0

[gcode_macro SFS_ENABLE]
description = Enable smart filament sensor
gcode = 
	M117 ENABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=1

[gcode_macro SFS_DISABLE]
description = Disable smart filament sensor
gcode = 
	M117 DISABLING the Smart Filament Sensor
	SET_FILAMENT_SENSOR SENSOR=switch_sensor ENABLE=0

[gcode_macro ENCODER_ENABLE]
description = Turn on the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=1

[gcode_macro ENCODER_DISABLE]
description = Turn off the jam sensor
gcode = 
	SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0

[gcode_macro list_sensors]
gcode = 
	{ action_respond_info(printer.heaters.available_heaters | join(', ')) }
	{ action_respond_info(printer.heaters.available_sensors | join(', ')) }

[gcode_macro VORON_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = 50 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set purge_height = kamp_settings.purge_height | float %}
	{% set tip_distance = kamp_settings.tip_distance | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set purge_amount = kamp_settings.purge_amount | float %}
	{% set flow_rate = kamp_settings.flow_rate | float %}
	{% set size = 10 | float %}
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	G92 E0
	G0 F50
	G90
	G0 X{purge_x_origin} Y{purge_y_origin+size/2}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_origin+size*0.289} Y{purge_y_origin+size} E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.789} Y{purge_y_origin+size}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size*0.211} Y{purge_y_origin} E{purge_amount/2} F{purge_move_speed}
	{RETRACT}
	G0 Z{purge_height*2}
	G0 X{purge_x_origin+size*0.711} Y{purge_y_origin}
	G0 Z{purge_height}
	{UNRETRACT}
	G1 X{purge_x_origin+size} Y{purge_y_origin+size/2}  E{purge_amount/4} F{purge_move_speed}
	{RETRACT}
	G92 E0
	M82
	G0 Z{purge_height*2} F8
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = 50 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F50
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.4
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 5
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro LOAD_FILAMENT]
gcode = 
	M83
	G1 E100 F200
	G1 E100 F200

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	M83
	G1 E-100 F400
	G1 E-50 F400

[gcode_macro bed_mesh]
gcode = 
	G28
	QUAD_GANTRY_LEVEL
	BED_MESH_CALIBRATE
	SAVE_CONFIG

[gcode_macro G32]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_G32
	G90
	G28
	QUAD_GANTRY_LEVEL
	G28
	G0 X70 Y70 Z30 F3600
	RESTORE_GCODE_STATE NAME=STATE_G32

[gcode_macro M204]
rename_existing = M204.1
gcode = 
	{% set f = params.F|default(0.5)|float %}
	
	{% if 'S' in params %}
	{% set s = params.S|float %}
	SET_VELOCITY_LIMIT ACCEL={s} ACCEL_TO_DECEL={ s * f }
	{% else %}
	{% if 'P' in params %}
	{% set p = params.P|float %}
	{% if 'T' in params %}
	{% set t = params.T|float %}
	{% if p < t %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% else %}
	SET_VELOCITY_LIMIT ACCEL={p} ACCEL_TO_DECEL={ p * f }
	{% endif %}
	{% elif 'T' in params %}
	{% set t = params.T|float %}
	SET_VELOCITY_LIMIT ACCEL={t} ACCEL_TO_DECEL={ t * f }
	{% endif %}
	{% endif %}

[gcode_macro PID_EXTRUDER]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=extruder TARGET=250
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro PID_BED]
gcode = 
	STATUS_BUSY
	PRINT_PAUSED
	PID_CALIBRATE HEATER=heater_bed TARGET=100
	LEDS_OFF
	SAVE_CONFIG

[gcode_macro Z_Offset]
gcode = 
	G28
	PROBE_CALIBRATE

[gcode_macro TUNE_PRESSURE_ADV]
description = Tune Pressure Advance
gcode = 
	
	{% set speed = 9000 %}
	{% set nozzle_temp = 215 %}
	{% set bed_temp = 70 %}
	{% set nozzle_diameter = 0.4 %}
	
	
	{% set BED = params.BED|default(bed_temp)|float %}
	{% set NOZZLE = params.NOZZLE|default(nozzle_temp)|float %}
	{% set PA_START = params.PA_START|default(0.0)|float %}
	{% set PA_STOP = params.PA_STOP|default(0.1)|float %}
	{% set NZL = params.NZL|default(nozzle_diameter)|float %}
	
	
	{% set PA_STEP = (PA_STOP - PA_START) / 20 |float %}
	{% set E20 = (0.1147475 * NZL) * 20|float %}
	{% set E40 = (0.1147475 * NZL) * 40|float %}
	{% set X_MID = printer.toolhead.axis_maximum.x|float / 2.0 %}
	{% set Y_MID = printer.toolhead.axis_maximum.y|float / 2.0 %}
	
	
	{% set X_MID = 0.0|float %}
	{% set Y_MID = 0.0|float %}
	
	START_PRINT BED_TEMP={BED} EXTRUDER_TEMP={NOZZLE}
	
	G21
	G90
	M83
	SET_VELOCITY_LIMIT ACCEL=3000 ACCEL_TO_DECEL=1500
	G92 E0
	M106 S0

[gcode_macro SET_PRESSURE_ADVANCE]
variable_current_extruder = "extruder"
rename_existing = BASE_SET_PRESSURE_ADVANCE
gcode = 
	{% set advance = params.ADVANCE|default(-1)|float %}
	{% set smooth_time = params.SMOOTH_TIME|default(-1)|float %}
	
	M118 "Override SET_PRESSURE_ADVANCE"
	
	{% if advance > 0.0 %}
	M118 "Setting ADVANCE"
	BASE_SET_PRESSURE_ADVANCE ADVANCE={advance} EXTRUDER={current_extruder}
	{% endif %}
	
	{% if smooth_time > 0.0 %}
	M118 "Setting SMOOTH_TIME"
	BASE_SET_PRESSURE_ADVANCE SMOOTH_TIME={smooth_time} EXTRUDER={current_extruder}
	{% endif %}

[gcode_macro M205]
gcode = 
	{% if 'X' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
	{% elif 'Y' in params %}
	SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
	{% endif %}

[gcode_macro _BEDFANVARS]
variable_threshold = 90
variable_fast = 0.2
variable_slow = 0.5
gcode = 

[gcode_macro BEDFANSSLOW]
gcode = 
	
	{% set SLOW = printer["gcode_macro _BEDFANVARS"].slow|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={SLOW}

[gcode_macro BEDFANSFAST]
gcode = 
	
	{% set FAST = printer["gcode_macro _BEDFANVARS"].fast|float %}
	
	SET_FAN_SPEED FAN=Bed_Fans SPEED={FAST}

[gcode_macro BEDFANSOFF]
gcode = 
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[gcode_macro SET_HEATER_TEMPERATURE]
rename_existing = _SET_HEATER_TEMPERATURE
gcode = 
	
	{% set HEATER = params.HEATER|default("None") %}
	{% set TARGET = params.TARGET|default(0)|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if HEATER|lower == "extruder" %}
	M104 S{TARGET}
	{% elif HEATER|lower == "heater_bed" %}
	M99140 S{TARGET}
	{% else %}
	{action_respond_info("Heater %s not supported" % HEATER)}
	{% endif %}
	
	
	{% if HEATER|lower == "heater_bed" %}
	{% if TARGET >= THRESHOLD %}
	BEDFANSSLOW
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=1
	{% else %}
	BEDFANSOFF
	
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=0
	{% endif %}
	{% endif %}

[gcode_macro M190]
rename_existing = M99190
gcode = 
	
	{% set S = params.S|int %}
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if S >= THRESHOLD %}
	BEDFANSSLOW
	
	{% else %}
	BEDFANSOFF
	
	{% endif %}
	
	M140 {% for p in params
	%}{'%s%s' % (p, params[p])}{%
	endfor %}
	
	{% if S != 0 %}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={S|int} MAXIMUM={S|int + 5}
	{% endif %}
	
	
	{% if S >= THRESHOLD %}
	BEDFANSFAST
	
	{% endif %}

[gcode_macro M140]
rename_existing = M99140
gcode = 
	
	{% set S = params.S|float %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={S}

[gcode_macro TURN_OFF_FANS]
gcode = 
	BEDFANSOFF
	
	SET_FAN_SPEED FAN=Basement_fans SPEED=0
	SET_FAN_SPEED FAN=Stepper_Fans SPEED=0
	SET_FAN_SPEED FAN=Bed_Fans SPEED=0

[delayed_gcode bedfanloop]
gcode = 
	
	{% set THRESHOLD = printer["gcode_macro _BEDFANVARS"].threshold|int %}
	
	{% if printer.heater_bed.target >= THRESHOLD %}
	{% if printer.heater_bed.temperature|int >= (printer.heater_bed.target|int - 1) %}
	BEDFANSFAST
	{% else %}
	UPDATE_DELAYED_GCODE ID=bedfanloop DURATION=5
	{% endif %}
	{% endif %}

[gcode_macro ADXL_SHAPE_ALL]
description = Test resonances for both axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_X]
description = Test resonances for X axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=x
	RUN_SHELL_COMMAND CMD=adxl_shape_x
	M118 Test done
	SAVE_CONFIG

[gcode_macro ADXL_SHAPE_Y]
description = Test resonances for Y axis
gcode = 
	M118 DO NOT TOUCH THE PRINTER UNTIL DONE!!!
	G28
	SHAPER_CALIBRATE AXIS=y
	RUN_SHELL_COMMAND CMD=adxl_shape_y
	M118 Test done
	SAVE_CONFIG

[gcode_shell_command adxl_shape_x]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_x.sh
timeout = 60.
verbose = True

[gcode_shell_command adxl_shape_y]
command = sh /home/pi/printer_data/config/shaper/adxl_shape_y.sh
timeout = 60.
verbose = True

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world

[led_effect Print_Complete]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1 add (0.00,1.00,0.00)

[led_effect Print_Paused]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (1-25)
layers = 
	breathing 1.00 1.00 add (1.00,1.00,0.00)

[led_effect critical_error]
leds = 
	neopixel:Chamber_RGB
layers = 
	breathing 1.00 1.00 add (1.0,0.0,0.0)
autostart = false
frame_rate = 24
run_on_error = true

[led_effect Running_Lights]
autostart = false
frame_rate = 24
leds = 
	neopixel:Chamber_RGB (26-50)
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[led_effect Light_it_up]
autostart = true
frame_rate = 24
leds = 
	neopixel:Chamber_RGB
layers = 
	static 1.00 1.00 add (1.00,1.00,1.00)

[gcode_macro Print_Paused]
gcode = 
	SET_LED_EFFECT EFFECT=Print_Paused REPLACE=1

[gcode_macro Print_Complete]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Print_Complete REPLACE=1

[gcode_macro BED_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=bed_temp MODE=progress

[gcode_macro EXTRUDER_TEMP]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=extruder_temp MODE=progress

[gcode_macro PRINT_PERCENT]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=Running_Lights REPLACE=1
	NEOPIXEL_DISPLAY LED=Chamber_RGB TYPE=print_percent MODE=progress
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
webhooks client 140734903676240: New connection
webhooks client 140734903676240: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Sending MCU 'ebb' printer configuration...
Configured MCU 'ebb' (1024 moves)
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (25.0, 25.0)    | (25.0, 25.0)
  1   | (103.8, 25.0)   | (103.8, 25.0)
  2   | (182.5, 25.0)   | (182.5, 25.0)
  3   | (261.2, 25.0)   | (261.2, 25.0)
  4   | (340.0, 25.0)   | (340.0, 25.0)
  5   | (340.0, 103.8)  | (340.0, 103.8)
  6   | (261.2, 103.8)  | (261.2, 103.8)
  7   | (182.5, 103.8)  | (182.5, 103.8)
  8   | (103.8, 103.8)  | (103.8, 103.8)
  9   | (25.0, 103.8)   | (25.0, 103.8)
  10  | (25.0, 182.5)   | (25.0, 182.5)
  11  | (103.8, 182.5)  | (103.8, 182.5)
  12  | (182.5, 182.5)  | (182.5, 182.5)
  13  | (261.2, 182.5)  | (261.2, 182.5)
  14  | (340.0, 182.5)  | (340.0, 182.5)
  15  | (340.0, 261.2)  | (340.0, 261.2)
  16  | (261.2, 261.2)  | (261.2, 261.2)
  17  | (182.5, 261.2)  | (182.5, 261.2)
  18  | (103.8, 261.2)  | (103.8, 261.2)
  19  | (25.0, 261.2)   | (25.0, 261.2)
  20  | (25.0, 340.0)   | (25.0, 340.0)
  21  | (103.8, 340.0)  | (103.8, 340.0)
  22  | (182.5, 340.0)  | (182.5, 340.0)
  23  | (261.2, 340.0)  | (261.2, 340.0)
  24  | (340.0, 340.0)  | (340.0, 340.0)
TMC stepper_x failed to init: Unable to write tmc spi 'stepper_x' register GLOBALSCALER
TMC stepper_y failed to init: Unable to write tmc spi 'stepper_y' register GLOBALSCALER
TMC stepper_z failed to init: Unable to write tmc spi 'stepper_z' register GLOBALSCALER
TMC stepper_z1 failed to init: Unable to write tmc spi 'stepper_z1' register GLOBALSCALER
TMC stepper_z2 failed to init: Unable to write tmc spi 'stepper_z2' register GLOBALSCALER
TMC stepper_z3 failed to init: Unable to write tmc spi 'stepper_z3' register GLOBALSCALER
Starting heater checks for heater_bed
Starting heater checks for extruder
autotune_tmc set stepper_x pwm_freq=2
Unhandled exception during ready callback
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 314, in _connect
    cb()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 169, in handle_ready
    self.tune_driver()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 220, in tune_driver
    self._set_pwmfreq()
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 286, in _set_pwmfreq
    self._set_driver_field('pwm_freq', pwm_freq)
  File "/home/pi/klipper/klippy/extras/autotune_tmc.py", line 249, in _set_driver_field
    tmco.mcu_tmc.set_register(register, val, None)
  File "/home/pi/klipper/klippy/extras/tmc2130.py", line 403, in set_register
    raise self.printer.command_error(
gcode.CommandError: Unable to write tmc spi 'stepper_x' register PWMCONF
Transition to shutdown state: Internal error during ready callback: Unable to write tmc spi 'stepper_x' register PWMCONF
Dumping gcode input 0 blocks
Dumping 5 requests for client 140734903676240
Received 127.454122: b'{"id": 140736249971536, "method": "info", "params": {"client_info": {"program": "Moonraker", "version": "v0.9.3-1-g4e00a07"}}}'
Received 127.454638: b'{"id": 140736240506448, "method": "list_endpoints", "params": {}}'
Received 127.705241: b'{"id": 140736240503824, "method": "info", "params": {}}'
Received 127.956350: b'{"id": 140736240630544, "method": "info", "params": {}}'
Received 128.206961: b'{"id": 140736240501520, "method": "info", "params": {}}'
gcode state: absolute_coord=True absolute_extrude=True base_position=[0.0, 0.0, 0.0, 0.0] last_position=[0.0, 0.0, 0.0, 0.0] homing_position=[0.0, 0.0, 0.0, 0.0] speed_factor=0.016666666666666666 extrude_factor=1.0 speed=25.0
Reactor garbage collection: (127.732433683, 0.0, 0.0)
Dumping stepper 'stepper_x' (mcu) 1 queue_step:
queue_step 0: t=848151783 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_y' (mcu) 1 queue_step:
queue_step 0: t=848414912 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z' (mcu) 1 queue_step:
queue_step 0: t=848663248 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z1' (mcu) 1 queue_step:
queue_step 0: t=848911073 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z2' (mcu) 1 queue_step:
queue_step 0: t=849140133 p=0 i=0 c=0 a=0
Dumping stepper 'stepper_z3' (mcu) 1 queue_step:
queue_step 0: t=849386327 p=0 i=0 c=0 a=0
MCU 'mcu' shutdown: Command request
clocksync state: mcu_freq=400000000 last_clock=604509430 clock_est=(127.293 469808481 400015816.137) min_half_rtt=0.000071 min_rtt_time=127.326 time_avg=127.293(0.017) clock_avg=469808481.894(6680606.499) pred_variance=117979654801.796
Dumping serial stats: bytes_write=2390 bytes_read=5464 bytes_retransmit=0 bytes_invalid=0 send_seq=193 receive_seq=193 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 127.222590 127.222590 9: seq: 1d, identify offset=3080 count=40
Sent 1 127.223019 127.223019 9: seq: 1e, identify offset=3120 count=40
Sent 2 127.225118 127.225118 6: seq: 1f, get_canbus_id
Sent 3 127.225374 127.225374 6: seq: 10, get_uptime
Sent 4 127.275678 127.275678 6: seq: 11, get_clock
Sent 5 127.325978 127.325978 6: seq: 12, get_clock
Sent 6 127.376268 127.376268 6: seq: 13, get_clock
Sent 7 127.426550 127.426550 6: seq: 14, get_clock
Sent 8 127.477787 127.477787 6: seq: 15, get_clock
Sent 9 127.528074 127.528074 6: seq: 16, get_clock
Sent 10 127.578350 127.578350 6: seq: 17, get_clock
Sent 11 127.628626 127.628626 6: seq: 18, get_clock
Sent 12 127.629745 127.629745 6: seq: 19, get_clock
Sent 13 128.139226 128.139226 6: seq: 1a, get_config
Sent 14 128.140109 128.140109 7: seq: 1b, allocate_oids count=29
Sent 15 128.140175 128.140175 9: seq: 1c, config_spi oid=0 pin=PD6 cs_active_high=0
Sent 16 128.140189 128.140189 9: seq: 1d, config_spi oid=1 pin=PD5 cs_active_high=0
Sent 17 128.140221 128.140221 9: seq: 1e, config_spi oid=2 pin=PD2 cs_active_high=0
Sent 18 128.140238 128.140238 9: seq: 1f, config_spi oid=3 pin=PA15 cs_active_high=0
Sent 19 128.140257 128.140257 9: seq: 10, config_spi oid=4 pin=PA9 cs_active_high=0
Sent 20 128.140271 128.140271 9: seq: 11, config_spi oid=5 pin=PA10 cs_active_high=0
Sent 21 128.140290 128.140290 15: seq: 12, spi_set_software_bus oid=0 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 22 128.140321 128.140321 15: seq: 13, spi_set_software_bus oid=1 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 23 128.140333 128.140333 15: seq: 14, spi_set_software_bus oid=2 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 24 128.140359 128.140359 15: seq: 15, spi_set_software_bus oid=3 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 25 128.140369 128.140369 15: seq: 16, spi_set_software_bus oid=4 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 26 128.140392 128.140392 15: seq: 17, spi_set_software_bus oid=5 miso_pin=PC7 mosi_pin=PC8 sclk_pin=PC6 mode=3 rate=4000000
Sent 27 128.140480 128.140480 48: seq: 18, config_analog_in oid=18 pin=PB0, config_digital_out oid=19 pin=PF6 value=0 default_value=0 max_duration=2000000000, set_digital_out_pwm_cycle oid=19 cycle_ticks=40000000, config_digital_out oid=20 pin=PA1 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=20 cycle_ticks=20000000, config_digital_out oid=21 pin=PA4 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=21 cycle_ticks=20000000
Sent 28 128.141244 128.141244 62: seq: 19, config_analog_in oid=22 pin=PA7, config_neopixel oid=6 pin=PF12 data_size=150 bit_max_ticks=1600 reset_min_ticks=20000, config_stepper oid=7 step_pin=PC14 dir_pin=PC13 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=23 pin=PE6 value=1 default_value=1 max_duration=0, config_endstop oid=8 pin=PC15 pull_up=0, config_trsync oid=9, config_stepper oid=10 step_pin=PE5 dir_pin=PE4 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=24 pin=PE3 value=1 default_value=1 max_duration=0, config_endstop oid=11 pin=PF0 pull_up=0, config_trsync oid=12, config_stepper oid=13 step_pin=PG9 dir_pin=PG10 invert_step=4294967295 step_pulse_ticks=0
Sent 29 128.141802 128.141802 60: seq: 1a, config_digital_out oid=25 pin=PG13 value=1 default_value=1 max_duration=0, config_trsync oid=14, config_stepper oid=15 step_pin=PG11 dir_pin=PD7 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=26 pin=PG12 value=1 default_value=1 max_duration=0, config_stepper oid=16 step_pin=PB4 dir_pin=PB3 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=27 pin=PB5 value=1 default_value=1 max_duration=0, config_stepper oid=17 step_pin=PG15 dir_pin=PB6 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=28 pin=PG14 value=1 default_value=1 max_duration=0, finalize_config crc=924824692
Sent 30 128.148738 128.148738 51: seq: 1b, query_analog_in oid=18 clock=1272000000 sample_ticks=400000 sample_count=8 rest_ticks=120000000 min_value=14024 max_value=32038 range_check_count=4, queue_digital_out oid=19 clock=888415790 on_ticks=0, queue_digital_out oid=20 clock=888426257 on_ticks=0, queue_digital_out oid=21 clock=888442147 on_ticks=0
Sent 31 128.149182 128.149182 26: seq: 1c, query_analog_in oid=22 clock=1288000000 sample_ticks=400000 sample_count=8 rest_ticks=120000000 min_value=0 max_value=32760 range_check_count=4, get_config
Sent 32 128.155660 128.155660 13: seq: 1d, spi_send oid=0 data=b'\x8b\x00\x00\x00,'
Sent 33 128.155745 128.155745 13: seq: 1e, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 34 128.156050 128.156050 13: seq: 1f, spi_send oid=0 data=b'\x8b\x00\x00\x00,'
Sent 35 128.156071 128.156071 13: seq: 10, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 36 128.156425 128.156425 21: seq: 11, spi_send oid=0 data=b'\x8b\x00\x00\x00,', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 37 128.156803 128.156803 21: seq: 12, spi_send oid=0 data=b'\x8b\x00\x00\x00,', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 38 128.157127 128.157127 21: seq: 13, spi_send oid=0 data=b'\x8b\x00\x00\x00,', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 39 128.157516 128.157516 13: seq: 14, spi_send oid=1 data=b'\x8b\x00\x00\x00,'
Sent 40 128.157531 128.157531 13: seq: 15, spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 41 128.157968 128.157968 21: seq: 16, spi_send oid=1 data=b'\x8b\x00\x00\x00,', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 42 128.158291 128.158291 21: seq: 17, spi_send oid=1 data=b'\x8b\x00\x00\x00,', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 43 128.158614 128.158614 21: seq: 18, spi_send oid=1 data=b'\x8b\x00\x00\x00,', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 44 128.158991 128.158991 21: seq: 19, spi_send oid=1 data=b'\x8b\x00\x00\x00,', spi_transfer oid=1 data=b'\x00\x00\x00\x00\x00'
Sent 45 128.159365 128.159365 13: seq: 1a, spi_send oid=2 data=b'\x8b\x00\x00\x00C'
Sent 46 128.159380 128.159380 13: seq: 1b, spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 47 128.159810 128.159810 21: seq: 1c, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 48 128.160129 128.160129 21: seq: 1d, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 49 128.160449 128.160449 21: seq: 1e, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 50 128.160820 128.160820 21: seq: 1f, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 51 128.161188 128.161188 13: seq: 10, spi_send oid=3 data=b'\x8b\x00\x00\x00C'
Sent 52 128.161206 128.161206 13: seq: 11, spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 53 128.161557 128.161557 21: seq: 12, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 54 128.161947 128.161947 21: seq: 13, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 55 128.162262 128.162262 21: seq: 14, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 56 128.162581 128.162581 21: seq: 15, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 57 128.163039 128.163039 13: seq: 16, spi_send oid=4 data=b'\x8b\x00\x00\x00C'
Sent 58 128.163057 128.163057 13: seq: 17, spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 59 128.163406 128.163406 21: seq: 18, spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 60 128.163760 128.163760 21: seq: 19, spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 61 128.164083 128.164083 21: seq: 1a, spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 62 128.164406 128.164406 21: seq: 1b, spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 63 128.164807 128.164807 13: seq: 1c, spi_send oid=5 data=b'\x8b\x00\x00\x00C'
Sent 64 128.164826 128.164826 13: seq: 1d, spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 65 128.165177 128.165177 21: seq: 1e, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 66 128.165499 128.165499 21: seq: 1f, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 67 128.165844 128.165844 21: seq: 10, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 68 128.166162 128.166162 21: seq: 11, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 69 128.230008 128.230008 15: seq: 12, neopixel_update oid=6 pos=0 data=b'\xff\xff\xff\xff\xff\xff'
Sent 70 128.230051 128.230051 45: seq: 13, neopixel_update oid=6 pos=6 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=22 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 71 128.230091 128.230091 45: seq: 14, neopixel_update oid=6 pos=38 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=54 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 72 128.230127 128.230127 45: seq: 15, neopixel_update oid=6 pos=70 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=86 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 73 128.230466 128.230466 47: seq: 16, neopixel_update oid=6 pos=102 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=118 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 74 128.236482 128.236482 28: seq: 17, neopixel_update oid=6 pos=134 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_send oid=6
Sent 75 128.238774 128.238774 7: seq: 18, stepper_get_position oid=7
Sent 76 128.239002 128.239002 13: seq: 19, spi_send oid=0 data=b'j\x00\x00\x00\x00'
Sent 77 128.239023 128.239023 13: seq: 1a, spi_transfer oid=0 data=b'j\x00\x00\x00\x00'
Sent 78 128.239437 128.239437 7: seq: 1b, stepper_get_position oid=10
Sent 79 128.239647 128.239647 13: seq: 1c, spi_send oid=1 data=b'j\x00\x00\x00\x00'
Sent 80 128.239668 128.239668 13: seq: 1d, spi_transfer oid=1 data=b'j\x00\x00\x00\x00'
Sent 81 128.240053 128.240053 7: seq: 1e, stepper_get_position oid=13
Sent 82 128.240248 128.240248 13: seq: 1f, spi_send oid=2 data=b'j\x00\x00\x00\x00'
Sent 83 128.240269 128.240269 13: seq: 10, spi_transfer oid=2 data=b'j\x00\x00\x00\x00'
Sent 84 128.240627 128.240627 7: seq: 11, stepper_get_position oid=15
Sent 85 128.240868 128.240868 13: seq: 12, spi_send oid=3 data=b'j\x00\x00\x00\x00'
Sent 86 128.240888 128.240888 13: seq: 13, spi_transfer oid=3 data=b'j\x00\x00\x00\x00'
Sent 87 128.241247 128.241247 7: seq: 14, stepper_get_position oid=16
Sent 88 128.241441 128.241441 13: seq: 15, spi_send oid=4 data=b'j\x00\x00\x00\x00'
Sent 89 128.241458 128.241458 13: seq: 16, spi_transfer oid=4 data=b'j\x00\x00\x00\x00'
Sent 90 128.241866 128.241866 7: seq: 17, stepper_get_position oid=17
Sent 91 128.242055 128.242055 13: seq: 18, spi_send oid=5 data=b'j\x00\x00\x00\x00'
Sent 92 128.242076 128.242076 13: seq: 19, spi_transfer oid=5 data=b'j\x00\x00\x00\x00'
Sent 93 128.247861 128.247861 13: seq: 1a, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e'
Sent 94 128.247881 128.247881 13: seq: 1b, spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 95 128.248249 128.248249 21: seq: 1c, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 96 128.248576 128.248576 21: seq: 1d, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 97 128.248962 128.248962 21: seq: 1e, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 98 128.249280 128.249280 21: seq: 1f, spi_send oid=0 data=b'\xf0\xc4\x0e\x00\x1e', spi_transfer oid=0 data=b'\x00\x00\x00\x00\x00'
Sent 99 128.250396 128.250396 6: seq: 10, emergency_stop
Dumping receive queue 100 messages
Receive: 0 127.208574 127.208255 49: seq: 1a, identify_response offset=1640 data=b'\xb0\x80\x9f\xd9xVn\xf0\x11d\xfb\x80\x9b|\x8cG\xf31N\xdf\xe0\xd67\xc8\xfeFJ\xb0Z~B\x9a\xab\x87\xdb\xeb\x9b\xb5\x84l'
Receive: 1 127.208956 127.208636 49: seq: 1b, identify_response offset=1680 data=b'\xab\x9f~^\xfd\x98|xX\xff\x82\xf7\xa9\xfe\x9dM\xeeVO\xb0^t\x87\xc0\xdf\xcf\xfc\xe0\xed\r\x16\xdf\xffzG\xf7\xeec\xa2\x7f'
Receive: 2 127.209339 127.209016 49: seq: 1c, identify_response offset=1720 data=b"X\xaf\xd6\xb7\xff^'\xbf\xde~\xba\xfe\xf9Wt \x1f\x077\xeb\x07\x18\x94\x87\x80\xcd\xf0\x0c\xd7p\x7f\xd7x}\x83\xc9\xa7\xcd\x95\xbc"
Receive: 3 127.209815 127.209399 49: seq: 1d, identify_response offset=1760 data=b'\x1f<\xfbR\x8a>\x98\xce\xdaw\xf0\x80R\x8a\x08\xeb?\xe2\xfa\xcd\xe3\xf2q\x93l\x9e\xee6\xbf$W\xcb\xcd\x1a\x0f\x12\xe3\xf0\xfa\xfe'
Receive: 4 127.210197 127.209876 49: seq: 1e, identify_response offset=1800 data=b'~\xfd\x90\\\xfd\xfc\xf81Y\x93\\_\xf0\xed\xd0\xc3kF\xbe\xb7e\xb5N\xe1h\xd5t\x0c\x95\xf0\xb9c\x97\x84\xa8\x07f\xe8\xcb!'
Receive: 5 127.210578 127.210257 49: seq: 1f, identify_response offset=1840 data=b'\xc7\xe6\x02\xd8\x01"\x9bv\x87\xc7\xf5\x1d\x1ca\xf9\xf8\xf4 O\x05!\xf6~9\x9d\\\xfegz\xe6\xc5\xff\x85\xce\x15v +Po'
Receive: 6 127.210958 127.210636 49: seq: 10, identify_response offset=1880 data=b"\x85\xbd\xc0W\xbdk\xec\x85s\xd5[c\x0f\xa08\xf5>`o\xae\xb9\xdc`o\xa1\xb9|\x94<=\xc9\xe6\xcb 3\xc0\x1bU\xd6'"
Receive: 7 127.211342 127.211018 49: seq: 11, identify_response offset=1920 data=b'\xbd \x08\xa4|\xa9\x88\xa6\xe1,\x97\xa2u%\x8f\xa6\x9e\xff\x0c\xe7T\xab\x94V\xc8e<9\x86\xde\xe1\xcb\x96/\x19(\x83\xa7\x90\x8d'
Receive: 8 127.211770 127.211402 49: seq: 12, identify_response offset=1960 data=b'\xa6MI$\x94/)2U\xca\x11h\x953\xd9\x02\xfb\x9b\xe3\x06\x00S\n\x0cg-<\\\xe5SLj\x8c\xc9@\xb3%$J\x85'
Receive: 9 127.212151 127.211833 49: seq: 13, identify_response offset=2000 data=b'\xb2e)k\x8bL?\xearJ\xbe\xcb\xaaF$\xc3\xc0\x9aX\x05I\x84\xa5B\x14\xbb\x8a\xe7\xf0\x94(\x04\xbb\xbd\xa6W\xf4*\xad`'
Receive: 10 127.212533 127.212212 49: seq: 14, identify_response offset=2040 data=b'\xbac\x10_\x19\xe6(\x06i\x95r)\x93a\x92\xbd\xee\x0bhS\xb8\x13\xac\x81\x80\r\x07"\x10\x00k\xff\xd6!\x90`\xc89-\x81'
Receive: 11 127.212955 127.212592 49: seq: 15, identify_response offset=2080 data=b's\xda1`\x9e\xaa#Q-\x86\xde\xa4\x8aX\x1e\x02C%\xbd\x9ciTb\x0e\t\xd9`;^1]\xae0\xebA\xa7+\xaa \xb3'
Receive: 12 127.213337 127.213016 49: seq: 16, identify_response offset=2120 data=b"&m\x05L\xc9'\x8e\xd4\x99\x9eh9@\x1f\xd1\xc9:\xf2\xc7\xdf\x10Gc%\xef_\xaa\x927P\x1c\xf3\xceCBK\xb7\xfe\x8a}"
Receive: 13 127.213766 127.213398 49: seq: 17, identify_response offset=2160 data=b"Z\xae~$\x14\x8f=\xf0\x96\x87G=6u\xc7\x1e\xd6\xcbk5\x81i\x02'\x1e)#Q\x06\xba%\xbc\xc7\xc0\xdf\x99\xda\x95\xdeW"
Receive: 14 127.214151 127.213828 49: seq: 18, identify_response offset=2200 data=b'zB\x17hm\x9d\x99\xf0\x18\x81\x0bM\xa5J\xe5\xd2D\xec\x18\x90\xa1\xe8\xe9\x81\x03\x98\xa32\x8c\x9e<\xd4/\\K\xcf\xb0R\x87\x99'
Receive: 15 127.214530 127.214211 49: seq: 19, identify_response offset=2240 data=b"\xc7N\x9b\xba\x9e\xa9\xe4\xd1\x9b\xf9h^\xbd\xfe\xcc\xfe\x81#\x13\\\x18#\xff\xf0\x1c\x81\xb0\x00'\xbd\x00\x13\xb5;\xa8\x93\x1efJg"
Receive: 16 127.214958 127.214591 49: seq: 1a, identify_response offset=2280 data=b'\\!\xf7l_4\x8a[\xe8\xc81\x00\xde.\r\xdc\xcc]\xfa\x86\xb77\xd7:$pu\x07o\xf0\x14\xae\x93W\x19Z\xb8\xb2\t\x9c'
Receive: 17 127.215339 127.215019 49: seq: 1b, identify_response offset=2320 data=b'(\x84\x00K\x17\xf0T\xcb\xfb\x12K?\xb0\x18Q%S\t[\x9a\x03\x7f\xe1\xa8|\x04\x94__\xb0O\xdb\\:\x85\xa2\xc6\xca\xde\x1d'
Receive: 18 127.215816 127.215399 49: seq: 1c, identify_response offset=2360 data=b"j\\\x02m\x06\xadv[\xd6\xaf\x84\xd4?\x81'\xa5\x8c\xc4Ao\x95\xa1\x0e?C\xb8\x13h\x1fr\x02\xe3\x9d;QT\r\xe1Y\xaa"
Receive: 19 127.216199 127.215874 49: seq: 1d, identify_response offset=2400 data=b'r\xca\xa9\nOj\x87c\x99N\x8c\x835m\xbd\x03\x9b8\xc0\xd1S\x94m\x0b\x80\x10N\t\xba\xe6\x18\x07\xf0\xbd\xfe\xc0\x95P\xe8\xf9'
Receive: 20 127.216588 127.216271 49: seq: 1e, identify_response offset=2440 data=b'`\xae-l\x83\xaa\x06kBg\xc1\x8f\x1a\x1bCp\xa4\x1d\xf6Z\x94%\xe0\xa4\x0c\xf8\rj\xb1\x84\xfc\xecJ\xa3\xa1o\xac\xc0o\x15'
Receive: 21 127.216971 127.216649 49: seq: 1f, identify_response offset=2480 data=b'\x1bpt\xbaCy\x00\xa4(\x0e\xfdA\x8fi\x7f\x00\xf17\xba\xde*\xbf\xb9\x003\x19\x1ad\xacr?\xbflT\xac\xe8\xea\x9amS'
Receive: 22 127.217353 127.217032 49: seq: 10, identify_response offset=2520 data=b')\x1dI\x86\x85\xaeG\xd7\xa4Pe@(+\xccT\x97y\x94\xfa\xc0\x95\x00\x11\x05\x97\x81\xfa\xa9\x12}\x830\x11v\xc4\xb2\xbe\xb4o'
Receive: 23 127.217811 127.217415 49: seq: 11, identify_response offset=2560 data=b'\xfct"?[\xc1\xe3\xbf\xaf>\x03\x0f\x08\x8a9}\xd5p\xc6\x85\x9d\x80\x8b"c\x07\x88+\xeaV\xfa\'`M\xc12\xa1\xae\xd2V'
Receive: 24 127.218190 127.217872 49: seq: 12, identify_response offset=2600 data=b'\x97)\xfc\xd5U\t\x11\xf3\x05\x18\xa4\xcf\xa5\x0e\x84FR8\x80\xfc\\fB\xab\xfa\x88\x96S-S`\x81\t\xc3\x1c]q\x06\xd38'
Receive: 25 127.218572 127.218250 49: seq: 13, identify_response offset=2640 data=b'\x15\x1a\xa8-\xbd_\x8aZ\xa6-\xa6\x8e\xe04\x88E\xfd\x925b\xcdZE`\xb2u\x84\xee\x90\x99\x8e\xea\xba\x98\x9a\x00\xdf\x04\xde<'
Receive: 26 127.218951 127.218632 49: seq: 14, identify_response offset=2680 data=b'\x8ad\xd6S\x9dXfE\xea\xc4\x91\xbc,\xe8\xc4\xf1,B\x1c\x00\x9c\xca"\x03\xe5\xc0\xfa\xc9\xcd\xa7\'vs\xff\xd3\x0bb-\xd0F'
Receive: 27 127.219330 127.219011 49: seq: 15, identify_response offset=2720 data=b'\x03\x1e\xce\xe9[\xa1\xae\xea\x0c\n\x14\xd23\x93S/\xe0s\x0c\x8c\xfa\x9b\xdf`I\xea\xd4l\x98\x9c\xa1\x17\xce9f2S\xf1d\xaa'
Receive: 28 127.219766 127.219391 49: seq: 16, identify_response offset=2760 data=b'\xd5\xf7\xb8\xea\x02\x1e#j\x00S(\x0e\xe1\x1e\x98\xb8\xe8ml\x9f \xe7\x81\xf9\xa4\x07\x19PUH\xe5+E\xd6VqL_\xa6|'
Receive: 29 127.220148 127.219827 49: seq: 17, identify_response offset=2800 data=b'\xfaA\xdcH\xccc\x1cO!\x8b\xf5\xb2|\xf4-Q\xd5\x12\xd5H\x9c\xfd\xd1\x14uE[\x80\x85\x9b\x02\xf59\x06a]\x11\x1e\xb0\xde'
Receive: 30 127.220532 127.220210 49: seq: 18, identify_response offset=2840 data=b'\xd7\x07\x88t\xc7\x9b\xb8\x05g\\\x1f\xd9Jl\xa2o\xc7\xa9\xe4\xc8\xbeV\xa6g\xab\x9d\x0e\xad){\xd2\xcb\xf2\x02i\x11?Z\xa5\xb0'
Receive: 31 127.220955 127.220592 49: seq: 19, identify_response offset=2880 data=b'1\xe0!\xbd,B[\x1d=\xaaS9\x02\xe8\x1a\xa8\xab\x90\xd0\xa9l*\x9d\xe8G{\x9fe\xb2|\x8b\xe2\xe1{\x14\x8e\xe9~\x1d8'
Receive: 32 127.221328 127.221014 49: seq: 1a, identify_response offset=2920 data=b'\xc7tN\x8e\x0b(\x0f\x1e\xe3\xee\xe3X`\xa6\xad2>\xaa\x8d\x9ecbt\xd7\x0cJX\xb6\\\xa3\x8aL\xfa\tJ\xa5\x0e\x97\xe5s'
Receive: 33 127.221766 127.221389 49: seq: 1b, identify_response offset=2960 data=b'/\xa3xN\x85C\xc0K\x10\r\x12\x9df\x842\x17Y^\xb1\x01RW:O\xeb0:U\xff8\xbaI\xb7\xc6\xe5^\xa9\x17\r\x0b'
Receive: 34 127.222152 127.221826 49: seq: 1c, identify_response offset=3000 data=b'\x0e\x7fi\x02\xbeD\xafm\'q\xe2" ,+\xac\xe9\x8a\xfe\xa0\xfe\x88\xdf\x95\xef\xf8\xb6\x880\xaa0P\x15\xba@\xbe\xf1(\xf6\x0c'
Receive: 35 127.222531 127.222211 49: seq: 1d, identify_response offset=3040 data=b'\xef\xf4dH\xe8)\xda\xab\x8b\x8em\xe1\xe1X\x06,9\x90\xbc\x0b\xb7\x98`\x8d\r\x02\x81\xae\t\x9c\xae\xba;\xb6\x87\xb9\x87\xbe\x8a0'
Receive: 36 127.222958 127.222590 49: seq: 1e, identify_response offset=3080 data=b'\xfa\x10\xd9\x0fB\x05\xbe\xb3\xd4\x7f\xb1\x80\xe0\xf72\xbd\xf0\xfc\x8b\xe9y\x10.\xcewi\x10N\x830\\\x84\x93/\xff\x03u\x9f\x0c\xd8'
Receive: 37 127.223211 127.223019 9: seq: 1f, identify_response offset=3120 data=b''
Receive: 38 127.225262 127.225118 14: seq: 10, canbus_id canbus_uuid=b'\x8d`\xb0\xd4\xc7p' canbus_nodeid=4
Receive: 39 127.225516 127.225374 12: seq: 11, uptime high=0 clock=442760562
Receive: 40 127.275822 127.275678 11: seq: 12, clock clock=462882869
Receive: 41 127.326119 127.325978 11: seq: 13, clock clock=483001571
Receive: 42 127.376417 127.376268 11: seq: 14, clock clock=503120497
Receive: 43 127.426781 127.426550 11: seq: 15, clock clock=523264531
Receive: 44 127.477934 127.477787 11: seq: 16, clock clock=543727553
Receive: 45 127.528220 127.528074 11: seq: 17, clock clock=563841785
Receive: 46 127.578497 127.578350 11: seq: 18, clock clock=583952615
Receive: 47 127.628790 127.628626 11: seq: 19, clock clock=604070507
Receive: 48 127.629936 127.629745 11: seq: 1a, clock clock=604509430
Receive: 49 128.139388 128.139226 10: seq: 1b, config is_config=0 crc=0 is_shutdown=0 move_count=0
Receive: 50 128.150070 128.149182 15: seq: 1d, config is_config=1 crc=924824692 is_shutdown=0 move_count=1024
Receive: 51 128.155948 128.155745 13: seq: 1f, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 52 128.156334 128.156071 13: seq: 11, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 53 128.156715 128.156425 13: seq: 12, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 54 128.157044 128.156803 13: seq: 13, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 55 128.157363 128.157127 13: seq: 14, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 56 128.157894 128.157531 13: seq: 16, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 57 128.158206 128.157968 13: seq: 17, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 58 128.158531 128.158291 13: seq: 18, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 59 128.158908 128.158614 13: seq: 19, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 60 128.159227 128.158991 13: seq: 1a, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 61 128.159714 128.159380 13: seq: 1c, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 62 128.160045 128.159810 13: seq: 1d, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 63 128.160367 128.160129 13: seq: 1e, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 64 128.160761 128.160449 13: seq: 1f, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 65 128.161054 128.160820 13: seq: 10, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 66 128.161469 128.161206 13: seq: 12, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 67 128.161894 128.161557 13: seq: 13, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 68 128.162182 128.161947 13: seq: 14, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 69 128.162501 128.162262 13: seq: 15, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 70 128.162898 128.162581 13: seq: 16, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 71 128.163318 128.163057 13: seq: 18, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 72 128.163646 128.163406 13: seq: 19, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 73 128.164000 128.163760 13: seq: 1a, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 74 128.164322 128.164083 13: seq: 1b, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 75 128.164641 128.164406 13: seq: 1c, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 76 128.165089 128.164826 13: seq: 1e, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 77 128.165418 128.165177 13: seq: 1f, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 78 128.165764 128.165499 13: seq: 10, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 79 128.166082 128.165844 13: seq: 11, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 80 128.166400 128.166162 13: seq: 12, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 81 128.238314 128.236482 8: seq: 18, neopixel_result oid=6 success=1
Receive: 82 128.238882 128.238774 8: seq: 19, stepper_position oid=7 pos=0
Receive: 83 128.239287 128.239023 13: seq: 1b, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 84 128.239539 128.239437 8: seq: 1c, stepper_position oid=10 pos=0
Receive: 85 128.239952 128.239668 13: seq: 1e, spi_transfer_response oid=1 response=b'\x00\x00\x00\x00\x00'
Receive: 86 128.240160 128.240053 8: seq: 1f, stepper_position oid=13 pos=0
Receive: 87 128.240531 128.240269 13: seq: 11, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 88 128.240780 128.240627 8: seq: 12, stepper_position oid=15 pos=0
Receive: 89 128.241151 128.240888 13: seq: 14, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 90 128.241352 128.241247 8: seq: 15, stepper_position oid=16 pos=0
Receive: 91 128.241773 128.241458 13: seq: 17, spi_transfer_response oid=4 response=b'\x00\x00\x00\x00\x00'
Receive: 92 128.241968 128.241866 8: seq: 18, stepper_position oid=17 pos=0
Receive: 93 128.242337 128.242076 13: seq: 1a, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 94 128.248146 128.247881 13: seq: 1c, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 95 128.248482 128.248249 13: seq: 1d, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 96 128.248898 128.248576 13: seq: 1e, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 97 128.249194 128.248962 13: seq: 1f, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 98 128.249517 128.249280 13: seq: 10, spi_transfer_response oid=0 response=b'\x00\x00\x00\x00\x00'
Receive: 99 128.250540 128.250396 12: seq: 11, shutdown clock=852770122 static_string_id=Command request
MCU 'ebb' shutdown: Command request
clocksync state: mcu_freq=12000000 last_clock=26796070 clock_est=(127.801 22737813 12000927.762) min_half_rtt=0.000082 min_rtt_time=128.139 time_avg=127.801(0.017) clock_avg=22737813.446(202327.078) pred_variance=106175509.106 clock_adj=(-0.212 12000364.250)
Dumping serial stats: bytes_write=1291 bytes_read=4830 bytes_retransmit=0 bytes_invalid=0 send_seq=132 receive_seq=132 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 127.658144 127.658144 9: seq: 10, identify offset=640 count=40
Sent 1 127.659270 127.659270 9: seq: 11, identify offset=680 count=40
Sent 2 127.660394 127.660394 9: seq: 12, identify offset=720 count=40
Sent 3 127.661520 127.661520 9: seq: 13, identify offset=760 count=40
Sent 4 127.662644 127.662644 9: seq: 14, identify offset=800 count=40
Sent 5 127.663791 127.663791 9: seq: 15, identify offset=840 count=40
Sent 6 127.664921 127.664921 9: seq: 16, identify offset=880 count=40
Sent 7 127.666048 127.666048 9: seq: 17, identify offset=920 count=40
Sent 8 127.667218 127.667218 9: seq: 18, identify offset=960 count=40
Sent 9 127.668382 127.668382 9: seq: 19, identify offset=1000 count=40
Sent 10 127.669529 127.669529 9: seq: 1a, identify offset=1040 count=40
Sent 11 127.670762 127.670762 9: seq: 1b, identify offset=1080 count=40
Sent 12 127.671915 127.671915 9: seq: 1c, identify offset=1120 count=40
Sent 13 127.673061 127.673061 9: seq: 1d, identify offset=1160 count=40
Sent 14 127.674215 127.674215 9: seq: 1e, identify offset=1200 count=40
Sent 15 127.675354 127.675354 9: seq: 1f, identify offset=1240 count=40
Sent 16 127.676519 127.676519 9: seq: 10, identify offset=1280 count=40
Sent 17 127.677663 127.677663 9: seq: 11, identify offset=1320 count=40
Sent 18 127.678805 127.678805 9: seq: 12, identify offset=1360 count=40
Sent 19 127.679948 127.679948 9: seq: 13, identify offset=1400 count=40
Sent 20 127.681089 127.681089 9: seq: 14, identify offset=1440 count=40
Sent 21 127.682241 127.682241 9: seq: 15, identify offset=1480 count=40
Sent 22 127.683387 127.683387 9: seq: 16, identify offset=1520 count=40
Sent 23 127.684533 127.684533 9: seq: 17, identify offset=1560 count=40
Sent 24 127.685763 127.685763 9: seq: 18, identify offset=1600 count=40
Sent 25 127.686920 127.686920 9: seq: 19, identify offset=1640 count=40
Sent 26 127.688068 127.688068 9: seq: 1a, identify offset=1680 count=40
Sent 27 127.689219 127.689219 9: seq: 1b, identify offset=1720 count=40
Sent 28 127.690360 127.690360 9: seq: 1c, identify offset=1760 count=40
Sent 29 127.691511 127.691511 9: seq: 1d, identify offset=1800 count=40
Sent 30 127.692659 127.692659 9: seq: 1e, identify offset=1840 count=40
Sent 31 127.693811 127.693811 9: seq: 1f, identify offset=1880 count=40
Sent 32 127.694969 127.694969 9: seq: 10, identify offset=1920 count=40
Sent 33 127.696111 127.696111 9: seq: 11, identify offset=1960 count=40
Sent 34 127.697255 127.697255 9: seq: 12, identify offset=2000 count=40
Sent 35 127.698396 127.698396 9: seq: 13, identify offset=2040 count=40
Sent 36 127.699540 127.699540 9: seq: 14, identify offset=2080 count=40
Sent 37 127.700763 127.700763 9: seq: 15, identify offset=2120 count=40
Sent 38 127.701909 127.701909 9: seq: 16, identify offset=2160 count=40
Sent 39 127.703056 127.703056 9: seq: 17, identify offset=2200 count=40
Sent 40 127.704201 127.704201 9: seq: 18, identify offset=2240 count=40
Sent 41 127.705453 127.705453 9: seq: 19, identify offset=2280 count=40
Sent 42 127.706606 127.706606 9: seq: 1a, identify offset=2320 count=40
Sent 43 127.707810 127.707810 9: seq: 1b, identify offset=2360 count=40
Sent 44 127.708961 127.708961 9: seq: 1c, identify offset=2400 count=40
Sent 45 127.710112 127.710112 9: seq: 1d, identify offset=2440 count=40
Sent 46 127.711254 127.711254 9: seq: 1e, identify offset=2480 count=40
Sent 47 127.712397 127.712397 9: seq: 1f, identify offset=2520 count=40
Sent 48 127.713537 127.713537 9: seq: 10, identify offset=2560 count=40
Sent 49 127.714772 127.714772 9: seq: 11, identify offset=2600 count=40
Sent 50 127.715910 127.715910 9: seq: 12, identify offset=2640 count=40
Sent 51 127.717057 127.717057 9: seq: 13, identify offset=2680 count=40
Sent 52 127.718207 127.718207 9: seq: 14, identify offset=2720 count=40
Sent 53 127.719347 127.719347 9: seq: 15, identify offset=2760 count=40
Sent 54 127.720473 127.720473 9: seq: 16, identify offset=2800 count=40
Sent 55 127.721617 127.721617 9: seq: 17, identify offset=2840 count=40
Sent 56 127.722806 127.722806 9: seq: 18, identify offset=2880 count=40
Sent 57 127.723943 127.723943 9: seq: 19, identify offset=2920 count=40
Sent 58 127.725083 127.725083 9: seq: 1a, identify offset=2960 count=40
Sent 59 127.726231 127.726231 9: seq: 1b, identify offset=3000 count=40
Sent 60 127.727379 127.727379 9: seq: 1c, identify offset=3040 count=40
Sent 61 127.728521 127.728521 9: seq: 1d, identify offset=3080 count=40
Sent 62 127.729667 127.729667 9: seq: 1e, identify offset=3120 count=40
Sent 63 127.730329 127.730329 9: seq: 1f, identify offset=3125 count=40
Sent 64 127.732649 127.732558 6: seq: 10, get_canbus_id
Sent 65 127.733245 127.733154 6: seq: 11, get_uptime
Sent 66 127.783823 127.783732 6: seq: 12, get_clock
Sent 67 127.834411 127.834320 6: seq: 13, get_clock
Sent 68 127.885015 127.884924 6: seq: 14, get_clock
Sent 69 127.935633 127.935542 6: seq: 15, get_clock
Sent 70 127.986673 127.986582 6: seq: 16, get_clock
Sent 71 128.037362 128.037271 6: seq: 17, get_clock
Sent 72 128.087951 128.087860 6: seq: 18, get_clock
Sent 73 128.138521 128.138430 6: seq: 19, get_clock
Sent 74 128.139344 128.139253 6: seq: 1a, get_clock
Sent 75 128.150351 128.150260 6: seq: 1b, get_config
Sent 76 128.151203 128.151104 7: seq: 1c, allocate_oids count=13
Sent 77 128.152309 128.151425 64: seq: 1d, config_spi oid=0 pin=gpio1 cs_active_high=0, config_adxl345 oid=1 spi_oid=0, config_spi oid=5 pin=gpio9 cs_active_high=0, spi_set_software_bus oid=0 miso_pin=gpio3 mosi_pin=gpio0 sclk_pin=gpio2 mode=3 rate=5000000, config_endstop oid=2 pin=gpio24 pull_up=0, config_trsync oid=3, config_tmcuart oid=4 rx_pin=gpio20 pull_up=0 tx_pin=gpio20 bit_time=300, config_digital_out oid=8 pin=gpio13 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=8 cycle_ticks=120000, config_digital_out oid=9 pin=gpio14 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=9 cycle_ticks=120000, config_analog_in oid=10 pin=gpio28
Sent 78 128.153189 128.151425 63: seq: 1e, spi_set_software_bus oid=5 miso_pin=gpio11 mosi_pin=gpio8 sclk_pin=gpio10 mode=1 rate=4000000, config_thermocouple oid=6 spi_oid=5 thermocouple_type=MAX31865, config_digital_out oid=11 pin=gpio7 value=0 default_value=0 max_duration=60000000, set_digital_out_pwm_cycle oid=11 cycle_ticks=1200000, config_stepper oid=7 step_pin=gpio18 dir_pin=gpio19 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=12 pin=gpio17 value=1 default_value=1 max_duration=0, finalize_config crc=3237245062, spi_send oid=5 data=b'\x80\xc3', queue_digital_out oid=8 clock=29333331 on_ticks=0
Sent 79 128.153958 128.151425 55: seq: 1f, queue_digital_out oid=9 clock=29333545 on_ticks=0, query_analog_in oid=10 clock=39745254 sample_ticks=12000 sample_count=8 rest_ticks=3600000 min_value=0 max_value=32760 range_check_count=4, query_thermocouple oid=6 clock=39265254 rest_ticks=3600000 min_value=15240 max_value=32318 max_invalid_count=3, queue_digital_out oid=11 clock=29334118 on_ticks=0, get_config
Sent 80 128.166758 128.166556 14: seq: 10, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 81 128.171371 128.171082 19: seq: 11, tmcuart_send oid=4 write=b'\xea\x03\x080\x80\x00\n\x08\xb8\x87' read=0
Sent 82 128.174089 128.173887 14: seq: 12, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 83 128.178780 128.178491 19: seq: 13, tmcuart_send oid=4 write=b'\xea\x03h0\x80\x00\x12\x08 \xda' read=0
Sent 84 128.181525 128.181323 14: seq: 14, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 85 128.186163 128.185874 19: seq: 15, tmcuart_send oid=4 write=b'\xea\x03\x88=\x9a\x06\x02h*\xbf' read=0
Sent 86 128.188891 128.188689 14: seq: 16, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 87 128.193500 128.193211 19: seq: 17, tmcuart_send oid=4 write=b'\xea\x03\x082\x80\x10\x9ah"\x9c' read=0
Sent 88 128.196231 128.196029 14: seq: 18, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 89 128.200833 128.200544 19: seq: 19, tmcuart_send oid=4 write=b'\xea\x03h2\x80\x1e\xfa\xef?\xdf' read=0
Sent 90 128.203560 128.203358 14: seq: 1a, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 91 128.208175 128.207886 19: seq: 1b, tmcuart_send oid=4 write=b'\xea\x03\x08>\xe4\x1ar\x88\xa4\x85' read=0
Sent 92 128.210894 128.210692 14: seq: 1c, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 93 128.215492 128.215203 19: seq: 1d, tmcuart_send oid=4 write=b'\xea\x03(2\x80\x00\x02\x88"\xf3' read=0
Sent 94 128.218223 128.218021 14: seq: 1e, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 95 128.222825 128.222536 19: seq: 1f, tmcuart_send oid=4 write=b'\xea\x03\x088\x80\x00\x02\x08 \xba' read=0
Sent 96 128.225556 128.225354 14: seq: 10, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 97 128.242606 128.242507 7: seq: 11, stepper_get_position oid=7
Sent 98 128.243234 128.243032 14: seq: 12, tmcuart_send oid=4 write=b'\xea\x03H-\xd5' read=10
Sent 99 128.250571 128.250480 6: seq: 13, emergency_stop
Dumping receive queue 100 messages
Receive: 0 127.655840 127.654765 49: seq: 1e, identify_response offset=520 data=b'\xf3!G\xddz>#9,\x81\xc8\x9cd3\xc7[\xf7\xbc?b7\xe5+\xf8\x91\xc3\xa1\xadf7\x86v\x04+\x07\x86\x94:\x8a\x81'
Receive: 1 127.656962 127.655890 49: seq: 1f, identify_response offset=560 data=b"\xdd\x101\x86\x8eA<\xf1|'\xb6;\xc5a\xb2\xf2\xe1\xc1\x91\xb65?\xe2\xa4v/\x1f^;N\xb2\x89''\x8d\xd3\x1f;\xac\xb7"
Receive: 2 127.658083 127.657011 49: seq: 10, identify_response offset=600 data=b'\xf2\xbd\xdc~\xff\xe6\xef\x10\xe5\x92dr\x16U\x8bfTJk&\x89\xb3\x1e9,\xd7.r\x94\xf2\x88\xb51)*;|m\xca|'
Receive: 3 127.659219 127.658144 49: seq: 11, identify_response offset=640 data=b'j\xcd\xac\xdcWyh\xe0\xd9\xda\xbb\x81c|\xb7\xa4\xc3T[\x13\xabDo\x86\x14\xeb\x14\xb0\x83\x1ak\xc9=\xa4\xb1cl\xd8\xf1~'
Receive: 4 127.660345 127.659270 49: seq: 12, identify_response offset=680 data=b'\xdfB(\xe9\x8eJ\xd4\xdfvB]8\xd7\x1e\xf6\xe5X\xf4\xd66\xfa\x97\xfc \x0e\xb1\xc1.\xa2\xe5\rb\xcf\x89\xb5\xc8a\xe9Q\x1e'
Receive: 5 127.661472 127.660394 49: seq: 13, identify_response offset=720 data=b'N\xac\x10Y+\xfe0\x82=\xb7\x90\xd9\xd6f\x06X\xb6\xca\x96I?\x91\x05\xc3\xc0\xcc\xda\xbe\xe2=\xde\x07y\xa5\xa7x\x15\x1b\x80\xe7'
Receive: 6 127.662597 127.661520 49: seq: 14, identify_response offset=760 data=b'^\x0c\xfc\x00\x02\x8d\x96\x00\x81\x14\xbe\xe7\xfd\x967\xe5k\x8e\x81\r\x88\x80%\nr\xf9\xae\xdd\xf3\x83\xb4#\x8b}\xe7;\x80\x9e\xdb\xa4'
Receive: 7 127.663740 127.662644 49: seq: 15, identify_response offset=800 data=b'3MK@\xba\x0b\xac\xc4\xae\x95q/\xb6[\xde#\x13\xb2\xa5\xe0\x10g\xeer\x95\xf4\x80\xa6b\xe0V@18\xe7F@:\x01\x97'
Receive: 8 127.664873 127.663791 49: seq: 16, identify_response offset=840 data=b'\xceI\x86\xac\xecK\n\x89og[\xf0\xe6\xb2h\x1eF\x99\x8b\n\xe4\x17\xeb%$\x1d\xe4\xaeg\xea\x18x\x08M\xc7\x0e\x15\x03\xae\xf9'
Receive: 9 127.666001 127.664921 49: seq: 17, identify_response offset=880 data=b'v\xa6\xc3u.\x81\x84\x1c\x8c\xd2f#\x1c\x93\xe8\x17Q\x00\x86Za^\xae\xd4`\xa0!\x8cT\xa4\x1fm"\\\xb9\x17\xc3\xb5\xbc\xe6'
Receive: 10 127.667143 127.666048 49: seq: 18, identify_response offset=920 data=b':\x03\xae\t\x10\xe3\x10\x90\xedG9\x98\xaa\x18\x05\xfc\xe3/\xaa\x8eK\xb2\xe34r\xa7d\xbb\x19\x9e\x8b\x9e\xfb\xc7\xc1\xf7\xac\xbfU\x85'
Receive: 11 127.668309 127.667218 49: seq: 19, identify_response offset=960 data=b'\x19\x1e\xc3\xb4H\t\x93\xb6\x93\x90\x8f\x14\xf9\xa8x3\x88\r\xd4\x1f\x9b\r\\\xa8\x1c\xd6\xa6e \xc4d\x00\xd8\x1b\xbfb2\xc3\x0e.'
Receive: 12 127.669454 127.668382 49: seq: 1a, identify_response offset=1000 data=b'\xdc\xb5u\xa5&\xdf6\x02\xc6\xfb\xbe\x9d\x18\xc5\n\xd4h\xe2\xbb\x12\xba5\x87\xcc\xdf\x19\xbb\xca\x99\n\x15V\xbb\xd1\xe3%\x03\xc3&\x9b'
Receive: 13 127.670694 127.669529 49: seq: 1b, identify_response offset=1040 data=b'\n\xaa\x9d\x89\xc1\xc2u\xeb\x00N\xd9\xe0\xe8\x82\xdfj\xe5\x00&\xe5O\x80h\x11\xc2\x85\x88\x16K\x0b\x10VH\xff\xa7\xb7\xed\x9d\xb7\xe9'
Receive: 14 127.671847 127.670762 49: seq: 1c, identify_response offset=1080 data=b'\xf4\xe3fP\x1dn\xe1\xe0\x8e\x97\x8f^]\x95D\x86\x86\xa0\xac\xb2\x14t-\x04\xb4\xf0~/Pg\x06\xc1\xa4\x10\t\x85\xba\x98@\x1d'
Receive: 15 127.672995 127.671915 49: seq: 1d, identify_response offset=1120 data=b'\x88\xd4"\t\xaa\x8e\x10\xcd<\x80S\xf6\x16\x04\x89\x95eiZ`\x04\xb8\x96\xcb)XH\xd3\xd2\x92\x1c\x94 !\x9e4\x80;@d'
Receive: 16 127.674148 127.673061 49: seq: 1e, identify_response offset=1160 data=b'\r\xef \x87\x7f\xa5\x96\xc7\x88\x04)[lHGK\xcb\x10a\x0e\x84\x04\x00\xd6d\x8f\xa5\xb5\xaf\\\xe2\xd9\xca\xc4Th\x02\xe9\x14\xa2'
Receive: 17 127.675288 127.674215 49: seq: 1f, identify_response offset=1200 data=b'l\xe5Y\xca\x82t4\xf2c5\xb5\xbd\xa3\xf5k\xa9\xc8\x1e\tJ)\x0bn\xcd\x13bMj\x801w3W;\xf2\x9e\xd2\x95\t;'
Receive: 18 127.676451 127.675354 49: seq: 10, identify_response offset=1240 data=b';\x15\xc2\xe0W@B\x80\x08\xa0\xaa8\x88\xf6\x91\x1e\xaa\xf3\x14\xf4\xc3\xfb\xe0\x00X\x10\xc2\xf8<\x04\x0f\x02\xa0;9\x00R\x1c\xa8\xd2'
Receive: 19 127.677597 127.676519 49: seq: 11, identify_response offset=1280 data=b'\xcf\xe2\x9c\xd4\x81phA\x87\x1a\xfe\xa2I\x80\xea\xc4\x86T\xd1S\x02\x8b\x08\xc8\xc8\xe3OjJ\x90\n\x92\xe2\xca;|\xe2m\x9c\x93'
Receive: 20 127.678739 127.677663 49: seq: 12, identify_response offset=1320 data=b'\xba\xe8\xb6\x9c\x13\x9c\x17\x1f\xbd\xdd$5\xbb\x934\x83K:\xcd\xec\xdb\x8a{I\x02\x8e,\xdc\x91c9f/dk2\xcb\xbe\x95\xe2'
Receive: 21 127.679880 127.678805 49: seq: 13, identify_response offset=1360 data=b'X\xddw\x80t\xa1\xb9\xf9:\x1f\t\x98\x0c\x95\x94\xdfJ\xc3\xd9j\nu<\x0bgK\x84R\xc5c\x8e\xa9\x1er\x82\xc0R\xdc\xfaM'
Receive: 22 127.681023 127.679948 49: seq: 14, identify_response offset=1400 data=b'\xb4v\x00\xaa\xe6@\xeb\xa5\x84\xc4l~\xf2\xb2\x15\x9c\x80\x8bu\xe97\x11\xb5\xca\x9f6\xbdSr\x02\x8d\xe8\xd3(C\xf4\xe9#\x1e\x00'
Receive: 23 127.682175 127.681089 49: seq: 15, identify_response offset=1440 data=b"&\xb1rp\x83_R\xf2\xae\xedu\xf1B\xde\xab\xe6\xd6H\xf8K'@%~\xf5\xb4\xb6\x98\x02.| \x10\n\xa5\xcac~\xec\xf9"
Receive: 24 127.683321 127.682241 49: seq: 16, identify_response offset=1480 data=b'@\xfa\xc5\x94\xa9\xd8\xf78\x7fw\x91_\x9f\xff\x8a%\xc1\x1aT\xf4\xc3\xe7\xbb\xfc\xd3\xd5\xcd\x1d>\x1e\xe7\x05vZ:\xd1\xce\xdf\xe2\xdf'
Receive: 25 127.684459 127.683387 49: seq: 17, identify_response offset=1520 data=b'h\x16l?\xe8\xedTmg\xe1v\xa9\xb7Wj{\x1dnWz\x1bjZ\xf5\x93\x84\x00\xdc\x00,\x08`\x19\x02l4@L\xf4\xc5'
Receive: 26 127.685695 127.684533 49: seq: 18, identify_response offset=1560 data=b'\x07\x04n\r\x00Q\x18\x1f\x90\xb83\x00Dc\x1c\x12\x19\x19\t\x10\x8d!\x89\x91\x91\x00Q\x18\x12\x18\x19\tDZ\x80!\x81\x91\x95\x01'
Receive: 27 127.686853 127.685763 49: seq: 19, identify_response offset=1600 data=b'\x11\x18\x85\x04FV\x06D`t@\xa0\x95\x01Q\x18\x1f\x90he@4\xc6\x13"\xc1e\x03%\'\x04\x15\x02MU\xbdT\x7f\x17!'
Receive: 28 127.688001 127.686920 49: seq: 1a, identify_response offset=1640 data=b"P\x19(lM?\xab\x10\xae\n\xf4\xa6\xef\x0c/\xb5\xc2\xd7\xbcG\xf43\x0f\xc1\x1e\x02C\xca\xe8'\r\xe1\xca\xc0\x1a\x88\x8b\x18\xd9\xb8"
Receive: 29 127.689152 127.688068 49: seq: 1b, identify_response offset=1680 data=b'8\xbfA\xd0\x7f\xde^\xfe\xfc\xf9\xf2\xe6\xe2\xdf\xf8\x14S\xff`\xeb\xe3O\x17\x1f\xd4\x0e>\xbf\xcc\xea\xd5\xcd\xd5\xfd\xd5\xf9G\x85\xdc\n'
Receive: 30 127.690294 127.689219 49: seq: 1c, identify_response offset=1720 data=b'\x18\x10]_|\x86i\xdf\xc5s\xd5`\xfc\xf4\xcb59W\x8c\xd5\xd4\xed\xe5\xc5\xe5\xd5\xbf.\xf3_\xaen\xde\xfd\xf4\x0bF\xa9\x18\x17'
Receive: 31 127.691445 127.690360 49: seq: 1d, identify_response offset=1760 data=b'\xef.oaQ\x91\tt\x1c\xf8\xd4\xdd\xfd\xf9\xfd]~\xf7\xf9\xfa\xee\xe7\xfc\x87\xf3\xbbKD\xb6\xc0\xe5\xcbO\x9f.o\xf3\x1f~\xba'
Receive: 32 127.692591 127.691511 49: seq: 1e, identify_response offset=1800 data=b'\xff1\xbf|\xf7\x1e\xd6\xa3/\xf8\xc8\x1a\xe1\xd9\xa7\x1a\x13\xaa\xad\xa9\x1f\x1cz\x88\xca\xa6\x17\x0cj\x94\x1e\x1b\xa8\xb6\x98F\x95z$j'
Receive: 33 127.693740 127.692659 49: seq: 1f, identify_response offset=1840 data=b'\xdf\xa3\x07\x04:YF\xa3\xadz\x8ai\xb7Y\xaa\x11\xaahE\xa3\x07\xf5\xac\xd5V\x1f\xd1%h\xdf\x11\xdd\x82\x96\x1c\xd15h\xb3\x11'
Receive: 34 127.694900 127.693811 49: seq: 10, identify_response offset=1880 data=b'\xdd\x83\xd6\xa9\xe2\x11\xe4\x15\x13\x8c\xee/\xaf\x81\xaf\xf3\xfb\xcf\xb7\x8aU CY\xe7\xec\xec?\xf3\xb7\xc9\xfc\xbf_&i\x13\x1e\xf0\xaa'
Receive: 35 127.696042 127.694969 49: seq: 11, identify_response offset=1920 data=b'y\x1b%I\xa2X+d6O\x97\x95bn\xa8y6\x8fb\xa0,\xd6\xa7\xb4$\xb4\xd9Sf\xd5\x92\xd0\x06\x1c\xd3\x88$\xa1\x8d\x90'
Receive: 36 127.697186 127.696111 49: seq: 12, identify_response offset=1960 data=b'r,r\x98\xd1\x08\x8b&\xc4\x08E\x9b\xc0\xe0\xde\xc33^=L\x15\x07L\x85\xdd\r\xd5\xe5\xd46<\xafE!\xf1\xad\x0f\x06\x81\xa5'
Receive: 37 127.698329 127.697255 49: seq: 13, identify_response offset=2000 data=b'\x01+j\xd5ze\xbbB\xaa5\xde\x14\x0f5\xaf(\xb9\x9c\xebM\xf3 \xaeH^\xe7M\x8bU \x03#a\r$`VH)\xb6'
Receive: 38 127.699474 127.698396 49: seq: 14, identify_response offset=2040 data=b'\r\xaf\xe0\x19&$\xbbzG\xcd\xd4\x8b\xa2\x81\xed\x81Anb\x98\xdf\x19\x94$T\x870\x95b\xd8\xf3N\xc0\x98R\x85d\x1d$;'
Receive: 39 127.700696 127.699540 49: seq: 15, identify_response offset=2080 data=b'\xa0\x8c\n(8\xfb\x97\x01\x8b0\x86\x98\x8b\x1a0\x17\x03\x03\xe4\x86^\xeac\xd1{^\x03+"0\xcd\x90\xaeiU\xd5k\xaa\xdc\x85'
Receive: 40 127.701842 127.700763 49: seq: 16, identify_response offset=2120 data=b'\xebx\xc3L\xab\xc7\x9e\x079_P\xf7\x9duE/aK=\x0f\x95a\x99\x8d\x9eC\xd9(\x07eb?\xfe\x8ao\x10\xec\x82\xfeC'
Receive: 41 127.702990 127.701909 49: seq: 17, identify_response offset=2160 data=b"wA'bf\xd1IJ\x95\xe6U|\xc1n\xce/>\xd0\x0b\x08g\xe0@\xb7\xf7fm\xee\xaf\xdd^\x9e\xbf\xd3\x1b\x98bq\xe3\x9e"
Receive: 42 127.704133 127.703056 49: seq: 18, identify_response offset=2200 data=b'\xb29e\xef+\xaa\x95\x99\xe9a\xbbV<\x95\xacT\x7f\x19(\xfd5AY\x89[\x030\xe4\xb0\xd8s\xa8w\xa9Se6\xb1?\xab'
Receive: 43 127.705383 127.704201 49: seq: 19, identify_response offset=2240 data=b",2\xf3\xb0\xec\xdb'n8g\xd8\xe1D\x0fq\xdb\xb6\x1fj;\xa0\xd4k8\xd8\xd7\xaffKT\xe2\xf1\x03\xcab\xe4:\xe8\x92f"
Receive: 44 127.706536 127.705453 49: seq: 1a, identify_response offset=2280 data=b'\x15\x1b\x97DN2]4\xc5\x02V\x18\xde\xba~\xf1\x94;\xd1il\xa9wp\xf2`\xf1a@+\xd7\xc5\x0bjne\x04KE\xe9'
Receive: 45 127.707741 127.706606 49: seq: 1b, identify_response offset=2320 data=b'5\x97\xb2\x00U\xf2\xa6D\xeb\xd6\xf6\x80\x1bBJ\xb0r\tO\xdcj\xac\xd1\x8d\xe00V\xe3L\x17:\xca\x14\xf8\x13G\x8d`!\xfe'
Receive: 46 127.708894 127.707810 49: seq: 1c, identify_response offset=2360 data=b'\xf5\x03\xbb\xa2\xaf\x94Chh\xec\x88^\xa3\xc4\xd5\x03\x85\xc1\xa8\xdf\xd4\xed3\xbdpn\xc0\x8b\nF\xec\xa0_\xab \x85\xdf[\xd4F'
Receive: 47 127.710045 127.708961 49: seq: 1d, identify_response offset=2400 data=b'\x03O\x98\x8e*}\xea\xff\xeaU\xa0\xc5-/T\x0eP.\x8f\xae^\x89\r\x14\xc7p\xb3uHp\x90M\xdf\xee\xe1 97\x00\xc2'
Receive: 48 127.711186 127.710112 49: seq: 1e, identify_response offset=2440 data=b'/\xbe\xc6\xe1O-JNm\xc5[\xae\x99Ao\x87C\x16\xb0+\xd0A\xf0\x9b\xd2\x9d\x058\x90\n{\x16u\rue\xc9a\xd7\xef'
Receive: 49 127.712330 127.711254 49: seq: 1f, identify_response offset=2480 data=b']S\xa5\xecNZ\xc9|\xe3\x04~\xdb\xb9\x03\xe7&\xdd)\x02\x10B\xec\xc7\xbdY3\xce\x01B\xb93\xfdi\xf5\x8d\n\x90\xa9p\xa0'
Receive: 50 127.713470 127.712397 49: seq: 10, identify_response offset=2520 data=b'\xe2\x93\xff\xb9\xeaN\xc7\x87\xa1m\xd9\xa6P\xdc\x11g\xd8\x18\xbc\xf7M\t\xe3\x10\x00\xaa\x8e<\xf5\xb1\xee\x95<\xf0$\x94\xd4\x92\xab\xc8'
Receive: 51 127.714697 127.713537 49: seq: 11, identify_response offset=2560 data=b'\xad\xbe\xe6\xe5\xe5nl\x1e\x01T\xa8\xd0\x8a\x1f{\xbcu\xe96@Kd\xcbP\xf9\xcb\xb6W\xee\x07%\xb8d\xa5\xd4ztMw\x8a'
Receive: 52 127.715841 127.714772 49: seq: 12, identify_response offset=2600 data=b'lmSC0|\x02\x04\x18\xb7u\x8c\xb3\x0ca"\xd4n\x80\xb9\x8bp`OK}[\xb4\xb1T\x7fq\xac(_J\xec\xc6a\\'
Receive: 53 127.716991 127.715910 49: seq: 13, identify_response offset=2640 data=b'#\xfd\x96\xb0\x8d[\xa9}\x97(\x97W|\xd6E\x8f\x99%9^\xf1\xa3p\xe9rl\xf0\xeb\x90K\x06\x8e\xef\x1cH\\\x07Mp\xcc'
Receive: 54 127.718140 127.717057 49: seq: 14, identify_response offset=2680 data=b'\\P\xa7$\xd1*\xcbT^\xd4\x93\x85J\x8d4YdJS0Y,\x960N\xbe\x00&\xb4\xd0\x06e>{\x7f\xf3\x99\xbd\xff\xf4'
Receive: 55 127.719280 127.718207 49: seq: 15, identify_response offset=2720 data=b'\xf1\t\x0bP\x90Q\x07n\xcd\xe9\xc3\xaai\x81M\xba9\xca\x1d\xf3c\xed\x82\x13\x0c\x91\xe6\x03\xe9\xe4H\xe15\xb8\x98\xda\xa1\xe7\xe0\t'
Receive: 56 127.720405 127.719347 49: seq: 16, identify_response offset=2760 data=b"\xa6.\xdb\x1efz4\x8ex\xea\x14^nz\x01s&.\xe1\x1d\x98\xa9\xa8\x91\xe0\xdek'\x89\xfd\xfe\t)O\xb7\x93\xd5\x93N5"
Receive: 57 127.721550 127.720473 49: seq: 17, identify_response offset=2800 data=b'\xa2q\xcd\xa8X\xbd\x93!X\xe4\xb6s\x81T\xa8/\x1b\xaa\xd7\xf6-V\xf5\x11=\xc8\xbd\xfb\xd1@M\xfb_\x82y\xdbn\xfe\tF'
Receive: 58 127.722741 127.721617 49: seq: 18, identify_response offset=2840 data=b'^\xd3>\x9f\xa0\xde\xb5{\x08o\x87\x97\xf8\xddy<\x9f\xb9\xb6un\xb4\xe3\xb5\xbd\xd4\xdc\x083r\xada\x0f\xd6\xf6\x88\xe9\x19~\x8a'
Receive: 59 127.723874 127.722806 49: seq: 19, identify_response offset=2880 data=b'\xb0X\xe59\xa1\xb0\xb0\x1e"\xb9\xacS\xd7J>h\xeay\x0c\x98\x86\xb1/\x90\xd4k\x03k\x99\x98\x0e\xc7X\x96\xaa\xd7\x8d\xec\xe1\xe3'
Receive: 60 127.725015 127.723943 49: seq: 1a, identify_response offset=2920 data=b'\x1d\xc8\xf4?\xa5\x9c`\xfe&w\x86\xaa\xaf~\x9ct\x12$\xa6\xd7\xa6\xe4A#\xf9\x04\xb3\xa1\x7ff\xd2\xefs\xbd-\xdd\x913\xefu'
Receive: 61 127.726164 127.725083 49: seq: 1b, identify_response offset=2960 data=b'\xea\x0b\xf9(\x1fF\x15\xe6+\xea\xb2B\x81\x041"7\xb9EjsQ\xbd(\x17\x1dM[\xf8\xb8\x0c\xb3c\xcd\xa2\x03M\xfa\rA'
Receive: 62 127.727311 127.726231 49: seq: 1c, identify_response offset=3000 data=b'_\xa5Q6\xed\xce\xfc\xa9\t\xc4\xaa\xb8\xed\x07U\x18\xae\x13*u\xa53]9\xee\xf5\x8f\xfcM\xfbN\xec:.A;\x86Z\xf6\x02'
Receive: 63 127.728454 127.727379 49: seq: 1d, identify_response offset=3040 data=b'\xf1.\x82\xd83\xd5\xe9\xd1\x900R\xa8\xd7\x8a^\xb8.\xcd!\x0f\xd8\x9f!~\xd7~\xe7\xc5\x19\x1b\x04\x02\xd3@9\xfe\x89\xc2\xb3='
Receive: 64 127.729598 127.728521 49: seq: 1e, identify_response offset=3080 data=b'L<\xf4\t\x89\xd1W\xdbq\x12*\xf0\xad\xa5\xff?\n\x04\xbf\xa7\xf9i\x14\x9f\xceO\x92t}\xb2-\x92t\x9e\xa4\xe9:\x9d}\xf9'
Receive: 65 127.730186 127.729667 14: seq: 1f, identify_response offset=3120 data=b'\x1f\xdc\x00}\x1b'
Receive: 66 127.730832 127.730329 9: seq: 10, identify_response offset=3125 data=b''
Receive: 67 127.732799 127.732649 14: seq: 11, canbus_id canbus_uuid=b'\x9fQ\x0b\xf96a' canbus_nodeid=5
Receive: 68 127.733410 127.733245 11: seq: 12, uptime high=0 clock=21922410
Receive: 69 127.783996 127.783823 10: seq: 13, clock clock=22529343
Receive: 70 127.834582 127.834411 10: seq: 14, clock clock=23136470
Receive: 71 127.885192 127.885015 10: seq: 15, clock clock=23743760
Receive: 72 127.935804 127.935633 10: seq: 16, clock clock=24351173
Receive: 73 127.986930 127.986673 10: seq: 17, clock clock=24964607
Receive: 74 128.037540 128.037362 10: seq: 18, clock clock=25571940
Receive: 75 128.088123 128.087951 10: seq: 19, clock clock=26179018
Receive: 76 128.138685 128.138521 10: seq: 1a, clock clock=26785858
Receive: 77 128.139927 128.139344 10: seq: 1b, clock clock=26796070
Receive: 78 128.150544 128.150351 10: seq: 1c, config is_config=0 crc=0 is_shutdown=0 move_count=0
Receive: 79 128.154504 128.153958 15: seq: 10, config is_config=1 crc=3237245062 is_shutdown=0 move_count=1024
Receive: 80 128.170689 128.166758 18: seq: 11, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x08"\xba'
Receive: 81 128.173713 128.171371 8: seq: 12, tmcuart_response oid=4 read=b''
Receive: 82 128.178022 128.174089 18: seq: 13, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02(\xa2\xfe'
Receive: 83 128.181138 128.178780 8: seq: 14, tmcuart_response oid=4 read=b''
Receive: 84 128.185478 128.181525 18: seq: 15, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02H\xa2\xd9'
Receive: 85 128.188513 128.186163 8: seq: 16, tmcuart_response oid=4 read=b''
Receive: 86 128.192819 128.188891 18: seq: 17, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02h"\x9d'
Receive: 87 128.195853 128.193500 8: seq: 18, tmcuart_response oid=4 read=b''
Receive: 88 128.200165 128.196231 18: seq: 19, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x88"\xca'
Receive: 89 128.203183 128.200833 8: seq: 1a, tmcuart_response oid=4 read=b''
Receive: 90 128.207492 128.203560 18: seq: 1b, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xa8\xa2\x8e'
Receive: 91 128.210522 128.208175 8: seq: 1c, tmcuart_response oid=4 read=b''
Receive: 92 128.214822 128.210894 18: seq: 1d, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xc8\xa2\xa9'
Receive: 93 128.217846 128.215492 8: seq: 1e, tmcuart_response oid=4 read=b''
Receive: 94 128.222158 128.218223 18: seq: 1f, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\xe8"\xed'
Receive: 95 128.225177 128.222825 8: seq: 10, tmcuart_response oid=4 read=b''
Receive: 96 128.229486 128.225556 18: seq: 11, tmcuart_response oid=4 read=b'\n\xfaO \x80\x00\x02\x08#\x82'
Receive: 97 128.242744 128.242606 8: seq: 12, stepper_position oid=7 pos=0
Receive: 98 128.247158 128.243234 18: seq: 13, tmcuart_response oid=4 read=b'\n\xfaO-\x80\x00\x02\x08\xa1\xa2'
Receive: 99 128.250872 128.250571 11: seq: 14, shutdown clock=28130933 static_string_id=Command request
Attempting MCU 'ebb' reset command
Attempting MCU 'mcu' reset command
b'Got error -1 in can read: (100)Network is down'
webhooks client 140734903676240: Disconnected
Restarting printer
Start printer at Tue Nov 19 21:18:57 2024 (1732022337.6 158.2)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = !PC13
enable_pin = !PE6
rotation_distance = 40
microsteps = 64
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_x:virtual_endstop
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 1.8
sense_resistor = 0.022
diag1_pin = !PC15
driver_sgt = 1
driver_tbl = 1
driver_toff = 2
driver_hend = 1

[stepper_y]
step_pin = PE5
dir_pin = !PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 64
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_y:virtual_endstop
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 1.8
sense_resistor = 0.022
diag1_pin = !PF0
driver_sgt = 1
driver_tbl = 1
driver_toff = 2
driver_hend = 1

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_min = -3
position_max = 290
homing_speed = 20
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 0.8
sense_resistor = 0.075

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075

[stepper_z2]
step_pin = PB4
dir_pin = PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = !PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
webhooks client 140734890460112: New connection
webhooks client 140734890460112: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Sending MCU 'ebb' printer configuration...
Configured MCU 'ebb' (1024 moves)
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (25.0, 25.0)    | (25.0, 25.0)
  1   | (103.8, 25.0)   | (103.8, 25.0)
  2   | (182.5, 25.0)   | (182.5, 25.0)
  3   | (261.2, 25.0)   | (261.2, 25.0)
  4   | (340.0, 25.0)   | (340.0, 25.0)
  5   | (340.0, 103.8)  | (340.0, 103.8)
  6   | (261.2, 103.8)  | (261.2, 103.8)
  7   | (182.5, 103.8)  | (182.5, 103.8)
  8   | (103.8, 103.8)  | (103.8, 103.8)
  9   | (25.0, 103.8)   | (25.0, 103.8)
  10  | (25.0, 182.5)   | (25.0, 182.5)
  11  | (103.8, 182.5)  | (103.8, 182.5)
  12  | (182.5, 182.5)  | (182.5, 182.5)
  13  | (261.2, 182.5)  | (261.2, 182.5)
  14  | (340.0, 182.5)  | (340.0, 182.5)
  15  | (340.0, 261.2)  | (340.0, 261.2)
  16  | (261.2, 261.2)  | (261.2, 261.2)
  17  | (182.5, 261.2)  | (182.5, 261.2)
  18  | (103.8, 261.2)  | (103.8, 261.2)
  19  | (25.0, 261.2)   | (25.0, 261.2)
  20  | (25.0, 340.0)   | (25.0, 340.0)
  21  | (103.8, 340.0)  | (103.8, 340.0)
  22  | (182.5, 340.0)  | (182.5, 340.0)
  23  | (261.2, 340.0)  | (261.2, 340.0)
  24  | (340.0, 340.0)  | (340.0, 340.0)
TMC stepper_x failed to init: Unable to write tmc spi 'stepper_x' register GLOBALSCALER
TMC stepper_y failed to init: Unable to write tmc spi 'stepper_y' register GLOBALSCALER
TMC stepper_z failed to init: Unable to write tmc spi 'stepper_z' register GLOBALSCALER
TMC stepper_z1 failed to init: Unable to write tmc spi 'stepper_z1' register GLOBALSCALER
TMC stepper_z2 failed to init: Unable to write tmc spi 'stepper_z2' register GLOBALSCALER
TMC stepper_z3 failed to init: Unable to write tmc spi 'stepper_z3' register GLOBALSCALER
Starting heater checks for heater_bed
Starting heater checks for extruder
Stats 159.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=2299 bytes_read=5382 bytes_retransmit=0 bytes_invalid=0 send_seq=191 receive_seq=191 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399925882 ebb: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=1285 bytes_read=4814 bytes_retransmit=0 bytes_invalid=0 send_seq=131 receive_seq=131 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12001074 adj=12003299  heater_bed: target=0 temp=0.0 pwm=0.000 RPi: temp=47.4 EBB: temp=0.0 chamber: temp=0.0 sysload=0.11 cputime=1.563 memavail=3849056 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
Stats 160.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=2305 bytes_read=5398 bytes_retransmit=0 bytes_invalid=0 send_seq=192 receive_seq=192 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399972961 ebb: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=1291 bytes_read=4829 bytes_retransmit=0 bytes_invalid=0 send_seq=132 receive_seq=132 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000662 adj=12003299  heater_bed: target=0 temp=0.0 pwm=0.000 RPi: temp=49.0 EBB: temp=0.0 chamber: temp=0.0 sysload=0.18 cputime=1.569 memavail=3849056 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
Stats 161.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=2311 bytes_read=5504 bytes_retransmit=0 bytes_invalid=0 send_seq=193 receive_seq=193 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399990256 ebb: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=1297 bytes_read=4960 bytes_retransmit=0 bytes_invalid=0 send_seq=133 receive_seq=133 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000541 adj=12000629  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=49.0 EBB: temp=33.6 chamber: temp=23.5 sysload=0.18 cputime=1.575 memavail=3849840 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 162.4: gcodein=0  mcu: mcu_awake=0.014 mcu_task_avg=0.000004 mcu_task_stddev=0.000042 bytes_write=2317 bytes_read=5638 bytes_retransmit=0 bytes_invalid=0 send_seq=194 receive_seq=194 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399993022 ebb: mcu_awake=0.019 mcu_task_avg=0.000017 mcu_task_stddev=0.000030 bytes_write=1303 bytes_read=5076 bytes_retransmit=0 bytes_invalid=0 send_seq=134 receive_seq=134 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000494 adj=11999744  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.4 sysload=0.18 cputime=1.578 memavail=3849840 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 163.4: gcodein=0  mcu: mcu_awake=0.014 mcu_task_avg=0.000004 mcu_task_stddev=0.000042 bytes_write=2323 bytes_read=5759 bytes_retransmit=0 bytes_invalid=0 send_seq=195 receive_seq=195 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399994548 ebb: mcu_awake=0.019 mcu_task_avg=0.000017 mcu_task_stddev=0.000030 bytes_write=1309 bytes_read=5178 bytes_retransmit=0 bytes_invalid=0 send_seq=135 receive_seq=135 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000480 adj=11999766  heater_bed: target=0 temp=24.6 pwm=0.000 RPi: temp=49.0 EBB: temp=33.6 chamber: temp=23.4 sysload=0.18 cputime=1.581 memavail=3849840 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 164.4: gcodein=0  mcu: mcu_awake=0.014 mcu_task_avg=0.000004 mcu_task_stddev=0.000042 bytes_write=2329 bytes_read=5865 bytes_retransmit=0 bytes_invalid=0 send_seq=196 receive_seq=196 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399995523 ebb: mcu_awake=0.019 mcu_task_avg=0.000017 mcu_task_stddev=0.000030 bytes_write=1315 bytes_read=5309 bytes_retransmit=0 bytes_invalid=0 send_seq=136 receive_seq=136 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000474 adj=11999868  heater_bed: target=0 temp=24.6 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.5 sysload=0.18 cputime=1.585 memavail=3849840 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
probe: open
Stats 165.4: gcodein=0  mcu: mcu_awake=0.014 mcu_task_avg=0.000004 mcu_task_stddev=0.000042 bytes_write=2349 bytes_read=6016 bytes_retransmit=0 bytes_invalid=0 send_seq=199 receive_seq=199 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399996312 ebb: mcu_awake=0.019 mcu_task_avg=0.000017 mcu_task_stddev=0.000030 bytes_write=1335 bytes_read=5441 bytes_retransmit=0 bytes_invalid=0 send_seq=139 receive_seq=139 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000468 adj=11999978  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.5 sysload=0.16 cputime=1.590 memavail=3849840 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 166.4: gcodein=0  mcu: mcu_awake=0.014 mcu_task_avg=0.000004 mcu_task_stddev=0.000042 bytes_write=2355 bytes_read=6137 bytes_retransmit=0 bytes_invalid=0 send_seq=200 receive_seq=200 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399997046 ebb: mcu_awake=0.019 mcu_task_avg=0.000017 mcu_task_stddev=0.000030 bytes_write=1341 bytes_read=5543 bytes_retransmit=0 bytes_invalid=0 send_seq=140 receive_seq=140 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000517 adj=12000058  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.5 sysload=0.16 cputime=1.594 memavail=3849840 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 167.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2361 bytes_read=6257 bytes_retransmit=0 bytes_invalid=0 send_seq=201 receive_seq=201 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399998561 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1347 bytes_read=5688 bytes_retransmit=0 bytes_invalid=0 send_seq=141 receive_seq=141 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000498 adj=12000258  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.4 sysload=0.16 cputime=1.597 memavail=3849840 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 168.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2367 bytes_read=6374 bytes_retransmit=0 bytes_invalid=0 send_seq=202 receive_seq=202 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399998593 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1353 bytes_read=5790 bytes_retransmit=0 bytes_invalid=0 send_seq=142 receive_seq=142 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000489 adj=12000148  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=47.4 EBB: temp=33.6 chamber: temp=23.5 sysload=0.16 cputime=1.601 memavail=3849872 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 169.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2373 bytes_read=6494 bytes_retransmit=0 bytes_invalid=0 send_seq=203 receive_seq=203 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399998715 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1359 bytes_read=5892 bytes_retransmit=0 bytes_invalid=0 send_seq=143 receive_seq=143 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000481 adj=12000212  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=47.4 EBB: temp=33.6 chamber: temp=23.5 sysload=0.16 cputime=1.605 memavail=3849872 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 170.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2379 bytes_read=6600 bytes_retransmit=0 bytes_invalid=0 send_seq=204 receive_seq=204 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399998794 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1365 bytes_read=6023 bytes_retransmit=0 bytes_invalid=0 send_seq=144 receive_seq=144 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000478 adj=12000251  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.4 sysload=0.15 cputime=1.608 memavail=3849872 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 171.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2385 bytes_read=6721 bytes_retransmit=0 bytes_invalid=0 send_seq=205 receive_seq=205 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399998953 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1371 bytes_read=6125 bytes_retransmit=0 bytes_invalid=0 send_seq=145 receive_seq=145 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000475 adj=12000300  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=46.9 EBB: temp=33.6 chamber: temp=23.5 sysload=0.15 cputime=1.612 memavail=3849872 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 172.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2391 bytes_read=6842 bytes_retransmit=0 bytes_invalid=0 send_seq=206 receive_seq=206 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399999047 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000020 bytes_write=1377 bytes_read=6241 bytes_retransmit=0 bytes_invalid=0 send_seq=146 receive_seq=146 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000472 adj=12000321  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=47.4 EBB: temp=33.6 chamber: temp=23.4 sysload=0.15 cputime=1.615 memavail=3849872 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 173.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2397 bytes_read=6962 bytes_retransmit=0 bytes_invalid=0 send_seq=207 receive_seq=207 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399999150 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000020 bytes_write=1383 bytes_read=6372 bytes_retransmit=0 bytes_invalid=0 send_seq=147 receive_seq=147 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000471 adj=12000344  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.4 sysload=0.15 cputime=1.619 memavail=3849872 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 174.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2403 bytes_read=7083 bytes_retransmit=0 bytes_invalid=0 send_seq=208 receive_seq=208 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399999246 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000020 bytes_write=1389 bytes_read=6480 bytes_retransmit=0 bytes_invalid=0 send_seq=148 receive_seq=148 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000470 adj=12000363  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=47.4 EBB: temp=33.6 chamber: temp=23.4 sysload=0.15 cputime=1.622 memavail=3849872 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 175.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2409 bytes_read=7204 bytes_retransmit=0 bytes_invalid=0 send_seq=209 receive_seq=209 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399999332 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000020 bytes_write=1395 bytes_read=6589 bytes_retransmit=0 bytes_invalid=0 send_seq=149 receive_seq=149 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000469 adj=12000380  heater_bed: target=0 temp=24.6 pwm=0.000 RPi: temp=47.4 EBB: temp=33.6 chamber: temp=23.4 sysload=0.14 cputime=1.626 memavail=3850176 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 176.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2415 bytes_read=7310 bytes_retransmit=0 bytes_invalid=0 send_seq=210 receive_seq=210 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399999423 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000020 bytes_write=1401 bytes_read=6729 bytes_retransmit=0 bytes_invalid=0 send_seq=150 receive_seq=150 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000476 adj=12000390  heater_bed: target=0 temp=24.6 pwm=0.000 RPi: temp=47.4 EBB: temp=33.7 chamber: temp=23.4 sysload=0.14 cputime=1.630 memavail=3850176 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 177.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2421 bytes_read=7431 bytes_retransmit=0 bytes_invalid=0 send_seq=211 receive_seq=211 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399999492 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000020 bytes_write=1407 bytes_read=6838 bytes_retransmit=0 bytes_invalid=0 send_seq=151 receive_seq=151 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000475 adj=12000438  heater_bed: target=0 temp=24.6 pwm=0.000 RPi: temp=47.4 EBB: temp=33.6 chamber: temp=23.4 sysload=0.14 cputime=1.634 memavail=3850176 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 178.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2427 bytes_read=7566 bytes_retransmit=0 bytes_invalid=0 send_seq=212 receive_seq=212 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399999559 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1413 bytes_read=6961 bytes_retransmit=0 bytes_invalid=0 send_seq=152 receive_seq=152 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000473 adj=12000432  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=46.9 EBB: temp=33.7 chamber: temp=23.3 sysload=0.14 cputime=1.637 memavail=3849952 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 179.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2433 bytes_read=7668 bytes_retransmit=0 bytes_invalid=0 send_seq=213 receive_seq=213 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399999628 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1419 bytes_read=7101 bytes_retransmit=0 bytes_invalid=0 send_seq=153 receive_seq=153 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000471 adj=12000428  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.7 chamber: temp=23.4 sysload=0.14 cputime=1.641 memavail=3849952 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 180.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2439 bytes_read=7789 bytes_retransmit=0 bytes_invalid=0 send_seq=214 receive_seq=214 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399999690 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1425 bytes_read=7210 bytes_retransmit=0 bytes_invalid=0 send_seq=154 receive_seq=154 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000471 adj=12000420  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.5 sysload=0.13 cputime=1.644 memavail=3849952 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 181.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2445 bytes_read=7910 bytes_retransmit=0 bytes_invalid=0 send_seq=215 receive_seq=215 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399999728 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1431 bytes_read=7319 bytes_retransmit=0 bytes_invalid=0 send_seq=155 receive_seq=155 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000470 adj=12000422  heater_bed: target=0 temp=24.6 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.4 sysload=0.13 cputime=1.648 memavail=3849952 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 182.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2457 bytes_read=8032 bytes_retransmit=0 bytes_invalid=0 send_seq=217 receive_seq=217 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399999832 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1437 bytes_read=7459 bytes_retransmit=0 bytes_invalid=0 send_seq=156 receive_seq=156 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000469 adj=12000426  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=47.4 EBB: temp=33.6 chamber: temp=23.5 sysload=0.13 cputime=1.652 memavail=3849952 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 183.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2463 bytes_read=8167 bytes_retransmit=0 bytes_invalid=0 send_seq=218 receive_seq=218 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399999869 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1443 bytes_read=7582 bytes_retransmit=0 bytes_invalid=0 send_seq=157 receive_seq=157 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000468 adj=12000413  heater_bed: target=0 temp=24.6 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.5 sysload=0.13 cputime=1.655 memavail=3849952 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 184.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2469 bytes_read=8288 bytes_retransmit=0 bytes_invalid=0 send_seq=219 receive_seq=219 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399999917 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1449 bytes_read=7691 bytes_retransmit=0 bytes_invalid=0 send_seq=158 receive_seq=158 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000468 adj=12000417  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=46.9 EBB: temp=33.6 chamber: temp=23.4 sysload=0.13 cputime=1.659 memavail=3849952 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 185.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2475 bytes_read=8394 bytes_retransmit=0 bytes_invalid=0 send_seq=220 receive_seq=220 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399999949 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1455 bytes_read=7831 bytes_retransmit=0 bytes_invalid=0 send_seq=159 receive_seq=159 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000469 adj=12000418  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=46.9 EBB: temp=33.7 chamber: temp=23.5 sysload=0.12 cputime=1.663 memavail=3849952 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 186.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2481 bytes_read=8515 bytes_retransmit=0 bytes_invalid=0 send_seq=221 receive_seq=221 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399999996 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1461 bytes_read=7940 bytes_retransmit=0 bytes_invalid=0 send_seq=160 receive_seq=160 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000469 adj=12000435  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.4 sysload=0.12 cputime=1.667 memavail=3849968 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 187.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2487 bytes_read=8636 bytes_retransmit=0 bytes_invalid=0 send_seq=222 receive_seq=222 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400000023 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1467 bytes_read=8049 bytes_retransmit=0 bytes_invalid=0 send_seq=161 receive_seq=161 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000468 adj=12000433  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=47.4 EBB: temp=33.6 chamber: temp=23.4 sysload=0.12 cputime=1.670 memavail=3849968 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 188.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2493 bytes_read=8756 bytes_retransmit=0 bytes_invalid=0 send_seq=223 receive_seq=223 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400000053 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1473 bytes_read=8203 bytes_retransmit=0 bytes_invalid=0 send_seq=162 receive_seq=162 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000468 adj=12000432  heater_bed: target=0 temp=24.6 pwm=0.000 RPi: temp=47.4 EBB: temp=33.7 chamber: temp=23.5 sysload=0.12 cputime=1.674 memavail=3849984 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 189.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2499 bytes_read=8876 bytes_retransmit=0 bytes_invalid=0 send_seq=224 receive_seq=224 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400000082 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1479 bytes_read=8312 bytes_retransmit=0 bytes_invalid=0 send_seq=163 receive_seq=163 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000467 adj=12000430  heater_bed: target=0 temp=24.6 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.4 sysload=0.12 cputime=1.678 memavail=3849984 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 190.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2505 bytes_read=8994 bytes_retransmit=0 bytes_invalid=0 send_seq=225 receive_seq=225 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400000112 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1485 bytes_read=8421 bytes_retransmit=0 bytes_invalid=0 send_seq=164 receive_seq=164 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000467 adj=12000429  heater_bed: target=0 temp=24.6 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.4 sysload=0.11 cputime=1.681 memavail=3849984 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 191.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2511 bytes_read=9100 bytes_retransmit=0 bytes_invalid=0 send_seq=226 receive_seq=226 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400000135 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1491 bytes_read=8561 bytes_retransmit=0 bytes_invalid=0 send_seq=165 receive_seq=165 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000466 adj=12000429  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.7 chamber: temp=23.4 sysload=0.11 cputime=1.685 memavail=3849984 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 192.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2517 bytes_read=9236 bytes_retransmit=0 bytes_invalid=0 send_seq=227 receive_seq=227 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400000158 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1497 bytes_read=8670 bytes_retransmit=0 bytes_invalid=0 send_seq=166 receive_seq=166 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000466 adj=12000428  heater_bed: target=0 temp=24.6 pwm=0.000 RPi: temp=47.4 EBB: temp=33.6 chamber: temp=23.4 sysload=0.11 cputime=1.689 memavail=3849984 print_time=7.657 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 193.4: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2523 bytes_read=9356 bytes_retransmit=0 bytes_invalid=0 send_seq=228 receive_seq=228 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400000195 ebb: mcu_awake=0.003 mcu_task_avg=0.000013 mcu_task_stddev=0.000022 bytes_write=1503 bytes_read=8793 bytes_retransmit=0 bytes_invalid=0 send_seq=167 receive_seq=167 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000470 adj=12000428  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=49.0 EBB: temp=33.7 chamber: temp=23.5 sysload=0.11 cputime=1.694 memavail=3844320 print_time=36.298 buffer_time=0.268 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Attempting MCU 'ebb' reset command
Attempting MCU 'mcu' reset command
b'Got error -1 in can read: (100)Network is down'
webhooks client 140734890460112: Disconnected
Restarting printer
Start printer at Tue Nov 19 21:19:34 2024 (1732022374.2 194.8)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = !PC13
enable_pin = !PE6
rotation_distance = 40
microsteps = 64
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_x:virtual_endstop
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 1.8
sense_resistor = 0.022
diag1_pin = !PC15
driver_sgt = 1
driver_tbl = 1
driver_toff = 2
driver_hend = 1

[stepper_y]
step_pin = PE5
dir_pin = !PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 64
full_steps_per_rotation = 200
endstop_pin = !tmc5160_stepper_y:virtual_endstop
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 1.8
sense_resistor = 0.022
diag1_pin = !PF0
driver_sgt = 1
driver_tbl = 1
driver_toff = 2
driver_hend = 1

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_min = -3
position_max = 290
homing_speed = 20
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 0.8
sense_resistor = 0.075

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075

[stepper_z2]
step_pin = PB4
dir_pin = PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = !PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world
=======================
Config error
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/klippy.py", line 279, in _connect
    self._read_config()
  File "/home/pi/klipper/klippy/klippy.py", line 219, in _read_config
    m.add_printer_objects(config)
  File "/home/pi/klipper/klippy/toolhead.py", line 834, in add_printer_objects
    config.get_printer().add_object("toolhead", ToolHead(config))
                                                ^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/toolhead.py", line 318, in __init__
    self.kin = mod.load_kinematics(self, config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/kinematics/corexy.py", line 120, in load_kinematics
    return CoreXYKinematics(toolhead, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/kinematics/corexy.py", line 12, in __init__
    self.rails = [
                 ^
  File "/home/pi/klipper/klippy/kinematics/corexy.py", line 13, in <listcomp>
    stepper.LookupMultiRail(config.getsection("stepper_" + n))
  File "/home/pi/klipper/klippy/stepper.py", line 590, in LookupMultiRail
    rail = PrinterRail(
           ^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/stepper.py", line 402, in __init__
    self.add_extra_stepper(config)
  File "/home/pi/klipper/klippy/stepper.py", line 544, in add_extra_stepper
    mcu_endstop = ppins.setup_pin("endstop", endstop_pin)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/pins.py", line 147, in setup_pin
    return pin_params["chip"].setup_pin(pin_type, pin_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/klipper/klippy/extras/tmc.py", line 626, in setup_pin
    raise ppins.error("Can not pullup/invert tmc virtual pin")
pins.error: Can not pullup/invert tmc virtual pin
webhooks client 140734891884304: New connection
webhooks client 140734891884304: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Unable to issue reset command on MCU 'mcu'
Unable to issue reset command on MCU 'ebb'
webhooks client 140734891884304: Disconnected
Restarting printer
Start printer at Tue Nov 19 21:20:07 2024 (1732022407.9 228.4)
===== Config file =====
[mcu]
canbus_uuid = 8d60b0d4c770

[mcu ebb]
canbus_uuid = 9f510bf93661

[printer]
kinematics = corexy
max_velocity = 500
max_accel = 10000
max_accel_to_decel = 10000
max_z_velocity = 5
max_z_accel = 6000
square_corner_velocity = 80

[force_move]
enable_force_move = true

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[idle_timeout]
timeout = 172800

[gcode_arcs]
resolution = 1.0

[adxl345]
cs_pin = ebb:gpio1
spi_software_sclk_pin = ebb:gpio2
spi_software_mosi_pin = ebb:gpio0
spi_software_miso_pin = ebb:gpio3
axes_map = z,-y,x

[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 75.4
shaper_type_y = mzv
shaper_freq_y = 40.2

[resonance_tester]
accel_chip = adxl345
probe_points = 175,175,5

[bed_mesh]
algorithm = bicubic
speed = 200
horizontal_move_z = 2
mesh_min = 25,25
mesh_max = 340,340
probe_count = 5,5

[probe]
pin = ebb:gpio24
x_offset = 0
y_offset = 0
speed = 4.0
samples = 3
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.01
samples_tolerance_retries = 3
z_offset = -0.330

[quad_gantry_level]
gantry_corners = 
	-60,-10
	410,420
points = 
	25,25
	25,325
	325,325
	325,25
speed = 100
horizontal_move_z = 18
retries = 10
retry_tolerance = 0.0050
max_adjust = 20

[safe_z_home]
z_hop = 10
z_hop_speed = 5
home_xy_position = 175,30
speed = 30

[stepper_x]
step_pin = PC14
dir_pin = !PC13
enable_pin = !PE6
rotation_distance = 40
microsteps = 64
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_x:virtual_endstop
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_x]
cs_pin = PD6
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 1.8
sense_resistor = 0.022
diag1_pin = !PC15
driver_sgt = 1
driver_tbl = 1
driver_toff = 2
driver_hend = 1

[stepper_y]
step_pin = PE5
dir_pin = !PE4
enable_pin = !PE3
rotation_distance = 40
microsteps = 64
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_y:virtual_endstop
position_min = 0
position_endstop = 350
position_max = 350
homing_speed = 50
homing_retract_dist = 0
homing_positive_dir = true

[tmc5160 stepper_y]
cs_pin = PD5
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 1.8
sense_resistor = 0.022
diag1_pin = !PF0
driver_sgt = 1
driver_tbl = 1
driver_toff = 2
driver_hend = 1

[stepper_z]
step_pin = PG9
dir_pin = !PG10
enable_pin = !PG13
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32
endstop_pin = probe:z_virtual_endstop
position_min = -3
position_max = 290
homing_speed = 20
second_homing_speed = 3
homing_retract_dist = 3

[tmc5160 stepper_z]
cs_pin = PD2
interpolate = false
spi_software_sclk_pin = PC6
spi_software_mosi_pin = PC8
spi_software_miso_pin = PC7
run_current = 0.8
sense_resistor = 0.075

[stepper_z1]
step_pin = PG11
dir_pin = PD7
enable_pin = !PG12
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z1]
cs_pin = PA15
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075

[stepper_z2]
step_pin = PB4
dir_pin = PB3
enable_pin = !PB5
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z2]
cs_pin = PA9
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075
stealthchop_threshold = 0

[stepper_z3]
step_pin = PG15
dir_pin = !PB6
enable_pin = !PG14
rotation_distance = 40
gear_ratio = 80:16
microsteps = 32

[tmc5160 stepper_z3]
cs_pin = PA10
interpolate = false
spi_software_miso_pin = PC7
spi_software_mosi_pin = PC8
spi_software_sclk_pin = PC6
run_current = 0.8
sense_resistor = 0.075
stealthchop_threshold = 0

[extruder]
step_pin = ebb:gpio18
dir_pin = ebb:gpio19
enable_pin = !ebb:gpio17
rotation_distance = 45.675
gear_ratio = 9:1
microsteps = 16
nozzle_diameter = 0.600
filament_diameter = 1.750
pressure_advance = 0.014
max_extrude_only_velocity = 100
max_extrude_only_accel = 300
max_extrude_only_distance = 102
max_extrude_cross_section = 600
heater_pin = ebb:gpio7
sensor_type = MAX31865
sensor_pin = ebb:gpio9
spi_software_sclk_pin = ebb:gpio10
spi_software_mosi_pin = ebb:gpio8
spi_software_miso_pin = ebb:gpio11
rtd_nominal_r = 1000
rtd_reference_r = 4300
rtd_num_of_wires = 2
rtd_use_50hz_filter = True
pwm_cycle_time = 0.1
min_temp = 0
max_temp = 300
max_power = 1.0
min_extrude_temp = 110
control = pid
pid_kp = 22.620
pid_ki = 2.094
pid_kd = 61.072

[tmc2209 extruder]
uart_pin = ebb:gpio20
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PF6
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB0
max_power = 1
min_temp = 10
max_temp = 115
control = pid
pid_kp = 59.502
pid_ki = 3.390
pid_kd = 261.065

[fan]
pin = ebb:gpio13
max_power = 1
kick_start_time = 0.100
cycle_time = 0.010
shutdown_speed = 0
hardware_pwm = False

[heater_fan Hotend]
pin = ebb:gpio14
max_power = 1
shutdown_speed = 0
heater = extruder
heater_temp = 50.0

[fan_generic Basement_fans]
pin = PA1
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[fan_generic Bed_Fans]
pin = PA4
max_power = 1
cycle_time = 0.05
kick_start_time = 0.5

[temperature_sensor RPi]
sensor_type = temperature_host
min_temp = 10
max_temp = 200

[temperature_sensor EBB]
sensor_type = Generic 3950
sensor_pin = ebb:gpio28

[temperature_sensor chamber]
sensor_type = Generic 3950
sensor_pin = PA7

[neopixel Chamber_RGB]
pin = PF12
chain_count = 50
color_order = GRB
initial_red = 1.0
initial_green = 1.0
initial_blue = 1.0
initial_white = 1.0

[respond]

[firmware_retraction]

[pause_resume]

[exclude_object]

[skew_correction]

[display_status]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_shell_command hello_world]
command = echo hello world
timeout = 2.
verbose = True

[gcode_macro HELLO_WORLD]
gcode = 
	RUN_SHELL_COMMAND CMD=hello_world
=======================
Extruder max_extrude_ratio=249.451013
mcu 'mcu': Starting CAN connect
Created a socket
webhooks client 140734903676240: New connection
webhooks client 140734903676240: Client info {'program': 'Moonraker', 'version': 'v0.9.3-1-g4e00a07'}
Loaded MCU 'mcu' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'ebb': Starting CAN connect
Created a socket
Loaded MCU 'ebb' 120 commands (Klipper v0.12.0-349-ga34034494 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'ebb' config: ADC_MAX=4095 BUS_PINS_i2c0a=gpio0,gpio1 BUS_PINS_i2c0b=gpio4,gpio5 BUS_PINS_i2c0c=gpio8,gpio9 BUS_PINS_i2c0d=gpio12,gpio13 BUS_PINS_i2c0e=gpio16,gpio17 BUS_PINS_i2c0f=gpio20,gpio21 BUS_PINS_i2c0g=gpio24,gpio25 BUS_PINS_i2c0h=gpio28,gpio29 BUS_PINS_i2c1a=gpio2,gpio3 BUS_PINS_i2c1b=gpio6,gpio7 BUS_PINS_i2c1c=gpio10,gpio11 BUS_PINS_i2c1d=gpio14,gpio15 BUS_PINS_i2c1e=gpio18,gpio19 BUS_PINS_i2c1f=gpio22,gpio23 BUS_PINS_i2c1g=gpio26,gpio27 BUS_PINS_spi0a=gpio0,gpio3,gpio2 BUS_PINS_spi0b=gpio4,gpio7,gpio6 BUS_PINS_spi0c=gpio16,gpio19,gpio18 BUS_PINS_spi0d=gpio20,gpio23,gpio22 BUS_PINS_spi1a=gpio8,gpio11,gpio10 BUS_PINS_spi1b=gpio12,gpio15,gpio14 BUS_PINS_spi1c=gpio24,gpio27,gpio26 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=12000000 INITIAL_PINS=gpio26 MCU=rp2040 PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=gpio4,gpio5 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Sending MCU 'ebb' printer configuration...
Configured MCU 'ebb' (1024 moves)
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (25.0, 25.0)    | (25.0, 25.0)
  1   | (103.8, 25.0)   | (103.8, 25.0)
  2   | (182.5, 25.0)   | (182.5, 25.0)
  3   | (261.2, 25.0)   | (261.2, 25.0)
  4   | (340.0, 25.0)   | (340.0, 25.0)
  5   | (340.0, 103.8)  | (340.0, 103.8)
  6   | (261.2, 103.8)  | (261.2, 103.8)
  7   | (182.5, 103.8)  | (182.5, 103.8)
  8   | (103.8, 103.8)  | (103.8, 103.8)
  9   | (25.0, 103.8)   | (25.0, 103.8)
  10  | (25.0, 182.5)   | (25.0, 182.5)
  11  | (103.8, 182.5)  | (103.8, 182.5)
  12  | (182.5, 182.5)  | (182.5, 182.5)
  13  | (261.2, 182.5)  | (261.2, 182.5)
  14  | (340.0, 182.5)  | (340.0, 182.5)
  15  | (340.0, 261.2)  | (340.0, 261.2)
  16  | (261.2, 261.2)  | (261.2, 261.2)
  17  | (182.5, 261.2)  | (182.5, 261.2)
  18  | (103.8, 261.2)  | (103.8, 261.2)
  19  | (25.0, 261.2)   | (25.0, 261.2)
  20  | (25.0, 340.0)   | (25.0, 340.0)
  21  | (103.8, 340.0)  | (103.8, 340.0)
  22  | (182.5, 340.0)  | (182.5, 340.0)
  23  | (261.2, 340.0)  | (261.2, 340.0)
  24  | (340.0, 340.0)  | (340.0, 340.0)
TMC stepper_x failed to init: Unable to write tmc spi 'stepper_x' register GLOBALSCALER
TMC stepper_y failed to init: Unable to write tmc spi 'stepper_y' register GLOBALSCALER
TMC stepper_z failed to init: Unable to write tmc spi 'stepper_z' register GLOBALSCALER
TMC stepper_z1 failed to init: Unable to write tmc spi 'stepper_z1' register GLOBALSCALER
TMC stepper_z2 failed to init: Unable to write tmc spi 'stepper_z2' register GLOBALSCALER
TMC stepper_z3 failed to init: Unable to write tmc spi 'stepper_z3' register GLOBALSCALER
Starting heater checks for heater_bed
Starting heater checks for extruder
Stats 229.6: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2189 bytes_read=5287 bytes_retransmit=0 bytes_invalid=0 send_seq=169 receive_seq=169 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400002782 ebb: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=1340 bytes_read=4874 bytes_retransmit=0 bytes_invalid=0 send_seq=141 receive_seq=141 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000935 adj=12000470  heater_bed: target=0 temp=0.0 pwm=0.000 RPi: temp=49.0 EBB: temp=0.0 chamber: temp=0.0 sysload=0.11 cputime=2.019 memavail=3848272 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
Stats 230.6: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2195 bytes_read=5303 bytes_retransmit=0 bytes_invalid=0 send_seq=170 receive_seq=170 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400003475 ebb: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=1346 bytes_read=4890 bytes_retransmit=0 bytes_invalid=0 send_seq=142 receive_seq=142 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000688 adj=12000900  heater_bed: target=0 temp=0.0 pwm=0.000 RPi: temp=49.6 EBB: temp=0.0 chamber: temp=0.0 sysload=0.10 cputime=2.024 memavail=3848048 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
Stats 231.6: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2201 bytes_read=5379 bytes_retransmit=0 bytes_invalid=0 send_seq=171 receive_seq=171 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400003671 ebb: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=1352 bytes_read=4984 bytes_retransmit=0 bytes_invalid=0 send_seq=143 receive_seq=143 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000566 adj=12000520  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=49.6 EBB: temp=33.6 chamber: temp=23.4 sysload=0.10 cputime=2.029 memavail=3848048 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 232.6: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2207 bytes_read=5500 bytes_retransmit=0 bytes_invalid=0 send_seq=172 receive_seq=172 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400002644 ebb: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=1358 bytes_read=5108 bytes_retransmit=0 bytes_invalid=0 send_seq=144 receive_seq=144 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000525 adj=12000329  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=50.7 EBB: temp=33.6 chamber: temp=23.4 sysload=0.10 cputime=2.031 memavail=3848048 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 233.6: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2227 bytes_read=5651 bytes_retransmit=0 bytes_invalid=0 send_seq=175 receive_seq=175 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400002114 ebb: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=1371 bytes_read=5232 bytes_retransmit=0 bytes_invalid=0 send_seq=146 receive_seq=146 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=12000500 adj=12000346  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.5 chamber: temp=23.4 sysload=0.10 cputime=2.035 memavail=3848048 print_time=39.925 buffer_time=0.220 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
probe: open
Stats 234.6: gcodein=0  mcu: mcu_awake=0.011 mcu_task_avg=0.000009 mcu_task_stddev=0.000073 bytes_write=2233 bytes_read=5770 bytes_retransmit=0 bytes_invalid=0 send_seq=176 receive_seq=176 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001968 ebb: mcu_awake=0.020 mcu_task_avg=0.000017 mcu_task_stddev=0.000030 bytes_write=1384 bytes_read=5386 bytes_retransmit=0 bytes_invalid=0 send_seq=148 receive_seq=148 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000494 adj=12000359  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=49.0 EBB: temp=33.6 chamber: temp=23.4 sysload=0.10 cputime=2.039 memavail=3848048 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 235.6: gcodein=0  mcu: mcu_awake=0.011 mcu_task_avg=0.000009 mcu_task_stddev=0.000073 bytes_write=2239 bytes_read=5891 bytes_retransmit=0 bytes_invalid=0 send_seq=177 receive_seq=177 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001861 ebb: mcu_awake=0.020 mcu_task_avg=0.000017 mcu_task_stddev=0.000030 bytes_write=1390 bytes_read=5510 bytes_retransmit=0 bytes_invalid=0 send_seq=149 receive_seq=149 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000487 adj=12000370  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.4 sysload=0.09 cputime=2.042 memavail=3848128 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 236.6: gcodein=0  mcu: mcu_awake=0.011 mcu_task_avg=0.000009 mcu_task_stddev=0.000073 bytes_write=2245 bytes_read=6010 bytes_retransmit=0 bytes_invalid=0 send_seq=178 receive_seq=178 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001721 ebb: mcu_awake=0.020 mcu_task_avg=0.000017 mcu_task_stddev=0.000030 bytes_write=1396 bytes_read=5619 bytes_retransmit=0 bytes_invalid=0 send_seq=150 receive_seq=150 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000534 adj=12000379  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=47.4 EBB: temp=33.6 chamber: temp=23.4 sysload=0.09 cputime=2.046 memavail=3848128 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 237.6: gcodein=0  mcu: mcu_awake=0.011 mcu_task_avg=0.000009 mcu_task_stddev=0.000073 bytes_write=2251 bytes_read=6113 bytes_retransmit=0 bytes_invalid=0 send_seq=179 receive_seq=179 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001568 ebb: mcu_awake=0.020 mcu_task_avg=0.000017 mcu_task_stddev=0.000030 bytes_write=1402 bytes_read=5744 bytes_retransmit=0 bytes_invalid=0 send_seq=151 receive_seq=151 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000516 adj=12000534  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=49.6 EBB: temp=33.6 chamber: temp=23.4 sysload=0.09 cputime=2.049 memavail=3848128 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 238.6: gcodein=0  mcu: mcu_awake=0.011 mcu_task_avg=0.000009 mcu_task_stddev=0.000073 bytes_write=2257 bytes_read=6234 bytes_retransmit=0 bytes_invalid=0 send_seq=180 receive_seq=180 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001518 ebb: mcu_awake=0.020 mcu_task_avg=0.000017 mcu_task_stddev=0.000030 bytes_write=1408 bytes_read=5868 bytes_retransmit=0 bytes_invalid=0 send_seq=152 receive_seq=152 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000505 adj=12000482  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.7 chamber: temp=23.4 sysload=0.09 cputime=2.053 memavail=3848128 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 239.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2263 bytes_read=6369 bytes_retransmit=0 bytes_invalid=0 send_seq=181 receive_seq=181 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001399 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1414 bytes_read=5991 bytes_retransmit=0 bytes_invalid=0 send_seq=153 receive_seq=153 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000496 adj=12000448  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.7 chamber: temp=23.4 sysload=0.09 cputime=2.056 memavail=3848128 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 240.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2269 bytes_read=6475 bytes_retransmit=0 bytes_invalid=0 send_seq=182 receive_seq=182 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001363 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1420 bytes_read=6131 bytes_retransmit=0 bytes_invalid=0 send_seq=154 receive_seq=154 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000491 adj=12000432  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=49.0 EBB: temp=33.6 chamber: temp=23.3 sysload=0.24 cputime=2.059 memavail=3848128 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 241.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2275 bytes_read=6596 bytes_retransmit=0 bytes_invalid=0 send_seq=183 receive_seq=183 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001299 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1426 bytes_read=6240 bytes_retransmit=0 bytes_invalid=0 send_seq=155 receive_seq=155 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000486 adj=12000424  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.5 sysload=0.24 cputime=2.062 memavail=3848128 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 242.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2281 bytes_read=6717 bytes_retransmit=0 bytes_invalid=0 send_seq=184 receive_seq=184 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001269 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1432 bytes_read=6349 bytes_retransmit=0 bytes_invalid=0 send_seq=156 receive_seq=156 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000483 adj=12000421  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.4 sysload=0.24 cputime=2.066 memavail=3848128 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 243.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2287 bytes_read=6823 bytes_retransmit=0 bytes_invalid=0 send_seq=185 receive_seq=185 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001227 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1438 bytes_read=6489 bytes_retransmit=0 bytes_invalid=0 send_seq=157 receive_seq=157 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000480 adj=12000419  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.3 sysload=0.24 cputime=2.069 memavail=3848128 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 244.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2293 bytes_read=6958 bytes_retransmit=0 bytes_invalid=0 send_seq=186 receive_seq=186 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001206 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1444 bytes_read=6612 bytes_retransmit=0 bytes_invalid=0 send_seq=158 receive_seq=158 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000478 adj=12000415  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.4 sysload=0.24 cputime=2.072 memavail=3848128 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 245.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2299 bytes_read=7079 bytes_retransmit=0 bytes_invalid=0 send_seq=187 receive_seq=187 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001194 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1450 bytes_read=6721 bytes_retransmit=0 bytes_invalid=0 send_seq=159 receive_seq=159 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000477 adj=12000419  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.7 chamber: temp=23.4 sysload=0.22 cputime=2.076 memavail=3848160 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 246.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2305 bytes_read=7185 bytes_retransmit=0 bytes_invalid=0 send_seq=188 receive_seq=188 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001171 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1456 bytes_read=6861 bytes_retransmit=0 bytes_invalid=0 send_seq=160 receive_seq=160 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000477 adj=12000421  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=49.0 EBB: temp=33.6 chamber: temp=23.5 sysload=0.22 cputime=2.079 memavail=3848160 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 247.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2311 bytes_read=7303 bytes_retransmit=0 bytes_invalid=0 send_seq=189 receive_seq=189 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001166 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1462 bytes_read=6970 bytes_retransmit=0 bytes_invalid=0 send_seq=161 receive_seq=161 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000476 adj=12000429  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.4 sysload=0.22 cputime=2.082 memavail=3848160 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 248.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2317 bytes_read=7422 bytes_retransmit=0 bytes_invalid=0 send_seq=190 receive_seq=190 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001132 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1468 bytes_read=7079 bytes_retransmit=0 bytes_invalid=0 send_seq=162 receive_seq=162 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000475 adj=12000429  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.7 chamber: temp=23.4 sysload=0.22 cputime=2.085 memavail=3848160 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 249.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2323 bytes_read=7542 bytes_retransmit=0 bytes_invalid=0 send_seq=191 receive_seq=191 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001119 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1474 bytes_read=7233 bytes_retransmit=0 bytes_invalid=0 send_seq=163 receive_seq=163 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000475 adj=12000433  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.4 sysload=0.22 cputime=2.088 memavail=3848160 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 250.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2329 bytes_read=7663 bytes_retransmit=0 bytes_invalid=0 send_seq=192 receive_seq=192 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001109 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1480 bytes_read=7342 bytes_retransmit=0 bytes_invalid=0 send_seq=164 receive_seq=164 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000474 adj=12000436  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.5 sysload=0.21 cputime=2.091 memavail=3848160 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 251.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2335 bytes_read=7784 bytes_retransmit=0 bytes_invalid=0 send_seq=193 receive_seq=193 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001101 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1486 bytes_read=7451 bytes_retransmit=0 bytes_invalid=0 send_seq=165 receive_seq=165 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000474 adj=12000434  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.7 chamber: temp=23.4 sysload=0.21 cputime=2.095 memavail=3848160 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 252.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2347 bytes_read=7906 bytes_retransmit=0 bytes_invalid=0 send_seq=195 receive_seq=195 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001126 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1492 bytes_read=7591 bytes_retransmit=0 bytes_invalid=0 send_seq=166 receive_seq=166 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000473 adj=12000436  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=47.4 EBB: temp=33.6 chamber: temp=23.4 sysload=0.21 cputime=2.098 memavail=3848160 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 253.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2353 bytes_read=8027 bytes_retransmit=0 bytes_invalid=0 send_seq=196 receive_seq=196 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001114 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1498 bytes_read=7700 bytes_retransmit=0 bytes_invalid=0 send_seq=167 receive_seq=167 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000476 adj=12000429  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.4 sysload=0.21 cputime=2.101 memavail=3847936 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 254.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2359 bytes_read=8162 bytes_retransmit=0 bytes_invalid=0 send_seq=197 receive_seq=197 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001089 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1504 bytes_read=7823 bytes_retransmit=0 bytes_invalid=0 send_seq=168 receive_seq=168 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000475 adj=12000451  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.7 chamber: temp=23.4 sysload=0.21 cputime=2.104 memavail=3847936 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 255.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2365 bytes_read=8268 bytes_retransmit=0 bytes_invalid=0 send_seq=198 receive_seq=198 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001077 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1510 bytes_read=7963 bytes_retransmit=0 bytes_invalid=0 send_seq=169 receive_seq=169 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000474 adj=12000448  heater_bed: target=0 temp=24.8 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.4 sysload=0.19 cputime=2.108 memavail=3847968 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 256.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2371 bytes_read=8389 bytes_retransmit=0 bytes_invalid=0 send_seq=199 receive_seq=199 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001065 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1516 bytes_read=8072 bytes_retransmit=0 bytes_invalid=0 send_seq=170 receive_seq=170 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000474 adj=12000444  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.7 chamber: temp=23.5 sysload=0.19 cputime=2.111 memavail=3847968 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 257.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2377 bytes_read=8510 bytes_retransmit=0 bytes_invalid=0 send_seq=200 receive_seq=200 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001052 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1522 bytes_read=8181 bytes_retransmit=0 bytes_invalid=0 send_seq=171 receive_seq=171 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000473 adj=12000442  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=47.4 EBB: temp=33.6 chamber: temp=23.4 sysload=0.19 cputime=2.114 memavail=3847968 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 258.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2383 bytes_read=8611 bytes_retransmit=0 bytes_invalid=0 send_seq=201 receive_seq=201 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001049 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1528 bytes_read=8321 bytes_retransmit=0 bytes_invalid=0 send_seq=172 receive_seq=172 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000473 adj=12000443  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=49.0 EBB: temp=33.7 chamber: temp=23.4 sysload=0.19 cputime=2.117 memavail=3848000 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 259.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2389 bytes_read=8746 bytes_retransmit=0 bytes_invalid=0 send_seq=202 receive_seq=202 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001033 ebb: mcu_awake=0.003 mcu_task_avg=0.000013 mcu_task_stddev=0.000022 bytes_write=1534 bytes_read=8444 bytes_retransmit=0 bytes_invalid=0 send_seq=173 receive_seq=173 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000472 adj=12000439  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.5 sysload=0.19 cputime=2.121 memavail=3848000 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 260.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2395 bytes_read=8867 bytes_retransmit=0 bytes_invalid=0 send_seq=203 receive_seq=203 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001022 ebb: mcu_awake=0.003 mcu_task_avg=0.000013 mcu_task_stddev=0.000022 bytes_write=1540 bytes_read=8553 bytes_retransmit=0 bytes_invalid=0 send_seq=174 receive_seq=174 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000472 adj=12000439  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.7 chamber: temp=23.5 sysload=0.17 cputime=2.124 memavail=3848000 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 261.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2401 bytes_read=8973 bytes_retransmit=0 bytes_invalid=0 send_seq=204 receive_seq=204 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001007 ebb: mcu_awake=0.003 mcu_task_avg=0.000013 mcu_task_stddev=0.000022 bytes_write=1546 bytes_read=8693 bytes_retransmit=0 bytes_invalid=0 send_seq=175 receive_seq=175 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000471 adj=12000440  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.4 sysload=0.17 cputime=2.127 memavail=3848000 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 262.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2407 bytes_read=9094 bytes_retransmit=0 bytes_invalid=0 send_seq=205 receive_seq=205 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400000994 ebb: mcu_awake=0.003 mcu_task_avg=0.000013 mcu_task_stddev=0.000022 bytes_write=1552 bytes_read=8802 bytes_retransmit=0 bytes_invalid=0 send_seq=176 receive_seq=176 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000471 adj=12000439  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=49.0 EBB: temp=33.7 chamber: temp=23.4 sysload=0.17 cputime=2.130 memavail=3848000 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 263.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2413 bytes_read=9215 bytes_retransmit=0 bytes_invalid=0 send_seq=206 receive_seq=206 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001094 ebb: mcu_awake=0.003 mcu_task_avg=0.000013 mcu_task_stddev=0.000022 bytes_write=1558 bytes_read=8911 bytes_retransmit=0 bytes_invalid=0 send_seq=177 receive_seq=177 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000470 adj=12000439  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.4 sysload=0.17 cputime=2.133 memavail=3848000 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 264.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2419 bytes_read=9335 bytes_retransmit=0 bytes_invalid=0 send_seq=207 receive_seq=207 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001071 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1564 bytes_read=9065 bytes_retransmit=0 bytes_invalid=0 send_seq=178 receive_seq=178 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000471 adj=12000413  heater_bed: target=0 temp=24.8 pwm=0.000 RPi: temp=48.0 EBB: temp=33.7 chamber: temp=23.3 sysload=0.17 cputime=2.136 memavail=3848000 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 265.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2425 bytes_read=9456 bytes_retransmit=0 bytes_invalid=0 send_seq=208 receive_seq=208 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001057 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1570 bytes_read=9174 bytes_retransmit=0 bytes_invalid=0 send_seq=179 receive_seq=179 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000470 adj=12000426  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=49.0 EBB: temp=33.7 chamber: temp=23.5 sysload=0.16 cputime=2.140 memavail=3848000 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 266.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2431 bytes_read=9577 bytes_retransmit=0 bytes_invalid=0 send_seq=209 receive_seq=209 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001140 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1576 bytes_read=9283 bytes_retransmit=0 bytes_invalid=0 send_seq=180 receive_seq=180 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000470 adj=12000430  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=49.0 EBB: temp=33.6 chamber: temp=23.4 sysload=0.16 cputime=2.143 memavail=3848000 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 267.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2437 bytes_read=9683 bytes_retransmit=0 bytes_invalid=0 send_seq=210 receive_seq=210 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001119 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1582 bytes_read=9423 bytes_retransmit=0 bytes_invalid=0 send_seq=181 receive_seq=181 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000474 adj=12000412  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.4 sysload=0.16 cputime=2.146 memavail=3848000 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 268.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2443 bytes_read=9804 bytes_retransmit=0 bytes_invalid=0 send_seq=211 receive_seq=211 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001093 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1588 bytes_read=9532 bytes_retransmit=0 bytes_invalid=0 send_seq=182 receive_seq=182 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000473 adj=12000451  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.5 sysload=0.16 cputime=2.149 memavail=3848000 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 269.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2449 bytes_read=9933 bytes_retransmit=0 bytes_invalid=0 send_seq=212 receive_seq=212 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001076 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1594 bytes_read=9655 bytes_retransmit=0 bytes_invalid=0 send_seq=183 receive_seq=183 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000472 adj=12000449  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.7 chamber: temp=23.5 sysload=0.16 cputime=2.153 memavail=3848000 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 270.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2455 bytes_read=10039 bytes_retransmit=0 bytes_invalid=0 send_seq=213 receive_seq=213 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001057 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1600 bytes_read=9795 bytes_retransmit=0 bytes_invalid=0 send_seq=184 receive_seq=184 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000472 adj=12000448  heater_bed: target=0 temp=24.8 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.4 sysload=0.15 cputime=2.156 memavail=3848000 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 271.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2461 bytes_read=10160 bytes_retransmit=0 bytes_invalid=0 send_seq=214 receive_seq=214 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001038 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1606 bytes_read=9904 bytes_retransmit=0 bytes_invalid=0 send_seq=185 receive_seq=185 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000474 adj=12000448  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.4 sysload=0.15 cputime=2.159 memavail=3848000 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 272.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=2467 bytes_read=10281 bytes_retransmit=0 bytes_invalid=0 send_seq=215 receive_seq=215 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001029 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1612 bytes_read=10013 bytes_retransmit=0 bytes_invalid=0 send_seq=186 receive_seq=186 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000475 adj=12000473  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.4 sysload=0.15 cputime=2.162 memavail=3848000 print_time=39.925 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
tmc stepper_y: needs_home_current_change False
tmc stepper_x: needs_home_current_change False
Transition to shutdown state: Unable to write tmc spi 'stepper_z' register GLOBALSCALER
Dumping gcode input 0 blocks
Dumping 20 requests for client 140734903676240
Received 229.685839: b'{"id": 140736240670288, "method": "list_endpoints", "params": {}}'
Received 229.686121: b'{"id": 140736240343312, "method": "objects/subscribe", "params": {"objects": {"webhooks": null, "print_stats": null}, "response_template": {"method": "process_status_update"}}}'
Received 229.936865: b'{"id": 140736240670288, "method": "objects/list", "params": {}}'
Received 229.937185: b'{"id": 140736240670288, "method": "objects/query", "params": {"objects": {"configfile": null}}}'
Received 230.189160: b'{"id": 140736240343824, "method": "register_remote_method", "params": {"response_template": {"method": "shutdown_machine"}, "remote_method": "shutdown_machine"}}'
Received 230.189395: b'{"id": 140736250353232, "method": "register_remote_method", "params": {"response_template": {"method": "reboot_machine"}, "remote_method": "reboot_machine"}}'
Received 230.189512: b'{"id": 140736250353232, "method": "register_remote_method", "params": {"response_template": {"method": "pause_job_queue"}, "remote_method": "pause_job_queue"}}'
Received 230.189617: b'{"id": 140736250353232, "method": "register_remote_method", "params": {"response_template": {"method": "start_job_queue"}, "remote_method": "start_job_queue"}}'
Received 230.190035: b'{"id": 140736240335632, "method": "objects/query", "params": {"objects": {"heaters": null}}}'
Received 230.190078: b'{"id": 140736240321552, "method": "objects/query", "params": {"objects": {"heaters": null}}}'
Received 230.195935: b'{"id": 140736240329360, "method": "info", "params": {}}'
Received 230.196026: b'{"id": 140736250380816, "method": "objects/list", "params": {}}'
Received 230.196026: b'{"id": 140736250382992, "method": "gcode/help", "params": {}}'
Received 230.231224: b'{"id": 140736240362576, "method": "objects/subscribe", "params": {"objects": {"gcode": null, "webhooks": null, "configfile": null, "mcu": null, "mcu ebb": null, "gcode_move": null, "print_stats": null, "virtual_sdcard": null, "idle_timeout": null, "bed_mesh": null, "probe": null, "quad_gantry_level": null, "stepper_enable": null, "tmc5160 stepper_x": null, "tmc5160 stepper_y": null, "tmc5160 stepper_z": null, "tmc5160 stepper_z1": null, "tmc5160 stepper_z2": null, "tmc5160 stepper_z3": null, "tmc2209 extruder": null, "heaters": null, "heater_bed": null, "fan": null, "heater_fan Hotend": null, "fan_generic Basement_fans": null, "fan_generic Bed_Fans": null, "temperature_host RPi": null, "temperature_sensor RPi": null, "temperature_sensor EBB": null, "temperature_sensor chamber": null, "neopixel Chamber_RGB": null, "firmware_retraction": null, "pause_resume": null, "exclude_object": null, "display_status": null, "gcode_macro CANCEL_PRINT": null, "gcode_macro PAUSE": null, "gcode_macro RESUME": null, "gcode_macro SET_PAUSE_NEXT_LAYER": null, "gcode_macro SET_PAUSE_AT_LAYER": null, "gcode_macro SET_PRINT_STATS_INFO": null, "gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL": null, "gcode_macro _CLIENT_EXTRUDE": null, "gcode_macro _CLIENT_RETRACT": null, "gcode_macro HELLO_WORLD": null, "motion_report": null, "query_endstops": null, "system_stats": null, "manual_probe": null, "toolhead": null, "extruder": null}, "response_template": {"method": "process_status_update"}}}'
Received 230.442254: b'{"id": 140736240350224, "method": "objects/subscribe", "params": {"objects": {"webhooks": null, "print_stats": null, "heater_bed": null, "temperature_sensor RPi": null, "temperature_sensor EBB": null, "temperature_sensor chamber": null, "extruder": null, "gcode": null, "configfile": null, "mcu": null, "mcu ebb": null, "gcode_move": null, "virtual_sdcard": null, "idle_timeout": null, "bed_mesh": null, "probe": null, "quad_gantry_level": null, "stepper_enable": null, "tmc5160 stepper_x": null, "tmc5160 stepper_y": null, "tmc5160 stepper_z": null, "tmc5160 stepper_z1": null, "tmc5160 stepper_z2": null, "tmc5160 stepper_z3": null, "tmc2209 extruder": null, "heaters": null, "fan": null, "heater_fan Hotend": null, "fan_generic Basement_fans": null, "fan_generic Bed_Fans": null, "temperature_host RPi": null, "neopixel Chamber_RGB": null, "firmware_retraction": null, "pause_resume": null, "exclude_object": null, "display_status": null, "gcode_macro CANCEL_PRINT": null, "gcode_macro PAUSE": null, "gcode_macro RESUME": null, "gcode_macro SET_PAUSE_NEXT_LAYER": null, "gcode_macro SET_PAUSE_AT_LAYER": null, "gcode_macro SET_PRINT_STATS_INFO": null, "gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL": null, "gcode_macro _CLIENT_EXTRUDE": null, "gcode_macro _CLIENT_RETRACT": null, "gcode_macro HELLO_WORLD": null, "motion_report": null, "query_endstops": null, "system_stats": null, "manual_probe": null, "toolhead": null}, "response_template": {"method": "process_status_update"}}}'
Received 230.692486: b'{"id": 140736240793104, "method": "objects/subscribe", "params": {"objects": {"webhooks": null, "print_stats": null, "heater_bed": null, "temperature_sensor RPi": null, "temperature_sensor EBB": null, "temperature_sensor chamber": null, "extruder": null, "gcode": null, "configfile": null, "mcu": null, "mcu ebb": null, "gcode_move": null, "virtual_sdcard": null, "idle_timeout": null, "bed_mesh": null, "probe": null, "quad_gantry_level": null, "stepper_enable": null, "tmc5160 stepper_x": null, "tmc5160 stepper_y": null, "tmc5160 stepper_z": null, "tmc5160 stepper_z1": null, "tmc5160 stepper_z2": null, "tmc5160 stepper_z3": null, "tmc2209 extruder": null, "heaters": null, "fan": null, "heater_fan Hotend": null, "fan_generic Basement_fans": null, "fan_generic Bed_Fans": null, "temperature_host RPi": null, "neopixel Chamber_RGB": null, "firmware_retraction": null, "pause_resume": null, "exclude_object": null, "display_status": null, "gcode_macro CANCEL_PRINT": null, "gcode_macro PAUSE": null, "gcode_macro RESUME": null, "gcode_macro SET_PAUSE_NEXT_LAYER": null, "gcode_macro SET_PAUSE_AT_LAYER": null, "gcode_macro SET_PRINT_STATS_INFO": null, "gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL": null, "gcode_macro _CLIENT_EXTRUDE": null, "gcode_macro _CLIENT_RETRACT": null, "gcode_macro HELLO_WORLD": null, "motion_report": null, "query_endstops": null, "system_stats": null, "manual_probe": null, "toolhead": null}, "response_template": {"method": "process_status_update"}}}'
Received 230.694138: b'{"id": 140736241061008, "method": "objects/query", "params": {"objects": {"extruder": ["can_extrude"]}}}'
Received 233.345515: b'{"id": 140736213870800, "method": "query_endstops/status", "params": {}}'
Received 233.345658: b'{"id": 140736240676176, "method": "gcode/script", "params": {"script": "QUERY_PROBE"}}'
Received 273.306486: b'{"id": 140736250140816, "method": "gcode/script", "params": {"script": "G28 X"}}'
gcode state: absolute_coord=True absolute_extrude=True base_position=[0.0, 0.0, 0.0, 0.0] last_position=[-175.0, 0.0, 10.0, 0.0] homing_position=[0.0, 0.0, 0.0, 0.0] speed_factor=0.016666666666666666 extrude_factor=1.0 speed=25.0
Reactor garbage collection: (273.30975967, 0.0, 0.0)
MCU 'mcu' shutdown: Command request
clocksync state: mcu_freq=400000000 last_clock=31753906457 clock_est=(250.896 22787951122 400002295.291) min_half_rtt=0.000072 min_rtt_time=228.655 time_avg=250.896(251.551) clock_avg=22787951122.503(100621104902.578) pred_variance=31540706511.909
Dumping serial stats: bytes_write=3120 bytes_read=10654 bytes_retransmit=0 bytes_invalid=0 send_seq=234 receive_seq=234 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2
Dumping send queue 100 messages
Sent 0 229.541487 229.541487 13: seq: 16, spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 1 229.541866 229.541866 21: seq: 17, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 2 229.542199 229.542199 21: seq: 18, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 3 229.542538 229.542538 21: seq: 19, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 4 229.542906 229.542906 21: seq: 1a, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 5 229.543283 229.543283 13: seq: 1b, spi_send oid=4 data=b'\x8b\x00\x00\x00C'
Sent 6 229.543321 229.543321 13: seq: 1c, spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 7 229.543664 229.543664 21: seq: 1d, spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 8 229.543996 229.543996 21: seq: 1e, spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 9 229.544336 229.544336 21: seq: 1f, spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 10 229.544673 229.544673 21: seq: 10, spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00'
Sent 11 229.545046 229.545046 13: seq: 11, spi_send oid=5 data=b'\x8b\x00\x00\x00C'
Sent 12 229.545087 229.545087 13: seq: 12, spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 13 229.545434 229.545434 21: seq: 13, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 14 229.545819 229.545819 21: seq: 14, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 15 229.546153 229.546153 21: seq: 15, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 16 229.546486 229.546486 21: seq: 16, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 17 229.610233 229.610233 15: seq: 17, neopixel_update oid=6 pos=0 data=b'\xff\xff\xff\xff\xff\xff'
Sent 18 229.610388 229.610388 45: seq: 18, neopixel_update oid=6 pos=6 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=22 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 19 229.610388 229.610388 45: seq: 19, neopixel_update oid=6 pos=38 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=54 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 20 229.610388 229.610388 45: seq: 1a, neopixel_update oid=6 pos=70 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=86 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 21 229.610853 229.610853 47: seq: 1b, neopixel_update oid=6 pos=102 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_update oid=6 pos=118 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'
Sent 22 229.616820 229.616820 28: seq: 1c, neopixel_update oid=6 pos=134 data=b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff', neopixel_send oid=6
Sent 23 229.618883 229.618883 7: seq: 1d, stepper_get_position oid=7
Sent 24 229.619121 229.619121 21: seq: 1e, spi_send oid=0 data=b'j\x00\x00\x00\x00', spi_transfer oid=0 data=b'j\x00\x00\x00\x00'
Sent 25 229.619521 229.619521 7: seq: 1f, stepper_get_position oid=10
Sent 26 229.619839 229.619839 21: seq: 10, spi_send oid=1 data=b'j\x00\x00\x00\x00', spi_transfer oid=1 data=b'j\x00\x00\x00\x00'
Sent 27 229.620179 229.620179 7: seq: 11, stepper_get_position oid=13
Sent 28 229.620394 229.620394 21: seq: 12, spi_send oid=2 data=b'j\x00\x00\x00\x00', spi_transfer oid=2 data=b'j\x00\x00\x00\x00'
Sent 29 229.620784 229.620784 7: seq: 13, stepper_get_position oid=15
Sent 30 229.621002 229.621002 21: seq: 14, spi_send oid=3 data=b'j\x00\x00\x00\x00', spi_transfer oid=3 data=b'j\x00\x00\x00\x00'
Sent 31 229.621344 229.621344 7: seq: 15, stepper_get_position oid=16
Sent 32 229.621559 229.621559 21: seq: 16, spi_send oid=4 data=b'j\x00\x00\x00\x00', spi_transfer oid=4 data=b'j\x00\x00\x00\x00'
Sent 33 229.621971 229.621971 7: seq: 17, stepper_get_position oid=17
Sent 34 229.622185 229.622185 21: seq: 18, spi_send oid=5 data=b'j\x00\x00\x00\x00', spi_transfer oid=5 data=b'j\x00\x00\x00\x00'
Sent 35 229.993321 229.993321 6: seq: 19, get_clock
Sent 36 230.978170 230.978170 6: seq: 1a, get_clock
Sent 37 231.963112 231.963112 6: seq: 1b, get_clock
Sent 38 232.947840 232.947840 6: seq: 1c, get_clock
Sent 39 233.599544 233.599544 7: seq: 1d, endstop_query_state oid=8
Sent 40 233.599847 233.599847 7: seq: 1e, endstop_query_state oid=11
Sent 41 233.932484 233.932484 6: seq: 1f, get_clock
Sent 42 234.916990 234.916990 6: seq: 10, get_clock
Sent 43 235.901425 235.901425 6: seq: 11, get_clock
Sent 44 236.885757 236.885757 6: seq: 12, get_clock
Sent 45 237.870208 237.870208 6: seq: 13, get_clock
Sent 46 238.854512 238.854512 6: seq: 14, get_clock
Sent 47 239.838766 239.838766 6: seq: 15, get_clock
Sent 48 240.823100 240.823100 6: seq: 16, get_clock
Sent 49 241.807428 241.807428 6: seq: 17, get_clock
Sent 50 242.791605 242.791605 6: seq: 18, get_clock
Sent 51 243.775855 243.775855 6: seq: 19, get_clock
Sent 52 244.760340 244.760340 6: seq: 1a, get_clock
Sent 53 245.745030 245.745030 6: seq: 1b, get_clock
Sent 54 246.729994 246.729994 6: seq: 1c, get_clock
Sent 55 247.714338 247.714338 6: seq: 1d, get_clock
Sent 56 248.698586 248.698586 6: seq: 1e, get_clock
Sent 57 249.682798 249.682798 6: seq: 1f, get_clock
Sent 58 250.667070 250.667070 6: seq: 10, get_clock
Sent 59 251.651460 251.651460 6: seq: 11, get_clock
Sent 60 252.635547 252.635547 6: seq: 12, get_clock
Sent 61 253.619691 253.619691 6: seq: 13, get_clock
Sent 62 254.604059 254.604059 6: seq: 14, get_clock
Sent 63 255.588489 255.588489 6: seq: 15, get_clock
Sent 64 256.572756 256.572756 6: seq: 16, get_clock
Sent 65 257.556990 257.556990 6: seq: 17, get_clock
Sent 66 258.541362 258.541362 6: seq: 18, get_clock
Sent 67 259.525887 259.525887 6: seq: 19, get_clock
Sent 68 260.510839 260.510839 6: seq: 1a, get_clock
Sent 69 261.495238 261.495238 6: seq: 1b, get_clock
Sent 70 262.479574 262.479574 6: seq: 1c, get_clock
Sent 71 263.463874 263.463874 6: seq: 1d, get_clock
Sent 72 264.448008 264.448008 6: seq: 1e, get_clock
Sent 73 265.432439 265.432439 6: seq: 1f, get_clock
Sent 74 266.416988 266.416988 6: seq: 10, get_clock
Sent 75 267.401326 267.401326 6: seq: 11, get_clock
Sent 76 268.385685 268.385685 6: seq: 12, get_clock
Sent 77 269.369883 269.369883 6: seq: 13, get_clock
Sent 78 270.354237 270.354237 6: seq: 14, get_clock
Sent 79 271.338425 271.338425 6: seq: 15, get_clock
Sent 80 272.322749 272.322749 6: seq: 16, get_clock
Sent 81 273.309264 273.309264 58: seq: 17, set_next_step_dir oid=13 dir=0, set_next_step_dir oid=15 dir=1, set_next_step_dir oid=16 dir=1, set_next_step_dir oid=17 dir=0, queue_digital_out oid=25 clock=1787706665 on_ticks=0, queue_digital_out oid=26 clock=1787706665 on_ticks=0, queue_digital_out oid=27 clock=1787706665 on_ticks=0, queue_digital_out oid=28 clock=1787706665 on_ticks=0, queue_step oid=13 interval=1787889239 count=1 add=0
Sent 82 273.309264 273.309264 59: seq: 18, queue_step oid=13 interval=124260 count=3 add=-14428, queue_step oid=15 interval=1787889239 count=1 add=0, queue_step oid=15 interval=124260 count=3 add=-14428, queue_step oid=16 interval=1787889239 count=1 add=0, queue_step oid=16 interval=124260 count=3 add=-14428, queue_step oid=17 interval=1787889239 count=1 add=0
Sent 83 273.309264 273.309264 62: seq: 19, queue_step oid=17 interval=124260 count=3 add=-14428, queue_step oid=13 interval=100002 count=1914 add=0, queue_step oid=15 interval=100002 count=1914 add=0, queue_step oid=16 interval=100002 count=1914 add=0, queue_step oid=17 interval=100002 count=1914 add=0, queue_step oid=13 interval=100000 count=2000 add=0, queue_step oid=15 interval=100000 count=2000 add=0
Sent 84 273.309790 273.309790 62: seq: 1a, get_clock, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00', spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00', spi_send oid=4 data=b'\x8b\x00\x00\x00C', spi_transfer oid=4 data=b'\x00\x00\x00\x00\x00', spi_send oid=5 data=b'\x8b\x00\x00\x00C'
Sent 85 273.310144 273.310144 61: seq: 1b, spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00', queue_step oid=16 interval=100000 count=2000 add=0, queue_step oid=17 interval=100000 count=2000 add=0, queue_step oid=13 interval=100000 count=2000 add=0, queue_step oid=15 interval=100000 count=2000 add=0, queue_step oid=16 interval=100000 count=2000 add=0, queue_step oid=17 interval=100000 count=2000 add=0
Sent 86 273.310644 273.310644 58: seq: 1c, queue_step oid=13 interval=100000 count=2000 add=0, queue_step oid=15 interval=100000 count=2000 add=0, queue_step oid=16 interval=100000 count=2000 add=0, queue_step oid=17 interval=100000 count=2000 add=0, queue_step oid=13 interval=100009 count=81 add=0, queue_step oid=15 interval=100009 count=81 add=0, queue_step oid=16 interval=100009 count=81 add=0
Sent 87 273.311778 273.311778 58: seq: 1d, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00', spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00', queue_step oid=17 interval=100009 count=81 add=0, queue_step oid=13 interval=134132 count=1 add=0, queue_step oid=15 interval=134132 count=1 add=0
Sent 88 273.312178 273.312178 35: seq: 1e, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00', queue_step oid=16 interval=134132 count=1 add=0, queue_step oid=17 interval=134132 count=1 add=0
Sent 89 273.312769 273.312769 21: seq: 1f, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 90 273.312795 273.312795 21: seq: 10, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 91 273.312973 273.312973 13: seq: 11, spi_send oid=5 data=b'\x8b\x00\x00\x00C'
Sent 92 273.312992 273.312992 13: seq: 12, spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 93 273.313237 273.313237 21: seq: 13, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 94 273.313568 273.313568 21: seq: 14, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 95 273.313835 273.313835 21: seq: 15, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 96 273.314012 273.314012 21: seq: 16, spi_send oid=2 data=b'\x8b\x00\x00\x00C', spi_transfer oid=2 data=b'\x00\x00\x00\x00\x00'
Sent 97 273.314282 273.314282 21: seq: 17, spi_send oid=3 data=b'\x8b\x00\x00\x00C', spi_transfer oid=3 data=b'\x00\x00\x00\x00\x00'
Sent 98 273.314522 273.314522 21: seq: 18, spi_send oid=5 data=b'\x8b\x00\x00\x00C', spi_transfer oid=5 data=b'\x00\x00\x00\x00\x00'
Sent 99 273.315456 273.315456 6: seq: 19, emergency_stop
Dumping receive queue 100 messages
Receive: 0 262.653434 262.479574 15: seq: 1d, analog_in_state oid=22 next_clock=1838196224 value=31376
Receive: 1 262.913430 262.479574 15: seq: 1d, analog_in_state oid=18 next_clock=1942196224 value=31309
Receive: 2 262.953432 262.479574 15: seq: 1d, analog_in_state oid=22 next_clock=1958196224 value=31380
Receive: 3 263.213427 262.479574 15: seq: 1d, analog_in_state oid=18 next_clock=2062196224 value=31311
Receive: 4 263.253428 262.479574 15: seq: 1d, analog_in_state oid=22 next_clock=2078196224 value=31379
Receive: 5 263.464097 263.463874 11: seq: 1e, clock clock=2045322836
Receive: 6 263.513426 263.463874 15: seq: 1e, analog_in_state oid=18 next_clock=2182196224 value=31307
Receive: 7 263.553428 263.463874 15: seq: 1e, analog_in_state oid=22 next_clock=2198196224 value=31384
Receive: 8 263.813426 263.463874 15: seq: 1e, analog_in_state oid=18 next_clock=2302196224 value=31309
Receive: 9 263.853425 263.463874 15: seq: 1e, analog_in_state oid=22 next_clock=2318196224 value=31379
Receive: 10 264.113423 263.463874 15: seq: 1e, analog_in_state oid=18 next_clock=2422196224 value=31308
Receive: 11 264.153425 263.463874 15: seq: 1e, analog_in_state oid=22 next_clock=2438196224 value=31380
Receive: 12 264.285204 263.463874 14: seq: 1e, stats count=313 sum=145316 sumsq=379581
Receive: 13 264.413420 263.463874 15: seq: 1e, analog_in_state oid=18 next_clock=2542196224 value=31304
Receive: 14 264.448164 264.448008 11: seq: 1f, clock clock=2438950546
Receive: 15 264.453424 264.448008 15: seq: 1f, analog_in_state oid=22 next_clock=2558196224 value=31385
Receive: 16 264.713429 264.448008 15: seq: 1f, analog_in_state oid=18 next_clock=2662196224 value=31308
Receive: 17 264.753424 264.448008 15: seq: 1f, analog_in_state oid=22 next_clock=2678196224 value=31384
Receive: 18 265.013426 264.448008 15: seq: 1f, analog_in_state oid=18 next_clock=2782196224 value=31303
Receive: 19 265.053422 264.448008 15: seq: 1f, analog_in_state oid=22 next_clock=2798196224 value=31385
Receive: 20 265.313425 264.448008 15: seq: 1f, analog_in_state oid=18 next_clock=2902196224 value=31307
Receive: 21 265.353426 264.448008 15: seq: 1f, analog_in_state oid=22 next_clock=2918196224 value=31378
Receive: 22 265.432599 265.432439 11: seq: 10, clock clock=2832725228
Receive: 23 265.613423 265.432439 15: seq: 10, analog_in_state oid=18 next_clock=3022196224 value=31310
Receive: 24 265.653426 265.432439 15: seq: 10, analog_in_state oid=22 next_clock=3038196224 value=31381
Receive: 25 265.913426 265.432439 15: seq: 10, analog_in_state oid=18 next_clock=3142196224 value=31308
Receive: 26 265.953428 265.432439 15: seq: 10, analog_in_state oid=22 next_clock=3158196224 value=31377
Receive: 27 266.213422 265.432439 15: seq: 10, analog_in_state oid=18 next_clock=3262196224 value=31305
Receive: 28 266.253423 265.432439 15: seq: 10, analog_in_state oid=22 next_clock=3278196224 value=31380
Receive: 29 266.417212 266.416988 11: seq: 11, clock clock=3226571478
Receive: 30 266.513419 266.416988 15: seq: 11, analog_in_state oid=18 next_clock=3382196224 value=31307
Receive: 31 266.553422 266.416988 15: seq: 11, analog_in_state oid=22 next_clock=3398196224 value=31382
Receive: 32 266.813420 266.416988 15: seq: 11, analog_in_state oid=18 next_clock=3502196224 value=31304
Receive: 33 266.853420 266.416988 15: seq: 11, analog_in_state oid=22 next_clock=3518196224 value=31379
Receive: 34 267.113418 266.416988 15: seq: 11, analog_in_state oid=18 next_clock=3622196224 value=31307
Receive: 35 267.153420 266.416988 15: seq: 11, analog_in_state oid=22 next_clock=3638196224 value=31382
Receive: 36 267.401487 267.401326 11: seq: 12, clock clock=3620282302
Receive: 37 267.413422 267.401326 15: seq: 12, analog_in_state oid=18 next_clock=3742196224 value=31306
Receive: 38 267.453417 267.401326 15: seq: 12, analog_in_state oid=22 next_clock=3758196224 value=31384
Receive: 39 267.713422 267.401326 15: seq: 12, analog_in_state oid=18 next_clock=3862196224 value=31304
Receive: 40 267.753415 267.401326 15: seq: 12, analog_in_state oid=22 next_clock=3878196224 value=31380
Receive: 41 268.013416 267.401326 15: seq: 12, analog_in_state oid=18 next_clock=3982196224 value=31309
Receive: 42 268.053415 267.401326 15: seq: 12, analog_in_state oid=22 next_clock=3998196224 value=31380
Receive: 43 268.313421 267.401326 15: seq: 12, analog_in_state oid=18 next_clock=4102196224 value=31308
Receive: 44 268.353419 267.401326 15: seq: 12, analog_in_state oid=22 next_clock=4118196224 value=31376
Receive: 45 268.385840 268.385685 11: seq: 13, clock clock=4014024762
Receive: 46 268.613418 268.385685 15: seq: 13, analog_in_state oid=18 next_clock=4222196224 value=31309
Receive: 47 268.653419 268.385685 14: seq: 13, analog_in_state oid=22 next_clock=4238196224 value=31376
Receive: 48 268.913416 268.385685 14: seq: 13, analog_in_state oid=18 next_clock=47228928 value=31308
Receive: 49 268.953419 268.385685 14: seq: 13, analog_in_state oid=22 next_clock=63228928 value=31381
Receive: 50 269.213415 268.385685 14: seq: 13, analog_in_state oid=18 next_clock=167228928 value=31306
Receive: 51 269.253416 268.385685 14: seq: 13, analog_in_state oid=22 next_clock=183228928 value=31382
Receive: 52 269.326272 268.385685 14: seq: 13, stats count=316 sum=146138 sumsq=379329
Receive: 53 269.370042 269.369883 10: seq: 14, clock clock=112738882
Receive: 54 269.513412 269.369883 15: seq: 14, analog_in_state oid=18 next_clock=287228928 value=31310
Receive: 55 269.553416 269.369883 15: seq: 14, analog_in_state oid=22 next_clock=303228928 value=31378
Receive: 56 269.813412 269.369883 15: seq: 14, analog_in_state oid=18 next_clock=407228928 value=31307
Receive: 57 269.853414 269.369883 15: seq: 14, analog_in_state oid=22 next_clock=423228928 value=31380
Receive: 58 270.113412 269.369883 15: seq: 14, analog_in_state oid=18 next_clock=527228928 value=31308
Receive: 59 270.153412 269.369883 15: seq: 14, analog_in_state oid=22 next_clock=543228928 value=31382
Receive: 60 270.354395 270.354237 11: seq: 15, clock clock=506480476
Receive: 61 270.413406 270.354237 15: seq: 15, analog_in_state oid=18 next_clock=647228928 value=31305
Receive: 62 270.453410 270.354237 15: seq: 15, analog_in_state oid=22 next_clock=663228928 value=31382
Receive: 63 270.713415 270.354237 15: seq: 15, analog_in_state oid=18 next_clock=767228928 value=31305
Receive: 64 270.753409 270.354237 15: seq: 15, analog_in_state oid=22 next_clock=783228928 value=31377
Receive: 65 271.013417 270.354237 15: seq: 15, analog_in_state oid=18 next_clock=887228928 value=31305
Receive: 66 271.053408 270.354237 15: seq: 15, analog_in_state oid=22 next_clock=903228928 value=31383
Receive: 67 271.313413 270.354237 15: seq: 15, analog_in_state oid=18 next_clock=1007228928 value=31308
Receive: 68 271.338581 271.338425 11: seq: 16, clock clock=900156250
Receive: 69 271.353412 271.338425 15: seq: 16, analog_in_state oid=22 next_clock=1023228928 value=31380
Receive: 70 271.613412 271.338425 15: seq: 16, analog_in_state oid=18 next_clock=1127228928 value=31310
Receive: 71 271.653407 271.338425 15: seq: 16, analog_in_state oid=22 next_clock=1143228928 value=31377
Receive: 72 271.913410 271.338425 15: seq: 16, analog_in_state oid=18 next_clock=1247228928 value=31311
Receive: 73 271.953411 271.338425 15: seq: 16, analog_in_state oid=22 next_clock=1263228928 value=31381
Receive: 74 272.213413 271.338425 15: seq: 16, analog_in_state oid=18 next_clock=1367228928 value=31310
Receive: 75 272.253409 271.338425 15: seq: 16, analog_in_state oid=22 next_clock=1383228928 value=31380
Receive: 76 272.322911 272.322749 11: seq: 17, clock clock=1293889150
Receive: 77 272.513406 272.322749 15: seq: 17, analog_in_state oid=18 next_clock=1487228928 value=31307
Receive: 78 272.553408 272.322749 15: seq: 17, analog_in_state oid=22 next_clock=1503228928 value=31382
Receive: 79 272.813407 272.322749 15: seq: 17, analog_in_state oid=18 next_clock=1607228928 value=31307
Receive: 80 272.853407 272.322749 15: seq: 17, analog_in_state oid=22 next_clock=1623228928 value=31378
Receive: 81 273.113417 272.322749 15: seq: 17, analog_in_state oid=18 next_clock=1727228928 value=31308
Receive: 82 273.153419 272.322749 15: seq: 17, analog_in_state oid=22 next_clock=1743228928 value=31384
Receive: 83 273.311098 273.309790 11: seq: 1b, clock clock=1689135385
Receive: 84 273.311143 273.309790 13: seq: 1b, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 85 273.311275 273.309790 13: seq: 1b, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 86 273.311779 273.310144 13: seq: 1c, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 87 273.312648 273.311778 13: seq: 1e, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 88 273.312692 273.311778 13: seq: 1e, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 89 273.312870 273.312178 13: seq: 1f, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 90 273.313136 273.312769 13: seq: 10, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 91 273.313468 273.312795 13: seq: 11, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 92 273.313735 273.312992 13: seq: 13, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 93 273.313917 273.313237 13: seq: 14, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 94 273.314182 273.313568 13: seq: 15, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 95 273.314424 273.313835 13: seq: 16, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 96 273.314646 273.314012 13: seq: 17, spi_transfer_response oid=2 response=b'\x00\x00\x00\x00\x00'
Receive: 97 273.314908 273.314282 13: seq: 18, spi_transfer_response oid=3 response=b'\x00\x00\x00\x00\x00'
Receive: 98 273.315022 273.314522 13: seq: 19, spi_transfer_response oid=5 response=b'\x00\x00\x00\x00\x00'
Receive: 99 273.315614 273.315456 12: seq: 1a, shutdown clock=1690970826 static_string_id=Command request
MCU 'ebb' shutdown: Command request
clocksync state: mcu_freq=12000000 last_clock=949447721 clock_est=(250.632 683035508 12000474.345) min_half_rtt=0.000081 min_rtt_time=229.264 time_avg=250.632(242.323) clock_avg=683035508.288(2907987481.564) pred_variance=23943544.032 clock_adj=(-0.212 12000470.250)
Dumping serial stats: bytes_write=1624 bytes_read=10119 bytes_retransmit=0 bytes_invalid=0 send_seq=188 receive_seq=188 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0
Dumping send queue 100 messages
Sent 0 229.101538 229.101538 9: seq: 18, identify offset=2880 count=40
Sent 1 229.102755 229.102755 9: seq: 19, identify offset=2920 count=40
Sent 2 229.103877 229.103877 9: seq: 1a, identify offset=2960 count=40
Sent 3 229.105012 229.105012 9: seq: 1b, identify offset=3000 count=40
Sent 4 229.106143 229.106143 9: seq: 1c, identify offset=3040 count=40
Sent 5 229.107268 229.107268 9: seq: 1d, identify offset=3080 count=40
Sent 6 229.108402 229.108402 9: seq: 1e, identify offset=3120 count=40
Sent 7 229.109042 229.109042 9: seq: 1f, identify offset=3125 count=40
Sent 8 229.111210 229.111119 6: seq: 10, get_canbus_id
Sent 9 229.111809 229.111718 6: seq: 11, get_uptime
Sent 10 229.162444 229.162353 6: seq: 12, get_clock
Sent 11 229.213761 229.213670 6: seq: 13, get_clock
Sent 12 229.264329 229.264238 6: seq: 14, get_clock
Sent 13 229.314887 229.314796 6: seq: 15, get_clock
Sent 14 229.365444 229.365353 6: seq: 16, get_clock
Sent 15 229.416007 229.415916 6: seq: 17, get_clock
Sent 16 229.467310 229.467219 6: seq: 18, get_clock
Sent 17 229.517901 229.517810 6: seq: 19, get_clock
Sent 18 229.518713 229.518622 6: seq: 1a, get_clock
Sent 19 229.529096 229.529005 6: seq: 1b, get_config
Sent 20 229.529884 229.529785 7: seq: 1c, allocate_oids count=13
Sent 21 229.530046 229.529813 9: seq: 1d, config_spi oid=0 pin=gpio1 cs_active_high=0
Sent 22 229.530153 229.529827 8: seq: 1e, config_adxl345 oid=1 spi_oid=0
Sent 23 229.530315 229.529846 9: seq: 1f, config_spi oid=5 pin=gpio9 cs_active_high=0
Sent 24 229.530525 229.529863 15: seq: 10, spi_set_software_bus oid=0 miso_pin=gpio3 mosi_pin=gpio0 sclk_pin=gpio2 mode=3 rate=5000000
Sent 25 229.530703 229.529888 11: seq: 11, config_endstop oid=2 pin=gpio24 pull_up=0, config_trsync oid=3
Sent 26 229.530889 229.529903 12: seq: 12, config_tmcuart oid=4 rx_pin=gpio20 pull_up=0 tx_pin=gpio20 bit_time=300
Sent 27 229.531067 229.529914 11: seq: 13, config_digital_out oid=8 pin=gpio13 value=0 default_value=0 max_duration=0
Sent 28 229.531372 229.529937 21: seq: 14, set_digital_out_pwm_cycle oid=8 cycle_ticks=120000, config_digital_out oid=9 pin=gpio14 value=0 default_value=0 max_duration=0, set_digital_out_pwm_cycle oid=9 cycle_ticks=120000
Sent 29 229.531479 229.529943 8: seq: 15, config_analog_in oid=10 pin=gpio28
Sent 30 229.531689 229.529955 15: seq: 16, spi_set_software_bus oid=5 miso_pin=gpio11 mosi_pin=gpio8 sclk_pin=gpio10 mode=1 rate=4000000
Sent 31 229.532010 229.529977 23: seq: 17, config_thermocouple oid=6 spi_oid=5 thermocouple_type=MAX31865, config_digital_out oid=11 pin=gpio7 value=0 default_value=0 max_duration=60000000, set_digital_out_pwm_cycle oid=11 cycle_ticks=1200000
Sent 32 229.532886 229.531759 63: seq: 18, config_stepper oid=7 step_pin=gpio18 dir_pin=gpio19 invert_step=4294967295 step_pulse_ticks=0, config_digital_out oid=12 pin=gpio17 value=1 default_value=1 max_duration=0, finalize_config crc=3237245062, spi_send oid=5 data=b'\x80\xc3', queue_digital_out oid=8 clock=432200103 on_ticks=0, queue_digital_out oid=9 clock=432200296 on_ticks=0, query_analog_in oid=10 clock=447760843 sample_ticks=12000 sample_count=8 rest_ticks=3600000 min_value=0 max_value=32760 range_check_count=4
Sent 33 229.534418 229.533978 32: seq: 19, query_thermocouple oid=6 clock=447280843 rest_ticks=3600000 min_value=15240 max_value=32318 max_invalid_count=3, queue_digital_out oid=11 clock=432200786 on_ticks=0, get_config
Sent 34 229.547122 229.546920 14: seq: 1a, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 35 229.551717 229.551428 19: seq: 1b, tmcuart_send oid=4 write=b'\xea\x03\x080\x80\x00\n\x08\xb8\x87' read=0
Sent 36 229.554436 229.554234 14: seq: 1c, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 37 229.559050 229.558761 19: seq: 1d, tmcuart_send oid=4 write=b'\xea\x03h0\x80\x00\x12\x08 \xda' read=0
Sent 38 229.561768 229.561566 14: seq: 1e, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 39 229.566421 229.566132 19: seq: 1f, tmcuart_send oid=4 write=b'\xea\x03\x88=\x9a\x06\x02h*\xbf' read=0
Sent 40 229.569133 229.568931 14: seq: 10, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 41 229.573716 229.573427 19: seq: 11, tmcuart_send oid=4 write=b'\xea\x03\x082\x80\x10\x9ah"\x9c' read=0
Sent 42 229.576424 229.576222 14: seq: 12, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 43 229.581048 229.580759 19: seq: 13, tmcuart_send oid=4 write=b'\xea\x03h2\x80\x1e\xfa\xef?\xdf' read=0
Sent 44 229.583764 229.583562 14: seq: 14, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 45 229.588413 229.588124 19: seq: 15, tmcuart_send oid=4 write=b'\xea\x03\x08>\xe4\x1ar\x88\xa4\x85' read=0
Sent 46 229.591122 229.590920 14: seq: 16, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 47 229.595694 229.595405 19: seq: 17, tmcuart_send oid=4 write=b'\xea\x03(2\x80\x00\x02\x88"\xf3' read=0
Sent 48 229.598407 229.598205 14: seq: 18, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 49 229.603043 229.602754 19: seq: 19, tmcuart_send oid=4 write=b'\xea\x03\x088\x80\x00\x02\x08 \xba' read=0
Sent 50 229.605759 229.605557 14: seq: 1a, tmcuart_send oid=4 write=b'\xea\x03H \xe4' read=10
Sent 51 229.622673 229.622574 7: seq: 1b, stepper_get_position oid=7
Sent 52 229.623333 229.623131 14: seq: 1c, tmcuart_send oid=4 write=b'\xea\x03H-\xd5' read=10
Sent 53 230.503553 230.503462 6: seq: 1d, get_clock
Sent 54 231.487504 231.487413 6: seq: 1e, get_clock
Sent 55 232.472277 232.472186 6: seq: 1f, get_clock
Sent 56 233.456247 233.456156 6: seq: 10, get_clock
Sent 57 233.600202 233.600103 7: seq: 11, endstop_query_state oid=2
Sent 58 233.854695 233.854596 7: seq: 12, endstop_query_state oid=2
Sent 59 234.441202 234.441111 6: seq: 13, get_clock
Sent 60 235.425645 235.425554 6: seq: 14, get_clock
Sent 61 236.409898 236.409807 6: seq: 15, get_clock
Sent 62 237.394315 237.394224 6: seq: 16, get_clock
Sent 63 238.378738 238.378647 6: seq: 17, get_clock
Sent 64 239.362991 239.362900 6: seq: 18, get_clock
Sent 65 240.347278 240.347187 6: seq: 19, get_clock
Sent 66 241.331607 241.331516 6: seq: 1a, get_clock
Sent 67 242.315899 242.315808 6: seq: 1b, get_clock
Sent 68 243.300115 243.300024 6: seq: 1c, get_clock
Sent 69 244.284454 244.284363 6: seq: 1d, get_clock
Sent 70 245.269041 245.268950 6: seq: 1e, get_clock
Sent 71 246.253695 246.253604 6: seq: 1f, get_clock
Sent 72 247.238055 247.237964 6: seq: 10, get_clock
Sent 73 248.222994 248.222903 6: seq: 11, get_clock
Sent 74 249.207176 249.207085 6: seq: 12, get_clock
Sent 75 250.191387 250.191296 6: seq: 13, get_clock
Sent 76 251.175668 251.175577 6: seq: 14, get_clock
Sent 77 252.160114 252.160023 6: seq: 15, get_clock
Sent 78 253.144591 253.144500 6: seq: 16, get_clock
Sent 79 254.128917 254.128826 6: seq: 17, get_clock
Sent 80 255.113307 255.113216 6: seq: 18, get_clock
Sent 81 256.097630 256.097539 6: seq: 19, get_clock
Sent 82 257.081863 257.081772 6: seq: 1a, get_clock
Sent 83 258.066027 258.065936 6: seq: 1b, get_clock
Sent 84 259.050607 259.050516 6: seq: 1c, get_clock
Sent 85 260.035036 260.034945 6: seq: 1d, get_clock
Sent 86 261.019425 261.019334 6: seq: 1e, get_clock
Sent 87 262.004344 262.004253 6: seq: 1f, get_clock
Sent 88 262.988559 262.988468 6: seq: 10, get_clock
Sent 89 263.972797 263.972706 6: seq: 11, get_clock
Sent 90 264.956959 264.956868 6: seq: 12, get_clock
Sent 91 265.941560 265.941469 6: seq: 13, get_clock
Sent 92 266.926085 266.925994 6: seq: 14, get_clock
Sent 93 267.910387 267.910296 6: seq: 15, get_clock
Sent 94 268.894669 268.894578 6: seq: 16, get_clock
Sent 95 269.878898 269.878807 6: seq: 17, get_clock
Sent 96 270.863233 270.863142 6: seq: 18, get_clock
Sent 97 271.847328 271.847237 6: seq: 19, get_clock
Sent 98 272.831792 272.831701 6: seq: 1a, get_clock
Sent 99 273.315287 273.315196 6: seq: 1b, emergency_stop
Dumping receive queue 100 messages
Receive: 0 260.732209 260.035036 15: seq: 1e, analog_in_state oid=10 next_clock=807760843 value=30697
Receive: 1 260.985182 260.035036 16: seq: 1e, thermocouple_result oid=6 next_clock=810880843 value=16706 fault=0
Receive: 2 261.019612 261.019425 11: seq: 1f, clock clock=807693781
Receive: 3 261.032203 261.019425 15: seq: 1f, analog_in_state oid=10 next_clock=811360843 value=30700
Receive: 4 261.285165 261.019425 16: seq: 1f, thermocouple_result oid=6 next_clock=814480843 value=16706 fault=0
Receive: 5 261.332182 261.019425 15: seq: 1f, analog_in_state oid=10 next_clock=814960843 value=30698
Receive: 6 261.585159 261.019425 16: seq: 1f, thermocouple_result oid=6 next_clock=818080843 value=16706 fault=0
Receive: 7 261.632182 261.019425 15: seq: 1f, analog_in_state oid=10 next_clock=818560843 value=30700
Receive: 8 261.885151 261.019425 16: seq: 1f, thermocouple_result oid=6 next_clock=821680843 value=16706 fault=0
Receive: 9 261.932166 261.019425 15: seq: 1f, analog_in_state oid=10 next_clock=822160843 value=30693
Receive: 10 262.004528 262.004344 11: seq: 10, clock clock=819513261
Receive: 11 262.185135 262.004344 16: seq: 10, thermocouple_result oid=6 next_clock=825280843 value=16706 fault=0
Receive: 12 262.232152 262.004344 15: seq: 10, analog_in_state oid=10 next_clock=825760843 value=30694
Receive: 13 262.485121 262.004344 16: seq: 10, thermocouple_result oid=6 next_clock=828880843 value=16706 fault=0
Receive: 14 262.532145 262.004344 15: seq: 10, analog_in_state oid=10 next_clock=829360843 value=30695
Receive: 15 262.785110 262.004344 16: seq: 10, thermocouple_result oid=6 next_clock=832480843 value=16706 fault=0
Receive: 16 262.832131 262.004344 15: seq: 10, analog_in_state oid=10 next_clock=832960843 value=30699
Receive: 17 262.988800 262.988559 11: seq: 11, clock clock=831324328
Receive: 18 263.085093 262.988559 16: seq: 11, thermocouple_result oid=6 next_clock=836080843 value=16706 fault=0
Receive: 19 263.132117 262.988559 15: seq: 11, analog_in_state oid=10 next_clock=836560843 value=30695
Receive: 20 263.385092 262.988559 16: seq: 11, thermocouple_result oid=6 next_clock=839680843 value=16704 fault=0
Receive: 21 263.432108 262.988559 15: seq: 11, analog_in_state oid=10 next_clock=840160843 value=30697
Receive: 22 263.685071 262.988559 16: seq: 11, thermocouple_result oid=6 next_clock=843280843 value=16706 fault=0
Receive: 23 263.732088 262.988559 15: seq: 11, analog_in_state oid=10 next_clock=843760843 value=30697
Receive: 24 263.972992 263.972797 11: seq: 12, clock clock=843135752
Receive: 25 263.985063 263.972797 16: seq: 12, thermocouple_result oid=6 next_clock=846880843 value=16706 fault=0
Receive: 26 264.032080 263.972797 15: seq: 12, analog_in_state oid=10 next_clock=847360843 value=30695
Receive: 27 264.111640 263.972797 14: seq: 12, stats count=212 sum=31563 sumsq=74054
Receive: 28 264.285052 263.972797 16: seq: 12, thermocouple_result oid=6 next_clock=850480843 value=16706 fault=0
Receive: 29 264.332071 263.972797 15: seq: 12, analog_in_state oid=10 next_clock=850960843 value=30700
Receive: 30 264.585041 263.972797 16: seq: 12, thermocouple_result oid=6 next_clock=854080843 value=16706 fault=0
Receive: 31 264.632064 263.972797 15: seq: 12, analog_in_state oid=10 next_clock=854560843 value=30694
Receive: 32 264.885030 263.972797 16: seq: 12, thermocouple_result oid=6 next_clock=857680843 value=16704 fault=0
Receive: 33 264.932047 263.972797 15: seq: 12, analog_in_state oid=10 next_clock=858160843 value=30699
Receive: 34 264.957145 264.956959 11: seq: 13, clock clock=854946045
Receive: 35 265.185015 264.956959 16: seq: 13, thermocouple_result oid=6 next_clock=861280843 value=16706 fault=0
Receive: 36 265.232038 264.956959 15: seq: 13, analog_in_state oid=10 next_clock=861760843 value=30698
Receive: 37 265.485004 264.956959 16: seq: 13, thermocouple_result oid=6 next_clock=864880843 value=16704 fault=0
Receive: 38 265.532021 264.956959 15: seq: 13, analog_in_state oid=10 next_clock=865360843 value=30692
Receive: 39 265.784991 264.956959 16: seq: 13, thermocouple_result oid=6 next_clock=868480843 value=16704 fault=0
Receive: 40 265.832007 264.956959 15: seq: 13, analog_in_state oid=10 next_clock=868960843 value=30694
Receive: 41 265.941754 265.941560 11: seq: 14, clock clock=866761799
Receive: 42 266.084984 265.941560 16: seq: 14, thermocouple_result oid=6 next_clock=872080843 value=16704 fault=0
Receive: 43 266.131999 265.941560 15: seq: 14, analog_in_state oid=10 next_clock=872560843 value=30694
Receive: 44 266.384968 265.941560 16: seq: 14, thermocouple_result oid=6 next_clock=875680843 value=16706 fault=0
Receive: 45 266.431991 265.941560 15: seq: 14, analog_in_state oid=10 next_clock=876160843 value=30697
Receive: 46 266.684952 265.941560 16: seq: 14, thermocouple_result oid=6 next_clock=879280843 value=16706 fault=0
Receive: 47 266.731976 265.941560 15: seq: 14, analog_in_state oid=10 next_clock=879760843 value=30697
Receive: 48 266.926351 266.926085 11: seq: 15, clock clock=878577439
Receive: 49 266.984951 266.926085 16: seq: 15, thermocouple_result oid=6 next_clock=882880843 value=16704 fault=0
Receive: 50 267.031972 266.926085 15: seq: 15, analog_in_state oid=10 next_clock=883360843 value=30700
Receive: 51 267.284934 266.926085 16: seq: 15, thermocouple_result oid=6 next_clock=886480843 value=16704 fault=0
Receive: 52 267.331949 266.926085 15: seq: 15, analog_in_state oid=10 next_clock=886960843 value=30696
Receive: 53 267.584939 266.926085 16: seq: 15, thermocouple_result oid=6 next_clock=890080843 value=16706 fault=0
Receive: 54 267.631948 266.926085 15: seq: 15, analog_in_state oid=10 next_clock=890560843 value=30698
Receive: 55 267.884951 266.926085 16: seq: 15, thermocouple_result oid=6 next_clock=893680843 value=16706 fault=0
Receive: 56 267.910569 267.910387 11: seq: 16, clock clock=890388536
Receive: 57 267.931960 267.910387 15: seq: 16, analog_in_state oid=10 next_clock=894160843 value=30693
Receive: 58 268.184964 267.910387 16: seq: 16, thermocouple_result oid=6 next_clock=897280843 value=16706 fault=0
Receive: 59 268.231972 267.910387 15: seq: 16, analog_in_state oid=10 next_clock=897760843 value=30700
Receive: 60 268.484882 267.910387 16: seq: 16, thermocouple_result oid=6 next_clock=900880843 value=16706 fault=0
Receive: 61 268.531902 267.910387 15: seq: 16, analog_in_state oid=10 next_clock=901360843 value=30700
Receive: 62 268.784875 267.910387 16: seq: 16, thermocouple_result oid=6 next_clock=904480843 value=16704 fault=0
Receive: 63 268.831894 267.910387 15: seq: 16, analog_in_state oid=10 next_clock=904960843 value=30696
Receive: 64 268.894861 268.894669 11: seq: 17, clock clock=902200462
Receive: 65 269.084864 268.894669 16: seq: 17, thermocouple_result oid=6 next_clock=908080843 value=16706 fault=0
Receive: 66 269.111441 268.894669 14: seq: 17, stats count=205 sum=30740 sumsq=71357
Receive: 67 269.131883 268.894669 15: seq: 17, analog_in_state oid=10 next_clock=908560843 value=30696
Receive: 68 269.384849 268.894669 16: seq: 17, thermocouple_result oid=6 next_clock=911680843 value=16706 fault=0
Receive: 69 269.431873 268.894669 15: seq: 17, analog_in_state oid=10 next_clock=912160843 value=30693
Receive: 70 269.684843 268.894669 16: seq: 17, thermocouple_result oid=6 next_clock=915280843 value=16706 fault=0
Receive: 71 269.731860 268.894669 15: seq: 17, analog_in_state oid=10 next_clock=915760843 value=30700
Receive: 72 269.879088 269.878898 11: seq: 18, clock clock=914011656
Receive: 73 269.984831 269.878898 16: seq: 18, thermocouple_result oid=6 next_clock=918880843 value=16706 fault=0
Receive: 74 270.031846 269.878898 15: seq: 18, analog_in_state oid=10 next_clock=919360843 value=30695
Receive: 75 270.284822 269.878898 16: seq: 18, thermocouple_result oid=6 next_clock=922480843 value=16706 fault=0
Receive: 76 270.331838 269.878898 15: seq: 18, analog_in_state oid=10 next_clock=922960843 value=30697
Receive: 77 270.584807 269.878898 16: seq: 18, thermocouple_result oid=6 next_clock=926080843 value=16706 fault=0
Receive: 78 270.631824 269.878898 15: seq: 18, analog_in_state oid=10 next_clock=926560843 value=30696
Receive: 79 270.863496 270.863233 11: seq: 19, clock clock=925824961
Receive: 80 270.884787 270.863233 16: seq: 19, thermocouple_result oid=6 next_clock=929680843 value=16704 fault=0
Receive: 81 270.931814 270.863233 15: seq: 19, analog_in_state oid=10 next_clock=930160843 value=30697
Receive: 82 271.184776 270.863233 16: seq: 19, thermocouple_result oid=6 next_clock=933280843 value=16704 fault=0
Receive: 83 271.231799 270.863233 15: seq: 19, analog_in_state oid=10 next_clock=933760843 value=30698
Receive: 84 271.484769 270.863233 16: seq: 19, thermocouple_result oid=6 next_clock=936880843 value=16704 fault=0
Receive: 85 271.531790 270.863233 15: seq: 19, analog_in_state oid=10 next_clock=937360843 value=30698
Receive: 86 271.784755 270.863233 16: seq: 19, thermocouple_result oid=6 next_clock=940480843 value=16706 fault=0
Receive: 87 271.831778 270.863233 15: seq: 19, analog_in_state oid=10 next_clock=940960843 value=30699
Receive: 88 271.847534 271.847328 11: seq: 1a, clock clock=937633998
Receive: 89 272.084748 271.847328 16: seq: 1a, thermocouple_result oid=6 next_clock=944080843 value=16706 fault=0
Receive: 90 272.131762 271.847328 15: seq: 1a, analog_in_state oid=10 next_clock=944560843 value=30696
Receive: 91 272.384738 271.847328 16: seq: 1a, thermocouple_result oid=6 next_clock=947680843 value=16706 fault=0
Receive: 92 272.431763 271.847328 15: seq: 1a, analog_in_state oid=10 next_clock=948160843 value=30700
Receive: 93 272.684723 271.847328 16: seq: 1a, thermocouple_result oid=6 next_clock=951280843 value=16704 fault=0
Receive: 94 272.731749 271.847328 15: seq: 1a, analog_in_state oid=10 next_clock=951760843 value=30695
Receive: 95 272.831980 272.831792 11: seq: 1b, clock clock=949447721
Receive: 96 272.984715 272.831792 16: seq: 1b, thermocouple_result oid=6 next_clock=954880843 value=16706 fault=0
Receive: 97 273.031739 272.831792 15: seq: 1b, analog_in_state oid=10 next_clock=955360843 value=30697
Receive: 98 273.284703 272.831792 16: seq: 1b, thermocouple_result oid=6 next_clock=958480843 value=16704 fault=0
Receive: 99 273.315571 273.315287 12: seq: 1c, shutdown clock=955249886 static_string_id=Command request
Stats 273.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=3230 bytes_read=10754 bytes_retransmit=0 bytes_invalid=0 send_seq=240 receive_seq=240 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=400002295 ebb: mcu_awake=0.003 mcu_task_avg=0.000012 mcu_task_stddev=0.000022 bytes_write=1624 bytes_read=10139 bytes_retransmit=0 bytes_invalid=0 send_seq=188 receive_seq=188 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000474 adj=12000470  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.4 sysload=0.15 cputime=2.177 memavail=3848000 print_time=81.672 buffer_time=1.952 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 274.6: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000002 mcu_task_stddev=0.000004 bytes_write=3236 bytes_read=10890 bytes_retransmit=0 bytes_invalid=0 send_seq=241 receive_seq=241 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=400002161 ebb: mcu_awake=0.002 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1630 bytes_read=10214 bytes_retransmit=0 bytes_invalid=0 send_seq=189 receive_seq=189 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000473 adj=12000126  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.4 sysload=0.15 cputime=2.181 memavail=3848000 print_time=81.672 buffer_time=0.951 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 275.6: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000002 mcu_task_stddev=0.000004 bytes_write=3263 bytes_read=11047 bytes_retransmit=0 bytes_invalid=0 send_seq=245 receive_seq=245 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400002033 ebb: mcu_awake=0.002 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1636 bytes_read=10275 bytes_retransmit=0 bytes_invalid=0 send_seq=190 receive_seq=190 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000473 adj=12000154  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=47.4 EBB: temp=33.6 chamber: temp=23.4 sysload=0.13 cputime=2.185 memavail=3848000 print_time=81.672 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Homing failed due to printer shutdown
Stats 276.6: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000002 mcu_task_stddev=0.000004 bytes_write=3290 bytes_read=11189 bytes_retransmit=0 bytes_invalid=0 send_seq=249 receive_seq=249 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001921 ebb: mcu_awake=0.002 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1642 bytes_read=10351 bytes_retransmit=0 bytes_invalid=0 send_seq=191 receive_seq=191 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000472 adj=12000181  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=49.0 EBB: temp=33.6 chamber: temp=23.4 sysload=0.13 cputime=2.189 memavail=3847760 print_time=81.672 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 277.6: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000002 mcu_task_stddev=0.000004 bytes_write=3296 bytes_read=11310 bytes_retransmit=0 bytes_invalid=0 send_seq=250 receive_seq=250 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001821 ebb: mcu_awake=0.002 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1648 bytes_read=10412 bytes_retransmit=0 bytes_invalid=0 send_seq=192 receive_seq=192 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000472 adj=12000219  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.5 sysload=0.13 cputime=2.192 memavail=3847760 print_time=81.672 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 278.6: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000002 mcu_task_stddev=0.000004 bytes_write=3302 bytes_read=11431 bytes_retransmit=0 bytes_invalid=0 send_seq=251 receive_seq=251 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001731 ebb: mcu_awake=0.002 mcu_task_avg=0.000012 mcu_task_stddev=0.000021 bytes_write=1654 bytes_read=10473 bytes_retransmit=0 bytes_invalid=0 send_seq=193 receive_seq=193 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000471 adj=12000294  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=47.4 EBB: temp=33.6 chamber: temp=23.4 sysload=0.13 cputime=2.196 memavail=3847760 print_time=81.672 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 279.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=3308 bytes_read=11549 bytes_retransmit=0 bytes_invalid=0 send_seq=252 receive_seq=252 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001647 ebb: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000017 bytes_write=1660 bytes_read=10563 bytes_retransmit=0 bytes_invalid=0 send_seq=194 receive_seq=194 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000471 adj=12000349  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.4 sysload=0.13 cputime=2.199 memavail=3847760 print_time=81.672 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 280.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=3314 bytes_read=11666 bytes_retransmit=0 bytes_invalid=0 send_seq=253 receive_seq=253 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001570 ebb: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000017 bytes_write=1666 bytes_read=10624 bytes_retransmit=0 bytes_invalid=0 send_seq=195 receive_seq=195 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000470 adj=12000388  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.0 EBB: temp=33.6 chamber: temp=23.5 sysload=0.12 cputime=2.202 memavail=3847760 print_time=81.672 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
Stats 281.7: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000001 mcu_task_stddev=0.000001 bytes_write=3320 bytes_read=11787 bytes_retransmit=0 bytes_invalid=0 send_seq=254 receive_seq=254 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=400001501 ebb: mcu_awake=0.001 mcu_task_avg=0.000010 mcu_task_stddev=0.000017 bytes_write=1672 bytes_read=10685 bytes_retransmit=0 bytes_invalid=0 send_seq=196 receive_seq=196 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=12000470 adj=12000416  heater_bed: target=0 temp=24.7 pwm=0.000 RPi: temp=48.5 EBB: temp=33.6 chamber: temp=23.4 sysload=0.12 cputime=2.206 memavail=3847760 print_time=81.672 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.7 pwm=0.000
